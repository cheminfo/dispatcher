define(["modules/default/defaultview","components/jsNMR/src/nmr","components/jcampconverter/build/jcampconverter","src/util/util"],function(a,b,c,d){function e(){}return e.prototype=$.extend(!0,{},a,{init:function(){this.dom=$("<div />"),this.module.getDomContent().html(this.dom),this.resolveReady()},inDom:function(){var a=new b({dom:this.dom,mode:"1d",symmetric:!1});this.series={},this.nmr=a},onResize:function(){this.nmr.resize1DTo(this.width,this.height)},blank:{jcamp:function(a){this.nmr.removeSerieX(a)}},update:{jcamp:function(a,b){var d=this;c.convert(String(a.get()),!0).then(function(a){d.nmr.setSerieX(b,a.spectra[0].data[0],d.getOptions(b))})}},getOptions:function(a){var b={label:a},c=this.module.getConfiguration("lines");if(c)for(var e=0;e<c.length;e++)c[e].varname===a&&(b.lineColor=d.getColor(c[e].color),b.lineWidth=c[e].width);return b}}),e});