define(["require","modules/default/defaultview","lib/plot/plot","src/util/jcampconverter","src/util/datatraversing","src/util/api","src/util/util"],function(a,b,c,d,e,f){function g(){}return g.prototype=$.extend(!0,{},b,{init:function(){var b=this;this.highlightedAtom,this.dom=$("<iframe />").attr("src",a.toUrl("../../../../../lib/jsme/jsme.html")),this.module.getDomContent().html(this.dom),this.dom.bind("load",function(){b.dom.get(0).contentWindow.setController(b.module.controller),b.dom.get(0).contentWindow.setView(b)})},inDom:function(){},getPrefs:function(){return this.module.getConfiguration("prefs").join()},onResize:function(){this.dom.attr("width",this.width),this.dom.attr("height",this.height),this.module.getDomContent().css("overflow","hidden");var a=this.dom.get(0).contentWindow;a&&a.setSize&&a.setSize(this.width,this.height)},onProgress:function(){this.dom.html("Progress. Please wait...")},blank:{mol:function(){this.dom.get(0).contentWindow.clear&&this.dom.get(0).contentWindow.clear()},jme:function(){this.dom.get(0).contentWindow.clear&&this.dom.get(0).contentWindow.clear()}},update:{mol:function(a){if(a){var b=this.dom.get(0).contentWindow;b.setMolFile(a.get()),this._currentValue=a,this._initHighlight(a,b)}},jme:function(a){if(a){var b=this.dom.get(0).contentWindow;b.setJmeFile(a.get()),this._currentValue=a,this._initHighlight(a,b)}},xArray:function(){}},_initHighlight:function(a,b){f.killHighlight(this.module.getId()),f.listenHighlight(a,function(c,d){for(var e=[],f=0,g=d.length;g>f;f++)a._atoms[d[f]]instanceof Array||(a._atoms[d[f]]=[a._atoms[d[f]]]),e=e.concat(a._atoms[d[f]]);b.setHighlight(e,c)},!1,this.module.getId())},_doHighlight:function(a,b){if(this._currentValue){for(var c in this._currentValue._atoms)this._currentValue._atoms[c].indexOf(this.highlightedAtom)>-1&&f.highlightId(c,!1);for(var c in this._currentValue._atoms)0!=b&&this._currentValue._atoms[c].indexOf(b-1)>-1&&f.highlightId(c,1);this.highlightedAtom=b-1}},resetAnnotations:function(){},onActionReceive:{},getDom:function(){return this.dom},typeToScreen:{}}),g});