define(["modules/default/defaultview"],function(a){function b(){}return b.prototype=$.extend(!0,{},a,{init:function(){this.dom=$("<div />");var a=this,b=$('<div class="ci-navigation-navigarrow"></div>');this.domNavig=$("<div />").addClass("ci-navigation-navig").append(b.clone().addClass("top")).append(b.clone().addClass("left")).append(b.clone().addClass("right")).append(b.clone().addClass("bottom")).on("mousedown",".ci-navigation-navigarrow",function(b){a.moveStart(b)}),this.domZoom=$('<div class="ci-navigation-navigzoom"></div>'),this._zoomWidget=this.domZoom.slider({height:100,orientation:"vertical",min:0,step:.01,max:1,value:.5,slide:function(b,c){a.zoom(c.value)}}),this.dom.append(this.domNavig).append(this.domZoom),this.module.getDomContent().html(this.dom),this.cx=0,this.cy=0,this.step=2;var a=this},zoom:function(a){this.module.controller.zoom(a)},moveStart:function(a){var b=Date.now(),c=this,d=$(a.target||a.srcElement);mode=d.hasClass("top")?"top":d.hasClass("bottom")?"bottom":d.hasClass("left")?"left":d.hasClass("right")?"right":"top";var e,c=this,f=function(){return 3e5/(Date.now()-b+1500)+10},g=function(){"top"==mode?c.cy-=c.step:"bottom"==mode?c.cy+=c.step:"left"==mode?c.cx-=c.step:"right"==mode&&(c.cx+=c.step),c.module.controller.move(c.cx,c.cy),h()},h=function(){console.log("Set"),e=window.setTimeout(g,f())},i=function(){window.clearTimeout(e),$(document).unbind("mouseup",i)};$(document).bind("mouseup",i),g()},update:{xycoords:function(a){a&&(this.cx=a[0],this.cy=a[1])},zoom:function(a){a&&(this._zoom=a,this._zoomWidget.hasClass("ui-slider")&&this._zoomWidget.slider("value",this._zoom))}},buildElement:function(a,b,c,d){for(var e,f=this.module,g=this,h=0,i=a.length;i>h;h++){var j={};j.data={},d&&(j._color=CI.DataType.asyncToScreenAttribute(a[h],"bgcolor",d).done(function(a){j._colorVal=a}));for(var k in c)e=c[k],e.jpath&&(e=e.jpath),async=CI.DataType.asyncToScreenHtml(a[h],f,e),async.done(function(a){j.data[k]=a}),void 0==j.data[k]&&(j.data[k]=async.html);a[h].children&&(j.children=[],this.buildElement(a[h].children,j.children,c,d));var l,m;!function(b){a[h]._highlight&&(l=function(a){b._highlight=a,g.table.highlight(b)},m=CI.RepoHighlight.listen(a[h]._highlight,l))}(j),this._highlights.push([a[h]._highlight,m]),j._source=a[h],b.push(j)}},getDom:function(){return this.dom},typeToScreen:{}}),b});