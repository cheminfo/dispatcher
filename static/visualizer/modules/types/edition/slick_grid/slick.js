!function(a){function b(b){function c(a){zb=a}function d(){tb=!0}function e(){tb=!1,cb()}function f(a){vb=a}function g(a){hb=a}function h(a){a=a||0;for(var b,c=a,d=nb.length;d>c;c++){if(b=nb[c][mb],void 0===b)throw"Each data element must implement a unique 'id' property";pb[b]=c}}function i(){for(var a,b=0,c=nb.length;c>b;b++)if(a=nb[b][mb],void 0===a||pb[a]!==b)throw"Each data element must implement a unique 'id' property"}function j(){return nb}function k(a,b){void 0!==b&&(mb=b),nb=xb=a,pb={},h(),i(),cb()}function l(a){void 0!=a.pageSize&&(Fb=a.pageSize,Gb=Fb?Math.min(Gb,Math.max(0,Math.ceil(Hb/Fb)-1)):0),void 0!=a.pageNum&&(Gb=Math.min(a.pageNum,Math.max(0,Math.ceil(Hb/Fb)-1))),Kb.notify(m(),null,kb),cb()}function m(){var a=Fb?Math.max(1,Math.ceil(Hb/Fb)):1;return{pageSize:Fb,pageNum:Gb,totalRows:Hb,totalPages:a}}function n(a,b){ub=b,gb=a,fb=null,b===!1&&nb.reverse(),nb.sort(a),b===!1&&nb.reverse(),pb={},h(),cb()}function o(a,b){ub=b,fb=a,gb=null;var c=Object.prototype.toString;Object.prototype.toString="function"==typeof a?a:function(){return this[a]},b===!1&&nb.reverse(),nb.sort(),Object.prototype.toString=c,b===!1&&nb.reverse(),pb={},h(),cb()}function p(){gb?n(gb,ub):fb&&o(fb,ub)}function q(a){rb=a,b.inlineFilters&&(ib=X(),jb=Y()),cb()}function r(){return Bb}function s(c){b.groupItemMetadataProvider||(b.groupItemMetadataProvider=new Slick.Data.GroupItemMetadataProvider),Cb=[],Db=[],c=c||[],Bb=Array.isArray(c)?c:[c];for(var d=0;d<Bb.length;d++){var e=Bb[d]=a.extend(!0,{},Ab,Bb[d]);e.getterIsAFn="function"==typeof e.getter,e.compiledAccumulators=[];for(var f=e.aggregators.length;f--;)e.compiledAccumulators[f]=W(e.aggregators[f]);Db[d]={}}cb()}function t(a,b,c){return null==a?void s([]):void s({getter:a,formatter:b,comparer:c})}function u(a,b){if(!Bb.length)throw new Error("At least one grouping must be specified before calling setAggregators().");Bb[0].aggregators=a,Bb[0].aggregateCollapsed=b,s(Bb)}function v(a){return nb[a]}function w(a){return pb[a]}function x(){if(!qb){qb={};for(var a=0,b=ob.length;b>a;a++)qb[ob[a][mb]]=a}}function y(a){return x(),qb[a]}function z(a){return nb[pb[a]]}function A(a){var b=[];x();for(var c=0;c<a.length;c++){var d=qb[a[c]];null!=d&&(b[b.length]=d)}return b}function B(a){for(var b=[],c=0;c<a.length;c++)a[c]<ob.length&&(b[b.length]=ob[a[c]][mb]);return b}function C(a,b){if(void 0===pb[a]||a!==b[mb])throw"Invalid or non-matching id";nb[pb[a]]=b,sb||(sb={}),sb[a]=!0,cb()}function D(a,b){nb.splice(a,0,b),h(a),cb()}function E(a){nb.push(a),h(nb.length-1),cb()}function F(a){var b=pb[a];if(void 0===b)throw"Invalid id";delete pb[a],nb.splice(b,1),h(b),cb()}function G(){return ob.length}function H(a){return ob[a]}function I(a){var c=ob[a];return void 0===c?null:c.__group?b.groupItemMetadataProvider.getGroupRowMetadata(c):c.__groupTotals?b.groupItemMetadataProvider.getTotalsRowMetadata(c):null}function J(a,b){if(null==a)for(var c=0;c<Bb.length;c++)Db[c]={},Bb[c].collapsed=b;else Db[a]={},Bb[a].collapsed=b;cb()}function K(a){J(a,!0)}function L(a){J(a,!1)}function M(a,b,c){Db[a][b]=Bb[a].collapsed^c,cb()}function N(){var a=Array.prototype.slice.call(arguments),b=a[0];1==a.length&&-1!=b.indexOf(Eb)?M(b.split(Eb).length-1,b,!0):M(a.length-1,a.join(Eb),!0)}function O(){var a=Array.prototype.slice.call(arguments),b=a[0];1==a.length&&-1!=b.indexOf(Eb)?M(b.split(Eb).length-1,b,!1):M(a.length-1,a.join(Eb),!1)}function P(){return Cb}function Q(a,b){for(var c,d,e,f=[],g=[],h=b?b.level+1:0,i=Bb[h],j=0,k=i.predefinedValues.length;k>j;j++)d=i.predefinedValues[j],c=g[d],c||(c=new Slick.Group,c.value=d,c.level=h,c.groupingKey=(b?b.groupingKey+Eb:"")+d,f[f.length]=c,g[d]=c);for(var j=0,k=a.length;k>j;j++)e=a[j],d=i.getterIsAFn?i.getter(e):e[i.getter],c=g[d],c||(c=new Slick.Group,c.value=d,c.level=h,c.groupingKey=(b?b.groupingKey+Eb:"")+d,f[f.length]=c,g[d]=c),c.rows[c.count++]=e;if(h<Bb.length-1)for(var j=0;j<f.length;j++)c=f[j],c.groups=Q(c.rows,c);return f.sort(Bb[h].comparer),f}function R(a){for(var b,c=Bb[a.level],d=a.level==Bb.length,e=new Slick.GroupTotals,f=c.aggregators.length;f--;)b=c.aggregators[f],b.init(),c.compiledAccumulators[f].call(b,!d&&c.aggregateChildGroups?a.groups:a.rows),b.storeResult(e);e.group=a,a.totals=e}function S(a,b){b=b||0;for(var c,d=Bb[b],e=a.length;e--;)c=a[e],(!c.collapsed||d.aggregateCollapsed)&&(c.groups&&S(c.groups,b+1),d.aggregators.length&&(d.aggregateEmpty||c.rows.length||c.groups&&c.groups.length)&&R(c))}function T(a,b){b=b||0;for(var c,d=Bb[b],e=d.collapsed,f=Db[b],g=a.length;g--;)c=a[g],c.collapsed=e^f[c.groupingKey],c.title=d.formatter?d.formatter(c):c.value,c.groups&&(T(c.groups,b+1),c.rows=[])}function U(a,b){b=b||0;for(var c,d,e=Bb[b],f=[],g=0,h=0,i=a.length;i>h;h++){if(d=a[h],f[g++]=d,!d.collapsed){c=d.groups?U(d.groups,b+1):d.rows;for(var j=0,k=c.length;k>j;j++)f[g++]=c[j]}d.totals&&e.displayTotalsRow&&(!d.collapsed||e.aggregateCollapsed)&&(f[g++]=d.totals)}return f}function V(a){var b=/^function[^(]*\(([^)]*)\)\s*{([\s\S]*)}$/,c=a.toString().match(b);return{params:c[1].split(","),body:c[2]}}function W(a){var b=V(a.accumulate),c=new Function("_items","for (var "+b.params[0]+", _i=0, _il=_items.length; _i<_il; _i++) {"+b.params[0]+" = _items[_i]; "+b.body+"}");return c.displayName=c.name="compiledAccumulatorLoop",c}function X(){var a=V(rb),b=a.body.replace(/return false\s*([;}]|$)/gi,"{ continue _coreloop; }$1").replace(/return true\s*([;}]|$)/gi,"{ _retval[_idx++] = $item$; continue _coreloop; }$1").replace(/return ([^;}]+?)\s*([;}]|$)/gi,"{ if ($1) { _retval[_idx++] = $item$; }; continue _coreloop; }$2"),c=["var _retval = [], _idx = 0; ","var $item$, $args$ = _args; ","_coreloop: ","for (var _i = 0, _il = _items.length; _i < _il; _i++) { ","$item$ = _items[_i]; ","$filter$; ","} ","return _retval; "].join("");c=c.replace(/\$filter\$/gi,b),c=c.replace(/\$item\$/gi,a.params[0]),c=c.replace(/\$args\$/gi,a.params[1]);var d=new Function("_items,_args",c);return d.displayName=d.name="compiledFilter",d}function Y(){var a=V(rb),b=a.body.replace(/return false\s*([;}]|$)/gi,"{ continue _coreloop; }$1").replace(/return true\s*([;}]|$)/gi,"{ _cache[_i] = true;_retval[_idx++] = $item$; continue _coreloop; }$1").replace(/return ([^;}]+?)\s*([;}]|$)/gi,"{ if ((_cache[_i] = $1)) { _retval[_idx++] = $item$; }; continue _coreloop; }$2"),c=["var _retval = [], _idx = 0; ","var $item$, $args$ = _args; ","_coreloop: ","for (var _i = 0, _il = _items.length; _i < _il; _i++) { ","$item$ = _items[_i]; ","if (_cache[_i]) { ","_retval[_idx++] = $item$; ","continue _coreloop; ","} ","$filter$; ","} ","return _retval; "].join("");c=c.replace(/\$filter\$/gi,b),c=c.replace(/\$item\$/gi,a.params[0]),c=c.replace(/\$args\$/gi,a.params[1]);var d=new Function("_items,_args,_cache",c);return d.displayName=d.name="compiledFilterWithCaching",d}function Z(a,b){for(var c=[],d=0,e=0,f=a.length;f>e;e++)rb(a[e],b)&&(c[d++]=a[e]);return c}function $(a,b,c){for(var d,e=[],f=0,g=0,h=a.length;h>g;g++)d=a[g],c[g]?e[f++]=d:rb(d,b)&&(e[f++]=d,c[g]=!0);return e}function _(a){if(rb){var c=b.inlineFilters?ib:Z,d=b.inlineFilters?jb:$;vb.isFilterNarrowing?xb=c(xb,hb):vb.isFilterExpanding?xb=d(a,hb,yb):vb.isFilterUnchanged||(xb=c(a,hb))}else xb=Fb?a:a.concat();var e;return Fb?(xb.length<Gb*Fb&&(Gb=Math.floor(xb.length/Fb)),e=xb.slice(Fb*Gb,Fb*Gb+Fb)):e=xb,{totalRows:xb.length,rows:e}}function ab(a,b){var c,d,e,f=[],g=0,h=b.length;vb&&vb.ignoreDiffsBefore&&(g=Math.max(0,Math.min(b.length,vb.ignoreDiffsBefore))),vb&&vb.ignoreDiffsAfter&&(h=Math.min(b.length,Math.max(0,vb.ignoreDiffsAfter)));for(var i=g,j=a.length;h>i;i++)i>=j?f[f.length]=i:(c=b[i],d=a[i],(Bb.length&&(e=c.__nonDataRow||d.__nonDataRow)&&c.__group!==d.__group||c.__group&&!c.equals(d)||e&&(c.__groupTotals||d.__groupTotals)||c[mb]!=d[mb]||sb&&sb[c[mb]])&&(f[f.length]=i));return f}function bb(a){qb=null,(vb.isFilterNarrowing!=wb.isFilterNarrowing||vb.isFilterExpanding!=wb.isFilterExpanding)&&(yb=[]);var b=_(a);Hb=b.totalRows;var c=b.rows;Cb=[],Bb.length&&(Cb=Q(c),Cb.length&&(S(Cb),T(Cb),c=U(Cb)));var d=ab(ob,c);return ob=c,d}function cb(){if(!tb){var a=ob.length,b=Hb,c=bb(nb,rb);Fb&&Gb*Fb>Hb&&(Gb=Math.max(0,Math.ceil(Hb/Fb)-1),c=bb(nb,rb)),sb=null,wb=vb,vb={},b!=Hb&&Kb.notify(m(),null,kb),a!=ob.length&&Ib.notify({previous:a,current:ob.length},null,kb),c.length>0&&Jb.notify({rows:c},null,kb)}}function db(a,b){function c(){if(f.length>0){d=!0;var c=e.mapIdsToRows(f);b||(f=e.mapRowsToIds(c)),a.setSelectedRows(c),d=!1}}var d,e=this,f=e.mapRowsToIds(a.getSelectedRows());a.onSelectedRowsChanged.subscribe(function(){d||(f=e.mapRowsToIds(a.getSelectedRows()))}),this.onRowsChanged.subscribe(c),this.onRowCountChanged.subscribe(c)}function eb(a,b){function c(a){e={};for(var b in a){var c=ob[b][mb];e[c]=a[b]}}function d(){if(e){f=!0,x();var c={};for(var d in e){var g=qb[d];void 0!=g&&(c[g]=e[d])}a.setCellCssStyles(b,c),f=!1}}var e,f;c(a.getCellCssStyles(b)),a.onCellCssStylesChanged.subscribe(function(a,d){f||b==d.key&&d.hash&&c(d.hash)}),this.onRowsChanged.subscribe(d),this.onRowCountChanged.subscribe(d)}var fb,gb,hb,ib,jb,kb=this,lb={groupItemMetadataProvider:null,inlineFilters:!1},mb="id",nb=[],ob=[],pb={},qb=null,rb=null,sb=null,tb=!1,ub=!0,vb={},wb={},xb=[],yb=[],zb=null,Ab={getter:null,formatter:null,comparer:function(a,b){return a.value-b.value},predefinedValues:[],aggregators:[],aggregateEmpty:!1,aggregateCollapsed:!1,aggregateChildGroups:!1,collapsed:!1,displayTotalsRow:!0},Bb=[],Cb=[],Db=[],Eb=":|:",Fb=0,Gb=0,Hb=0,Ib=new Slick.Event,Jb=new Slick.Event,Kb=new Slick.Event;b=a.extend(!0,{},lb,b),a.extend(this,{setModule:c,beginUpdate:d,endUpdate:e,setPagingOptions:l,getPagingInfo:m,getItems:j,setItems:k,setFilter:q,sort:n,fastSort:o,reSort:p,setGrouping:s,getGrouping:r,groupBy:t,setAggregators:u,collapseAllGroups:K,expandAllGroups:L,collapseGroup:N,expandGroup:O,getGroups:P,getIdxById:w,getRowById:y,getItemById:z,getItemByIdx:v,mapRowsToIds:B,mapIdsToRows:A,setRefreshHints:f,setFilterArgs:g,refresh:cb,updateItem:C,insertItem:D,addItem:E,deleteItem:F,syncGridSelection:db,syncGridCellCssStyles:eb,getLength:G,getItem:H,getItemMetadata:I,onRowCountChanged:Ib,onRowsChanged:Jb,onPagingInfoChanged:Kb})}function c(a){this.field_=a,this.init=function(){this.count_=0,this.nonNullCount_=0,this.sum_=0},this.accumulate=function(a){var b=a[this.field_];this.count_++,null!=b&&""!==b&&0/0!==b&&(this.nonNullCount_++,this.sum_+=parseFloat(b))},this.storeResult=function(a){a.avg||(a.avg={}),0!=this.nonNullCount_&&(a.avg[this.field_]=this.sum_/this.nonNullCount_)}}function d(a){this.field_=a,this.init=function(){this.min_=null},this.accumulate=function(a){var b=a[this.field_];null!=b&&""!==b&&0/0!==b&&(null==this.min_||b<this.min_)&&(this.min_=b)},this.storeResult=function(a){a.min||(a.min={}),a.min[this.field_]=this.min_}}function e(a){this.field_=a,this.init=function(){this.max_=null},this.accumulate=function(a){var b=a[this.field_];null!=b&&""!==b&&0/0!==b&&(null==this.max_||b>this.max_)&&(this.max_=b)},this.storeResult=function(a){a.max||(a.max={}),a.max[this.field_]=this.max_}}function f(a){this.field_=a,this.init=function(){this.sum_=null},this.accumulate=function(a){var b=a[this.field_];null!=b&&""!==b&&0/0!==b&&(this.sum_+=parseFloat(b))},this.storeResult=function(a){a.sum||(a.sum={}),a.sum[this.field_]=this.sum_}}a.extend(!0,window,{Slick:{Data:{DataView:b,Aggregators:{Avg:c,Min:d,Max:e,Sum:f}}}})}(jQuery),define(["src/util/util","components/spectrum/spectrum","jquery"],function(a){function b(a,b){a[b.module.view.idPropertyName]||Object.defineProperty(a,b.module.view.idPropertyName,{value:"id_"+b.module.view.getNextIncrementalId(),enumerable:!1,writable:!1,configurable:!1})}function c(){if(this.args.column.validator){var a=this.args.column.validator(this.serializeValue());if(!a.valid)return a}return{valid:!0,msg:null}}function d(){return!(""==this.$input.val()&&null==this.defaultValue)&&this.$input.val()!=this.defaultValue}function e(a,c){var d=_.isEmpty(a);DataObject.check(a,!0);var e=c;if(d){var f={};return b(f,this.args.grid),f=DataObject.check(f,!0),f.setChildSync(this.args.column.jpath,c),this.args.grid.module.view.slick.data.addItem(f),e}this.args.grid.module.model.dataSetChildSync(a,this.args.column.jpath,e)}function f(){return this.$input.val()}function g(a){this.defaultValue=a.getChildSync(this.args.column.jpath),this.defaultValue=this.defaultValue?this.defaultValue.get()||"":"",this.$input.val(this.defaultValue),this.$input[0].defaultValue=this.defaultValue,this.$input.select()}function h(a){this.$input.val(a)}function i(){return this.$input.val()}function j(){this.$input=$("<INPUT type=text class='editor-text' />").appendTo(this.args.container).bind("keydown.nav",function(a){(a.keyCode===$.ui.keyCode.LEFT||a.keyCode===$.ui.keyCode.RIGHT)&&a.stopImmediatePropagation()}).focus().select()}function k(){this.$input.remove()}function l(){this.$input.focus()}function m(){return+this.$input.val()}function n(a,b){return b=+b,e.call(this,a,b)}function o(){this.$input=$("<INPUT type=checkbox value='true' class='editor-checkbox' hideFocus>"),this.$input.appendTo(this.args.container),this.$input.focus()}function p(a){this.defaultValue=a.getChildSync(this.args.column.jpath),this.defaultValue.get()?this.$input.attr("checked","checked"):this.$input.removeAttr("checked")}function q(){return!!this.$input.attr("checked")}function r(){return this.serializeValue!==this.defaultValue}function s(a,b){b=!!b,e.call(this,a,b)}a.loadCss("./components/spectrum/spectrum.css"),function(a){function t(c){this.args=c;var d,e,f;this.init=function(){d=a("<div/>"),d.append('<input type="text">'),e=d.find("input"),e.appendTo(c.container).bind("keydown.nav",function(b){(b.keyCode===a.ui.keyCode.LEFT||b.keyCode===a.ui.keyCode.RIGHT)&&b.stopImmediatePropagation()}).focus().select(),e.spectrum({color:e.val(),preferredFormat:"hex",change:function(a){console.log("change"),console.log("color: ",a),e.spectrum("hide"),c.commitChanges()},move:function(a){console.log("move"),console.log("color: ",a)},show:function(){console.log("show")},hide:function(){console.log("hide"),c.commitChanges()},localStorageKey:"visualizer-spectrum",showPalette:!0,showSelectionPalette:!0,palette:[]}),e.next().first().click()},this.destroy=function(){d.remove()},this.focus=function(){e.focus()},this.getValue=function(){e.val()},this.setValue=function(a){e.val(a)},this.loadValue=function(a){f=a.getChildSync(c.column.jpath),f=f?f.value||"#000000":"#000000",e.val(f),e.spectrum("set",f),e[0].defaultValue=f,e.select()},this.serializeValue=function(){return e.val()},this.applyValue=function(a,d){var e=_.isEmpty(a);DataObject.check(a,!0);var f={type:"color",value:d};if(e){var g={};return b(g,this.args.grid),g=DataObject.check(g,!0),g.setChildSync(c.column.jpath,f),c.grid.module.view.slick.data.addItem(g),f}c.grid.module.model.dataSetChildSync(a,c.column.jpath,f)},this.isValueChanged=function(){return!(""==e.val()&&null==f)&&e.val()!=f},this.validate=function(){if(c.column.validator){var a=c.column.validator(e.val());if(!a.valid)return a}return{valid:!0,msg:null}},this.init()}function u(a){this.args=a,this.init=j,this.destroy=k,this.focus=l,this.getValue=i,this.setValue=h,this.loadValue=g,this.serializeValue=f,this.isValueChanged=d,this.validate=c,this.applyValue=function(a,c){var d=_.isEmpty(a);DataObject.check(a,!0);var e={type:this.args.column.dataType,value:c};if(d){var f={};return b(f,this.args.grid),f=DataObject.check(f,!0),f.setChildSync(this.args.column.jpath,e),this.args.grid.module.view.slick.data.addItem(f),e}this.args.grid.module.model.dataSetChildSync(a,this.args.column.jpath,e)},this.init()}function v(a){this.args=a,this.init=j,this.destroy=k,this.focus=l,this.getValue=i,this.setValue=h,this.loadValue=g,this.serializeValue=f,this.applyValue=e,this.isValueChanged=d,this.validate=c,this.init()}function w(a){this.args=a,this.init=j,this.destroy=k,this.focus=l,this.getValue=m,this.setValue=h,this.loadValue=g,this.serializeValue=f,this.applyValue=n,this.isValueChanged=d,this.validate=c,this.init()}function x(a){this.args=a,this.init=o,this.destroy=k,this.focus=l,this.getValue=m,this.setValue=h,this.loadValue=p,this.serializeValue=q,this.applyValue=s,this.isValueChanged=r,this.validate=c,this.init()}a.extend(!0,window,{Slick:{Editors:{TextValue:u,ColorValue:t,Text:u,SpecialNativeObject:v,DataNumberEditor:w,DataBooleanEditor:x}}})}(jQuery)}),function(a){function b(b){function c(a,c,d,e,f){if(!b.enableExpandCollapse)return f.title;var g=15*f.level+"px";return"<span class='"+b.toggleCssClass+" "+(f.collapsed?b.toggleCollapsedCssClass:b.toggleExpandedCssClass)+"' style='margin-left:"+g+"'></span><span class='"+b.groupTitleCssClass+"' level='"+f.level+"'>"+f.title+"</span>"}function d(a,b,c,d,e){return d.groupTotalsFormatter&&d.groupTotalsFormatter(e,d)||""}function e(a){k=a,k.onClick.subscribe(g),k.onKeyDown.subscribe(h)}function f(){k&&(k.onClick.unsubscribe(g),k.onKeyDown.unsubscribe(h))}function g(c,d){var e=this,f=this.getDataItem(d.row);f&&f instanceof Slick.Group&&a(c.target).hasClass(b.toggleCssClass)&&(d.item=f,f.collapsed?(this.getData().expandGroup(f.groupingKey),m.notify(d,c,e)):(this.getData().collapseGroup(f.groupingKey),n.notify(d,c,e)),c.stopImmediatePropagation(),c.preventDefault())}function h(c,d){var e=this;if(b.enableExpandCollapse&&c.which==a.ui.keyCode.SPACE){var f=this.getActiveCell();if(f){var g=this.getDataItem(f.row);g&&g instanceof Slick.Group&&(d.item=g,g.collapsed?(this.getData().expandGroup(g.groupingKey),m.notify(d,c,e)):(this.getData().collapseGroup(g.groupingKey),n.notify(d,c,e)),c.stopImmediatePropagation(),c.preventDefault())}}}function i(){return{selectable:!1,focusable:b.groupFocusable,cssClasses:b.groupCssClass,columns:{0:{colspan:"*",formatter:c,editor:null}}}}function j(){return{selectable:!1,focusable:b.totalsFocusable,cssClasses:b.totalsCssClass,formatter:d,editor:null}}var k,l={groupCssClass:"slick-group",groupTitleCssClass:"slick-group-title",totalsCssClass:"slick-group-totals",groupFocusable:!0,totalsFocusable:!1,toggleCssClass:"slick-group-toggle",toggleExpandedCssClass:"expanded",toggleCollapsedCssClass:"collapsed",enableExpandCollapse:!0};b=a.extend(!0,{},l,b);var m=new Slick.Event,n=new Slick.Event;return{init:e,destroy:f,getGroupRowMetadata:i,getTotalsRowMetadata:j,onGroupExpanded:m,onGroupCollapsed:n}}a.extend(!0,window,{Slick:{Data:{GroupItemMetadataProvider:b}}})}(jQuery);