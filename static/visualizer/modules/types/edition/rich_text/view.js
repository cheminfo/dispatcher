define(["modules/default/defaultview","src/util/util","ckeditor","lodash","src/util/typerenderer"],function(a,b,c,d,e){function f(){this._id=b.getNextUniqueId()}return f.prototype=$.extend(!0,{},a,{init:function(){var a=this,b=this.module.definition.richtext||"";if(this.module.getConfigurationCheckbox("editable","isEditable"))this.dom=$(' <div id="'+this._id+'" contenteditable="true">'),this._setCss(),this.dom.html(b),this.module.getDomContent().html(this.dom),this.module.controller.valueChanged(b);else{var c=e.toScreen({type:"html",value:b},this.module);c.always(function(){a.dom=$('<div id="'+this._id+'">'),a._setCss(),a.dom.html(b),a.module.getDomContent().html(a.dom)})}},inDom:function(){var a=this;this.module.getConfigurationCheckbox("editable","isEditable")&&(c.disableAutoInline=!0,this.instance=c.inline(this._id,{extraPlugins:"mathjax"}),this.instance.on("change",function(){a.module.controller.valueChanged(a.instance.getData())})),this.resolveReady()},_setCss:function(){this.dom.css({height:"100%",width:"100%",padding:"5px",boxSizing:"border-box"})}}),f});