define(["modules/types/client_interaction/code_editor/view","src/util/util","ace/ace","src/util/context","jquery"],function(a,b,c,d,e){function f(){}return f.prototype=Object.create(a.prototype),f.prototype.init=function(){a.prototype.init.call(this)},f.prototype.inDom=function(){var a=this;this.editable=!0,e('<div id="'+this._id+'"></div>').css("height","100%").css("width","100%").appendTo(this.editorCell),this.editor=c.edit(this._id);var b=this.module.getConfiguration("script")||"";this._code=b,this.editor.getSession().setMode("./mode/javascript"),this.editor.setValue(b,-1),this.editor.getSession().on("change",function(){a.editorChanged()}),this.buttonCell.append(e("<span>Execute filter</span>").addClass("form-button").on("click",function(){a.module.controller.onButtonClick(a._code,a._object)})),this.table.prepend(e("<tr><td>function(value, resolve, reject) {</td></tr>").css("height","10px")),e("<tr><td>}</td></tr>").css("height","10px").insertBefore(this.buttonRow),this.resolveReady()},f.prototype.editorChanged=function(){var a=this.editor.getValue();this._code=a,this.module.definition.configuration.groups.group[0].script[0]=a},f.prototype.update.dataobject=function(a){this._object=a,this.module.controller.onButtonClick(this._code,this._object)},f.prototype.onActionReceive.doFilter=function(){this.module.controller.onButtonClick(this._code,this._object)},f});