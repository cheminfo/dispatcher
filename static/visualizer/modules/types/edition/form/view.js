define(["modules/default/defaultview","src/util/datatraversing","src/util/api"],function(a){function b(){}return b.prototype=$.extend(!0,{},a,{init:function(){this.dom=$("<div />"),this.module.getDomContent().html(this.dom),this.callback=null},inDom:function(){var a,b=this,c=this.module.getConfiguration("structure"),d=this.module.getConfiguration("tpl_file"),e=this.module.getConfiguration("tpl_html");try{json=JSON.parse(c)}catch(f){return}def=d?$.get(d,{}):e,require(["./forms/form"],function(c){$.when(def).done(function(d){a=new c({}),a.init({onValueChanged:function(a,b){b.field.options.jpath}}),a.setStructure(json),a.onStructureLoaded().done(function(){a.fill({})}),a.onLoaded().done(function(){a.setTpl(d),b.dom.html(a.makeDomTpl()),a.inDom(),b.resolveReady()})})}),this.form=a},update:{},getDom:function(){return this.dom},typeToScreen:{}}),b});