define(["modules/default/defaultcontroller"],function(a){function b(){}return b.prototype=$.extend(!0,{},a),b.prototype.moduleInformation={moduleName:"Paste value",description:"Paste any text and parse it in a variable",author:"MichaÃ«l Zasso",date:"05.03.2014",license:"MIT",cssClass:"paste_text"},b.prototype.references={value:{label:"The parsed object"}},b.prototype.events={onEditorChange:{label:"The value in the editor has changed",refVariable:["value"]}},b.prototype.configurationStructure=function(){return{groups:{group:{options:{type:"list"},fields:{thevalue:{type:"jscode",title:"Value",mode:"text","default":""},type:{type:"combo",title:"Data type",options:[{title:"Text",key:"text"},{title:"JSON",key:"json"},{title:"XML",key:"xml"},{title:"CSV",key:"csv"}],"default":"text"}}}}}},b.prototype.configFunctions={},b.prototype.configAliases={type:["groups","group",0,"type",0],thevalue:["groups","group",0,"thevalue",0]},b.prototype.valueChanged=function(a){var b=this.module.getConfiguration("type"),c=$.Deferred(),d=this;switch(b){case"text":c.resolve(a);break;case"json":c.resolve(JSON.parse(a));break;case"csv":require(["components/papa-parse/jquery.parse.min"],function(){c.resolve($.parse(a,{header:!1}).results)});break;case"xml":require(["components/x2js/xml2json.min"],function(b){c.resolve((new b).xml_str2json(a))})}c.done(function(b){d.module.definition.configuration.groups&&(d.module.definition.configuration.groups.group[0].thevalue[0]=a),d.createDataFromEvent("onEditorChange","value",DataObject.check(b,!0))})},b});