define(["jquery","src/header/components/default","src/main/grid"],function(a,b,c){var d,e=function(){};return a.extend(e.prototype,b,{initImpl:function(){},_onClick:function(){this.setStyleOpen(this._open),this._open?(d&&d!==this&&d._open&&d.onClick(),d=this,(this.options.viewURL||this.options.dataURL)&&this.load(this.options),this.doElements()):this.close()},doElements:function(){this.$_elToOpen=this._doElements(this.options.layers),this.open()},_doElements:function(b){b||(b=c.getLayerNames());for(var d=a("<ul />")||this.$_elToOpen.empty(),e=0,f=b.length;f>e;e++)d.append(this._buildSubElement(b[e]));return d},_buildSubElement:function(b){var d=this,e=a("<li />").text(b);return e.addClass("hasEvent").bind("click",function(){c.switchToLayer(b),d.onClick()}),e}}),e});