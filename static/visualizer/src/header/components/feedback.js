define(["jquery","jquery-ui","src/header/components/default","./couchshare/share","forms/button","src/util/util"],function(a,b,c,d,e,f){function g(){}var h={couchUrl:"http://visualizer.epfl.ch",database:"x",tinyUrl:"http://visualizer.epfl.ch/tiny"};return a.extend(g.prototype,c,{initImpl:function(){this.dialogOptions={modal:!0,title:"Feedback",width:750,height:350}},_onClick:function(){var b=f.getNextUniqueId(),c=a("<span>").attr("id",b+"-message").css("color","red"),g=a("<div>").html('<h2>Do you have a comment on the visualizer ? Did you find a bug ?</h2><p>Put your comment here and we will be notified.<br>A snapshot of you view and data will also be sent to us so feel free to describe exactly what you did and what happened !</p><table><tr><td>Title : </td><td><input type="text" id="'+b+'-title" style="width:500px" /></td></tr><tr><td>Description : </td><td><textarea id="'+b+'-description" rows="12" cols="80"></textarea></td></tr></table>').append(new e("Send",function(){var e=this;this.options.disabled||d.share(h).done(function(d){var f=a("#"+b+"-title").val(),g=a("#"+b+"-description").val(),h={title:f,body:g+"\n\nTestcase: "+d+" ([Original URL]("+document.location.href+"))"};a.ajax({type:"POST",url:"http://visualizer.epfl.ch/github/api/issue",contentType:"application/json",dataType:"json",data:JSON.stringify(h),success:function(a){console.log("success",a),c.html('Thank you for your feedback ! You can follow your issue <a target="_blank" href="'+a.description+'">here</a>'),e.disable()},error:function(a){c.html("ERROR"),console.log("error",a)}})}).fail(function(a){c.html("ERROR"),console.log("error",a)})},{color:"blue"}).render()).append(c);g.dialog(this.dialogOptions)}}),g});