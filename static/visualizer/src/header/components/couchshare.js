define(["jquery","jquery-ui","src/header/components/default","./couchshare/share","forms/button","src/util/util"],function(a,b,c,d,e,f){var g=function(){};return a.extend(g.prototype,c,{initImpl:function(){this.dialogOptions={modal:!0,title:"Share view",width:550,height:150}},_onClick:function(){var b=this,c=f.getNextUniqueId(),g=a("<div>").html("<h3>Click the share button to make a snapshot of your view and generate a tiny URL</h3>").append(new e("Share",function(){var e=this;this.options.disabled||d.share(b.options).done(function(b){a("#"+c).val(b).focus().select(),e.disable()}).fail(function(){a("#"+c).val("error")})},{color:"blue"}).render()).append(a('<input type="text" id="'+c+'" />').css("width","400px"));g.dialog(this.dialogOptions)}}),g});