// Generated by uRequire v0.7.0-beta4 - template: 'combined' 
// Combined template optimized with RequireJS/r.js v2.1.15 & almond.
/**
 * @license almond 0.3.0 Copyright (c) 2011-2014, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */

(function(t,e){var r=!("function"!=typeof define||!define.amd),n="object"==typeof exports,a=function(){var t,r,n;return function(e){function a(t,e){return X.call(t,e)}function i(t,e){var r,n,a,i,o,s,l,f,p,u,c,g=e&&e.split("/"),d=F.map,h=d&&d["*"]||{};if(t&&"."===t.charAt(0))if(e){for(g=g.slice(0,g.length-1),t=t.split("/"),o=t.length-1,F.nodeIdCompat&&b.test(t[o])&&(t[o]=t[o].replace(b,"")),t=g.concat(t),p=0;p<t.length;p+=1)if(c=t[p],"."===c)t.splice(p,1),p-=1;else if(".."===c){if(1===p&&(".."===t[2]||".."===t[0]))break;p>0&&(t.splice(p-1,2),p-=2)}t=t.join("/")}else 0===t.indexOf("./")&&(t=t.substring(2));if((g||h)&&d){for(r=t.split("/"),p=r.length;p>0;p-=1){if(n=r.slice(0,p).join("/"),g)for(u=g.length;u>0;u-=1)if(a=d[g.slice(0,u).join("/")],a&&(a=a[n])){i=a,s=p;break}if(i)break;!l&&h&&h[n]&&(l=h[n],f=p)}!i&&l&&(i=l,s=f),i&&(r.splice(0,s,i),t=r.join("/"))}return t}function o(t,r){return function(){var n=y.call(arguments,0);return"string"!=typeof n[0]&&1===n.length&&n.push(null),g.apply(e,n.concat([t,r]))}}function s(t){return function(e){return i(e,t)}}function l(t){return function(e){m[t]=e}}function f(t){if(a(v,t)){var r=v[t];delete v[t],x[t]=!0,c.apply(e,r)}if(!a(m,t)&&!a(x,t))throw new Error("No "+t);return m[t]}function p(t){var e,r=t?t.indexOf("!"):-1;return r>-1&&(e=t.substring(0,r),t=t.substring(r+1,t.length)),[e,t]}function u(t){return function(){return F&&F.config&&F.config[t]||{}}}var c,g,d,h,m={},v={},F={},x={},X=Object.prototype.hasOwnProperty,y=[].slice,b=/\.js$/;d=function(t,e){var r,n=p(t),a=n[0];return t=n[1],a&&(a=i(a,e),r=f(a)),a?t=r&&r.normalize?r.normalize(t,s(e)):i(t,e):(t=i(t,e),n=p(t),a=n[0],t=n[1],a&&(r=f(a))),{f:a?a+"!"+t:t,n:t,pr:a,p:r}},h={require:function(t){return o(t)},exports:function(t){var e=m[t];return"undefined"!=typeof e?e:m[t]={}},module:function(t){return{id:t,uri:"",exports:m[t],config:u(t)}}},c=function(t,r,n,i){var s,p,u,c,g,F,X=[],y=typeof n;if(i=i||t,"undefined"===y||"function"===y){for(r=!r.length&&n.length?["require","exports","module"]:r,g=0;g<r.length;g+=1)if(c=d(r[g],i),p=c.f,"require"===p)X[g]=h.require(t);else if("exports"===p)X[g]=h.exports(t),F=!0;else if("module"===p)s=X[g]=h.module(t);else if(a(m,p)||a(v,p)||a(x,p))X[g]=f(p);else{if(!c.p)throw new Error(t+" missing "+p);c.p.load(c.n,o(i,!0),l(p),{}),X[g]=m[p]}u=n?n.apply(m[t],X):void 0,t&&(s&&s.exports!==e&&s.exports!==m[t]?m[t]=s.exports:u===e&&F||(m[t]=u))}else t&&(m[t]=n)},t=r=g=function(t,r,n,a,i){if("string"==typeof t)return h[t]?h[t](r):f(d(t,r).f);if(!t.splice){if(F=t,F.deps&&g(F.deps,F.callback),!r)return;r.splice?(t=r,r=n,n=null):t=e}return r=r||function(){},"function"==typeof n&&(n=a,a=i),a?c(e,t,r,n):setTimeout(function(){c(e,t,r,n)},4),g},g.config=function(t){return g(t)},t._defined=m,n=function(t,e,r){e.splice||(r=e,e=[]),a(m,t)||a(v,t)||(v[t]=[t,e,r])},n.amd={jQuery:!0}}(),n("almond",function(){}),n("jcampconverter",["require","exports","module"],function(t,r,n){var a=function(t,e,r){function n(){function t(t){for(var e=[],r=0,n=t.length;n>r;r++)e[r]=parseFloat(t[r]);return e}function e(e,l){l=l||{};var p,u,c,g,d,h,m,v,F,x=new Date,X={},y={};y.profiling=[],y.logs=[];var b=[];y.spectra=b,y.info={};var A={};if("string"!=typeof e)return y;for(y.profiling&&y.profiling.push({action:"Before split to LDRS",time:new Date-x}),g=e.split(/[\r\n]+##/),y.profiling&&y.profiling.push({action:"Split to LDRS",time:new Date-x}),g[0]&&(g[0]=g[0].replace(/^[\r\n ]*##/,"")),d=0,h=g.length;h>d;d++){if(p=g[d],m=p.indexOf("="),m>0?(u=p.substring(0,m),c=p.substring(m+1).trim()):(u=p,c=""),u=u.replace(/[_ -]/g,"").toUpperCase(),"DATATABLE"==u&&(v=c.indexOf("\n"),-1==v&&(v=c.indexOf("\r")),v>0)){var T=-1,C=-1;if(F=c.substring(0,v).split(/[ ,;\t]+/),F[0].indexOf("++")>0){var O=F[0].replace(/.*\(([a-zA-Z0-9]+)\+\+.*/,"$1"),E=F[0].replace(/.*\.\.([a-zA-Z0-9]+).*/,"$1");T=X.symbol.indexOf(O),C=X.symbol.indexOf(E)}-1==T&&(T=0),-1==C&&(C=0),X.first&&(X.first.length>T&&(A.firstX=X.first[T]),X.first.length>C&&(A.firstY=X.first[C])),X.last&&(X.last.length>T&&(A.lastX=X.last[T]),X.last.length>C&&(A.lastY=X.last[C])),X.vardim&&X.vardim.length>T&&(A.nbPoints=X.vardim[T]),X.factor&&(X.factor.length>T&&(A.xFactor=X.factor[T]),X.factor.length>C&&(A.yFactor=X.factor[C])),X.units&&(X.units.length>T&&(A.xUnit=X.units[T]),X.units.length>C&&(A.yUnit=X.units[C])),A.datatable=F[0],F[1]&&F[1].indexOf("PEAKS")>-1?u="PEAKTABLE":F[1]&&(F[1].indexOf("XYDATA")||F[0].indexOf("++")>0)&&(u="XYDATA",A.deltaX=(A.lastX-A.firstX)/(A.nbPoints-1))}"TITLE"==u?A.title=c:"DATATYPE"==u?(A.dataType=c,c.indexOf("nD")>-1&&(y.twoD=!0)):"XUNITS"==u?A.xUnit=c:"YUNITS"==u?A.yUnit=c:"FIRSTX"==u?A.firstX=parseFloat(c):"LASTX"==u?A.lastX=parseFloat(c):"FIRSTY"==u?A.firstY=parseFloat(c):"NPOINTS"==u?A.nbPoints=parseFloat(c):"XFACTOR"==u?A.xFactor=parseFloat(c):"YFACTOR"==u?A.yFactor=parseFloat(c):"DELTAX"==u?A.deltaX=parseFloat(c):".OBSERVEFREQUENCY"==u||"$SFO1"==u?A.observeFrequency||(A.observeFrequency=parseFloat(c)):".OBSERVENUCLEUS"==u?A.xType||(y.xType=c.replace(/[^a-zA-Z0-9]/g,"")):"$SFO2"==u?y.indirectFrequency||(y.indirectFrequency=parseFloat(c)):"$OFFSET"==u?(y.shiftOffsetNum=0,y.shiftOffsetVal||(y.shiftOffsetVal=parseFloat(c))):"$REFERENCEPOINT"==u||("VARNAME"==u?X.varname=c.split(/[, \t]+/):"SYMBOL"==u?X.symbol=c.split(/[, \t]+/):"VARTYPE"==u?X.vartype=c.split(/[, \t]+/):"VARFORM"==u?X.varform=c.split(/[, \t]+/):"VARDIM"==u?X.vardim=t(c.split(/[, \t]+/)):"UNITS"==u?X.units=c.split(/[, \t]+/):"FACTOR"==u?X.factor=t(c.split(/[, \t]+/)):"FIRST"==u?X.first=t(c.split(/[, \t]+/)):"LAST"==u?X.last=t(c.split(/[, \t]+/)):"MIN"==u?X.min=t(c.split(/[, \t]+/)):"MAX"==u?X.max=t(c.split(/[, \t]+/)):".NUCLEUS"==u?y.twoD&&(y.yType=c.split(/[, \t]+/)[0]):"PAGE"==u?(A.page=c.trim(),A.pageValue=parseFloat(c.replace(/^.*=/,"")),y.indirectFrequency&&(A.pageValue/=y.indirectFrequency)):"RETENTIONTIME"==u?A.pageValue=parseFloat(c):"XYDATA"==u?(i(y,A),c.match(/.*\+\+.*/)?s(A,c,y):o(A,c,y),b.push(A),A={}):"PEAKTABLE"==u?(i(y,A),o(A,c,y),b.push(A),A={}):n(u)?A[r(u)]=c:u.match(/^[A-Z].*/)&&(y.info[u]=c.trim()))}return y.profiling&&y.profiling.push({action:"Finished parsing",time:new Date-x}),y.twoD&&(f(y),y.profiling&&y.profiling.push({action:"Finished countour plot calculation",time:new Date-x}),l.keepSpectra||delete y.spectra),b.length>1&&b[0].dataType.toLowerCase().match(/.*mass./)&&(a(y),y.profiling&&y.profiling.push({action:"Finished GCMS calculation",time:new Date-x})),y.profiling&&y.profiling.push({action:"Total time",time:new Date-x}),y}function r(t){return t.toLowerCase().replace(/[^a-z0-9]/g,"")}function n(t){for(var e=0;e<h.length;e++)if(t==h[e])return!0;return!1}function a(t){var e,n=t.spectra,a=[];for(e=0;e<h.length;e++){var i=r(h[e]);n[0][i]&&a.push(i)}var o={};for(o.gc={},o.ms=[],e=0;e<a.length;e++)o.gc[a[e]]=[];for(e=0;e<n.length;e++){for(var s=n[e],l=0;l<a.length;l++)o.gc[a[l]].push(s.pageValue),o.gc[a[l]].push(parseFloat(s[a[l]]));s.data&&(o.ms[e]=s.data[0])}t.gcms=o}function i(t,e){if(e.xFactor||(e.xFactor=1),e.yFactor||(e.yFactor=1),e.observeFrequency&&e.xUnit&&"HZ"==e.xUnit.toUpperCase()&&(e.xUnit="PPM",e.xFactor=e.xFactor/e.observeFrequency,e.firstX=e.firstX/e.observeFrequency,e.lastX=e.lastX/e.observeFrequency,e.deltaX=e.deltaX/e.observeFrequency),t.shiftOffsetVal){var r=e.firstX-t.shiftOffsetVal;e.firstX=e.firstX-r,e.lastX=e.lastX-r}}function o(t,e,r){var n,a,i,o,s;t.data=[],t.currentData=[],t.data.push(t.currentData);var l=e.split(/,? *,?[;\r\n]+ */),f=0;for(n=1,a=l.length;a>n;n++)if(s=l[n].trim().replace(c,"").split(g),s.length%2==0)for(i=0,o=s.length;o>i;i+=2)t.currentData[f++]=parseFloat(s[i])*t.xFactor,t.currentData[f++]=parseFloat(s[i+1])*t.yFactor;else r.logs.push("Format error: "+s);delete t.currentData}function s(t,e,r){function n(t,e,r){t.currentData.push(e,r*t.yFactor)}t.deltaX||(t.deltaX=(t.lastX-t.firstX)/(t.nbPoints-1)),t.data=[],t.currentData=[],t.data.push(t.currentData);var a,i,o,s=t.firstX,l=t.firstY,f=e.split(/[\r\n]+/);i=[];for(var p=1,g=f.length;g>p;p++)if(i=f[p].trim().replace(c,"").split(u),i.length>0){if(d){t.firstPoint||(t.firstPoint=parseFloat(i[0]));var h=parseFloat(i[0]-t.firstPoint)*t.xFactor+t.firstX;(a||0==a)&&(h+=t.deltaX),r.logs.push("Checking X value: currentX: "+s+" - expectedCurrentX: "+h)}for(var m=1,v=i.length;v>m;m++)if(1!=m||!a&&0!=a){if(i[m].length>0)if(o=i[m].charCodeAt(0),43==o||45==o||46==o||o>47&&58>o)a=void 0,l=parseFloat(i[m]),n(t,s,l),s+=t.deltaX;else if(o>63&&74>o)a=void 0,l=parseFloat(String.fromCharCode(o-16)+i[m].substring(1)),n(t,s,l),s+=t.deltaX;else if(o>96&&106>o)a=void 0,l=-parseFloat(String.fromCharCode(o-48)+i[m].substring(1)),n(t,s,l),s+=t.deltaX;else if(o>82&&91>o||115==o){var F=parseFloat(String.fromCharCode(o-34)+i[m].substring(1))-1;115==o&&(F=parseFloat("9"+i[m].substring(1))-1);for(var x=0;F>x;x++)a&&(l+=a),n(t,s,l),s+=t.deltaX}else 37==o?(a=parseFloat("0"+i[m].substring(1)),l+=a,n(t,s,l),s+=t.deltaX):o>73&&83>o?(a=parseFloat(String.fromCharCode(o-25)+i[m].substring(1)),l+=a,n(t,s,l),s+=t.deltaX):o>105&&115>o&&(a=-parseFloat(String.fromCharCode(o-57)+i[m].substring(1)),l+=a,n(t,s,l),s+=t.deltaX)}else a=void 0,o=i[m].charCodeAt(0)}delete t.currentData}function l(t){for(var e=[],r=0,n=t[0].data[0][0],a=t[0].data[0][0],i=t.length,o=t[0].data[0].length/2,s=0;i>s;s++){e[s]=[];for(var l=0;o>l;l++)e[s][l]=t[s].data[0][2*l+1],e[s][l]<n&&(n=t[s].data[0][2*l+1]),e[s][l]>a&&(a=t[s].data[0][2*l+1]),0!=s&&0!=l&&(r+=Math.abs(e[s][l]-e[s][l-1])+Math.abs(e[s][l]-e[s-1][l]))}return{z:e,minX:t[0].data[0][0],maxX:t[0].data[0][t[0].data[0].length-2],minY:t[0].pageValue,maxY:t[t.length-1].pageValue,minZ:n,maxZ:a,noise:r/((e.length-1)*(e[0].length-1)*2)}}function f(t){var e=l(t.spectra);t.contourLines=p(e),delete e.z,t.minMax=e}function p(t){for(var e,r,n,a,i,o=t.noise,s=t.z,l=[],f=7,p=new Float32Array(4),u=[],c=s.length,g=s[0].length,d=t.minX,h=t.maxX,m=(h-d)/(g-1),v=t.minY,F=t.maxY,x=(F-v)/(c-1),X=t.minZ,y=t.maxZ,b=0;2*f>b;b++){var A={};l.push(A);var T=b%2;i=0==T?(y-5*o)*Math.exp(b/2-f)+5*o:-(y-5*o)*Math.exp(b/2-f)-5*o;var C=[];if(A.zValue=i,A.lines=C,!(X>=i||i>=y))for(var O=0;c-1>O;O++)for(var E=0;g-1>E;E++){p[0]=s[O][E],p[1]=s[O][E+1],p[2]=s[O+1][E],p[3]=s[O+1][E+1];for(var D=0;4>D;D++)u[D]=p[D]>i;u[0]!=u[1]&&u[0]!=u[2]&&(e=E+(i-p[0])/(p[1]-p[0]),r=O,n=E,a=O+(i-p[0])/(p[2]-p[0]),C.push(e*m+d,r*x+v,n*m+d,a*x+v)),u[3]!=u[1]&&u[3]!=u[2]&&(e=E+1,r=O+1-(i-p[3])/(p[1]-p[3]),n=E+1-(i-p[3])/(p[2]-p[3]),a=O+1,C.push(e*m+d,r*x+v,n*m+d,a*x+v)),u[1]!=u[2]&&(e=E+1-(i-p[1])/(p[2]-p[1]),r=O+(i-p[1])/(p[2]-p[1]),u[1]!=u[0]&&(n=E+1-(i-p[1])/(p[0]-p[1]),a=O,C.push(e*m+d,r*x+v,n*m+d,a*x+v)),u[2]!=u[0]&&(n=E,a=O+1-(i-p[2])/(p[0]-p[2]),C.push(e*m+d,r*x+v,n*m+d,a*x+v)),u[1]!=u[3]&&(n=E+1,a=O+(i-p[1])/(p[3]-p[1]),C.push(e*m+d,r*x+v,n*m+d,a*x+v)),u[2]!=u[3]&&(n=E+(i-p[2])/(p[3]-p[2]),a=O+1,C.push(e*m+d,r*x+v,n*m+d,a*x+v)))}}return{minX:t.minX,maxX:t.maxX,minY:t.minY,maxY:t.maxY,segments:l}}var u=/[,\t \+-]*(?=[^\d,\t \.])|[ \t]+(?=[\d+\.-])/,c=/\$\$.*/,g=/[,\t ]+/,d=!1,h=["TIC",".RIC","SCANNUMBER"];return e}function a(t,e,r){return"boolean"==typeof e&&(r=e,e={}),r?i(t,e):l(t,e)}function i(t,e){return s||o(),new Promise(function(r){var n=Date.now()+""+Math.random();f[n]=r,s.postMessage({stamp:n,input:t,options:e})})}function o(){var t=URL.createObjectURL(new Blob(["var getConverter ="+n.toString()+";var convert = getConverter(); onmessage = function (event) { postMessage({stamp: event.data.stamp, output: convert(event.data.input, event.data.options)}); };"],{type:"application/javascript"}));s=new Worker(t),URL.revokeObjectURL(t),s.addEventListener("message",function(t){var e=t.data.stamp;f[e]&&f[e](t.data.output)})}var s,l=n(),f={};return r.exports={convert:a},r.exports}.call(this,t,r,n),i=e.JcampConverter;return e.JcampConverter=a,a.noConflict=function(){return e.JcampConverter=i,a},a}),r("jcampconverter")};return r?define(a):n?module.exports=a():a()}).call(this,"object"==typeof exports?global:window,"object"==typeof exports?global:window);