Pixastic.Actions.sharpen={process:function(a){var b=0;if("undefined"!=typeof a.options.amount&&(b=parseFloat(a.options.amount)||0),0>b&&(b=0),b>1&&(b=1),Pixastic.Client.hasCanvasImageData()){for(var c=Pixastic.prepareData(a),d=Pixastic.prepareData(a,!0),e=15,f=1+3*b,g=[[0,-f,0],[-f,e,-f],[0,-f,0]],h=0,i=0;3>i;i++)for(var j=0;3>j;j++)h+=g[i][j];h=1/h;var k=a.options.rect,l=k.width,m=k.height;e*=h,f*=h;var n=4*l,o=m;do{var p=(o-1)*n,q=o==m?o-1:o,r=1==o?0:o-2,s=r*n,t=q*n,u=l;do{var v=p+(4*u-4),w=s+4*(1==u?0:u-2),x=t+4*(u==l?u-1:u),y=(-d[w]-d[v-4]-d[v+4]-d[x])*f+d[v]*e,z=(-d[w+1]-d[v-3]-d[v+5]-d[x+1])*f+d[v+1]*e,A=(-d[w+2]-d[v-2]-d[v+6]-d[x+2])*f+d[v+2]*e;0>y&&(y=0),0>z&&(z=0),0>A&&(A=0),y>255&&(y=255),z>255&&(z=255),A>255&&(A=255),c[v]=y,c[v+1]=z,c[v+2]=A}while(--u)}while(--o);return!0}},checkSupport:function(){return Pixastic.Client.hasCanvasImageData()}};