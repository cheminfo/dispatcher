Pixastic.Actions.sepia={process:function(a){var b=parseInt(a.options.mode,10)||0;if(0>b&&(b=0),b>1&&(b=1),Pixastic.Client.hasCanvasImageData()){var c=Pixastic.prepareData(a),d=a.options.rect,e=d.width,f=d.height,g=4*e,h=f;do{var i=(h-1)*g,j=e;do{var k=i+4*(j-1);if(b)var l=.299*c[k]+.587*c[k+1]+.114*c[k+2],m=l+39,n=l+14,o=l-36;else var p=c[k],q=c[k+1],r=c[k+2],m=.393*p+.769*q+.189*r,n=.349*p+.686*q+.168*r,o=.272*p+.534*q+.131*r;0>m&&(m=0),m>255&&(m=255),0>n&&(n=0),n>255&&(n=255),0>o&&(o=0),o>255&&(o=255),c[k]=m,c[k+1]=n,c[k+2]=o}while(--j)}while(--h);return!0}},checkSupport:function(){return Pixastic.Client.hasCanvasImageData()}};