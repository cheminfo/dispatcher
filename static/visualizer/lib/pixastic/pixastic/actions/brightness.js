Pixastic.Actions.brightness={process:function(a){var b=parseInt(a.options.brightness,10)||0,c=parseFloat(a.options.contrast)||0,d=!(!a.options.legacy||"false"==a.options.legacy);if(d)b=Math.min(150,Math.max(-150,b));else var e=1+Math.min(150,Math.max(-150,b))/150;if(c=Math.max(0,c+1),Pixastic.Client.hasCanvasImageData()){var f,g,h,i,j=Pixastic.prepareData(a),k=a.options.rect,l=k.width,m=k.height,n=l*m,o=4*n;1!=c?d?(h=c,i=(b-128)*c+128):(h=e*c,i=128*-c+128):d?(h=1,i=b):(h=e,i=0);for(var p,q,r;n--;)j[o]=(p=j[o-=4]*h+i)>255?255:0>p?0:p,j[f]=(q=j[f=o+1]*h+i)>255?255:0>q?0:q,j[g]=(r=j[g=o+2]*h+i)>255?255:0>r?0:r;return!0}},checkSupport:function(){return Pixastic.Client.hasCanvasImageData()}};