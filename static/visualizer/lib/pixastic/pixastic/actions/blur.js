Pixastic.Actions.blur={process:function(a){if("undefined"==typeof a.options.fixMargin&&(a.options.fixMargin=!0),Pixastic.Client.hasCanvasImageData()){for(var b=Pixastic.prepareData(a),c=Pixastic.prepareData(a,!0),d=[[0,1,0],[1,2,1],[0,1,0]],e=0,f=0;3>f;f++)for(var g=0;3>g;g++)e+=d[f][g];e=1/(2*e);var h=a.options.rect,i=h.width,j=h.height,k=4*i,l=j;do{var m=(l-1)*k,n=1==l?0:l-2,o=l==j?l-1:l,p=n*i*4,q=o*i*4,r=i;do{var s=m+(4*r-4),t=p+4*(1==r?0:r-2),u=q+4*(r==i?r-1:r);b[s]=(2*(c[t]+c[s-4]+c[s+4]+c[u])+4*c[s])*e,b[s+1]=(2*(c[t+1]+c[s-3]+c[s+5]+c[u+1])+4*c[s+1])*e,b[s+2]=(2*(c[t+2]+c[s-2]+c[s+6]+c[u+2])+4*c[s+2])*e}while(--r)}while(--l);return!0}return Pixastic.Client.isIE()?(a.image.style.filter+=" progid:DXImageTransform.Microsoft.Blur(pixelradius=1.5)",a.options.fixMargin&&(a.image.style.marginLeft=(parseInt(a.image.style.marginLeft,10)||0)-2+"px",a.image.style.marginTop=(parseInt(a.image.style.marginTop,10)||0)-2+"px"),!0):void 0},checkSupport:function(){return Pixastic.Client.hasCanvasImageData()||Pixastic.Client.isIE()}};