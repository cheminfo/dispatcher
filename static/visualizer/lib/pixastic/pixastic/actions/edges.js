Pixastic.Actions.edges={process:function(a){var b=!(!a.options.mono||"false"==a.options.mono),c=!(!a.options.invert||"false"==a.options.invert);if(Pixastic.Client.hasCanvasImageData()){var d=Pixastic.prepareData(a),e=Pixastic.prepareData(a,!0),f=-1/8;weight=1/f;var g=a.options.rect,h=g.width,i=g.height,j=4*h,k=i;do{var l=(k-1)*j,m=k==i?k-1:k,n=1==k?0:k-2,o=n*h*4,p=m*h*4,q=h;do{var r=l+(4*q-4),s=o+4*(1==q?0:q-2),t=p+4*(q==h?q-1:q),u=((e[s-4]+e[s]+e[s+4]+e[r-4]+e[r+4]+e[t-4]+e[t]+e[t+4])*f+e[r])*weight,v=((e[s-3]+e[s+1]+e[s+5]+e[r-3]+e[r+5]+e[t-3]+e[t+1]+e[t+5])*f+e[r+1])*weight,w=((e[s-2]+e[s+2]+e[s+6]+e[r-2]+e[r+6]+e[t-2]+e[t+2]+e[t+6])*f+e[r+2])*weight;if(b){var x=.3*u+.59*v+.11*w||0;c&&(x=255-x),0>x&&(x=0),x>255&&(x=255),u=v=w=x}else c&&(u=255-u,v=255-v,w=255-w),0>u&&(u=0),0>v&&(v=0),0>w&&(w=0),u>255&&(u=255),v>255&&(v=255),w>255&&(w=255);d[r]=u,d[r+1]=v,d[r+2]=w}while(--q)}while(--k);return!0}},checkSupport:function(){return Pixastic.Client.hasCanvasImageData()}};