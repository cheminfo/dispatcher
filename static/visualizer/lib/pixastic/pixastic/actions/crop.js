Pixastic.Actions.crop={process:function(a){if(Pixastic.Client.hasCanvas()){var b=a.options.rect,c=b.width,d=b.height,e=b.top,f=b.left;"undefined"!=typeof a.options.left&&(f=parseInt(a.options.left,10)),"undefined"!=typeof a.options.top&&(e=parseInt(a.options.top,10)),"undefined"!=typeof a.options.height&&(c=parseInt(a.options.width,10)),"undefined"!=typeof a.options.height&&(d=parseInt(a.options.height,10)),0>f&&(f=0),f>a.width-1&&(f=a.width-1),0>e&&(e=0),e>a.height-1&&(e=a.height-1),1>c&&(c=1),f+c>a.width&&(c=a.width-f),1>d&&(d=1),e+d>a.height&&(d=a.height-e);var g=document.createElement("canvas");return g.width=a.width,g.height=a.height,g.getContext("2d").drawImage(a.canvas,0,0),a.canvas.width=c,a.canvas.height=d,a.canvas.getContext("2d").clearRect(0,0,c,d),a.canvas.getContext("2d").drawImage(g,f,e,c,d,0,0,c,d),a.useData=!1,!0}},checkSupport:function(){return Pixastic.Client.hasCanvas()}};