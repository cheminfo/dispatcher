CKEDITOR.plugins.add("onchange",{init:function(a){function b(){a.readOnly||c||(c=setTimeout(function(){c=0,a.fire("change")},a.config.minimumChangeMilliseconds||100))}var c,d,e=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;a.on("destroy",function(){c&&clearTimeout(c),c=null}),a.on("saveSnapshot",function(a){a.data&&a.data.contentOnly||b()});var f=a.getCommand("undo");f&&f.on("afterUndo",b);var g=a.getCommand("redo");g&&g.on("afterRedo",b),a.on("afterCommandExec",function(a){"source"!=a.data.name&&a.data.command.canUndo!==!1&&b()}),e&&(d=new e(function(){b()}),window.console&&window.console.log&&console.log("Detecting changes using MutationObservers")),a.on("contentDom",function(){if(d)var c=setInterval(function(){"object"==typeof a.document&&(d.observe(a.document.getBody().$,{attributes:!0,childList:!0,characterData:!0}),clearInterval(c))},100);a.document.on("keydown",function(a){if(!a.data.$.ctrlKey&&!a.data.$.metaKey){var c=a.data.$.keyCode;(8==c||13==c||32==c||c>=46&&90>=c||c>=96&&111>=c||c>=186&&222>=c||229==c)&&b()}}),a.document.on("drop",b),a.document.getBody().on("drop",b)}),a.on("mode",function(){if("source"==a.mode){var c=a.textarea||a._.editable;c.on("keydown",function(a){a.data.$.ctrlKey||a.data.$.metaKey||b()}),c.on("drop",b),c.on("input",b),CKEDITOR.env.ie&&(c.on("cut",b),c.on("paste",b))}})}});