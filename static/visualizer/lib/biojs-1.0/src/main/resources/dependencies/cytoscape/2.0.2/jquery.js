!function(a){var b={menuRadius:100,cytoscape:!0,selector:void 0,commands:[],fillColor:"rgba(0, 0, 0, 0.75)",activeFillColor:"rgba(92, 194, 237, 0.75)",activePadding:20,indicatorSize:30,indicatorColor:"black",separatorWidth:3,spotlightPadding:4,itemColor:"white",itemTextShadowColor:"black"};a.fn.cxtmenu=function(c){var d,e=a.extend(!0,{},b,c),f=c,g=a(this);g.cytoscape(function(){d=this});var h={destroy:function(){},init:function(){function b(a){a=void 0!==a?a:B,i.globalCompositeOperation="source-over",i.clearRect(0,0,l,l),i.fillStyle=e.fillColor,i.beginPath(),i.arc(j+e.activePadding,j+e.activePadding,j,0,2*Math.PI,!0),i.closePath(),i.fill(),i.globalCompositeOperation="destination-out",i.strokeStyle="white",i.lineWidth=e.separatorWidth;for(var b=e.commands,c=2*Math.PI/b.length,d=b.length%2!==0?Math.PI/2:0,f=d+c,g=0;g<b.length;g++){var h=(b[g],j*Math.cos(d)),k=j*Math.sin(d);i.beginPath(),i.moveTo(j+e.activePadding,j+e.activePadding),i.lineTo(j+e.activePadding+h,j+e.activePadding-k),i.closePath(),i.stroke(),d+=c,f+=c}i.fillStyle="white",i.globalCompositeOperation="destination-out",i.beginPath(),i.arc(j+e.activePadding,j+e.activePadding,a+e.spotlightPadding,0,2*Math.PI,!0),i.closePath(),i.fill(),i.globalCompositeOperation="source-over"}function c(a){var b=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,c=+new Date;clearTimeout(y),E||c>=C+D?(b(a),C=c,E=!1):y=setTimeout(function(){b(a),C=c},2*D)}var f=a('<div class="cxtmenu"></div>'),h=a("<canvas></canvas>"),i=h[0].getContext("2d"),j=e.menuRadius,k=g.offset(),l=2*(j+e.activePadding),m=void 0;g.append(f),f.append(h),f.css({width:l+"px",height:l+"px",position:"fixed",zIndex:999999,marginLeft:k.left-e.activePadding+"px",marginTop:k.top-e.activePadding+"px"}).hide(),h[0].width=l,h[0].height=l;for(var n=e.commands,o=2*Math.PI/n.length,p=n.length%2!==0?Math.PI/2:0,q=p+o,r=0;r<n.length;r++){var s=n[r],t=(p+q)/2,u=.66*j*Math.cos(t),v=.66*j*Math.sin(t),w=a('<div class="cxtmenu-item"></div>');w.css({color:e.itemColor,cursor:"default",display:"table","text-align":"center",position:"absolute","text-shadow":"-1px -1px "+e.itemTextShadowColor+", 1px -1px "+e.itemTextShadowColor+", -1px 1px "+e.itemTextShadowColor+", 1px 1px "+e.itemTextShadowColor,left:"50%",top:"50%","min-height":.66*j,width:.66*j,height:.66*j,marginLeft:u-.33*j,marginTop:-v-.33*j});var x=a('<div class="cxtmenu-content">'+s.content+"</div>");x.css({width:.66*j,height:.66*j,"vertical-align":"middle",display:"table-cell"}),f.append(w),w.append(x),p+=o,q+=o}var y,z,A,B,C=0,D=1e3/30,E=!0;d.on("cxttapstart",e.selector,function(){var c=this,d=c.renderedPosition(),e=c.renderedWidth(),g=c.renderedHeight(),h=a(window).scrollLeft(),i=a(window).scrollTop();z=d.x,A=d.y,f.show().css({left:d.x-j-h,top:d.y-j-i}),B=Math.max(e,g),B=32,b(),m=void 0}).on("cxtdrag",e.selector,function(a){c(function(){var c=a.originalEvent.pageX-g.offset().left-z,d=a.originalEvent.pageY-g.offset().top-A;0===c&&(c=.01);var f=Math.sqrt(c*c+d*d),h=(d*d-f*f-c*c)/(-2*f*c),k=Math.acos(h);if(m=void 0,f<B+e.spotlightPadding)return void b();b();var l=c*j/f,n=d*j/f;d>0&&(k=Math.PI+Math.abs(k-Math.PI));for(var o=e.commands,p=2*Math.PI/o.length,q=o.length%2!==0?Math.PI/2:0,r=q+p,s=0;s<o.length;s++){var t=(o[s],k>=q&&r>=k||q<=k+2*Math.PI&&k+2*Math.PI<=r);if(t){i.fillStyle=e.activeFillColor,i.strokeStyle="black",i.lineWidth=1,i.beginPath(),i.moveTo(j+e.activePadding,j+e.activePadding),i.arc(j+e.activePadding,j+e.activePadding,j+e.activePadding,2*Math.PI-q,2*Math.PI-r,!0),i.closePath(),i.fill(),m=s;break}q+=p,r+=p}i.fillStyle="white",i.globalCompositeOperation="destination-out",i.beginPath(),i.translate(j+e.activePadding+l/j*(B+e.spotlightPadding-e.indicatorSize/4),j+e.activePadding+n/j*(B+e.spotlightPadding-e.indicatorSize/4)),i.rotate(Math.PI/4-k),i.fillRect(-e.indicatorSize/2,-e.indicatorSize/2,e.indicatorSize,e.indicatorSize),i.closePath(),i.fill(),i.setTransform(1,0,0,1,0,0),i.beginPath(),i.arc(j+e.activePadding,j+e.activePadding,B+e.spotlightPadding,0,2*Math.PI,!0),i.closePath(),i.fill(),i.globalCompositeOperation="source-over"})}).on("cxttapend",e.selector,function(){var a=this;if(f.hide(),void 0!==m){var b=e.commands[m].select;b&&b.apply(a)}}).on("cxttapend",function(){f.hide()})}};return h[f]?h[f].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof f&&f?(a.error("No such function `"+f+"` for jquery.cxtmenu"),a(this)):h.init.apply(this,arguments)}}(jQuery),function(a){var b={menuRadius:100,cytoscape:!0,selector:void 0,commands:[],fillColor:"rgba(0, 0, 0, 0.75)",activeFillColor:"rgba(92, 194, 237, 0.75)",activePadding:20,indicatorSize:30,indicatorColor:"black",separatorWidth:3,spotlightPadding:4,itemColor:"white",itemTextShadowColor:"black"};a.fn.cxtmenu=function(c){var d,e=a.extend(!0,{},b,c),f=c,g=a(this);g.cytoscape(function(){d=this});var h={destroy:function(){},init:function(){function b(a){a=void 0!==a?a:B,i.globalCompositeOperation="source-over",i.clearRect(0,0,l,l),i.fillStyle=e.fillColor,i.beginPath(),i.arc(j+e.activePadding,j+e.activePadding,j,0,2*Math.PI,!0),i.closePath(),i.fill(),i.globalCompositeOperation="destination-out",i.strokeStyle="white",i.lineWidth=e.separatorWidth;for(var b=e.commands,c=2*Math.PI/b.length,d=b.length%2!==0?Math.PI/2:0,f=d+c,g=0;g<b.length;g++){var h=(b[g],j*Math.cos(d)),k=j*Math.sin(d);i.beginPath(),i.moveTo(j+e.activePadding,j+e.activePadding),i.lineTo(j+e.activePadding+h,j+e.activePadding-k),i.closePath(),i.stroke(),d+=c,f+=c}i.fillStyle="white",i.globalCompositeOperation="destination-out",i.beginPath(),i.arc(j+e.activePadding,j+e.activePadding,a+e.spotlightPadding,0,2*Math.PI,!0),i.closePath(),i.fill(),i.globalCompositeOperation="source-over"}function c(a){var b=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,c=+new Date;clearTimeout(y),E||c>=C+D?(b(a),C=c,E=!1):y=setTimeout(function(){b(a),C=c},2*D)}var f=a('<div class="cxtmenu"></div>'),h=a("<canvas></canvas>"),i=h[0].getContext("2d"),j=e.menuRadius,k=g.offset(),l=2*(j+e.activePadding),m=void 0;g.append(f),f.append(h),f.css({width:l+"px",height:l+"px",position:"fixed",zIndex:999999,marginLeft:k.left-e.activePadding+"px",marginTop:k.top-e.activePadding+"px"}).hide(),h[0].width=l,h[0].height=l;for(var n=e.commands,o=2*Math.PI/n.length,p=n.length%2!==0?Math.PI/2:0,q=p+o,r=0;r<n.length;r++){var s=n[r],t=(p+q)/2,u=.66*j*Math.cos(t),v=.66*j*Math.sin(t),w=a('<div class="cxtmenu-item"></div>');w.css({color:e.itemColor,cursor:"default",display:"table","text-align":"center",position:"absolute","text-shadow":"-1px -1px "+e.itemTextShadowColor+", 1px -1px "+e.itemTextShadowColor+", -1px 1px "+e.itemTextShadowColor+", 1px 1px "+e.itemTextShadowColor,left:"50%",top:"50%","min-height":.66*j,width:.66*j,height:.66*j,marginLeft:u-.33*j,marginTop:-v-.33*j});var x=a('<div class="cxtmenu-content">'+s.content+"</div>");x.css({width:.66*j,height:.66*j,"vertical-align":"middle",display:"table-cell"}),f.append(w),w.append(x),p+=o,q+=o}var y,z,A,B,C=0,D=1e3/30,E=!0;d.on("cxttapstart",e.selector,function(){var c=this,d=c.renderedPosition(),e=c.renderedWidth(),g=c.renderedHeight(),h=a(window).scrollLeft(),i=a(window).scrollTop();z=d.x,A=d.y,f.show().css({left:d.x-j-h,top:d.y-j-i}),B=Math.max(e,g),B=32,b(),m=void 0}).on("cxtdrag",e.selector,function(a){c(function(){var c=a.originalEvent.pageX-g.offset().left-z,d=a.originalEvent.pageY-g.offset().top-A;0===c&&(c=.01);var f=Math.sqrt(c*c+d*d),h=(d*d-f*f-c*c)/(-2*f*c),k=Math.acos(h);if(m=void 0,f<B+e.spotlightPadding)return void b();b();var l=c*j/f,n=d*j/f;d>0&&(k=Math.PI+Math.abs(k-Math.PI));for(var o=e.commands,p=2*Math.PI/o.length,q=o.length%2!==0?Math.PI/2:0,r=q+p,s=0;s<o.length;s++){var t=(o[s],k>=q&&r>=k||q<=k+2*Math.PI&&k+2*Math.PI<=r);if(t){i.fillStyle=e.activeFillColor,i.strokeStyle="black",i.lineWidth=1,i.beginPath(),i.moveTo(j+e.activePadding,j+e.activePadding),i.arc(j+e.activePadding,j+e.activePadding,j+e.activePadding,2*Math.PI-q,2*Math.PI-r,!0),i.closePath(),i.fill(),m=s;break}q+=p,r+=p}i.fillStyle="white",i.globalCompositeOperation="destination-out",i.beginPath(),i.translate(j+e.activePadding+l/j*(B+e.spotlightPadding-e.indicatorSize/4),j+e.activePadding+n/j*(B+e.spotlightPadding-e.indicatorSize/4)),i.rotate(Math.PI/4-k),i.fillRect(-e.indicatorSize/2,-e.indicatorSize/2,e.indicatorSize,e.indicatorSize),i.closePath(),i.fill(),i.setTransform(1,0,0,1,0,0),i.beginPath(),i.arc(j+e.activePadding,j+e.activePadding,B+e.spotlightPadding,0,2*Math.PI,!0),i.closePath(),i.fill(),i.globalCompositeOperation="source-over"})}).on("cxttapend",e.selector,function(){var a=this;if(f.hide(),void 0!==m){var b=e.commands[m].select;b&&b.apply(a)}}).on("cxttapend",function(){f.hide()})}};return h[f]?h[f].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof f&&f?(a.error("No such function `"+f+"` for jquery.cxtmenu"),a(this)):h.init.apply(this,arguments)}}(jQuery),function(a){var b={preview:!0,handleSize:10,handleColor:"#ff0000",handleLineWidth:1,hoverDelay:150,enabled:!0,lineType:"draw",edgeType:function(){return"node"},loopAllowed:function(){return!1},nodeParams:function(){return{}},edgeParams:function(){return{}},start:function(){},complete:function(){},stop:function(){}};a.fn.cytoscapeEdgehandles=function(c){var d=c,e={destroy:function(){var b=a(this),c=b.data("cyedgehandles");return null!=c?(c.unbind(),b.data("cyedgehandles",{}),b):void 0},option:function(c,d){var e=a(this),f=e.data("cyedgehandles");if(null!=f){var g=f.options;if(void 0===d){if(typeof c!=typeof{})return g[c];var h=c;g=a.extend(!0,{},b,h),f.options=g}else g[c]=d;return e.data("cyedgehandles",f),e}},disable:function(){return e.option.apply(this,["enabled",!1])},enable:function(){return e.option.apply(this,["enabled",!0])},init:function(){function d(){y.attr("height",x.height()).attr("width",x.width()).css({position:"absolute","z-index":"999"})}function e(){return x.data("cyedgehandles").options}function f(){return e().enabled}function g(){return!f()}function h(){if(!C){var a=x.width(),b=x.height();D.clearRect(0,0,a,b),C=!0}}function i(){F=q.panningEnabled(),G=q.zoomingEnabled(),H=q.boxSelectionEnabled(),q.zoomingEnabled(!1).panningEnabled(!1).boxSelectionEnabled(!1)}function j(){q.zoomingEnabled(G).panningEnabled(F).boxSelectionEnabled(H)}function k(){h(),q.nodes().removeClass("ui-cytoscape-edgehandles-hover").removeClass("ui-cytoscape-edgehandles-source").removeClass("ui-cytoscape-edgehandles-target"),r=null,j()}function l(a,b){p(!0),b.trigger("cyedgehandles.addpreview")}function m(a,b){a.edgesWith(b).filter(".ui-cytoscape-edgehandles-preview").remove(),b.neighborhood("node.ui-cytoscape-edgehandles-preview").closedNeighborhood(".ui-cytoscape-edgehandles-preview").remove(),b.trigger("cyedgehandles.removepreview")}function n(a,b,c){D.fillStyle=e().handleColor,D.strokeStyle=e().handleColor,D.beginPath(),D.arc(a,b,c,0,2*Math.PI),D.closePath(),D.fill(),C=!1}function o(a,b,c,d){switch(D.fillStyle=e().handleColor,D.strokeStyle=e().handleColor,D.lineWidth=e().handleLineWidth,e().lineType){case"straight":D.beginPath(),D.moveTo(a,b),D.lineTo(c,d),D.closePath(),D.stroke();break;case"draw":default:null==r?r=[[c,d]]:r.push([c,d]),D.beginPath(),D.moveTo(a,b);for(var f=0;f<r.length;f++){var g=r[f];D.lineTo(g[0],g[1])}D.stroke()}C=!1}function p(b,c,d){var f=c?c:q.nodes(".ui-cytoscape-edgehandles-source"),g=d?d:q.nodes(".ui-cytoscape-edgehandles-target"),h=b?"ui-cytoscape-edgehandles-preview":"",i=q.collection();if(0!==f.size()&&0!==g.size()){if(!c&&!d){if(!b&&e().preview)return i=q.elements(".ui-cytoscape-edgehandles-preview").removeClass("ui-cytoscape-edgehandles-preview"),e().complete(f,g,i),void f.trigger("cyedgehandles.complete");q.elements(".ui-cytoscape-edgehandles-preview").remove()}for(var j=0;j<g.length;j++){var k=g[j];switch(e().edgeType(f,k)){case"node":var l=f.position(),m=k.position(),n={x:(l.x+m.x)/2,y:(l.y+m.y)/2},o=q.add(a.extend(!0,{group:"nodes",position:n},e().nodeParams(f,k))).addClass(h),p=q.add(a.extend(!0,{group:"edges",data:{source:f.id(),target:o.id()}},e().edgeParams(f,k))).addClass(h),r=q.add(a.extend(!0,{group:"edges",data:{source:o.id(),target:k.id()}},e().edgeParams(f,k))).addClass(h);i=i.add(o).add(p).add(r);break;case"flat":var s=q.add(a.extend(!0,{group:"edges",data:{source:f.id(),target:k.id()}},e().edgeParams(f,k))).addClass(h);i=i.add(s);break;default:k.removeClass("ui-cytoscape-edgehandles-target")}}b||(e().complete(f,g,i),f.trigger("cyedgehandles.complete"))}}var q,r,s,t,u,v,w=a.extend(!0,{},b,c),x=a(this),y=a("<canvas></canvas>"),z=!1,A=!1,B=!1,C=!0;x.append(y),d(),a(window).bind("resize",function(){d()});var D=y[0].getContext("2d"),E=x.data("cyedgehandles");null==E&&(E={}),E.options=w;var F,G,H;x.cytoscape(function(){q=this,F=q.panningEnabled(),G=q.zoomingEnabled(),H=q.boxSelectionEnabled();var b,c;q.bind("zoom pan",c=function(){h()});var d,f,j,r,w,y,C,D,I;q.on("mouseover","node",f=function(){function c(b){function d(){if(z&&!B){{a(this)}z=!1,a(window).unbind("mousemove",f),p(),k(),e().stop(j),j.trigger("cyedgehandles.stop")}}x[0].removeEventListener("mousedown",c,!0);var g=b.pageX-x.offset().left,h=b.pageY-x.offset().top;return 0!==b.button||Math.abs(g-s)>u||Math.abs(h-t)>u||B?void 0:(z=!0,b.preventDefault(),b.stopPropagation(),j.addClass("ui-cytoscape-edgehandles-source"),j.trigger("cyedgehandles.start"),a(window).one("mouseup blur",d).bind("mousemove",f),i(),e().start(j),!1)}function f(a){var b=a.pageX-x.offset().left,c=a.pageY-x.offset().top;return h(),n(s,t,u),o(s,t,b,c),!1}if(!(g()||z||A||this.hasClass("ui-cytoscape-edgehandles-preview")||B)){d&&x[0].removeEventListener("mousedown",d,!0);var j=this,l=j.renderedPosition(),m=j.renderedOuterHeight();b=j.id(),h(),u=e().handleSize/2*q.zoom(),s=l.x,t=l.y-m/2-u/2,n(s,t,u),j.trigger("cyedgehandles.showhandle"),x[0].addEventListener("mousedown",c,!0),d=c}}).on("mouseover touchover","node",j=function(){var a=this,b=this;return g()||this.hasClass("ui-cytoscape-edgehandles-preview")?void 0:z?(clearTimeout(v),v=setTimeout(function(){var c=q.nodes(".ui-cytoscape-edgehandles-source"),d=a.hasClass("ui-cytoscape-edgehandles-source"),f=e().loopAllowed(a);(!d||d&&f)&&(a.addClass("ui-cytoscape-edgehandles-hover"),a.toggleClass("ui-cytoscape-edgehandles-target"),e().preview&&(a.hasClass("ui-cytoscape-edgehandles-target")?l(c,b):m(c,b)))},e().hoverDelay),!1):void 0}).on("mouseout","node",r=function(){this.hasClass("ui-cytoscape-edgehandles-hover")&&this.removeClass("ui-cytoscape-edgehandles-hover"),z&&clearTimeout(v)}).on("drag position","node",C=function(){setTimeout(h,50)}).on("grab","node",grabHandler=function(){A=!0,setTimeout(function(){h()},5)}).on("free","node",y=function(){A=!1}).on("cyedgehandles.forcestart","node",D=function(){B=!0,h();var c=this,d=c;b=c.id(),c.trigger("cyedgehandles.start"),c.addClass("ui-cytoscape-edgehandles-source");var f=c.renderedPosition(),g=c.renderedOuterHeight(),j=c.renderedOuterWidth(),l=e().handleSize/2*q.zoom(),m=f.x,r=f.y-g/2-l/2;n(m,r,l),c.trigger("cyedgehandles.showhandle");var s=function(b){x[0].removeEventListener("mousedown",s,!0),x[0].removeEventListener("touchstart",s,!0);var d=(void 0!==b.pageX?b.pageX:b.originalEvent.touches[0].pageX)-x.offset().left,v=(void 0!==b.pageY?b.pageY:b.originalEvent.touches[0].pageY)-x.offset().top,w=l/2,y=f.x-j/2-w<=d&&d<=f.x+j/2+w&&f.y-g/2-w<=v&&v<=f.y+g/2+w;if(y){i(),z=!0;var A=function(a){var b=(void 0!==a.pageX?a.pageX:a.originalEvent.touches[0].pageX)-x.offset().left,c=(void 0!==a.pageY?a.pageY:a.originalEvent.touches[0].pageY)-x.offset().top;h(),n(m,r,l),o(m,r,b,c)};return x[0].addEventListener("mousemove",A,!0),x[0].addEventListener("touchmove",A,!0),a(window).one("mouseup touchend blur",function(){x[0].removeEventListener("mousemove",A,!0),x[0].removeEventListener("touchmove",A,!0),B=!1,z=!1,p(),e().stop(c),c.trigger("cyedgehandles.stop"),q.off("tap","node",u),c.off("remove",t),k()}),b.stopPropagation(),b.preventDefault(),!1}};x[0].addEventListener("mousedown",s,!0),x[0].addEventListener("touchstart",s,!0);var t;c.one("remove",function(){x[0].removeEventListener("mousedown",s,!0),x[0].removeEventListener("touchstart",s,!0),q.off("tap","node",u)});var u;q.one("tap","node",u=function(){var a=this,b=d.id()===a.id(),f=e().loopAllowed(a);(!b||b&&f)&&p(!1,d,a),B=!1,e().stop(c),c.trigger("cyedgehandles.stop"),x[0].removeEventListener("mousedown",s,!0),x[0].removeEventListener("touchstart",s,!0),c.off("remove",t),k()})}).on("remove","node",I=function(){var a=this.id();a===b&&setTimeout(function(){k()},5)}),E.unbind=function(){q.off("mouseover","node",f).off("mouseover","node",j).off("mouseout","node",r).off("drag position","node",C).off("grab","node",w).off("free","node",y).off("cyedgehandles.forcestart","node",D).off("remove","node",I),q.unbind("zoom pan",c)}}),x.data("cyedgehandles",E)},start:function(b){$container=a(this),$container.cytoscape(function(){var a=this;a.$("#"+b).trigger("cyedgehandles.forcestart")})}};return e[d]?e[d].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof d&&d?(a.error("No such function `"+d+"` for jquery.cytoscapeEdgeHandles"),a(this)):e.init.apply(this,arguments)},a.fn.cyEdgehandles=a.fn.cytoscapeEdgehandles}(jQuery),function(a){var b={preview:!0,handleSize:10,handleColor:"#ff0000",handleLineWidth:1,hoverDelay:150,enabled:!0,lineType:"draw",edgeType:function(){return"node"},loopAllowed:function(){return!1},nodeParams:function(){return{}},edgeParams:function(){return{}},start:function(){},complete:function(){},stop:function(){}};a.fn.cytoscapeEdgehandles=function(c){var d=c,e={destroy:function(){var b=a(this),c=b.data("cyedgehandles");return null!=c?(c.unbind(),b.data("cyedgehandles",{}),b):void 0},option:function(c,d){var e=a(this),f=e.data("cyedgehandles");if(null!=f){var g=f.options;if(void 0===d){if(typeof c!=typeof{})return g[c];var h=c;g=a.extend(!0,{},b,h),f.options=g}else g[c]=d;return e.data("cyedgehandles",f),e}},disable:function(){return e.option.apply(this,["enabled",!1])},enable:function(){return e.option.apply(this,["enabled",!0])},init:function(){function d(){y.attr("height",x.height()).attr("width",x.width()).css({position:"absolute","z-index":"999"})}function e(){return x.data("cyedgehandles").options}function f(){return e().enabled}function g(){return!f()}function h(){if(!C){var a=x.width(),b=x.height();D.clearRect(0,0,a,b),C=!0}}function i(){F=q.panningEnabled(),G=q.zoomingEnabled(),H=q.boxSelectionEnabled(),q.zoomingEnabled(!1).panningEnabled(!1).boxSelectionEnabled(!1)}function j(){q.zoomingEnabled(G).panningEnabled(F).boxSelectionEnabled(H)}function k(){h(),q.nodes().removeClass("ui-cytoscape-edgehandles-hover").removeClass("ui-cytoscape-edgehandles-source").removeClass("ui-cytoscape-edgehandles-target"),r=null,j()}function l(a,b){p(!0),b.trigger("cyedgehandles.addpreview")}function m(a,b){a.edgesWith(b).filter(".ui-cytoscape-edgehandles-preview").remove(),b.neighborhood("node.ui-cytoscape-edgehandles-preview").closedNeighborhood(".ui-cytoscape-edgehandles-preview").remove(),b.trigger("cyedgehandles.removepreview")}function n(a,b,c){D.fillStyle=e().handleColor,D.strokeStyle=e().handleColor,D.beginPath(),D.arc(a,b,c,0,2*Math.PI),D.closePath(),D.fill(),C=!1}function o(a,b,c,d){switch(D.fillStyle=e().handleColor,D.strokeStyle=e().handleColor,D.lineWidth=e().handleLineWidth,e().lineType){case"straight":D.beginPath(),D.moveTo(a,b),D.lineTo(c,d),D.closePath(),D.stroke();break;case"draw":default:null==r?r=[[c,d]]:r.push([c,d]),D.beginPath(),D.moveTo(a,b);for(var f=0;f<r.length;f++){var g=r[f];D.lineTo(g[0],g[1])}D.stroke()}C=!1}function p(b,c,d){var f=c?c:q.nodes(".ui-cytoscape-edgehandles-source"),g=d?d:q.nodes(".ui-cytoscape-edgehandles-target"),h=b?"ui-cytoscape-edgehandles-preview":"",i=q.collection();if(0!==f.size()&&0!==g.size()){if(!c&&!d){if(!b&&e().preview)return i=q.elements(".ui-cytoscape-edgehandles-preview").removeClass("ui-cytoscape-edgehandles-preview"),e().complete(f,g,i),void f.trigger("cyedgehandles.complete");q.elements(".ui-cytoscape-edgehandles-preview").remove()}for(var j=0;j<g.length;j++){var k=g[j];switch(e().edgeType(f,k)){case"node":var l=f.position(),m=k.position(),n={x:(l.x+m.x)/2,y:(l.y+m.y)/2},o=q.add(a.extend(!0,{group:"nodes",position:n},e().nodeParams(f,k))).addClass(h),p=q.add(a.extend(!0,{group:"edges",data:{source:f.id(),target:o.id()}},e().edgeParams(f,k))).addClass(h),r=q.add(a.extend(!0,{group:"edges",data:{source:o.id(),target:k.id()}},e().edgeParams(f,k))).addClass(h);i=i.add(o).add(p).add(r);break;case"flat":var s=q.add(a.extend(!0,{group:"edges",data:{source:f.id(),target:k.id()}},e().edgeParams(f,k))).addClass(h);i=i.add(s);break;default:k.removeClass("ui-cytoscape-edgehandles-target")}}b||(e().complete(f,g,i),f.trigger("cyedgehandles.complete"))}}var q,r,s,t,u,v,w=a.extend(!0,{},b,c),x=a(this),y=a("<canvas></canvas>"),z=!1,A=!1,B=!1,C=!0;x.append(y),d(),a(window).bind("resize",function(){d()});var D=y[0].getContext("2d"),E=x.data("cyedgehandles");null==E&&(E={}),E.options=w;var F,G,H;x.cytoscape(function(){q=this,F=q.panningEnabled(),G=q.zoomingEnabled(),H=q.boxSelectionEnabled();var b,c;q.bind("zoom pan",c=function(){h()});var d,f,j,r,w,y,C,D,I;q.on("mouseover","node",f=function(){function c(b){function d(){if(z&&!B){{a(this)}z=!1,a(window).unbind("mousemove",f),p(),k(),e().stop(j),j.trigger("cyedgehandles.stop")}}x[0].removeEventListener("mousedown",c,!0);var g=b.pageX-x.offset().left,h=b.pageY-x.offset().top;return 0!==b.button||Math.abs(g-s)>u||Math.abs(h-t)>u||B?void 0:(z=!0,b.preventDefault(),b.stopPropagation(),j.addClass("ui-cytoscape-edgehandles-source"),j.trigger("cyedgehandles.start"),a(window).one("mouseup blur",d).bind("mousemove",f),i(),e().start(j),!1)}function f(a){var b=a.pageX-x.offset().left,c=a.pageY-x.offset().top;return h(),n(s,t,u),o(s,t,b,c),!1}if(!(g()||z||A||this.hasClass("ui-cytoscape-edgehandles-preview")||B)){d&&x[0].removeEventListener("mousedown",d,!0);var j=this,l=j.renderedPosition(),m=j.renderedOuterHeight();b=j.id(),h(),u=e().handleSize/2*q.zoom(),s=l.x,t=l.y-m/2-u/2,n(s,t,u),j.trigger("cyedgehandles.showhandle"),x[0].addEventListener("mousedown",c,!0),d=c}}).on("mouseover touchover","node",j=function(){var a=this,b=this;return g()||this.hasClass("ui-cytoscape-edgehandles-preview")?void 0:z?(clearTimeout(v),v=setTimeout(function(){var c=q.nodes(".ui-cytoscape-edgehandles-source"),d=a.hasClass("ui-cytoscape-edgehandles-source"),f=e().loopAllowed(a);(!d||d&&f)&&(a.addClass("ui-cytoscape-edgehandles-hover"),a.toggleClass("ui-cytoscape-edgehandles-target"),e().preview&&(a.hasClass("ui-cytoscape-edgehandles-target")?l(c,b):m(c,b)))},e().hoverDelay),!1):void 0}).on("mouseout","node",r=function(){this.hasClass("ui-cytoscape-edgehandles-hover")&&this.removeClass("ui-cytoscape-edgehandles-hover"),z&&clearTimeout(v)}).on("drag position","node",C=function(){setTimeout(h,50)}).on("grab","node",grabHandler=function(){A=!0,setTimeout(function(){h()},5)}).on("free","node",y=function(){A=!1}).on("cyedgehandles.forcestart","node",D=function(){B=!0,h();var c=this,d=c;b=c.id(),c.trigger("cyedgehandles.start"),c.addClass("ui-cytoscape-edgehandles-source");var f=c.renderedPosition(),g=c.renderedOuterHeight(),j=c.renderedOuterWidth(),l=e().handleSize/2*q.zoom(),m=f.x,r=f.y-g/2-l/2;n(m,r,l),c.trigger("cyedgehandles.showhandle");var s=function(b){x[0].removeEventListener("mousedown",s,!0),x[0].removeEventListener("touchstart",s,!0);var d=(void 0!==b.pageX?b.pageX:b.originalEvent.touches[0].pageX)-x.offset().left,v=(void 0!==b.pageY?b.pageY:b.originalEvent.touches[0].pageY)-x.offset().top,w=l/2,y=f.x-j/2-w<=d&&d<=f.x+j/2+w&&f.y-g/2-w<=v&&v<=f.y+g/2+w;if(y){i(),z=!0;var A=function(a){var b=(void 0!==a.pageX?a.pageX:a.originalEvent.touches[0].pageX)-x.offset().left,c=(void 0!==a.pageY?a.pageY:a.originalEvent.touches[0].pageY)-x.offset().top;h(),n(m,r,l),o(m,r,b,c)};return x[0].addEventListener("mousemove",A,!0),x[0].addEventListener("touchmove",A,!0),a(window).one("mouseup touchend blur",function(){x[0].removeEventListener("mousemove",A,!0),x[0].removeEventListener("touchmove",A,!0),B=!1,z=!1,p(),e().stop(c),c.trigger("cyedgehandles.stop"),q.off("tap","node",u),c.off("remove",t),k()}),b.stopPropagation(),b.preventDefault(),!1}};x[0].addEventListener("mousedown",s,!0),x[0].addEventListener("touchstart",s,!0);var t;c.one("remove",function(){x[0].removeEventListener("mousedown",s,!0),x[0].removeEventListener("touchstart",s,!0),q.off("tap","node",u)});var u;q.one("tap","node",u=function(){var a=this,b=d.id()===a.id(),f=e().loopAllowed(a);(!b||b&&f)&&p(!1,d,a),B=!1,e().stop(c),c.trigger("cyedgehandles.stop"),x[0].removeEventListener("mousedown",s,!0),x[0].removeEventListener("touchstart",s,!0),c.off("remove",t),k()})}).on("remove","node",I=function(){var a=this.id();a===b&&setTimeout(function(){k()},5)}),E.unbind=function(){q.off("mouseover","node",f).off("mouseover","node",j).off("mouseout","node",r).off("drag position","node",C).off("grab","node",w).off("free","node",y).off("cyedgehandles.forcestart","node",D).off("remove","node",I),q.unbind("zoom pan",c)}}),x.data("cyedgehandles",E)},start:function(b){$container=a(this),$container.cytoscape(function(){var a=this;a.$("#"+b).trigger("cyedgehandles.forcestart")})}};return e[d]?e[d].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof d&&d?(a.error("No such function `"+d+"` for jquery.cytoscapeEdgeHandles"),a(this)):e.init.apply(this,arguments)},a.fn.cyEdgehandles=a.fn.cytoscapeEdgehandles}(jQuery),function(a){var b={zoomFactor:.05,zoomDelay:45,minZoom:.1,maxZoom:10,fitPadding:50,panSpeed:10,panDistance:10,panDragAreaSize:75,panMinPercentSpeed:.25,panInactiveArea:8,panIndicatorMinOpacity:.5,autodisableForMobile:!0,sliderHandleIcon:"icon-minus",zoomInIcon:"icon-plus",zoomOutIcon:"icon-minus",resetIcon:"icon-resize-full"};a.fn.cytoscapePanzoom=function(c){var d=a.extend(!0,{},b,c),e=c,f={destroy:function(){var b=a(this);b.find(".ui-cytoscape-panzoom").remove()},init:function(){var b="ontouchstart"in window;return b&&d.autodisableForMobile?a(this):a(this).each(function(){function b(a){var b={x:a.originalEvent.pageX-u.offset().left-u.width()/2,y:a.originalEvent.pageY-u.offset().top-u.height()/2},c=d.panDragAreaSize,e=Math.sqrt(b.x*b.x+b.y*b.y),f=Math.min(e/c,1);if(e<d.panInactiveArea)return{x:0/0,y:0/0};b={x:b.x/e,y:b.y/e},f=Math.max(d.panMinPercentSpeed,f);var g={x:-1*b.x*f*d.panDistance,y:-1*b.y*f*d.panDistance};return g}function c(){clearInterval(D),a(window).unbind("mousemove",F),A.hide()}function e(a){var b=a,c=Math.sqrt(b.x*b.x+b.y*b.y),e={x:-1*b.x/c,y:-1*b.y/c},f=u.width(),g=u.height(),h=c/d.panDistance,i=Math.max(d.panIndicatorMinOpacity,h),j=255-Math.round(255*i);A.show().css({left:f/2*e.x+f/2,top:g/2*e.y+g/2,background:"rgb("+j+", "+j+", "+j+")"})}function f(){{var a=m.cytoscape("get");a.pan(),a.zoom()}B=m.width()/2,C=m.height()/2}function g(){E=!0,f()}function h(){E=!1}function i(a){var b=m.cytoscape("get");E||f(),b.zoom({level:a,position:{x:B,y:C}})}function j(a,b){void 0===b&&(b=0);var c=J,e=0+c,f=r.height()-s.height()-2*c,g=a.pageY-r.offset().top-b;e>g&&(g=e),g>f&&(g=f);var h=1-(g-e)/(f-e);s.css("top",g);var j=d.minZoom,k=d.maxZoom,l=Math.log(j)/Math.log(k),m=(1-l)*h+l,n=Math.pow(k,m);j>n?n=j:n>k&&(n=k),i(n)}function k(){var a=m.cytoscape("get"),b=a.zoom(),c=d.minZoom,e=d.maxZoom,f=Math.log(c)/Math.log(e),g=Math.log(b)/Math.log(e),h=1-(g-f)/(1-f),i=J,j=r.height()-s.height()-2*J,k=h*(j-i);i>k&&(k=i),k>j&&(k=j),s.css("top",k)}function l(b,c){var e;b.bind("mousedown",function(a){if(a.preventDefault(),a.stopPropagation(),0==a.button){var b=m.cytoscape("get");return g(),e=setInterval(function(){var a=b.zoom(),e=b.zoom()*c;e<d.minZoom&&(e=d.minZoom),e>d.maxZoom&&(e=d.maxZoom),e==d.maxZoom&&a==d.maxZoom||e==d.minZoom&&a==d.minZoom||i(e)},d.zoomDelay),!1}}),a(window).bind("mouseup blur",function(){clearInterval(e),h()})}var m=a(this),n=a('<div class="ui-cytoscape-panzoom"></div>');m.append(n),d.staticPosition&&n.addClass("ui-cytoscape-panzoom-static");var o=a('<div class="ui-cytoscape-panzoom-zoom-in ui-cytoscape-panzoom-zoom-button"><span class="icon '+d.zoomInIcon+'"></span></div>');n.append(o);var p=a('<div class="ui-cytoscape-panzoom-zoom-out ui-cytoscape-panzoom-zoom-button"><span class="icon '+d.zoomOutIcon+'"></span></div>');n.append(p);var q=a('<div class="ui-cytoscape-panzoom-reset ui-cytoscape-panzoom-zoom-button"><span class="icon '+d.resetIcon+'"></span></div>');n.append(q);var r=a('<div class="ui-cytoscape-panzoom-slider"></div>');n.append(r),r.append('<div class="ui-cytoscape-panzoom-slider-background"></div>');var s=a('<div class="ui-cytoscape-panzoom-slider-handle"><span class="icon '+d.sliderHandleIcon+'"></span></div>');r.append(s);var t=a('<div class="ui-cytoscape-panzoom-no-zoom-tick"></div>');r.append(t);var u=a('<div class="ui-cytoscape-panzoom-panner"></div>');n.append(u);var v=a('<div class="ui-cytoscape-panzoom-panner-handle"></div>');u.append(v);var w=a('<div class="ui-cytoscape-panzoom-pan-up ui-cytoscape-panzoom-pan-button"></div>'),x=a('<div class="ui-cytoscape-panzoom-pan-down ui-cytoscape-panzoom-pan-button"></div>'),y=a('<div class="ui-cytoscape-panzoom-pan-left ui-cytoscape-panzoom-pan-button"></div>'),z=a('<div class="ui-cytoscape-panzoom-pan-right ui-cytoscape-panzoom-pan-button"></div>');u.append(w).append(x).append(y).append(z);var A=a('<div class="ui-cytoscape-panzoom-pan-indicator"></div>');u.append(A);var B,C,D,E=!1,F=function(a){a.stopPropagation(),a.preventDefault(),clearInterval(D);var c=b(a);return isNaN(c.x)||isNaN(c.y)?void A.hide():(e(c),void(D=setInterval(function(){m.cytoscape("get").panBy(c)},d.panSpeed)))};v.bind("mousedown",function(b){F(b),a(window).bind("mousemove",F)}),v.bind("mouseup",function(){c()}),a(window).bind("mouseup blur",function(){c()}),r.bind("mousedown",function(){return!1});var G,H,I=!1,J=2;s.bind("mousedown",G=function(b){var c=b.target===s[0]?b.offsetY:0;I=!0,g(),s.addClass("active");var d=0;return a(window).bind("mousemove",H=function(a){var b=+new Date;return b>d+10?(d=b,j(a,c),!1):!1}),a(window).bind("mouseup",function(){a(window).unbind("mousemove",H),I=!1,s.removeClass("active"),h()}),!1}),r.bind("mousedown",function(a){a.target!==s[0]&&(G(a),j(a))}),k();var K=m.cytoscape("get");K.on("zoom",function(){I||k()}),function(){var a=1,b=d.minZoom,c=d.maxZoom,e=Math.log(b)/Math.log(c),f=Math.log(a)/Math.log(c),g=1-(f-e)/(1-e);if(g>1||0>g)return void t.hide();var h=J,i=r.height()-s.height()-2*J,j=g*(i-h);h>j&&(j=h),j>i&&(j=i),t.css("top",j)}(),l(o,1+d.zoomFactor),l(p,1-d.zoomFactor),q.bind("mousedown",function(a){if(0==a.button){var b=m.cytoscape("get");return 0===b.elements().size()?b.reset():b.fit(d.fitPadding),!1}})})}};return f[e]?f[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?(a.error("No such function `"+e+"` for jquery.cytoscapePanzoom"),a(this)):f.init.apply(this,arguments)},a.fn.cyPanzoom=a.fn.cytoscapePanzoom}(jQuery),function(a){var b={zoomFactor:.05,zoomDelay:45,minZoom:.1,maxZoom:10,fitPadding:50,panSpeed:10,panDistance:10,panDragAreaSize:75,panMinPercentSpeed:.25,panInactiveArea:8,panIndicatorMinOpacity:.5,autodisableForMobile:!0,sliderHandleIcon:"icon-minus",zoomInIcon:"icon-plus",zoomOutIcon:"icon-minus",resetIcon:"icon-resize-full"};a.fn.cytoscapePanzoom=function(c){var d=a.extend(!0,{},b,c),e=c,f={destroy:function(){var b=a(this);b.find(".ui-cytoscape-panzoom").remove()},init:function(){var b="ontouchstart"in window;return b&&d.autodisableForMobile?a(this):a(this).each(function(){function b(a){var b={x:a.originalEvent.pageX-u.offset().left-u.width()/2,y:a.originalEvent.pageY-u.offset().top-u.height()/2},c=d.panDragAreaSize,e=Math.sqrt(b.x*b.x+b.y*b.y),f=Math.min(e/c,1);if(e<d.panInactiveArea)return{x:0/0,y:0/0};b={x:b.x/e,y:b.y/e},f=Math.max(d.panMinPercentSpeed,f);var g={x:-1*b.x*f*d.panDistance,y:-1*b.y*f*d.panDistance};return g}function c(){clearInterval(D),a(window).unbind("mousemove",F),A.hide()}function e(a){var b=a,c=Math.sqrt(b.x*b.x+b.y*b.y),e={x:-1*b.x/c,y:-1*b.y/c},f=u.width(),g=u.height(),h=c/d.panDistance,i=Math.max(d.panIndicatorMinOpacity,h),j=255-Math.round(255*i);
A.show().css({left:f/2*e.x+f/2,top:g/2*e.y+g/2,background:"rgb("+j+", "+j+", "+j+")"})}function f(){{var a=m.cytoscape("get");a.pan(),a.zoom()}B=m.width()/2,C=m.height()/2}function g(){E=!0,f()}function h(){E=!1}function i(a){var b=m.cytoscape("get");E||f(),b.zoom({level:a,position:{x:B,y:C}})}function j(a,b){void 0===b&&(b=0);var c=J,e=0+c,f=r.height()-s.height()-2*c,g=a.pageY-r.offset().top-b;e>g&&(g=e),g>f&&(g=f);var h=1-(g-e)/(f-e);s.css("top",g);var j=d.minZoom,k=d.maxZoom,l=Math.log(j)/Math.log(k),m=(1-l)*h+l,n=Math.pow(k,m);j>n?n=j:n>k&&(n=k),i(n)}function k(){var a=m.cytoscape("get"),b=a.zoom(),c=d.minZoom,e=d.maxZoom,f=Math.log(c)/Math.log(e),g=Math.log(b)/Math.log(e),h=1-(g-f)/(1-f),i=J,j=r.height()-s.height()-2*J,k=h*(j-i);i>k&&(k=i),k>j&&(k=j),s.css("top",k)}function l(b,c){var e;b.bind("mousedown",function(a){if(a.preventDefault(),a.stopPropagation(),0==a.button){var b=m.cytoscape("get");return g(),e=setInterval(function(){var a=b.zoom(),e=b.zoom()*c;e<d.minZoom&&(e=d.minZoom),e>d.maxZoom&&(e=d.maxZoom),e==d.maxZoom&&a==d.maxZoom||e==d.minZoom&&a==d.minZoom||i(e)},d.zoomDelay),!1}}),a(window).bind("mouseup blur",function(){clearInterval(e),h()})}var m=a(this),n=a('<div class="ui-cytoscape-panzoom"></div>');m.append(n),d.staticPosition&&n.addClass("ui-cytoscape-panzoom-static");var o=a('<div class="ui-cytoscape-panzoom-zoom-in ui-cytoscape-panzoom-zoom-button"><span class="icon '+d.zoomInIcon+'"></span></div>');n.append(o);var p=a('<div class="ui-cytoscape-panzoom-zoom-out ui-cytoscape-panzoom-zoom-button"><span class="icon '+d.zoomOutIcon+'"></span></div>');n.append(p);var q=a('<div class="ui-cytoscape-panzoom-reset ui-cytoscape-panzoom-zoom-button"><span class="icon '+d.resetIcon+'"></span></div>');n.append(q);var r=a('<div class="ui-cytoscape-panzoom-slider"></div>');n.append(r),r.append('<div class="ui-cytoscape-panzoom-slider-background"></div>');var s=a('<div class="ui-cytoscape-panzoom-slider-handle"><span class="icon '+d.sliderHandleIcon+'"></span></div>');r.append(s);var t=a('<div class="ui-cytoscape-panzoom-no-zoom-tick"></div>');r.append(t);var u=a('<div class="ui-cytoscape-panzoom-panner"></div>');n.append(u);var v=a('<div class="ui-cytoscape-panzoom-panner-handle"></div>');u.append(v);var w=a('<div class="ui-cytoscape-panzoom-pan-up ui-cytoscape-panzoom-pan-button"></div>'),x=a('<div class="ui-cytoscape-panzoom-pan-down ui-cytoscape-panzoom-pan-button"></div>'),y=a('<div class="ui-cytoscape-panzoom-pan-left ui-cytoscape-panzoom-pan-button"></div>'),z=a('<div class="ui-cytoscape-panzoom-pan-right ui-cytoscape-panzoom-pan-button"></div>');u.append(w).append(x).append(y).append(z);var A=a('<div class="ui-cytoscape-panzoom-pan-indicator"></div>');u.append(A);var B,C,D,E=!1,F=function(a){a.stopPropagation(),a.preventDefault(),clearInterval(D);var c=b(a);return isNaN(c.x)||isNaN(c.y)?void A.hide():(e(c),void(D=setInterval(function(){m.cytoscape("get").panBy(c)},d.panSpeed)))};v.bind("mousedown",function(b){F(b),a(window).bind("mousemove",F)}),v.bind("mouseup",function(){c()}),a(window).bind("mouseup blur",function(){c()}),r.bind("mousedown",function(){return!1});var G,H,I=!1,J=2;s.bind("mousedown",G=function(b){var c=b.target===s[0]?b.offsetY:0;I=!0,g(),s.addClass("active");var d=0;return a(window).bind("mousemove",H=function(a){var b=+new Date;return b>d+10?(d=b,j(a,c),!1):!1}),a(window).bind("mouseup",function(){a(window).unbind("mousemove",H),I=!1,s.removeClass("active"),h()}),!1}),r.bind("mousedown",function(a){a.target!==s[0]&&(G(a),j(a))}),k();var K=m.cytoscape("get");K.on("zoom",function(){I||k()}),function(){var a=1,b=d.minZoom,c=d.maxZoom,e=Math.log(b)/Math.log(c),f=Math.log(a)/Math.log(c),g=1-(f-e)/(1-e);if(g>1||0>g)return void t.hide();var h=J,i=r.height()-s.height()-2*J,j=g*(i-h);h>j&&(j=h),j>i&&(j=i),t.css("top",j)}(),l(o,1+d.zoomFactor),l(p,1-d.zoomFactor),q.bind("mousedown",function(a){if(0==a.button){var b=m.cytoscape("get");return 0===b.elements().size()?b.reset():b.fit(d.fitPadding),!1}})})}};return f[e]?f[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?(a.error("No such function `"+e+"` for jquery.cytoscapePanzoom"),a(this)):f.init.apply(this,arguments)},a.fn.cyPanzoom=a.fn.cytoscapePanzoom}(jQuery);