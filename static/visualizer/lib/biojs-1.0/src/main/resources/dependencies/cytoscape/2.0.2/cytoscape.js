var cytoscape;!function(){var a=cytoscape=function(){return cytoscape.init.apply(cytoscape,arguments)};a.init=function(b){return void 0===b&&(b={}),a.is.plainObject(b)?new a.Core(b):a.is.string(b)?a.extension.apply(a.extension,arguments):void 0},a.fn={},"undefined"!=typeof exports&&(exports=module.exports=cytoscape),window.cytoscape=cytoscape}(),function(a){a.is={string:function(a){return null!=a&&"string"==typeof a},fn:function(a){return null!=a&&"function"==typeof a},array:function(a){return null!=a&&a instanceof Array},plainObject:function(b){return null!=b&&typeof b==typeof{}&&!a.is.array(b)&&b.constructor===Object},number:function(a){return null!=a&&"number"==typeof a&&!isNaN(a)},integer:function(b){return a.is.number(b)&&Math.floor(b)===b},color:function(a){return null!=a&&"string"==typeof a&&""!==$.Color(a).toString()},bool:function(a){return null!=a&&typeof a==typeof!0},elementOrCollection:function(b){return a.is.element(b)||a.is.collection(b)},element:function(b){return b instanceof a.Element&&b._private.single},collection:function(b){return b instanceof a.Collection&&!b._private.single},core:function(b){return b instanceof a.Core},style:function(b){return b instanceof a.Style},stylesheet:function(b){return b instanceof a.Stylesheet},event:function(b){return b instanceof a.Event},emptyString:function(b){return b?a.is.string(b)&&(""===b||b.match(/^\s+$/))?!0:!1:!0},nonemptyString:function(b){return b&&a.is.string(b)&&""!==b&&!b.match(/^\s+$/)?!0:!1},domElement:function(a){return"undefined"==typeof HTMLElement?!1:a instanceof HTMLElement}}}(cytoscape),function(a){a.util={extend:function(){var b,c,d,e,f,g,h=arguments[0]||{},i=1,j=arguments.length,k=!1;for("boolean"==typeof h&&(k=h,h=arguments[1]||{},i=2),"object"==typeof h||a.is.fn(h)||(h={}),j===i&&(h=this,--i);j>i;i++)if(null!=(b=arguments[i]))for(c in b)d=h[c],e=b[c],h!==e&&(k&&e&&(a.is.plainObject(e)||(f=a.is.array(e)))?(f?(f=!1,g=d&&a.is.array(d)?d:[]):g=d&&a.is.plainObject(d)?d:{},h[c]=a.util.extend(k,g,e)):void 0!==e&&(h[c]=e));return h},error:function(a){if(!console)throw a;if(console.error)console.error(a);else{if(!console.log)throw a;console.log(a)}},clone:function(a){var b={};for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b},copy:function(b){return null==b?b:a.is.array(b)?b.slice():a.is.plainObject(b)?a.util.clone(b):b},mapEmpty:function(a){var b=!0;if(null!=a)for(var c in a){b=!1;break}return b},pushMap:function(b){var c=a.util.getMap(b);null==c?a.util.setMap($.extend({},b,{value:[b.value]})):c.push(b.value)},setMap:function(b){for(var c,d=b.map,e=b.keys,f=e.length,g=0;f>g;g++){var c=e[g];a.is.plainObject(c)&&a.util.error("Tried to set map with object key"),g<e.length-1?(null==d[c]&&(d[c]={}),d=d[c]):d[c]=b.value}},getMap:function(b){for(var c=b.map,d=b.keys,e=d.length,f=0;e>f;f++){var g=d[f];if(a.is.plainObject(g)&&a.util.error("Tried to get map with object key"),c=c[g],null==c)return c}return c},deleteMap:function(b){for(var c=b.map,d=b.keys,e=d.length,f=b.keepChildren,g=0;e>g;g++){var h=d[g];a.is.plainObject(h)&&a.util.error("Tried to delete map with object key");var i=g===b.keys.length-1;if(i)if(f)for(var j in c)f[j]||delete c[j];else delete c[h];else c=c[h]}},capitalize:function(b){return a.is.emptyString(b)?b:b.charAt(0).toUpperCase()+b.substring(1)},camel2dash:function(a){for(var b=[],c=0;c<a.length;c++){var d=a[c],e=d.toLowerCase(),f=d!==e;f?(b.push("-"),b.push(e)):b.push(d)}var g=b.length===a.length;return g?a:b.join("")},dash2camel:function(a){for(var b=[],c=!1,d=0;d<a.length;d++){var e=a[d],f="-"===e;f?c=!0:(b.push(c?e.toUpperCase():e),c=!1)}return b.join("")},trim:function(a){var b,c;for(b=0;b<a.length&&" "===a[b];b++);for(c=a.length-1;c>b&&" "===a[c];c--);return a.substring(b,c+1)},hex2tuple:function(a){if((4===a.length||7===a.length)&&"#"===a[0]){var b,c,d,e=4===a.length,f=16;return e?(b=parseInt(a[1]+a[1],f),c=parseInt(a[2]+a[2],f),d=parseInt(a[3]+a[3],f)):(b=parseInt(a[1]+a[2],f),c=parseInt(a[3]+a[4],f),d=parseInt(a[5]+a[6],f)),[b,c,d]}},hsl2tuple:function(b){function c(a,b,c){return 0>c&&(c+=1),c>1&&(c-=1),1/6>c?a+6*(b-a)*c:.5>c?b:2/3>c?a+(b-a)*(2/3-c)*6:a}var d,e,f,g,h,i,j,k,l=(a.util.regex.number,new RegExp("^"+a.util.regex.hsla+"$").exec(b));if(l){if(e=parseInt(l[1]),0>e?e=(360- -1*e%360)%360:e>360&&(e%=360),e/=360,f=parseFloat(l[2]),0>f||f>100)return;if(f/=100,g=parseFloat(l[3]),0>g||g>100)return;if(g/=100,h=l[4],void 0!==h&&(h=parseFloat(h),0>h||h>1))return;if(0===f)i=j=k=Math.round(255*g);else{var m=.5>g?g*(1+f):g+f-g*f,n=2*g-m;i=Math.round(255*c(n,m,e+1/3)),j=Math.round(255*c(n,m,e)),k=Math.round(255*c(n,m,e-1/3))}d=[i,j,k,h]}return d},rgb2tuple:function(b){var c,d=(a.util.regex.number,new RegExp("^"+a.util.regex.rgba+"$").exec(b));if(d){c=[];for(var e=[],f=1;3>=f;f++){var g=d[f];if("%"===g[g.length-1]&&(e[f]=!0),g=parseFloat(g),e[f]&&(g=g/100*255),0>g||g>255)return;c.push(Math.floor(g))}var h=e[1]||e[2]||e[3],i=e[1]&&e[2]&&e[3];if(h&&!i)return;var j=d[4];if(void 0!==j){if(j=parseFloat(j),0>j||j>1)return;c.push(j)}}return c},colorname2tuple:function(b){return a.util.colors[b.toLowerCase()]},color2tuple:function(b){return a.util.colorname2tuple(b)||a.util.hex2tuple(b)||a.util.rgb2tuple(b)||a.util.hsl2tuple(b)},tuple2hex:function(a){function b(a){var b=a.toString(16);return 1===b.length&&(b="0"+b),b}var c=a[0],d=a[1],e=a[2];return"#"+b(c)+b(d)+b(e)},colors:{transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},a.util.regex={},a.util.regex.number="(?:\\d*\\.\\d+|\\d+|\\d*\\.\\d+[eE]\\d+)",a.util.regex.rgba="rgb[a]?\\(("+a.util.regex.number+"[%]?)\\s*,\\s*("+a.util.regex.number+"[%]?)\\s*,\\s*("+a.util.regex.number+"[%]?)(?:\\s*,\\s*("+a.util.regex.number+"))?\\)",a.util.regex.rgbaNoBackRefs="rgb[a]?\\((?:"+a.util.regex.number+"[%]?)\\s*,\\s*(?:"+a.util.regex.number+"[%]?)\\s*,\\s*(?:"+a.util.regex.number+"[%]?)(?:\\s*,\\s*(?:"+a.util.regex.number+"))?\\)",a.util.regex.hsla="hsl[a]?\\(("+a.util.regex.number+")\\s*,\\s*("+a.util.regex.number+"[%])\\s*,\\s*("+a.util.regex.number+"[%])(?:\\s*,\\s*("+a.util.regex.number+"))?\\)",a.util.regex.hslaNoBackRefs="hsl[a]?\\((?:"+a.util.regex.number+")\\s*,\\s*(?:"+a.util.regex.number+"[%])\\s*,\\s*(?:"+a.util.regex.number+"[%])(?:\\s*,\\s*(?:"+a.util.regex.number+"))?\\)",a.util.regex.hex3="\\#[0-9a-fA-F]{3}",a.util.regex.hex6="\\#[0-9a-fA-F]{6}"}(cytoscape),function(a){a.math={},a.math.boxInBezierVicinity=function(a,b,c,d,e,f,g,h,i,j,k){var l=Math.min(a,c)-k,m=Math.min(b,d)-k,n=Math.max(a,c)+k,o=Math.max(b,d)+k;if(e>=l&&n>=e&&f>=m&&o>=f)return 2;if(i>=l&&n>=i&&j>=m&&o>=j)return 2;if(g>=l&&n>=g&&h>=m&&o>=h)return 1;var p=Math.min(e,g,i),q=Math.min(f,h,j),r=Math.max(e,g,i),s=Math.max(f,h,j);return p>n||l>r||q>o||m>s?0:1},a.math.checkStraightEdgeCrossesBox=function(a,b,c,d,e,f,g,h,i){var j,k,l=Math.min(a,c)-i,m=Math.min(b,d)-i,n=Math.max(a,c)+i,o=Math.max(b,d)+i,p=g-e,q=e,r=h-f,s=f;if(Math.abs(p)<1e-4)return e>=l&&n>=e&&Math.min(f,h)<=m&&Math.max(f,h)>=o;var t=(l-q)/p;if(t>0&&1>=t&&(j=r*t+s,j>=m&&o>=j))return!0;var u=(n-q)/p;if(u>0&&1>=u&&(j=r*u+s,j>=m&&o>=j))return!0;var v=(m-s)/r;if(v>0&&1>=v&&(k=p*v+q,k>=l&&n>=k))return!0;var w=(o-s)/r;return w>0&&1>=w&&(k=p*w+q,k>=l&&n>=k)?!0:!1},a.math.checkBezierCrossesBox=function(a,b,c,d,e,f,g,h,i,j,k){var l=Math.min(a,c)-k,m=Math.min(b,d)-k,n=Math.max(a,c)+k,o=Math.max(b,d)+k;if(e>=l&&n>=e&&f>=m&&o>=f)return!0;if(i>=l&&n>=i&&j>=m&&o>=j)return!0;var p=e-2*g+i,q=-2*e+2*g,r=e,s=[];if(Math.abs(p)<1e-4){var t=(l-e)/q,u=(n-e)/q;s.push(t,u)}else{var v,w,x=q*q-4*p*(r-l);if(x>0){var y=Math.sqrt(x);v=(-q+y)/(2*p),w=(-q-y)/(2*p),s.push(v,w)}var z,A,B=q*q-4*p*(r-n);if(B>0){var y=Math.sqrt(B);z=(-q+y)/(2*p),A=(-q-y)/(2*p),s.push(z,A)}}s.sort(function(a,b){return a-b});var C=f-2*h+j,D=-2*f+2*h,E=f,F=[];if(Math.abs(C)<1e-4){var G=(m-f)/D,H=(o-f)/D;F.push(G,H)}else{var I,J,K=D*D-4*C*(E-m);if(K>0){var y=Math.sqrt(K);I=(-D+y)/(2*C),J=(-D-y)/(2*C),F.push(I,J)}var L,M,N=D*D-4*C*(E-o);if(N>0){var y=Math.sqrt(N);L=(-D+y)/(2*C),M=(-D-y)/(2*C),F.push(L,M)}}F.sort(function(a,b){return a-b});for(var O=0;O<s.length;O+=2)for(var P=1;P<F.length;P+=2)if(s[O]<F[P]&&F[P]>=0&&s[O]<=1&&s[O+1]>F[P-1]&&F[P-1]<=1&&s[O+1]>=0)return!0;return!1},a.math.inBezierVicinity=function(a,b,c,d,e,f,g,h,i){var j,k,l=.25*c+.5*e+.25*g,m=.25*d+.5*f+.25*h,n=function(a,b,c,d,e,f,g,h){if(j=(f-d)*(a-c)+(c-e)*(b-d),k=j*j,sideSquared=(f-d)*(f-d)+(c-e)*(c-e),h){if(j>0)return!1}else if(0>j)return!1;return k/sideSquared>g},o=(l+e)/2,p=(m+f)/2,q=!0;return n(o,p,c,d,e,f,0,q)&&(q=!q),!n(a,b,c,d,e,f,i,q)&&!n(a,b,e,f,g,h,i,q)&&!n(a,b,g,h,c,d,i,q)},a.math.solveCubic=function(a,b,c,d,e){b/=a,c/=a,d/=a;var f,g,h,i,j,k,l,m;return g=(3*c-b*b)/9,h=-(27*d)+b*(9*c-2*b*b),h/=54,f=g*g*g+h*h,e[1]=0,l=b/3,f>0?(j=h+Math.sqrt(f),j=0>j?-Math.pow(-j,1/3):Math.pow(j,1/3),k=h-Math.sqrt(f),k=0>k?-Math.pow(-k,1/3):Math.pow(k,1/3),e[0]=-l+j+k,l+=(j+k)/2,e[4]=e[2]=-l,l=Math.sqrt(3)*(-k+j)/2,e[3]=l,void(e[5]=-l)):(e[5]=e[3]=0,0==f?(m=0>h?-Math.pow(-h,1/3):Math.pow(h,1/3),e[0]=-l+2*m,void(e[4]=e[2]=-(m+l))):(g=-g,i=g*g*g,i=Math.acos(h/Math.sqrt(i)),m=2*Math.sqrt(g),e[0]=-l+m*Math.cos(i/3),e[2]=-l+m*Math.cos((i+2*Math.PI)/3),void(e[4]=-l+m*Math.cos((i+4*Math.PI)/3))))},a.math.sqDistanceToQuadraticBezier=function(a,c,d,e,f,g,h,i){var j=1*d*d-4*d*f+2*d*h+4*f*f-4*f*h+h*h+e*e-4*e*g+2*e*i+4*g*g-4*g*i+i*i,k=9*d*f-3*d*d-3*d*h-6*f*f+3*f*h+9*e*g-3*e*e-3*e*i-6*g*g+3*g*i,l=3*d*d-6*d*f+d*h-d*a+2*f*f+2*f*a-h*a+3*e*e-6*e*g+e*i-e*c+2*g*g+2*g*c-i*c,m=1*d*f-d*d+d*a-f*a+e*g-e*e+e*c-g*c;b("coefficients: "+j/j+", "+k/j+", "+l/j+", "+m/j);var n=[];this.solveCubic(j,k,l,m,n);for(var o=1e-7,p=[],q=0;6>q;q+=2)Math.abs(n[q+1])<o&&n[q]>=0&&n[q]<=1&&p.push(n[q]);p.push(1),p.push(0);for(var r,s,t,u,v=-1,w=0;w<p.length;w++)s=Math.pow(1-p[w],2)*d+2*(1-p[w])*p[w]*f+p[w]*p[w]*h,t=Math.pow(1-p[w],2)*e+2*(1-p[w])*p[w]*g+p[w]*p[w]*i,u=Math.pow(s-a,2)+Math.pow(t-c,2),b("distance for param "+p[w]+": "+Math.sqrt(u)),v>=0?v>u&&(v=u,r=p[w]):(v=u,r=p[w]);return b("given: ( "+a+", "+c+"), ( "+d+", "+e+"), ( "+f+", "+g+"), ( "+h+", "+i+")"),b("roots: "+n),b("params: "+p),b("closest param: "+r),v};var b=function(a){}}(cytoscape),function(a){a.instances=[],a.instanceCounter=0,a.lastInstanceTime,a.registerInstance=function(b,c){var d;a.is.core(b)?d=b:a.is.domElement(b)&&(c=b);var e=a.getRegistrationForInstance(b,c);if(e)return e.cy?a.util.error("Tried to register on a pre-existing registration"):(e.cy=b,e.domElement=c),e;var f,g=+new Date;a.lastInstanceTime&&a.lastInstanceTime!==g?++a.instanceCounter:a.instanceCounter=0,a.lastInstanceTime=g,f=a.instanceCounter;var h="cy-"+g+"-"+f,i={id:h,cy:d,domElement:c,readies:[]};return a.instances.push(i),a.instances[h]=i,i},a.removeRegistrationForInstance=function(b,c){var d;if(a.is.core(b)?d=b:a.is.domElement(b)&&(c=b),a.is.core(d)){var e=d._private.instanceId;delete a.instances[e],a.instances.splice(e,1)}else if(a.is.domElement(c))for(var f=0;f<a.instances.length;f++){var g=a.instances[f];g.domElement===c&&(delete a.instances[g.id],a.instances.splice(f,1),f--)}},a.getRegistrationForInstance=function(b,c){var d;if(a.is.core(b)?b.registered()&&(d=b):a.is.domElement(b)&&(c=b),a.is.core(d)){var e=d._private.instanceId;return a.instances[e]}if(a.is.domElement(c))for(var f=a.instances.length-1;f>=0;f--){var g=a.instances[f];if(g.domElement===c)return g}}}(cytoscape),function(a){function b(b,c,d){var e={};switch(e[c]=d,b){case"core":case"collection":a.fn[b](e)}return a.util.setMap({map:f,keys:[b,c],value:d})}function c(b,c){return a.util.getMap({map:f,keys:[b,c]})}function d(b,c,d,e,f){return a.util.setMap({map:g,keys:[b,c,d,e],value:f})}function e(b,c,d,e){return a.util.getMap({map:g,keys:[b,c,d,e]})}var f={};a.extensions=f;var g={};a.modules=g,a.extension=function(){return 2==arguments.length?c.apply(this,arguments):3==arguments.length?b.apply(this,arguments):4==arguments.length?e.apply(this,arguments):5==arguments.length?d.apply(this,arguments):void $.error("Invalid extension access syntax")}}(cytoscape),function(a,b){a&&(a.fn.cytoscape=function(c){var d=a(this);if("get"===c){var e=b.getRegistrationForInstance(d[0]);return e.cy}if(!b.is.fn(c)){if(b.is.plainObject(c))return d.each(function(){var b=a.extend({},c,{container:a(this)[0]});cytoscape(b)});for(var f=d[0],g=[],h=[],i=1;i<arguments.length;i++)h[i-1]=arguments[i];return d.each(function(){var a=b.getRegistrationForInstance(f),d=a.cy,e=c;if(d&&b.is.fn(d[e])){var i=d[e].apply(d,h);g.push(i)}}),1===g.length?g=g[0]:0==g.length&&(g=a(this)),g}var j=c,f=d[0],e=b.getRegistrationForInstance(f);e||(e=b.registerInstance(f)),e&&e.cy&&e.cy.ready()?e.cy.trigger("ready",[],j):e.readies.push(j)},a.cytoscape=cytoscape,null==a.fn.cy&&null==a.cy&&(a.fn.cy=a.fn.cytoscape,a.cy=a.cytoscape))}("undefined"!=typeof jQuery?jQuery:null,cytoscape),function(a){function b(){return!1}function c(){return!0}a.Event=function(d,e){return this instanceof a.Event?(d&&d.type?(this.originalEvent=d,this.type=d.type,this.isDefaultPrevented=d.defaultPrevented||d.returnValue===!1||d.getPreventDefault&&d.getPreventDefault()?c:b):this.type=d,e&&a.util.extend(this,e),void(this.timeStamp=d&&d.timeStamp||+new Date)):new a.Event(d,e)},a.Event.prototype={preventDefault:function(){this.isDefaultPrevented=c;var a=this.originalEvent;a&&(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=c;var a=this.originalEvent;a&&(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=c,this.stopPropagation()},isDefaultPrevented:b,isPropagationStopped:b,isImmediatePropagationStopped:b}}(cytoscape),function(a){a.define={data:function(b){var c={field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateMappers:!1};return b=a.util.extend({},c,b),function(c,d){var e=b,f=this,g=void 0!==f.length,h=g?f:[f],i=g?f[0]:f;if(a.is.string(c)){if(e.allowGetting&&void 0===d){var j;return i&&(j=i._private[e.field][c]),j}if(e.allowSetting&&void 0!==d){var k=!e.immutableKeys[c];if(k){for(var l=0,m=h.length;m>l;l++)h[l]._private[e.field][c]=d;e.updateMappers&&f.updateMappers(),e.settingTriggersEvent&&f[e.triggerFnName](e.settingEvent)}}}else if(e.allowSetting&&a.is.plainObject(c)){var n,o,p=c;for(n in p){o=p[n];var k=!e.immutableKeys[n];if(k)for(var l=0,m=h.length;m>l;l++)h[l]._private[e.field][n]=o}e.updateMappers&&f.updateMappers(),e.settingTriggersEvent&&f[e.triggerFnName](e.settingEvent)}else if(e.allowBinding&&a.is.fn(c)){var q=c;f.bind(e.bindingEvent,q)}else if(e.allowGetting&&void 0===c){var j;return i&&(j=i._private[e.field]),j}return f}},batchData:function(b){var c={field:"data",event:"data",triggerFnName:"trigger",immutableKeys:{},updateMappers:!1},d=b=a.util.extend({},c,b);return function(b){var c=this,e=void 0!==c.length,f=e?c:c._private.elements;if(0===f.length)return c;for(var g=e?f[0]._private.cy:c,h=0;h<f.length;h++){var i=f[h],j=i._private.data.id,k=b[j];if(void 0!==k&&null!==k){var l,m,n=k;for(l in n){m=n[l];var o=!d.immutableKeys[l];o&&(i._private[d.field][l]=m)}}}var p=new a.Collection(g,f);return d.updateMappers&&p.updateMappers(),p[d.triggerFnName](d.event),c}},removeData:function(b){var c={field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}};return b=a.util.extend({},c,b),function(c){{var d=b,e=this,f=void 0!==e.length,g=f?e:[e];f?e[0]:e}if(a.is.string(c)){for(var h=c.split(/\s+/),i=h.length,j=0;i>j;j++){var k=h[j];if(!a.is.emptyString(k)){var l=!d.immutableKeys[k];if(l)for(var m=0,n=g.length;n>m;m++)delete g[m]._private[d.field][k]}}d.triggerEvent&&e[d.triggerFnName](d.event)}else if(void 0===c){for(var m=0,n=g.length;n>m;m++){var o=g[m]._private[d.field];for(var k in o){var p=!d.immutableKeys[k];p&&delete o[k]}}d.triggerEvent&&e[d.triggerFnName](d.event)}return e}},event:{regex:/(\w+)(\.\w+)?/,optionalTypeRegex:/(\w+)?(\.\w+)?/,props:"altKey bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase metaKey offsetX offsetY originalTarget pageX pageY prevValue relatedTarget screenX screenY shiftKey target view which".split(/\s+/),aliases:"mousedown mouseup click mouseover mouseout mousemove touchstart touchmove touchend grab drag free".split(/\s+/),aliasesOn:function(b){for(var c=a.define.event.aliases,d=0;d<c.length;d++){var e=c[d];b[e]=function(b,c){return a.is.fn(c)?this.on(e,b,c):a.is.fn(b)?(c=b,this.on(e,c)):this.trigger(e),this}}},falseCallback:function(){return!1}},on:function(b){var c={unbindSelfOnTrigger:!1,unbindAllBindersOnTrigger:!1};return b=a.util.extend({},c,b),function(c,d,e,f){var g=this,h=void 0!==g.length,i=h?g:[g],j=(h?g[0]:g,a.is.string(c)),k=b;if(a.is.plainObject(d)?(f=e,e=d,d=void 0):(a.is.fn(d)||d===!1)&&(f=d,e=void 0,d=void 0),(a.is.fn(e)||e===!1)&&(f=e,e=void 0),!a.is.fn(f)&&f!==!1&&j)return g;if(j){var l={};l[c]=f,c=l}for(var m in c)if(f=c[m],f===!1&&(f=a.define.event.falseCallback),a.is.fn(f)){m=m.split(/\s+/);for(var n=0;n<m.length;n++){var o=m[n];if(!a.is.emptyString(o)){var p=o.match(a.define.event.regex);if(p)for(var q=p[1],r=p[2]?p[2]:void 0,s={callback:f,data:e,delegated:d?!0:!1,selector:d,type:q,namespace:r,unbindSelfOnTrigger:k.unbindSelfOnTrigger,unbindAllBindersOnTrigger:k.unbindAllBindersOnTrigger,binders:i},t=0;t<i.length;t++)i[t]._private.listeners.push(s)}}}return g}},off:function(b){var c={};return b=a.util.extend({},c,b),function(b,c,d){var e=this,f=void 0!==e.length,g=f?e:[e],h=(f?e[0]:e,a.is.string(b));if(0===arguments.length){for(var i=0;i<g.length;i++)g[i]._private.listeners=[];return e}if((a.is.fn(c)||c===!1)&&(d=c,c=void 0),h){var j={};j[b]=d,b=j}for(var k in b){d=b[k],d===!1&&(d=a.define.event.falseCallback),k=k.split(/\s+/);for(var l=0;l<k.length;l++){var m=k[l];if(!a.is.emptyString(m)){var n=m.match(a.define.event.optionalTypeRegex);if(n)for(var o=n[1]?n[1]:void 0,p=n[2]?n[2]:void 0,i=0;i<g.length;i++)for(var q=g[i]._private.listeners,r=0;r<q.length;r++){var s=q[r],t=!p||p===s.namespace,u=!o||s.type===o,v=!d||d===s.callback,w=t&&u&&v;w&&(q.splice(r,1),r--)}}}}return e}},trigger:function(b){var c={};return b=a.util.extend({},c,b),function(b,c,d){var e=this,f=void 0!==e.length,g=f?e:[e],h=(f?e[0]:e,a.is.string(b)),i=a.is.plainObject(b),j=a.is.event(b),k=this._private.cy||this;if(h){var l=b.split(/\s+/);b=[];for(var m=0;m<l.length;m++){var n=l[m];if(!a.is.emptyString(n)){var o=n.match(a.define.event.regex),p=o[1],q=o[2]?o[2]:void 0;b.push({type:p,namespace:q})}}}else if(i){var r=b;b=[r]}c?a.is.array(c)||(c=[c]):c=[];for(var m=0;m<b.length;m++)for(var s=b[m],t=0;t<g.length;t++){var n,u=g[t],v=u._private.listeners,w=a.is.element(u),x=w;if(j)n=s,n.cyTarget=n.cyTarget||u,n.cy=n.cy||k,n.namespace=n.namespace||s.namespace;else{n=new a.Event(s,{cyTarget:u,cy:k,namespace:s.namespace});for(var y=a.define.event.props,z=0;z<y.length;z++){var A=y[z];n[A]=s[A]}}d&&(v=[{namespace:n.namespace,type:n.type,callback:d}]);for(var z=0;z<v.length;z++){var B=v[z],C=!B.namespace||B.namespace===n.namespace,D=B.type===n.type,E=B.delegated?u!==n.cyTarget&&a.is.element(n.cyTarget)&&n.cyTarget.is(B.selector):!0,F=C&&D&&E;if(F){var G=[n];if(G=G.concat(c),n.data=B.data?B.data:void 0,(B.unbindSelfOnTrigger||B.unbindAllBindersOnTrigger)&&(v.splice(z,1),z--),B.unbindAllBindersOnTrigger)for(var H=B.binders,I=0;I<H.length;I++){var J=H[I];if(J&&J!==u)for(var K=J._private.listeners,L=0;L<K.length;L++){var M=K[L];M===B&&(K.splice(L,1),L--)}}var N=B.delegated?n.cyTarget:u,O=B.callback.apply(N,G);(O===!1||n.isPropagationStopped())&&(x=!1,O===!1&&(n.stopPropagation(),n.preventDefault()))}}if(x){var P=u.parent(),Q=0!==P.length;Q?(P=P[0],P.trigger(n)):k.trigger(n)}}return e}}}}(cytoscape),function($$,window){var isTouch="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch;$$.Style=function(a){return this instanceof $$.Style?$$.is.core(a)?(this._private={cy:a,coreStyle:{}},this.length=0,void this.addDefaultStylesheet()):void $$.util.error("A style must have a core reference"):new $$.Style(a)},$$.style=$$.Style,$$.styfn=$$.Style.prototype,$$.fn.style=function(a){for(var b in a){var c=a[b];$$.Style.prototype=c}},$$.stylesheet=$$.Stylesheet=function(){return this instanceof $$.Stylesheet?void(this.length=0):new $$.Stylesheet},$$.Stylesheet.prototype.selector=function(a){var b=this.length++;return this[b]={selector:a,properties:[]},this},$$.Stylesheet.prototype.css=function(a,b){var c=this.length-1;if($$.is.string(a))this[c].properties.push({name:a,value:b});else if($$.is.plainObject(a)){map=a;for(var d=0;d<$$.style.properties.length;d++){var e=$$.style.properties[d],f=map[e.name];if(void 0===f&&(f=map[$$.util.dash2camel(e.name)]),void 0!==f){var a=e.name,b=f;this[c].properties.push({name:a,value:b})}}}return this},$$.style.fromJson=function(a,b){for(var c=new $$.Style(a),d=0;d<b.length;d++){var e=b[d],f=e.selector,g=e.css;c.selector(f);for(var h in g){var i=g[h];c.css(h,i)}}return c},$$.styfn.fromJson=function(a){var b=this;b.resetToDefault();for(var c=0;c<a.length;c++){var d=a[c],e=d.selector,f=d.css;b.selector(e);for(var g in f){var h=f[g];b.css(g,h)}}return b},$$.Stylesheet.prototype.generateStyle=function(a){for(var b=new $$.Style(a),c=0;c<this.length;c++){var d=this[c],e=d.selector,f=d.properties;b.selector(e);for(var g=0;g<f.length;g++){var h=f[g];b.css(h.name,h.value)}}return b},$$.Stylesheet.prototype.assignToStyle=function(a,b){a.clear(),(b||void 0===b)&&a.addDefaultStylesheet();for(var c=0;c<this.length;c++){var d=this[c],e=d.selector,f=d.properties;a.selector(e);for(var g=0;g<f.length;g++){var h=f[g];a.css(h.name,h.value)}}},function(){var a=$$.util.regex.number,b=$$.util.regex.rgbaNoBackRefs,c=$$.util.regex.hslaNoBackRefs,d=$$.util.regex.hex3,e=$$.util.regex.hex6;$$.style.types={zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},size:{number:!0,min:0,enums:["auto"]},bgSize:{number:!0,min:0,allowPercent:!0},color:{color:!0},lineStyle:{enums:["solid","dotted","dashed"]},curveStyle:{enums:["bundled","bezier"]},fontFamily:{regex:"^([\\w- ]+(?:\\s*,\\s*[\\w- ]+)*)$"},fontVariant:{enums:["small-caps","normal"]},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","capitalize","uppercase","lowercase"]},nodeShape:{enums:["rectangle","roundrectangle","ellipse","triangle","square","pentagon","hexagon","heptagon","octagon"]},arrowShape:{enums:["tee","triangle","square","circle","diamond","none"]},visibility:{enums:["hidden","visible"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},positionx:{enums:["left","center","right"],number:!0,allowPercent:!0},positiony:{enums:["top","center","bottom"],number:!0,allowPercent:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"]},cursor:{enums:["auto","crosshair","default","e-resize","n-resize","ne-resize","nw-resize","pointer","progress","s-resize","sw-resize","text","w-resize","wait","grab","grabbing"]},text:{string:!0},data:{mapping:!0,regex:"^data\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},mapData:{mapping:!0,regex:"^mapData\\(([\\w\\.]+)\\s*\\,\\s*("+a+")\\s*\\,\\s*("+a+")\\s*,\\s*("+a+"|\\w+|"+b+"|"+c+"|"+d+"|"+e+")\\s*\\,\\s*("+a+"|\\w+|"+b+"|"+c+"|"+d+"|"+e+")\\)$"},url:{regex:"^url\\s*\\(\\s*([^\\s]+)\\s*\\s*\\)|none|(.+)$"}};var f=$$.style.types;$$.style.properties=[{name:"cursor",type:f.cursor},{name:"text-valign",type:f.valign},{name:"text-halign",type:f.halign},{name:"color",type:f.color},{name:"content",type:f.text},{name:"text-outline-color",type:f.color},{name:"text-outline-width",type:f.size},{name:"text-outline-opacity",type:f.zeroOneNumber},{name:"text-opacity",type:f.zeroOneNumber},{name:"text-decoration",type:f.textDecoration},{name:"text-transform",type:f.textTransform},{name:"font-family",type:f.fontFamily},{name:"font-style",type:f.fontStyle},{name:"font-variant",type:f.fontVariant},{name:"font-weight",type:f.fontWeight},{name:"font-size",type:f.size},{name:"min-zoomed-font-size",type:f.size},{name:"visibility",type:f.visibility},{name:"opacity",type:f.zeroOneNumber},{name:"z-index",type:f.nonNegativeInt},{name:"overlay-padding",type:f.size},{name:"overlay-color",type:f.color},{name:"overlay-opacity",type:f.zeroOneNumber},{name:"background-color",type:f.color},{name:"background-opacity",type:f.zeroOneNumber},{name:"background-image",type:f.url},{name:"background-position-x",type:f.positionx},{name:"background-position-y",type:f.positiony},{name:"background-repeat",type:f.bgRepeat},{name:"background-size-x",type:f.bgSize},{name:"background-size-y",type:f.bgSize},{name:"border-color",type:f.color},{name:"border-opacity",type:f.zeroOneNumber},{name:"border-width",type:f.size},{name:"border-style",type:f.lineStyle},{name:"height",type:f.size},{name:"width",type:f.size},{name:"padding-left",type:f.size},{name:"padding-right",type:f.size},{name:"padding-top",type:f.size},{name:"padding-bottom",type:f.size},{name:"shape",type:f.nodeShape},{name:"source-arrow-shape",type:f.arrowShape},{name:"target-arrow-shape",type:f.arrowShape},{name:"source-arrow-color",type:f.color},{name:"target-arrow-color",type:f.color},{name:"line-style",type:f.lineStyle},{name:"line-color",type:f.color},{name:"control-point-step-size",type:f.size},{name:"curve-style",type:f.curveStyle},{name:"selection-box-color",type:f.color},{name:"selection-box-opacity",type:f.zeroOneNumber},{name:"selection-box-border-color",type:f.color},{name:"selection-box-border-width",type:f.size},{name:"panning-cursor",type:f.cursor},{name:"active-bg-color",type:f.color},{name:"active-bg-opacity",type:f.zeroOneNumber},{name:"active-bg-size",type:f.size}];for(var g=$$.style.properties,h=0;h<g.length;h++){var i=g[h];g[i.name]=i}}(),$$.styfn.addDefaultStylesheet=function(){var a=this.containerPropertyAsString("font-family")||"sans-serif",b=this.containerPropertyAsString("font-style")||"normal",c=this.containerPropertyAsString("font-variant")||"normal",d=this.containerPropertyAsString("font-weight")||"normal",e=this.containerPropertyAsString("color")||"#000",f=this.containerPropertyAsString("text-transform")||"none",g=(this.containerPropertyAsString("text-decoration")||"none",this.containerPropertyAsString("font-size")||12);this.selector("node, edge").css({cursor:"default","text-valign":"top","text-halign":"center",color:e,content:void 0,"text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":f,"font-family":a,"font-style":b,"font-variant":c,"font-weight":d,"font-size":g,"min-zoomed-font-size":0,visibility:"visible",opacity:1,"z-index":0,content:"","overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"background-color":"#888","background-opacity":1,"background-image":"none","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid",height:30,width:30,"padding-top":0,"padding-bottom":0,"padding-left":0,"padding-right":0,shape:"ellipse","source-arrow-shape":"none","target-arrow-shape":"none","source-arrow-color":"#bbb","target-arrow-color":"#bbb","line-style":"solid","line-color":"#bbb","control-point-step-size":40,"curve-style":"bezier"}).selector("$node > node").css({width:"auto",height:"auto",shape:"rectangle","background-opacity":.5,"padding-top":10,"padding-right":10,"padding-left":10,"padding-bottom":10}).selector("edge").css({width:1}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}).selector("core").css({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"panning-cursor":"grabbing","active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":isTouch?40:15})},$$.styfn.clear=function(){this._private.newStyle=!0;for(var a=0;a<this.length;a++)delete this[a];return this.length=0,this},$$.styfn.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this},$$.styfn.core=function(){return this._private.coreStyle},$$.styfn.parse=function(a,b,c){a=$$.util.camel2dash(a);var d=$$.style.properties[a],e=b;if(!d)return null;if(void 0===b||null===b)return null;var f=$$.is.string(b);f&&(b=$$.util.trim(b));var g=d.type;if(!g)return null;if(c&&(""===b||null===b))return{name:a,value:b,bypass:!0,deleteBypass:!0};var h,i;if(f){if(h=new RegExp($$.style.types.data.regex).exec(b))return{name:a,value:h,strValue:b,mapped:$$.style.types.data,field:h[1],bypass:c};if(i=new RegExp($$.style.types.mapData.regex).exec(b)){if(!g.color&&!g.number)return!1;var j=this.parse(a,i[4]);
if(!j||j.mapped)return!1;var k=this.parse(a,i[5]);if(!k||k.mapped)return!1;if(j.value===k.value)return!1;if(g.color){var l=j.value,m=k.value,n=!(l[0]!==m[0]||l[1]!==m[1]||l[2]!==m[2]||l[3]!==m[3]&&(null!=l[3]&&1!==l[3]||null!=m[3]&&1!==m[3]));if(n)return!1}return{name:a,value:i,strValue:b,mapped:$$.style.types.mapData,field:i[1],fieldMin:parseFloat(i[2]),fieldMax:parseFloat(i[3]),valueMin:j.value,valueMax:k.value,bypass:c}}}else;if(g.number){var o;if(!g.unitless)if(f){var p=b.match("^("+$$.util.regex.number+")(px|em"+(g.allowPercent?"|\\%":"")+")?$");if(!g.enums){if(!p)return null;b=p[1],o=p[2]||"px"}}else o="px";if(b=parseFloat(b),isNaN(b)&&void 0!==g.enums){b=e;for(var q=0;q<g.enums.length;q++){var r=g.enums[q];if(r===b)return{name:a,value:b,strValue:b,bypass:c}}return null}if(g.integer&&!$$.is.integer(b))return null;if(void 0!==g.min&&b<g.min||void 0!==g.max&&b>g.max)return null;var s={name:a,value:b,strValue:""+b+(o?o:""),units:o,bypass:c,pxValue:g.unitless||"%"===o?void 0:"px"!==o&&o?this.getEmSizeInPixels()*b:b};return s}if(g.color){var t=$$.util.color2tuple(b);return{name:a,value:t,strValue:b,bypass:c}}if(!g.enums){if(g.regex){var u=new RegExp(g.regex),v=u.exec(b);return v?{name:a,value:v,strValue:b,bypass:c}:null}return g.string?{name:a,value:b,strValue:b,bypass:c}:null}for(var q=0;q<g.enums.length;q++){var r=g.enums[q];if(r===b)return{name:a,value:b,strValue:b,bypass:c}}},$$.styfn.getEmSizeInPixels=function(){var a=this._private.cy,b=a.container();if(window&&b){var c=window.getComputedStyle(b).getPropertyValue("font-size"),d=parseFloat(c);return d}return 1},$$.styfn.containerCss=function(a){var b=this._private.cy,c=b.container();return window&&c?window.getComputedStyle(c).getPropertyValue(a):void 0},$$.styfn.containerProperty=function(a){var b=this.containerCss(a),c=this.parse(a,b);return c},$$.styfn.containerPropertyAsString=function(a){var b=this.containerProperty(a);return b?b.strValue:void 0},$$.styfn.selector=function(a){var b="core"===a?null:new $$.Selector(a),c=this.length++;return this[c]={selector:b,properties:[]},this},$$.styfn.css=function(){var a=arguments;switch(a.length){case 1:for(var b=a[0],c=0;c<$$.style.properties.length;c++){var d=$$.style.properties[c],e=b[d.name];void 0===e&&(e=b[$$.util.dash2camel(d.name)]),void 0!==e&&this.cssRule(d.name,e)}break;case 2:this.cssRule(a[0],a[1])}return this},$$.styfn.cssRule=function(a,b){var c=this.parse(a,b);if(c){var d=this.length-1;this[d].properties.push(c);var e=!this[d].selector;e&&(this._private.coreStyle[c.name]=c)}return this},$$.styfn.applyParsedProperty=function(ele,parsedProp,context){parsedProp=$$.util.clone(parsedProp);var prop=parsedProp,style=ele._private.style,fieldVal,flatProp,type=$$.style.properties[prop.name].type,propIsBypass=prop.bypass,origProp=style[prop.name],origPropIsBypass=origProp&&origProp.bypass;if(("height"===parsedProp.name||"width"===parsedProp.name)&&"auto"===parsedProp.value&&ele.isNode()&&!ele.isParent())return!1;if(propIsBypass&&prop.deleteBypass){var currentProp=style[prop.name];return currentProp?currentProp.bypass&&currentProp.bypassed?(style[prop.name]=currentProp.bypassed,!0):!1:!0}switch(prop.mapped){case $$.style.types.mapData:if(fieldVal=ele._private.data[prop.field],!$$.is.number(fieldVal))return!1;var percent=(fieldVal-prop.fieldMin)/(prop.fieldMax-prop.fieldMin);if(type.color){var r1=prop.valueMin[0],r2=prop.valueMax[0],g1=prop.valueMin[1],g2=prop.valueMax[1],b1=prop.valueMin[2],b2=prop.valueMax[2],a1=null==prop.valueMin[3]?1:prop.valueMin[3],a2=null==prop.valueMax[3]?1:prop.valueMax[3],clr=[Math.round(r1+(r2-r1)*percent),Math.round(g1+(g2-g1)*percent),Math.round(b1+(b2-b1)*percent),Math.round(a1+(a2-a1)*percent)];flatProp={bypass:prop.bypass,name:prop.name,value:clr,strValue:["rgba(",clr[0],", ",clr[1],", ",clr[2],", ",clr[3],")"].join("")}}else{if(!type.number)return!1;var calcValue=prop.valueMin+(prop.valueMax-prop.valueMin)*percent;flatProp=this.parse(prop.name,calcValue,prop.bypass)}flatProp||(flatProp=this.parse(prop.name,origProp.strValue,prop.bypass)),flatProp.mapping=prop,prop=flatProp;break;case $$.style.types.data:fieldVal=eval("ele._private.data."+prop.field),flatProp=this.parse(prop.name,fieldVal,prop.bypass),flatProp||(flatProp=this.parse(prop.name,origProp.strValue,prop.bypass)),flatProp.mapping=prop,prop=flatProp;break;case void 0:break;default:return!1}if(propIsBypass)prop.bypassed=origPropIsBypass?origProp.bypassed:origProp,style[prop.name]=prop;else{var prevProp;origPropIsBypass?(prevProp=origProp.bypassed,origProp.bypassed=prop):(prevProp=style[prop.name],style[prop.name]=prop),prevProp&&prevProp.mapping&&prop.mapping&&prevProp.context===context&&(prevProp=prevProp.prev),prevProp&&prevProp!==prop&&(prop.prev=prevProp)}return prop.context=context,!0},$$.styfn.rollBackContext=function(a,b){for(var c=0;c<b.properties.length;c++){var d=b.properties[c],e=a._private.style[d.name];e.bypassed&&(e=e.bypassed);for(var f,g=!0,h=0;e.prev;){var i=e.prev;e.context===b&&(g?a._private.style[d.name]=i:f&&(f.prev=i)),f=e,e=i,g=!1,h++}}},$$.styfn.apply=function(a){for(var b=this,c=0;c<a.length;c++){var d=a[c];b._private.newStyle&&(d._private.styleCxts=[],d._private.style={});for(var e=0;e<this.length;e++){var f=this[e],g=f.selector&&f.selector.filter(d).length>0,h=f.properties;if(g){for(var i=0;i<h.length;i++){var j=h[i];(!d._private.styleCxts[e]||j.mapped)&&this.applyParsedProperty(d,j,f)}d._private.styleCxts[e]=f}else d._private.styleCxts[e]&&this.rollBackContext(d,f),delete d._private.styleCxts[e]}}b._private.newStyle=!1},$$.styfn.update=function(){var a=this._private.cy,b=a.elements();b.updateStyle()},$$.styfn.getRenderedStyle=function(a){var a=a[0];if(a){for(var b={},c=a._private.style,d=this._private.cy,e=d.zoom(),f=0;f<$$.style.properties.length;f++){var g=$$.style.properties[f],h=c[g.name];if(h){var i=h.unitless?h.strValue:h.pxValue*e+"px";b[g.name]=i,b[$$.util.dash2camel(g.name)]=i}}return b}},$$.styfn.getRawStyle=function(a){var a=a[0];if(a){for(var b={},c=a._private.style,d=0;d<$$.style.properties.length;d++){var e=$$.style.properties[d],f=c[e.name];f&&(b[e.name]=f.strValue,b[$$.util.dash2camel(e.name)]=f.strValue)}return b}},$$.styfn.getValueStyle=function(a){var b,c;if($$.is.element(a)?(b={},c=a._private.style):(b={},c=a),c)for(var d=0;d<$$.style.properties.length;d++){var e=$$.style.properties[d],f=c[e.name]||c[$$.util.dash2camel(e.name)];if(void 0===f||$$.is.plainObject(f)||(f=this.parse(e.name,f)),f){var g=void 0===f.value?f:f.value;b[e.name]=g,b[$$.util.dash2camel(e.name)]=g}}return b},$$.styfn.updateFunctionalProperties=function(a){for(var b=0;b<a.length;b++)for(var c=a[b],d=c._private.style,e=0;e<$$.style.properties.length;e++){var f=$$.style.properties[e],g=d[f.name];if(g&&g.mapping){var h=g.mapping;this.applyParsedProperty(c,h)}}},$$.styfn.applyBypass=function(a,b,c){var d=[];if("*"===b||"**"===b){if(void 0!==c)for(var e=0;e<$$.style.properties.length;e++){var f=$$.style.properties[e],b=f.name,g=this.parse(b,c,!0);g&&d.push(g)}}else if($$.is.string(b)){var g=this.parse(b,c,!0);g&&d.push(g)}else{if(!$$.is.plainObject(b))return!1;for(var h=b,e=0;e<$$.style.properties.length;e++){var f=$$.style.properties[e],b=f.name,c=h[b];if(void 0===c&&(c=h[$$.util.dash2camel(b)]),void 0!==c){var g=this.parse(b,c,!0);g&&d.push(g)}}}if(0===d.length)return!1;for(var i=!1,e=0;e<a.length;e++)for(var j=a[e],k=0;k<d.length;k++){var f=d[k];i=this.applyParsedProperty(j,f)||i}return i},$$.styfn.removeAllBypasses=function(a){for(var b=0;b<$$.style.properties.length;b++)for(var c=$$.style.properties[b],d=c.name,e="",f=this.parse(d,e,!0),g=0;g<a.length;g++){var h=a[g];this.applyParsedProperty(h,f)}}}(cytoscape,"undefined"==typeof window?null:window),function(a){var b={showOverlay:!0,hideEdgesOnViewport:!1},c=a.util.copy(b);a.defaults=function(d){b=a.util.extend({},c,d)},a.fn.core=function(b){for(var c in b){var d=b[c];a.Core.prototype[c]=d}},a.Core=function(c){if(!(this instanceof a.Core))return new a.Core(c);var d=this;c=a.util.extend({},b,c);var e=c.container,f=a.getRegistrationForInstance(d,e);f&&f.cy&&(f.domElement.innerHTML="",f.cy.notify({type:"destroy"}),a.removeRegistrationForInstance(f.cy,f.domElement)),f=a.registerInstance(d,e);var g=f.readies,h=c;h.layout=a.util.extend({name:"undefined"==typeof window?"null":"grid"},h.layout),h.renderer=a.util.extend({name:"undefined"==typeof window?"null":"canvas"},h.renderer),this._private={ready:!1,instanceId:f.id,options:h,elements:[],id2index:{},listeners:[],aniEles:[],scratch:{},layout:null,renderer:null,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomEnabled:void 0===h.zoomEnabled?!0:h.zoomEnabled,panEnabled:void 0===h.panEnabled?!0:h.panEnabled,boxSelectionEnabled:void 0===h.boxSelectionEnabled?!0:h.boxSelectionEnabled,zoom:a.is.number(h.zoom)?h.zoom:1,pan:{x:a.is.plainObject(h.pan)&&a.is.number(h.pan.x)?h.pan.x:0,y:a.is.plainObject(h.pan)&&a.is.number(h.pan.y)?h.pan.y:0},hasCompoundNodes:!1},a.is.number(h.minZoom)&&a.is.number(h.maxZoom)&&h.minZoom<h.maxZoom?(this._private.minZoom=h.minZoom,this._private.maxZoom=h.maxZoom):a.is.number(h.minZoom)&&void 0===h.maxZoom?this._private.minZoom=h.minZoom:a.is.number(h.maxZoom)&&void 0===h.minZoom&&(this._private.maxZoom=h.maxZoom),this._private.style=a.is.stylesheet(h.style)?h.style.generateStyle(this):a.is.array(h.style)?a.style.fromJson(this,h.style):new a.Style(d),d.initRenderer(a.util.extend({showOverlay:h.showOverlay,hideEdgesOnViewport:h.hideEdgesOnViewport},h.renderer)),d.load(h.elements,function(){d.startAnimationLoop(),d._private.ready=!0,a.is.fn(h.ready)&&d.bind("ready",h.ready);for(var b=0;b<g.length;b++){var c=g[b];d.bind("ready",c)}f.readies=[],d.trigger("ready")},h.done)},a.corefn=a.Core.prototype,a.fn.core({ready:function(){return this._private.ready},registered:function(){return this._private&&null!=this._private.instanceId?!0:!1},registeredId:function(){return this._private.instanceId},getElementById:function(b){var c=this._private.id2index[b];return void 0!==c?this._private.elements[c]:new a.Collection(this)},hasCompoundNodes:function(){return this._private.hasCompoundNodes},addToPool:function(a){for(var b=this._private.elements,c=this._private.id2index,d=0;d<a.length;d++){var e=a[d],f=e._private.data.id,g=c[f],h=void 0!==g;h||(g=b.length,b.push(e),c[f]=g,e._private.index=g)}return this},removeFromPool:function(a){for(var b=this._private.elements,c=this._private.id2index,d=0;d<a.length;d++){var e=a[d],f=e._private.data.id,g=c[f],h=void 0!==g;if(h){delete this._private.id2index[f],b.splice(g,1);for(var i=g;i<b.length;i++){var j=b[i]._private.data.id;c[j]--}}}},container:function(){return this._private.options.container},options:function(){return a.util.copy(this._private.options)},json:function(){var a={},b=this;return a.elements={},b.elements().each(function(b,c){var d=c.group();a.elements[d]||(a.elements[d]=[]),a.elements[d].push(c.json())}),a.style=b.style(),a.scratch=b.scratch(),a.zoomEnabled=b._private.zoomEnabled,a.panEnabled=b._private.panEnabled,a.layout=b._private.options.layout,a.renderer=b._private.options.renderer,a}})}(cytoscape),function(a,b){a.fn.core({add:function(b){var c,d=this;if(a.is.elementOrCollection(b)){for(var e=b,f=[],g=0;g<e.length;g++){var h=e[g];f.push(h.json())}c=new a.Collection(d,f)}else if(a.is.array(b)){var f=b;c=new a.Collection(d,f)}else if(a.is.plainObject(b)&&(a.is.array(b.nodes)||a.is.array(b.edges))){for(var i=b,f=[],j=["nodes","edges"],g=0,k=j.length;k>g;g++){var l=j[g],m=i[l];if(a.is.array(m))for(var n=0,o=m.length;o>n;n++){var p=m[n],q=a.util.extend({},p,{group:l});f.push(q)}}c=new a.Collection(d,f)}else{var p=b;c=new a.Element(d,p).collection()}return c.filter(function(){return!this.removed()})},remove:function(b){if(a.is.elementOrCollection(b))b=b;else if(a.is.string(b)){var c=b;b=this.$(c)}return b.remove()},load:function(b,c,d){function e(){f.one("layoutready",function(a){f.notifications(!0),f.trigger(a),f.notify({type:"load",collection:f.elements(),style:f._private.style}),f.one("load",c),f.trigger("load")}).one("layoutstop",function(){f.one("done",d),f.trigger("done")}),f.layout(f._private.options.layout)}var f=this,g=f.elements();g.length>0&&g.remove(),f.notifications(!1);return null!=b&&(a.is.plainObject(b)||a.is.array(b))&&f.add(b),setTimeout(function(){e()},30),this}})}(cytoscape,"undefined"==typeof window?null:window),function(a){a.fn.core({addToAnimationPool:function(a){for(var b=this,c=b._private.aniEles,d=[],e=0;e<c.length;e++){var f=c[e]._private.data.id;d[f]=!0}for(var e=0;e<a.length;e++){var g=a[e],f=g._private.data.id;d[f]||c.push(g)}},startAnimationLoop:function(){function b(){function a(){k(function(a){c(a),b()},l)}i?setTimeout(function(){a()},h):a()}function c(b){b=+new Date;for(var c=g._private.aniEles,e=0;e<c.length;e++){var f=c[e],h=f._private.animation.current,i=f._private.animation.queue;if(0===h.length){var j=i,k=j.length>0?j.shift():null;null!=k&&(k.callTime=+new Date,h.push(k))}for(var l=[],m=0;m<h.length;m++){var n=h[m];d(f,n,b),h[m].done&&(l.push(n),h.splice(m,1),m--)}for(var m=0;m<l.length;m++){var n=l[m],o=n.params.complete;a.is.fn(o)&&o.apply(f,[b])}}c.length>0&&g.notify({type:"draw",collection:c});for(var m=0;m<c.length;m++){var f=c[m],i=f._private.animation.queue,h=f._private.animation.current,p=h.length>0||i.length>0;p||(c.splice(m,1),m--)}}function d(b,c,d){var h,i=g._private.style,j=c.properties,k=c.params,l=c.callTime;if(h=0===c.duration?1:Math.min(1,(d-l)/c.duration),0>h?h=0:h>1&&(h=1),null==j.delay){var m=c.startPosition,n=j.position,o=b._private.position;if(n&&(e(m.x,n.x)&&(o.x=f(m.x,n.x,h)),e(m.y,n.y)&&(o.y=f(m.y,n.y,h))),j.css)for(var p=a.style.properties,q=0;q<p.length;q++){var r=p[q].name,s=j.css[r];if(void 0!==s){var t=c.startStyle[r],u=f(t,s,h);i.applyBypass(b,r,u)}}}return a.is.fn(k.step)&&k.step.apply(b,[d]),h>=1&&(c.done=!0),h}function e(b,c){return null==b||null==c?!1:a.is.number(b)&&a.is.number(c)?!0:b&&c?!0:!1}function f(b,c,d){function e(a,b){var c=b-a,e=a;return Math.round(d*c+e)}if(0>d?d=0:d>1&&(d=1),a.is.number(b)&&a.is.number(c))return b+(c-b)*d;if(a.is.number(b[0])&&a.is.number(c[0])){var f=b,g=c,h=e(f[0],g[0]),i=e(f[1],g[1]),j=e(f[2],g[2]);return"rgb("+h+", "+i+", "+j+")"}return void 0}var g=this,h=1e3/60,i=!1,j=!0;g._private.aniEles=[];var k="undefined"==typeof window?function(){}:window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame;null!=k&&j||(k=function(a){window.setTimeout(function(){a(+new Date)},h)});var l=g.container();b()}})}(cytoscape),function(a){a.fn.core({data:a.define.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0}),removeData:a.define.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0}),batchData:a.define.batchData({field:"data",event:"data",triggerFnName:"trigger",immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateMappers:!0}),scratch:a.define.data({field:"scratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeScratch:a.define.removeData({field:"scratch",triggerEvent:!1})})}(cytoscape),function(a){a.fn.core({on:a.define.on(),one:a.define.on({unbindSelfOnTrigger:!0}),once:a.define.on({unbindAllBindersOnTrigger:!0}),off:a.define.off(),trigger:a.define.trigger()}),a.corefn.bind=a.corefn.on,a.corefn.unbind=a.corefn.off,a.define.event.aliasesOn(a.corefn)}(cytoscape),function(a){a.fn.core({png:function(){var a=this._private.renderer;return a.png()}})}(cytoscape),function(a){a.fn.core({layout:function(a){var b=this;return this._private.layoutRunning?this:(null==a&&(a=this._private.options.layout),this.initLayout(a),b.trigger("layoutstart"),this._private.layoutRunning=!0,this.one("layoutstop",function(){this._private.layoutRunning=!1}),this._private.layout.run(),this)},initLayout:function(b){if(null==b)return void a.util.error("Layout options must be specified to run a layout");if(null==b.name)return void a.util.error("A `name` must be specified to run a layout");var c=b.name,d=a.extension("layout",c);return null==d?void a.util.error("Can not apply layout: No such layout `%s` found; did you include its JS file?",c):(this._private.layout=new d(a.util.extend({},b,{renderer:this._private.renderer,cy:this})),void(this._private.options.layout=b))}})}(cytoscape),function(a){a.fn.core({notify:function(b){if(this._private.notificationsEnabled){var c=this.renderer(),d=this;if(a.is.element(b.collection)){var e=b.collection;b.collection=new a.Collection(d,[e])}else if(a.is.array(b.collection)){var f=b.collection;b.collection=new a.Collection(d,f)}c.notify(b)}},notifications:function(a){var b=this._private;return void 0===a?b.notificationsEnabled:void(b.notificationsEnabled=a?!0:!1)},noNotifications:function(a){this.notifications(!1),a(),this.notifications(!0)}})}(cytoscape),function(a){a.fn.core({renderTo:function(a,b,c){var d=this._private.renderer;d.renderTo(a,b,c)},renderer:function(){return this._private.renderer},initRenderer:function(b){var c=this,d=a.extension("renderer",b.name);return null==d?void a.util.error("Can not initialise: No such renderer `%s` found; did you include its JS file?",b.name):void(this._private.renderer=new d(a.util.extend({},b,{cy:c,style:c._private.style})))}})}(cytoscape),function(a){a.fn.core({collection:function(b){return a.is.string(b)?this.$(b):a.is.elementOrCollection(b)?b.collection():new a.Collection(this)},nodes:function(a){var b=this.$("node");return a?b.filter(a):b},edges:function(a){var b=this.$("edge");return a?b.filter(a):b},$:function(b){var c=new a.Collection(this,this._private.elements);return b?c.filter(b):c}}),a.corefn.elements=a.corefn.filter=a.corefn.$}(cytoscape),function(a){a.fn.core({style:function(){return this._private.style}})}(cytoscape),function(a){a.fn.core({panningEnabled:function(a){return void 0===a?this._private.panEnabled:(this._private.panEnabled=a?!0:!1,this)},zoomingEnabled:function(a){return void 0===a?this._private.zoomEnabled:(this._private.zoomEnabled=a?!0:!1,this)},boxSelectionEnabled:function(a){return void 0===a?this._private.boxSelectionEnabled:(this._private.boxSelectionEnabled=a?!0:!1,this)},pan:function(){var b,c,d,e,f,g=arguments,h=this._private.pan;switch(g.length){case 0:return h;case 1:if(!this._private.panEnabled)return this;if(a.is.string(g[0]))return b=g[0],h[b];a.is.plainObject(g[0])&&(d=g[0],e=d.x,f=d.y,a.is.number(e)&&(h.x=e),a.is.number(f)&&(h.y=f),this.trigger("pan"));break;case 2:if(!this._private.panEnabled)return this;b=g[0],c=g[1],"x"!==b&&"y"!==b||!a.is.number(c)||(h[b]=c),this.trigger("pan")}return this.notify({type:"viewport"}),this},panBy:function(){var b,c,d,e,f,g=arguments,h=this._private.pan;if(!this._private.panEnabled)return this;switch(g.length){case 1:a.is.plainObject(g[0])&&(d=g[0],e=d.x,f=d.y,a.is.number(e)&&(h.x+=e),a.is.number(f)&&(h.y+=f),this.trigger("pan"));break;case 2:b=g[0],c=g[1],"x"!==b&&"y"!==b||!a.is.number(c)||(h[b]+=c),this.trigger("pan")}return this.notify({type:"viewport"}),this},fit:function(b,c){if(a.is.number(b)&&void 0===c&&(c=b,b=void 0),!this._private.panEnabled||!this._private.zoomEnabled)return this;if(a.is.string(b)){var d=b;b=this.$(d)}else a.is.elementOrCollection(b)||(b=this.elements());var e,f=b.boundingBox(),g=this.style(),h=parseFloat(g.containerCss("width")),i=parseFloat(g.containerCss("height"));return c=a.is.number(c)?c:0,isNaN(h)||isNaN(i)||(e=this._private.zoom=Math.min((h-2*c)/f.w,(i-2*c)/f.h),e=e>this._private.maxZoom?this._private.maxZoom:e,e=e<this._private.minZoom?this._private.minZoom:e,this._private.pan={x:(h-e*(f.x1+f.x2))/2,y:(i-e*(f.y1+f.y2))/2}),this.trigger("pan zoom"),this.notify({type:"viewport"}),this},minZoom:function(b){return void 0===b?this._private.minZoom:(a.is.number(b)&&(this._private.minZoom=b),this)},maxZoom:function(b){return void 0===b?this._private.maxZoom:(a.is.number(b)&&(this._private.maxZoom=b),this)},zoom:function(b){var c,d;if(void 0===b)return this._private.zoom;if(a.is.number(b))d=b,c={x:0,y:0};else if(a.is.plainObject(b)){if(d=b.level,b.renderedPosition){var e=b.renderedPosition,f=this._private.pan,g=this._private.zoom;c={x:(e.x-f.x)/g,y:(e.y-f.y)/g}}else b.position&&(c=b.position);if(c&&!this._private.panEnabled)return this}if(!this._private.zoomEnabled)return this;if(!a.is.number(d)||!a.is.number(c.x)||!a.is.number(c.y))return this;d=d>this._private.maxZoom?this._private.maxZoom:d,d=d<this._private.minZoom?this._private.minZoom:d;var h=this._private.pan,i=this._private.zoom,j=d,k={x:-j/i*(c.x-h.x)+c.x,y:-j/i*(c.y-h.y)+c.y};this._private.zoom=d,this._private.pan=k;var l=h.x!==k.x||h.y!==k.y;return this.trigger("zoom"+(l?" pan":"")),this.notify({type:"viewport"}),this},boundingBox:function(a){var b=this.$(a);return b.boundingBox()},center:function(b){if(!this._private.panEnabled||!this._private.zoomEnabled)return this;if(a.is.string(b)){var c=b;b=cy.elements(c)}else a.is.elementOrCollection(b)||(b=cy.elements());var d=b.boundingBox(),e=this.style(),f=parseFloat(e.containerCss("width")),g=parseFloat(e.containerCss("height")),h=this._private.zoom;return this.pan({x:(f-h*(d.x1+d.x2))/2,y:(g-h*(d.y1+d.y2))/2}),this.trigger("pan"),this.notify({type:"viewport"}),this},reset:function(){return this._private.panEnabled&&this._private.zoomEnabled?(this.pan({x:0,y:0}),this._private.maxZoom>1&&this._private.minZoom<1&&this.zoom(1),this.notify({type:"viewport"}),this):this}})}(cytoscape),function(a){a.fn.collection=a.fn.eles=function(b){for(var c in b){var d=b[c];a.Collection.prototype[c]=d}};var b={prefix:{nodes:"n",edges:"e"},id:{nodes:0,edges:0},generate:function(b,c,d){var e=a.is.element(c)?c._private:c,f=e.group,g=null!=d?d:this.prefix[f]+this.id[f];if(b.getElementById(g).empty())this.id[f]++;else for(;!b.getElementById(g).empty();)g=this.prefix[f]+ ++this.id[f];return g}};a.Element=function(b,c,d){if(!(this instanceof a.Element))return new a.Element(b,c,d);var e=this;if(d=void 0===d||d?!0:!1,void 0===b||void 0===c||!a.is.core(b))return void a.util.error("An element must have a core reference and parameters set");if("nodes"!==c.group&&"edges"!==c.group)return void a.util.error("An element must be of type `nodes` or `edges`; you specified `"+c.group+"`");if(this.length=1,this[0]=this,this._private={cy:b,single:!0,data:c.data||{},position:c.position||{},autoWidth:void 0,autoHeight:void 0,listeners:[],group:c.group,style:{},rstyle:{},styleCxts:[],removed:!0,selected:c.selected?!0:!1,selectable:void 0===c.selectable?!0:c.selectable?!0:!1,locked:c.locked?!0:!1,grabbed:!1,grabbable:void 0===c.grabbable?!0:c.grabbable?!0:!1,active:!1,classes:{},animation:{current:[],queue:[]},rscratch:{},scratch:{},edges:[],children:[]},c.renderedPosition){var f=c.renderedPosition,g=b.pan(),h=b.zoom();this._private.position={x:(f.x-g.x)/h,y:(f.y-g.y)/h}}if(a.is.string(c.classes))for(var i=c.classes.split(/\s+/),j=0,k=i.length;k>j;j++){var l=i[j];l&&""!==l&&(e._private.classes[l]=!0)}(void 0===d||d)&&this.restore()},a.Collection=function(c,d){if(!(this instanceof a.Collection))return new a.Collection(c,d);if(void 0===c||!a.is.core(c))return void a.util.error("A collection must have a reference to the core");var e={},f=[],g=!1;if(d){if(d.length>0&&a.is.plainObject(d[0])&&!a.is.element(d[0])){g=!0;for(var h=[],i={},j=0,k=d.length;k>j;j++){var l=d[j];null==l.data&&(l.data={});var m=l.data;if(null==m.id)m.id=b.generate(c,l);else if(0!=c.getElementById(m.id).length||i[m.id])continue;var n=new a.Element(c,l,!1);h.push(n),i[m.id]=!0}d=h}}else d=[];for(var j=0,k=d.length;k>j;j++){var o=d[j];if(o){var p=o._private.data.id;e[p]||(e[p]=o,f.push(o))}}for(var j=0,k=f.length;k>j;j++)this[j]=f[j];this.length=f.length,this._private={cy:c,ids:e},g&&this.restore()},a.elefn=a.elesfn=a.Element.prototype=a.Collection.prototype,a.elesfn.cy=function(){return this._private.cy},a.elesfn.element=function(){return this[0]},a.elesfn.collection=function(){return a.is.collection(this)?this:new a.Collection(this._private.cy,[this])},a.elesfn.json=function(){var b=this.element();if(null==b)return void 0;var c=b._private,d=a.util.copy({data:c.data,position:c.position,group:c.group,bypass:c.bypass,removed:c.removed,selected:c.selected,selectable:c.selectable,locked:c.locked,grabbed:c.grabbed,grabbable:c.grabbable,classes:""}),e=[];for(var f in c.classes)e.push(f);for(var g=0;g<e.length;g++){var f=e[g];d.classes+=f+(g<e.length-1?" ":"")}return d},a.elesfn.restore=function(c){var d=this,e=[],f=d.cy();void 0===c&&(c=!0);for(var g=[],h=[],i=[],j=0,k=0,l=0,m=d.length;m>l;l++){var n=d[l];n.isNode()?(h.push(n),j++):(i.push(n),k++)}g=h.concat(i);for(var l=0,m=g.length;m>l;l++){var n=g[l];if(n.removed()){var o=n._private,p=o.data;if(void 0===p.id)p.id=b.generate(f,n);else{if(a.is.emptyString(p.id)||!a.is.string(p.id))continue;if(0!=f.getElementById(p.id).length)continue}{p.id}if(n.isEdge()){for(var q=n,r=["source","target"],s=r.length,t=0;s>t;t++){var u=r[t],v=p[u];null!=v&&""!==v&&!f.getElementById(v).empty()}var w=f.getElementById(p.source),x=f.getElementById(p.target);w._private.edges.push(q),x._private.edges.push(q)}o.ids={},o.ids[p.id]=n,o.removed=!1,f.addToPool(n),e.push(n)}}for(var l=0;j>l;l++){var y=g[l],p=y._private.data,z=(p.id,y._private.data.parent),A=null!=z;if(A){var B=f.getElementById(z);if(B.empty())delete p.parent;else{for(var C=!1,D=B;!D.empty();){if(y.same(D)){C=!0,delete p.parent;break}D=D.parent()}C||(B[0]._private.children.push(y),f._private.hasCompoundNodes=!0)}}}if(e=new a.Collection(f,e),e.length>0){var E=e.add(e.connectedNodes()).add(e.parent());E.updateStyle(c),c?e.rtrigger("add"):e.trigger("add")}return d},a.elesfn.removed=function(){var a=this[0];return a&&a._private.removed},a.elesfn.inside=function(){var a=this[0];return a&&!a._private.removed},a.elesfn.remove=function(b){function c(a){for(var b=a._private.edges,c=0;c<b.length;c++)e(b[c])}function d(a){for(var b=a._private.children,c=0;c<b.length;c++)e(b[c])}function e(a){var b=k[a.id()];b||(k[a.id()]=!0,a.isNode()?(j.push(a),c(a),d(a)):j.unshift(a))}function f(a,b){for(var c=a._private.edges,d=0;d<c.length;d++){var e=c[d];if(b===e){c.splice(d,1);break}}}function g(a,b){b=b[0],a=a[0];for(var c=a._private.children,d=0;d<c.length;d++)if(c[d][0]===b[0]){c.splice(d,1);break}}var h=this,i=[],j=[],k={},l=h._private.cy;void 0===b&&(b=!0);for(var m=0,n=h.length;n>m;m++){var o=h[m];e(o)}for(var m=0;m<j.length;m++){var o=j[m];if(o._private.removed=!0,l.removeFromPool(o),i.push(o),o.isEdge()){var p=o.source()[0],q=o.target()[0];f(p,o),f(q,o)}else{var r=o.parent();0!==r.length&&g(r,o)}}var s=l._private.elements;l._private.hasCompoundNodes=!1;for(var m=0;m<s.length;m++){var o=s[m];if(o.isParent()){l._private.hasCompoundNodes=!0;break}}var t=new a.Collection(this.cy(),i);t.size()>0&&(b&&this.cy().notify({type:"remove",collection:t}),t.trigger("remove"));for(var u={},m=0;m<j.length;m++){var o=j[m],v="nodes"===o._private.group,w=o._private.data.parent;if(v&&void 0!==w&&!u[w]){u[w]=!0;var r=l.getElementById(w);r&&0!==r.length&&!r._private.removed&&0===r.children().length&&r.updateStyle()}}return this}}(cytoscape),function(a){a.fn.eles({animated:function(){var a=this[0];return a?a._private.animation.current.length>0:void 0},clearQueue:function(){for(var a=0;a<this.length;a++){var b=this[a];b._private.animation.queue=[]}return this},delay:function(a,b){return this.animate({delay:a},{duration:a,complete:b}),this},animate:function(a,b){var c,d=+new Date,e=this._private.cy,f=e.style();switch(void 0===b&&(b={}),void 0===b.duration&&(b.duration=400),b.duration){case"slow":b.duration=600;break;case"fast":b.duration=200}if(null==a||null==a.position&&null==a.css&&null==a.delay)return this;a.css&&(a.css=f.getValueStyle(a.css));for(var g=0;g<this.length;g++){var h=this[g],i=h._private.position,j={x:i.x,y:i.y},k=f.getValueStyle(h);c=h.animated()&&(void 0===b.queue||b.queue)?h._private.animation.queue:h._private.animation.current,c.push({properties:a,duration:b.duration,params:b,callTime:d,startPosition:j,startStyle:k})}return e.addToAnimationPool(this),this},stop:function(a,b){for(var c=0;c<this.length;c++){for(var d=this[c],e=d._private.animation.current,f=0;f<e.length;f++){var g=e[f];b&&(g.duration=0)}a&&(d._private.animation.queue=[])}return this.cy().notify({collection:this,type:"draw"}),this}})}(cytoscape),function(a){a.fn.eles({addClass:function(b){b=b.split(/\s+/);for(var c=this,d=[],e=0;e<b.length;e++){var f=b[e];if(!a.is.emptyString(f))for(var g=0;g<c.length;g++){var h=c[g],i=h._private.classes[f];h._private.classes[f]=!0,i||d.push(h)}}return d.length>0&&new a.Collection(this._private.cy,d).updateStyle(),c.trigger("class"),c},hasClass:function(a){var b=this[0];return null!=b&&b._private.classes[a]},toggleClass:function(b,c){for(var d=b.split(/\s+/),e=this,f=[],g=0,h=e.length;h>g;g++)for(var i=e[g],j=0;j<d.length;j++){var k=d[j];if(!a.is.emptyString(k)){var l=i._private.classes[k],m=c||void 0===c&&!l;m?(i._private.classes[k]=!0,l||f.push(i)):(i._private.classes[k]=!1,l&&f.push(i))}}return f.length>0&&new a.Collection(this._private.cy,f).updateStyle(),e.trigger("class"),e},removeClass:function(b){b=b.split(/\s+/);for(var c=this,d=[],e=0;e<c.length;e++)for(var f=c[e],g=0;g<b.length;g++){var h=b[g];if(h&&""!==h){var i=f._private.classes[h];delete f._private.classes[h],i&&d.push(f)}}return d.length>0&&new a.Collection(c._private.cy,d).updateStyle(),c.trigger("class"),c}})}(cytoscape),function(a){a.fn.eles({allAre:function(a){return this.filter(a).length===this.length},is:function(a){return this.filter(a).length>0},same:function(a){return a=this.cy().collection(a),this.length!==a.length?!1:this.intersect(a).length===this.length},anySame:function(a){return a=this.cy().collection(a),this.intersect(a).length>0},allAreNeighbors:function(a){return a=this.cy().collection(a),this.neighborhood().intersect(a).length===a.length}})}(cytoscape),function(a){var b=1.4,c=1;a.fn.eles({updateStyle:function(a){var b=this._private.cy,c=b.style();return a=a||void 0===a?!0:!1,c.apply(this),a?this.rtrigger("style"):this.trigger("style"),this},updateMappers:function(a){var b=this._private.cy,c=b.style();a=a||void 0===a?!0:!1;for(var d=0;d<this.length;d++){var e=this[d];c.apply(e)}return a?this.rtrigger("style"):this.trigger("style"),this},data:a.define.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateMappers:!0}),removeData:a.define.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateMappers:!0}),batchData:a.define.batchData({field:"data",event:"data",triggerFnName:"trigger",immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateMappers:!0}),scratch:a.define.data({field:"scratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeScratch:a.define.removeData({field:"scratch",triggerEvent:!1}),rscratch:a.define.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:a.define.removeData({field:"rscratch",triggerEvent:!1}),id:function(){var a=this[0];return a?a._private.data.id:void 0},position:a.define.data({field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"rtrigger",allowGetting:!0,validKeys:["x","y"]}),positions:function(b){if(a.is.plainObject(b))this.position(b);else if(a.is.fn(b)){for(var c=b,d=0;d<this.length;d++){var e=this[d],b=c.apply(e,[d,e]);if(b&&!e.locked()){var f=e._private.position;f.x=b.x,f.y=b.y}}this.rtrigger("position")}return this},renderedPosition:function(a){var b=this[0],c=this.cy(),d=c.zoom(),e=c.pan();if(b&&b.isNode()){var f=b._private.position,g={x:f.x*d+e.x,y:f.y*d+e.y};return void 0===a?g:g[a]}},renderedCss:function(a){var b=this[0];if(b){var c=b.cy().style().getRenderedStyle(b);return void 0===a?c:c[a]}},css:function(b,c){var d=this.cy().style();
if(a.is.plainObject(b)){var e=b;d.applyBypass(this,e),this.rtrigger("style")}else if(a.is.string(b)){if(void 0===c){var f=this[0];return f?f._private.style[b].strValue:void 0}d.applyBypass(this,b,c),this.rtrigger("style")}else if(void 0===b){var f=this[0];return f?d.getRawStyle(f):void 0}return this},removeCss:function(){for(var a=this.cy().style(),b=this,c=0;c<b.length;c++){var d=b[c];a.removeAllBypasses(d)}this.rtrigger("style")},show:function(){return this.css("visibility","visible"),this},hide:function(){return this.css("visibility","hidden"),this},visible:function(){var a=this[0];if(a){if("visible"!==a.css("visibility"))return!1;if(a.isNode()){for(var b=a.parents(),c=0;c<b.length;c++){var d=b[c],e=d.css("visibility");if("visible"!==e)return!1}return!0}if(a.isEdge()){var f=a.source(),g=a.target();return f.visible()&&g.visible()}}},hidden:function(){var a=this[0];return a?!this.visible():void 0},width:function(){var a=this[0];if(a){var b=this._private.style.width;return"auto"===b.strValue?a._private.autoWidth:b.pxValue}},outerWidth:function(){var a=this[0];if(a){var d=this._private.style,e="auto"===d.width.strValue?a._private.autoWidth:d.width.pxValue,f=d["border-width"]?d["border-width"].pxValue*b+c:0;return e+f}},renderedWidth:function(){var a=this[0];if(a){var b=this.width();return b*this.cy().zoom()}},renderedOuterWidth:function(){var a=this[0];if(a){var b=this.outerWidth();return b*this.cy().zoom()}},height:function(){var a=this[0];if(a&&a.isNode()){var b=this._private.style.height;return"auto"===b.strValue?a._private.autoHeight:b.pxValue}},outerHeight:function(){var a=this[0];if(a){var d=this._private.style,e="auto"===d.height.strValue?a._private.autoHeight:d.height.pxValue,f=d["border-width"]?d["border-width"].pxValue*b+c:0;return e+f}},renderedHeight:function(){var a=this[0];if(a){var b=this.height();return b*this.cy().zoom()}},renderedOuterHeight:function(){var a=this[0];if(a){var b=this.outerHeight();return b*this.cy().zoom()}},offset:function(){var a=this[0];if(a&&a.isNode()){for(var b={x:a._private.position.x,y:a._private.position.y},c=a.parents(),d=0;d<c.length;d++){var e=c[d],f=e._private.position;b.x+=f.x,b.y+=f.y}return b}},renderedOffset:function(){var a=this[0];if(a&&a.isNode()){var b=this.offset(),c=this.cy(),d=c.zoom(),e=c.pan();return{x:b.x*d+e.x,y:b.y*d+e.y}}},boundingBox:function(b){var c=this;!b||a.is.elementOrCollection(b)&&0===b.length?c=this:a.is.string(b)?c=this.filter(b):a.is.elementOrCollection(b)&&(c=b);for(var d=1/0,e=-1/0,f=1/0,g=-1/0,h=0;h<c.length;h++){var i,j,k,l,m,n,o=c[h];if(o.isNode()){var p=o._private.position;m=p.x,n=p.y;var q=o.outerWidth(),r=q/2,s=o.outerHeight(),t=s/2;i=m-r,j=m+r,k=n-t,l=n+t,d=d>i?i:d,e=j>e?j:e,f=f>k?k:f,g=l>g?l:g}else{var u=o.source()[0]._private.position,v=o.target()[0]._private.position,w=o._private.rstyle;if(m=w.labelX,n=w.labelY,i=u.x,j=v.x,k=u.y,l=v.y,i>j){var x=i;i=j,j=x}if(k>l){var x=k;k=l,l=x}d=d>i?i:d,e=j>e?j:e,f=f>k?k:f,g=l>g?l:g;for(var y=w.bezierPts||[],q=o._private.style.width.value,z=0;z<y.length;z++){var A=y[z];d=A.x-q<d?A.x-q:d,e=A.x+q>e?A.x+q:e,f=A.y-q<f?A.y-q:f,g=A.y+q>g?A.y+q:g}}var B=o._private.style,C=B.content.value,D=B["font-size"],E=B["text-halign"],F=B["text-valign"],G=o._private.rstyle.labelWidth;if(C&&D&&void 0!=G&&E&&F){var H,I,J,K,L=D.value,M=G;switch(E.value){case"left":H=i-M,I=i;break;case"center":H=m-M/2,I=m+M/2;break;case"right":H=j,I=j+M}switch(o.isEdge()&&(H=m-M/2,I=m+M/2),F.value){case"top":J=k-L,K=k;break;case"center":J=n-L/2,K=n+L/2;break;case"bottom":J=l,K=l+L}o.isEdge()&&(J=n-L/2,K=n+L/2),d=d>H?H:d,e=I>e?I:e,f=f>J?J:f,g=K>g?K:g}}return{x1:d,x2:e,y1:f,y2:g,w:e-d,h:g-f}}})}(cytoscape),function(a){function b(a){return function(){var b=this;if(0!==b.length&&b.isNode()&&!b.removed()){for(var c=0,d=b[0],e=d._private.edges,f=0;f<e.length;f++){var g=e[f];c+=a(d,g)}return c}}}function c(a,b){return function(){for(var c=void 0,d=this.nodes(),e=0;e<d.length;e++){var f=d[e],g=f[a]();void 0===g||void 0!==c&&!b(g,c)||(c=g)}return c}}a.fn.eles({degree:b(function(a,b){return b.source().same(b.target())?2:1}),indegree:b(function(a,b){return b.target().same(a)?1:0}),outdegree:b(function(a,b){return b.source().same(a)?1:0})}),a.fn.eles({minDegree:c("degree",function(a,b){return b>a}),maxDegree:c("degree",function(a,b){return a>b}),minIndegree:c("indegree",function(a,b){return b>a}),maxIndegree:c("indegree",function(a,b){return a>b}),minOutdegree:c("outdegree",function(a,b){return b>a}),maxOutdegree:c("outdegree",function(a,b){return a>b})}),a.fn.eles({totalDegree:function(){for(var a=0,b=this.nodes(),c=0;c<b.length;c++)a+=b[c].degree();return a}})}(cytoscape),function(a){a.fn.eles({on:a.define.on(),one:a.define.on({unbindSelfOnTrigger:!0}),once:a.define.on({unbindAllBindersOnTrigger:!0}),off:a.define.off(),trigger:a.define.trigger(),rtrigger:function(a,b){return this.cy().notify({type:a,collection:this.filter(function(){return!this.removed()})}),this.trigger(a,b),this}}),a.elesfn.bind=a.elesfn.on,a.elesfn.unbind=a.elesfn.off,a.define.event.aliasesOn(a.elesfn)}(cytoscape),function(a){a.fn.eles({isNode:function(){return"nodes"===this.group()},isEdge:function(){return"edges"===this.group()},isLoop:function(){return this.isEdge()&&this.source().id()===this.target().id()},group:function(){var a=this[0];return a?a._private.group:void 0}})}(cytoscape),function(a){a.fn.eles({each:function(b){if(a.is.fn(b))for(var c=0;c<this.length;c++){var d=this[c],e=b.apply(d,[c,d]);if(e===!1)break}return this},toArray:function(){for(var a=[],b=0;b<this.length;b++)a.push(this[b]);return a},slice:function(b,c){var d=[],e=this.length;null==c&&(c=e),0>b&&(b=e+b);for(var f=b;f>=0&&c>f&&e>f;f++)d.push(this[f]);return new a.Collection(this.cy(),d)},size:function(){return this.length},eq:function(a){return this[a]},empty:function(){return 0===this.length},nonempty:function(){return!this.empty()}})}(cytoscape),function(a){function b(a){return function(){var b=arguments;if(2===b.length){var c=b[0],d=b[1];this.bind(a.event,c,d)}else if(1===b.length){var d=b[0];this.bind(a.event,d)}else if(0===b.length){for(var e=0;e<this.length;e++){var f=this[e];(!a.ableField||f._private[a.ableField])&&(f._private[a.field]=a.value)}this.updateStyle(),this.trigger(a.event)}return this}}function c(c){a.elesfn[c.field]=function(){var a=this[0];return a?a._private[c.field]:void 0},a.elesfn[c.on]=b({event:c.on,field:c.field,ableField:c.ableField,value:!0}),a.elesfn[c.off]=b({event:c.off,field:c.field,ableField:c.ableField,value:!1})}c({field:"locked",on:"lock",off:"unlock"}),c({field:"grabbable",on:"grabify",off:"ungrabify"}),c({field:"selected",ableField:"selectable",on:"select",off:"unselect"}),c({field:"selectable",on:"selectify",off:"unselectify"}),a.elesfn.grabbed=function(){var a=this[0];return a?a._private.grabbed:void 0},c({field:"active",on:"activate",off:"unactivate"}),a.elesfn.inactive=function(){var a=this[0];return a?!a._private.active:void 0}}(cytoscape),function(a){function b(b){return function(c){for(var d=[],e=this.edges(),f=this._private.cy,g=0;g<e.length;g++){var h=e[g],i=h._private.data[b.attr],j=f.getElementById(i);j.length>0&&d.push(j)}return new a.Collection(f,d).filter(c)}}function c(b){return function(c){var d=[],e=this._private.cy,f=b||{};a.is.string(c)&&(c=e.$(c));for(var g=c.connectedEdges(),h=this._private.ids,i=0;i<g.length;i++){var j,k=g[i],l=k._private.data;if(f.thisIs){var m=l[f.thisIs];j=h[m]}else j=h[l.source]||h[l.target];j&&d.push(k)}return new a.Collection(e,d)}}function d(b){var c={codirected:!1};return b=a.util.extend({},c,b),function(c){for(var d=this._private.cy,e=[],f=this.edges(),g=b,h=0;h<f.length;h++)for(var i=f[h],j=i.source()[0],k=j.id(),l=i.target()[0],m=l.id(),n=j._private.edges,o=0;o<n.length;o++){var p=n[o],q=p._private.data,r=q.target,s=q.source,t=r===m&&s===k,u=k===r&&m===s;(g.codirected&&t||!g.codirected&&(t||u))&&e.push(p)}return new a.Collection(d,e).filter(c)}}a.fn.eles({nodes:function(a){return this.filter(function(a,b){return b.isNode()}).filter(a)},edges:function(a){return this.filter(function(a,b){return b.isEdge()}).filter(a)},filter:function(b){var c=this._private.cy;if(a.is.fn(b)){for(var d=[],e=0;e<this.length;e++){var f=this[e];b.apply(f,[e,f])&&d.push(f)}return new a.Collection(c,d)}return a.is.string(b)||a.is.elementOrCollection(b)?new a.Selector(b).filter(this):void 0===b?this:new a.Collection(c)},not:function(b){var c=this._private.cy;if(b){a.is.string(b)&&(b=this.filter(b));for(var d=[],e=0;e<this.length;e++){var f=this[e],g=b._private.ids[f.id()];g||d.push(f)}return new a.Collection(c,d)}return this},intersect:function(b){var c=this._private.cy;if(a.is.string(b)){var d=b;return this.filter(d)}var e=[],f=this,g=b,h=this.length<b.length,i=h?f._private.ids:g._private.ids,j=h?g._private.ids:f._private.ids;for(var k in i){var l=j[k];l&&e.push(l)}return new a.Collection(c,e)},add:function(b){function c(a){a&&(h[a.id()]||(g.push(a),h[a.id()]=!0))}var d=this,e=this._private.cy;if(!b)return this;if(a.is.string(b)){var f=b;b=e.elements(f)}for(var g=[],h={},i=0;i<d.length;i++){var j=d[i];c(j)}for(var i=0;i<b.length;i++){var j=b[i];c(j)}return new a.Collection(e,g)}}),a.fn.eles({breadthFirstSearch:function(b,c){b=b||function(){};for(var d=this._private.cy,e=this,f=[],g={},h={},i={},j=[],k=0;k<e.length;k++)e[k].isNode()&&(f.unshift(e[k]),g[e[k].id()]=!0,h[e[k].id()]=0,j.push(e[k]));for(k=0;0!==f.length;){for(var l=f.shift(),m=0,n=i[l.id()];n;)m++,n=i[n];h[l.id()]=m;var o=b.call(l,k,m);if(k++,o===!0)return new a.Collection(d,[l]);if(o===!1)break;for(var p=l.connectedEdges(c?'[source = "'+l.id()+'"]':void 0),q=0;q<p.length;q++){var r=p[q],s=r.connectedNodes('[id != "'+l.id()+'"]');0!==s.length&&(s=s[0],g[s.id()]||(g[s.id()]=!0,f.unshift(s),i[s.id()]=l.id(),j.push(s),j.push(r)))}}return new a.Collection(d,j)},depthFirstSearch:function(b,c){function d(a){var b=a.id();return i[b]||j[b]||k[b]||l[b]}b=b||function(){};for(var e=this._private.cy,f=this,g=[],h=[],i={},j={},k={},l={},m={},n=0;n<f.length;n++)f[n].isNode()&&(g.push(f[n]),h[f[n].id()]=!0);for(;0!==g.length;){var o=g[g.length-1],p=b.call(o),q=!1;if(p===!0)return new a.Collection(e,[o]);for(var r=o.connectedEdges(c?'[source = "'+o.id()+'"]':void 0),n=0;n<r.length;n++){var s=r[n];if(!d(s)){var t=s.connectedNodes('[id != "'+o.id()+'"]');if(0!==t.length){t=t[0];var u=t.id();if(!h[u]&&!m[u]){l[u]=!0,h[u]=!0,g.push(t),q=!0;break}h[u]?j[u]=!0:k[u]=!0}}}q||(m[o.id()]=!0,g.pop())}},roots:function(b){for(var c=this,d=[],e=0;e<c.length;e++){var f=c[e];if(f.isNode()){var g=f.connectedEdges('[target = "'+f.id()+'"][source != "'+f.id()+'"]').length>0;g||d.push(f)}}return new a.Collection(this._private.cy,d).filter(b)},kruskal:function(b){function c(a){for(var b=0;b<e.length;b++){var c=e[b];if(c.anySame(a))return{eles:c,index:b}}}b=b||function(){return 1};for(var d=new a.Collection(this._private.cy,[]),e=[],f=this.nodes(),g=0;g<f.length;g++)e.push(f[g].collection());for(var h=this.edges(),i=h.toArray().sort(function(a,c){var d=b.call(a),e=b.call(c);return d-e}),g=0;g<i.length;g++){var j=i[g],k=j.source()[0],l=j.target()[0],m=c(k),n=c(l);m.eles!==n.eles&&(d=d.add(j),e[m.index]=m.eles.add(n.eles),e.splice(n.index,1))}return f.add(d)},dijkstra:function(b,c,d){var e=this._private.cy;if(d=a.is.fn(c)?d:c,d=void 0===d||d,c=a.is.fn(c)?c:function(){return 1},0===this.length||!b||!a.is.elementOrCollection(b)||0===b.length)return new a.Collection(e,[]);var f=this[0];b=b[0];for(var g={},h={},i=e.nodes(),j=0;j<i.length;j++)g[i[j].id()]=1/0;g[f.id()]=0;for(var k=i,l=function(a){var b,c=1/0;for(var d in g)g[d]<c&&0!==a.$("#"+d).length&&(c=g[d],b=d);return b},m=function(a,b){for(var d,e=a.edgesWith(b),f=1/0,g=0;g<e.length;g++){var h=e[g],i=c.call(h);f>i&&(f=i,d=h)}return{edge:d,dist:f}};0!==k.length;){var n=l(k),o=k.filter("#"+n);if(0!==o.length){if(k=k.not(o),o.same(b))break;if(g[n]===Math.Infinite)break;for(var p=o.neighborhood().nodes(),j=0;j<p.length;j++){var q=p[j],r=q.id(),s=m(o,q),t=g[n]+s.dist;t<g[r]&&(g[r]=t,h[r]={node:q,edge:s.edge})}}}}}),a.elesfn.bfs=a.elesfn.breadthFirstSearch,a.elesfn.dfs=a.elesfn.depthFirstSearch,a.fn.eles({neighborhood:function(b){for(var c=[],d=this._private.cy,e=this.nodes(),f=0;f<e.length;f++)for(var g=e[f],h=g.connectedEdges(),i=0;i<h.length;i++){var j=h[i],k=j.connectedNodes().not(g);k.length>0&&c.push(k[0]),c.push(j[0])}return new a.Collection(d,c).filter(b)},closedNeighborhood:function(a){return this.neighborhood().add(this).filter(a)},openNeighborhood:function(a){return this.neighborhood(a)}}),a.fn.eles({source:b({attr:"source"}),target:b({attr:"target"})}),a.fn.eles({edgesWith:c(),edgesTo:c({thisIs:"source"})}),a.fn.eles({connectedEdges:function(b){for(var c=[],d=this._private.cy,e=this.nodes(),f=0;f<e.length;f++)for(var g=e[f],h=g._private.edges,i=0;i<h.length;i++){var j=h[i];c.push(j)}return new a.Collection(d,c).filter(b)},connectedNodes:function(b){for(var c=[],d=this._private.cy,e=this.edges(),f=0;f<e.length;f++){var g=e[f];c.push(g.source()[0]),c.push(g.target()[0])}return new a.Collection(d,c).filter(b)},parallelEdges:d(),codirectedEdges:d({codirected:!0}),parallelIndex:function(){var a=this[0];if(a.isEdge())for(var b=a.source()[0],c=b._private.edges,d=0,e=0;e<c.length;e++){var f=c[e],g=f===a;if(g)return d;var h=a._private.data.source===f._private.data.source&&a._private.data.target===f._private.data.target,i=a._private.data.source===f._private.data.target&&a._private.data.target===f._private.data.source,j=h||i;j&&d++}},parallelSize:function(){var a=this[0];if(a.isEdge()){for(var b=a.source()[0],c=b._private.edges,d=0,e=0;e<c.length;e++){var f=c[e],g=a._private.data.source===f._private.data.source&&a._private.data.target===f._private.data.target,h=a._private.data.source===f._private.data.target&&a._private.data.target===f._private.data.source,i=g||h;i&&d++}return d}}}),a.fn.eles({parent:function(b){for(var c=[],d=this._private.cy,e=0;e<this.length;e++){var f=this[e],g=d.getElementById(f._private.data.parent);g.size()>0&&c.push(g)}return new a.Collection(d,c).filter(b)},parents:function(b){for(var c=[],d=this.parent();d.nonempty();){for(var e=0;e<d.length;e++){var f=d[e];c.push(f)}d=d.parent()}return new a.Collection(this.cy(),c).filter(b)},children:function(b){for(var c=[],d=0;d<this.length;d++){var e=this[d];c=c.concat(e._private.children)}return new a.Collection(this.cy(),c).filter(b)},siblings:function(a){return this.parent().children().not(this).filter(a)},isParent:function(){var a=this[0];return a?0!==a._private.children.length:void 0},isChild:function(){var a=this[0];return a?void 0!==a._private.data.parent&&0!==a.parent().length:void 0},descendants:function(b){function c(a){for(var b=0;b<a.length;b++){var e=a[b];d.push(e),e.children().nonempty()&&c(e.children())}}var d=[];return c(this.children()),new a.Collection(this.cy(),d).filter(b)}})}(cytoscape),function($$){$$.fn.selector=function(a){for(var b in a){var c=a[b];$$.Selector.prototype[b]=c}},$$.Selector=function(a,b){function c(){return{classes:[],colonSelectors:[],data:[],group:null,ids:[],meta:[],collection:null,filter:null,parent:null,ancestor:null,subject:null,child:null,descendant:null}}function d(a){return a.replace(new RegExp("\\\\("+i+")","g"),"")}function e(a){for(var b,c,d,e=0;e<A.length;e++){var f=A[e],g=f.name;if(!$$.is.fn(a)||a(g,f)){var h=D.match(new RegExp("^"+f.regex));if(null!=h){c=h,b=f,d=g;var i=h[0];D=D.substring(i.length);break}}}return{expr:b,match:c,name:d}}function f(){var a=D.match(/^\s+/);if(a){var b=a[0];D=D.substring(b.length)}}if(!(this instanceof $$.Selector))return new $$.Selector(a,b);void 0===b&&void 0!==a&&(b=a,a=void 0);var g=this;if(g._private={selectorText:null,invalid:!0},!b||$$.is.string(b)&&b.match(/^\s*$/))null==a?g.length=0:(g[0]=c(),g[0].group=a,g.length=1);else if($$.is.element(b)){var h=new $$.Collection(g.cy(),[b]);g[0]=c(),g[0].collection=h,g.length=1}else if($$.is.collection(b))g[0]=c(),g[0].collection=b,g.length=1;else if($$.is.fn(b))g[0]=c(),g[0].filter=b,g.length=1;else{if(!$$.is.string(b))return void $$.util.error("A selector must be created from a string; found "+b);for(var i="[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",j="(?:[\\w-]|(?:\\\\"+i+"))+",k="=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",l="\\?|\\!|\\^",m='"(?:\\\\"|[^"])+"|'+"'(?:\\\\'|[^'])+'",n=$$.util.regex.number,o=m+"|"+n,p="degree|indegree|outdegree",q="\\s*,\\s*",r=j,s="\\s+",t="\\s+>\\s+",u="\\$",v=j,w=k.split("|"),x=0;x<w.length;x++){var y=w[x];k+="|@"+y}var z=null,A={group:{query:!0,regex:"(node|edge|\\*)",populate:function(a){this.group="*"==a?a:a+"s"}},state:{query:!0,regex:"(:selected|:unselected|:locked|:unlocked|:visible|:hidden|:grabbed|:free|:removed|:inside|:grabbable|:ungrabbable|:animated|:unanimated|:selectable|:unselectable|:parent|:child|:active|:inactive|:touch)",populate:function(a){this.colonSelectors.push(a)}},id:{query:!0,regex:"\\#("+v+")",populate:function(a){this.ids.push(d(a))}},className:{query:!0,regex:"\\.("+r+")",populate:function(a){this.classes.push(d(a))}},dataExists:{query:!0,regex:"\\[\\s*("+j+")\\s*\\]",populate:function(a){this.data.push({field:d(a)})}},dataCompare:{query:!0,regex:"\\[\\s*("+j+")\\s*("+k+")\\s*("+o+")\\s*\\]",populate:function(a,b,c){this.data.push({field:d(a),operator:b,value:c})}},dataBool:{query:!0,regex:"\\[\\s*("+l+")\\s*("+j+")\\s*\\]",populate:function(a,b){this.data.push({field:d(b),operator:a})}},metaCompare:{query:!0,regex:"\\{\\s*("+p+")\\s*("+k+")\\s*("+n+")\\s*\\}",populate:function(a,b,c){this.meta.push({field:d(a),operator:b,value:c})}},nextQuery:{separator:!0,regex:q,populate:function(){g[++x]=c(),z=null}},child:{separator:!0,regex:t,populate:function(){var a=c();a.parent=this,a.subject=z,g[x]=a}},descendant:{separator:!0,regex:s,populate:function(){var a=c();a.ancestor=this,a.subject=z,g[x]=a}},subject:{modifier:!0,regex:u,populate:function(){return null!=z&&this.subject!=this?($$.util.error("Redefinition of subject in selector `"+b+"`"),!1):(z=this,void(this.subject=this))}}},B=0;for(var C in A)A[B]=A[C],A[B].name=C,B++;A.length=B,g._private.selectorText=b;var D=b,x=0;for(g[0]=c(),f();;){var E=e();if(null==E.expr)return void $$.util.error("The selector `"+b+"`is invalid");for(var F=[],B=1;B<E.match.length;B++)F.push(E.match[B]);var G=E.expr.populate.apply(g[x],F);if(G===!1)return;if(D.match(/^\s*$/))break}for(g.length=x+1,B=0;B<g.length;B++){var H=g[B];if(null!=H.subject){for(;H.subject!=H;)if(null!=H.parent){var I=H.parent,t=H;t.parent=null,I.child=t,H=I}else{if(null==H.ancestor){$$.util.error("When adjusting references for the selector `"+H+"`, neither parent nor ancestor was found");break}var J=H.ancestor,s=H;s.ancestor=null,J.descendant=s,H=J}g[B]=H.subject}}if(null!=a)for(var B=0;B<g.length;B++){if(null!=g[B].group&&g[B].group!=a)return void $$.util.error("Group `"+g[B].group+"` conflicts with implicit group `"+a+"` in selector `"+b+"`");g[B].group=a}}g._private.invalid=!1},$$.selfn=$$.Selector.prototype,$$.selfn.size=function(){return this.length},$$.selfn.eq=function(a){return this[a]},$$.selfn.find=function(){},$$.selfn.filter=function(collection,addLiveFunction){var self=this,cy=collection.cy();if(self._private.invalid)return new $$.Collection(cy);var queryMatches=function(query,element){function operandsMatch(params){for(var allDataMatches=!0,k=0;k<query[params.name].length;k++){var data=query[params.name][k],operator=data.operator,value=data.value,field=data.field,matches;if(null!=operator&&null!=value){var fieldStr=""+params.fieldValue(field),valStr=""+eval(value),caseInsensitive=!1;switch("@"==operator.charAt(0)&&(fieldStr=fieldStr.toLowerCase(),valStr=valStr.toLowerCase(),operator=operator.substring(1),caseInsensitive=!0),"="==operator&&(operator="=="),operator){case"*=":matches=fieldStr.search(valStr)>=0;break;case"$=":matches=null!=new RegExp(valStr+"$").exec(fieldStr);break;case"^=":matches=null!=new RegExp("^"+valStr).exec(fieldStr);break;default:if(caseInsensitive){var expr="fieldStr "+operator+" valStr";matches=eval(expr)}else{var expr=params.fieldRef(field)+" "+operator+" "+value;matches=eval(expr)}}}else if(null!=operator)switch(operator){case"?":matches=params.fieldTruthy(field);break;case"!":matches=!params.fieldTruthy(field);break;case"^":matches=params.fieldUndefined(field)}else matches=!params.fieldUndefined(field);if(!matches){allDataMatches=!1;break}}return allDataMatches}function confirmRelations(a,b){if(null!=a){var c=!1;b=b();for(var d=0;d<b.size();d++)if(queryMatches(a,b.eq(d))){c=!0;break}return c}return!0}if(null!=query.group&&"*"!=query.group&&query.group!=element._private.group)return!1;for(var allColonSelectorsMatch=!0,k=0;k<query.colonSelectors.length;k++){var sel=query.colonSelectors[k],renderer=cy.renderer();switch(sel){case":selected":allColonSelectorsMatch=element.selected();break;case":unselected":allColonSelectorsMatch=!element.selected();break;case":selectable":allColonSelectorsMatch=element.selectable();break;case":unselectable":allColonSelectorsMatch=!element.selectable();break;case":locked":allColonSelectorsMatch=element.locked();break;case":unlocked":allColonSelectorsMatch=!element.locked();break;case":visible":allColonSelectorsMatch=element.visible();break;case":hidden":allColonSelectorsMatch=!element.visible();break;case":grabbed":allColonSelectorsMatch=element.grabbed();break;case":free":allColonSelectorsMatch=!element.grabbed();break;case":removed":allColonSelectorsMatch=element.removed();break;case":inside":allColonSelectorsMatch=!element.removed();break;case":grabbable":allColonSelectorsMatch=element.grabbable();break;case":ungrabbable":allColonSelectorsMatch=!element.grabbable();break;case":animated":allColonSelectorsMatch=element.animated();break;case":unanimated":allColonSelectorsMatch=!element.animated();break;case":parent":allColonSelectorsMatch=element.children().nonempty();break;case":child":allColonSelectorsMatch=element.parent().nonempty();break;case":active":allColonSelectorsMatch=element.active();break;case":inactive":allColonSelectorsMatch=!element.active();break;case":touch":allColonSelectorsMatch=window&&document&&("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)}if(!allColonSelectorsMatch)break}if(!allColonSelectorsMatch)return!1;for(var allIdsMatch=!0,k=0;k<query.ids.length;k++){var id=query.ids[k],actualId=element._private.data.id;if(allIdsMatch=allIdsMatch&&id==actualId,!allIdsMatch)break}if(!allIdsMatch)return!1;for(var allClassesMatch=!0,k=0;k<query.classes.length;k++){var cls=query.classes[k];if(allClassesMatch=allClassesMatch&&element.hasClass(cls),!allClassesMatch)break}if(!allClassesMatch)return!1;var allDataMatches=operandsMatch({name:"data",fieldValue:function(a){return element._private.data[a]},fieldRef:function(a){return"element._private.data."+a},fieldUndefined:function(a){return void 0===element._private.data[a]},fieldTruthy:function(a){return element._private.data[a]?!0:!1}});if(!allDataMatches)return!1;var allMetaMatches=operandsMatch({name:"meta",fieldValue:function(a){return element[a]()},fieldRef:function(a){return"element."+a+"()"},fieldUndefined:function(a){return void 0==element[a]()},fieldTruthy:function(a){return element[a]()?!0:!1}});if(!allMetaMatches)return!1;if(null!=query.collection){var matchesAny=null!=query.collection._private.ids[element.id()];if(!matchesAny)return!1}return null!=query.filter&&0==element.collection().filter(query.filter).size()?!1:confirmRelations(query.parent,function(){return element.parent()})?confirmRelations(query.ancestor,function(){return element.parents()})?confirmRelations(query.child,function(){return element.children()})?confirmRelations(query.descendant,function(){return element.descendants()})?!0:!1:!1:!1:!1},selectorFunction=function(a,b){for(var c=0;c<self.length;c++){var d=self[c];if(queryMatches(d,b))return!0}return!1};null==self._private.selectorText&&(selectorFunction=function(){return!0});var filteredCollection=collection.filter(selectorFunction);return filteredCollection},$$.selfn.toString=$$.selfn.selector=function(){function a(a){return $$.is.string(a)?a:""}function b(c){var e="",f=a(c.group);e+=f.substring(0,f.length-1);for(var g=0;g<c.data.length;g++){var h=c.data[g];e+="["+h.field+a(h.operator)+a(h.value)+"]"}for(var g=0;g<c.meta.length;g++){var i=c.meta[g];e+="{"+i.field+a(i.operator)+a(i.value)+"}"}for(var g=0;g<c.colonSelectors.length;g++){var j=c.colonSelectors[d];e+=j}for(var g=0;g<c.ids.length;g++){var j="#"+c.ids[d];e+=j}for(var g=0;g<c.classes.length;g++){var j="."+c.classes[d];e+=j}return null!=c.parent&&(e=b(c.parent)+" > "+e),null!=c.ancestor&&(e=b(c.ancestor)+" "+e),null!=c.child&&(e+=" > "+b(c.child)),null!=c.descendant&&(e+=" "+b(c.descendant)),e}for(var c="",d=0;d<this.length;d++){var e=this[d];c+=b(e),this.length>1&&d<this.length-1&&(c+=", ")}return c}}(cytoscape),function(a){function b(){}b.prototype.notify=function(){},a("renderer","null",b)}(cytoscape),function(a){function b(a){this.options=a,this.data={select:[void 0,void 0,void 0,void 0,0],renderer:this,cy:a.cy,container:a.cy.container(),canvases:new Array(i),canvasRedrawReason:new Array(i),canvasNeedsRedraw:new Array(i),bufferCanvases:new Array(o)},this.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},this.timeoutData={panTimeout:null},this.dragData={possibleDragElements:[]},this.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},this.zoomData={freeToZoom:!1,lastPointerX:null},this.redraws=0,this.bindings=[],this.init();for(var b=0;i>b;b++)this.data.canvases[b]=document.createElement("canvas"),this.data.canvases[b].style.position="absolute",this.data.canvases[b].setAttribute("data-id","layer"+b),this.data.canvases[b].style.zIndex=String(i-b),this.data.container.appendChild(this.data.canvases[b]),this.data.canvasRedrawReason[b]=new Array,this.data.canvasNeedsRedraw[b]=!1;this.data.canvases[m].setAttribute("data-id","layer"+m+"-node"),this.data.canvases[j].setAttribute("data-id","layer"+j+"-selectbox"),this.data.canvases[k].setAttribute("data-id","layer"+k+"-drag"),this.data.canvases[l].setAttribute("data-id","layer"+l+"-overlay");for(var b=0;o>b;b++)this.data.bufferCanvases[b]=document.createElement("canvas"),this.data.bufferCanvases[b].style.position="absolute",this.data.bufferCanvases[b].setAttribute("data-id","buffer"+b),this.data.bufferCanvases[b].style.zIndex=String(-b-1),this.data.bufferCanvases[b].style.visibility="visible",this.data.container.appendChild(this.data.bufferCanvases[b]);var c=document.createElement("div");if(this.data.container.appendChild(c),this.data.overlay=c,c.style.position="absolute",c.style.zIndex=1e3,a.showOverlay){var d=document.createElement("a");c.appendChild(d),this.data.link=d,d.innerHTML="cytoscape.js",d.style.font="14px helvetica",d.style.position="absolute",d.style.right=0,d.style.bottom=0,d.style.padding="1px 3px",d.style.paddingLeft="5px",d.style.paddingTop="5px",d.style.opacity=0,d.style["-webkit-tap-highlight-color"]="transparent",d.style.background="red",d.href="http://cytoscape.github.io/cytoscape.js/",d.target="_blank"}this.hideEdgesOnViewport=a.hideEdgesOnViewport,this.load()}var c="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,d=function(){return Date.now()},e={},f={},g=b.prototype,h=400,i=5,j=0,k=2,l=3,m=4,o=2;b.prototype.notify=function(a){return"destroy"==a.type?void this.destroy():(("add"==a.type||"remove"==a.type||"load"==a.type)&&(this.updateNodesCache(),this.updateEdgesCache()),"viewport"==a.type&&(this.data.canvasNeedsRedraw[j]=!0,this.data.canvasRedrawReason[j].push("viewchange")),this.data.canvasNeedsRedraw[k]=!0,this.data.canvasRedrawReason[k].push("notify"),this.data.canvasNeedsRedraw[m]=!0,this.data.canvasRedrawReason[m].push("notify"),this.redraws++,void this.redraw())},b.prototype.registerBinding=function(a,b,c,d){this.bindings.push({target:a,event:b,handler:c,useCapture:d}),a.addEventListener(b,c,d)},b.prototype.destroy=function(){this.destroyed=!0;for(var a=0;a<this.bindings.length;a++){var b=this.bindings[a],c=b;c.target.removeEventListener(c.event,c.handler,c.useCapture)}},b.prototype.png=function(){var a=this.data;this.data.container.clientHeight>0&&this.data.container.clientWidth>0&&(context=a.bufferCanvases[1].getContext("2d"),context.globalCompositeOperation="copy",context.drawImage(a.canvases[4],0,0),context.globalCompositeOperation="source-over",context.drawImage(a.canvases[2],0,0),context.drawImage(a.canvases[0],0,0),context=a.bufferCanvases[0].getContext("2d"),context.globalCompositeOperation="copy",context.drawImage(a.bufferCanvases[1],0,0));var b=this.data.bufferCanvases[0];return b.toDataURL("image/png")},b.prototype.load=function(){function c(a,b,c,d){return Math.sqrt((c-a)*(c-a)+(d-b)*(d-b))}var e=this,f=function(a,b,c){if(!b)for(var d=a.parents(),e=0;e<d.size();e++)if(d[e]._private.selected)return;for(var f=a.descendants(),e=0;e<f.size();e++)if(b||!f[e]._private.selected){f[e]._private.rscratch.inDragLayer=!0,c.push(f[e]);for(var g=0;g<f[e]._private.edges.length;g++)f[e]._private.edges[g]._private.rscratch.inDragLayer=!0}},g=function(a,b){a._private.grabbed=!0,a._private.rscratch.inDragLayer=!0,b.push(a);for(var c=0;c<a._private.edges.length;c++)a._private.edges[c]._private.rscratch.inDragLayer=!0},i=function(a,b){for(var c=a;c.parent().nonempty();)c=c.parent()[0];if(c!=a||!b)for(var d=c.descendants().add(c),e=0;e<d.size();e++){d[e]._private.rscratch.inDragLayer=b;for(var f=0;f<d[e]._private.edges.length;f++)d[e]._private.edges[f]._private.rscratch.inDragLayer=b}};b.prototype.nodeIsDraggable=function(a){return 0!=a._private.style.opacity.value&&"visible"==a._private.style.visibility.value&&!a._private.locked&&a._private.grabbable?!0:!1},e.registerBinding(window,"resize",function(){e.data.canvasNeedsRedraw[m]=!0,e.data.canvasNeedsRedraw[l]=!0,e.matchCanvasSize(e.data.container),e.redraw()},!0),e.registerBinding(e.data.container,"contextmenu",function(a){a.preventDefault()}),e.registerBinding(e.data.container,"mousedown",function(b){b.preventDefault(),e.hoverData.capture=!0,e.hoverData.which=b.which;var c=e.data.cy,d=e.projectIntoViewport(b.pageX,b.pageY),k=e.data.select,l=e.findNearestElement(d[0],d[1],!0),m=(e.hoverData.down,e.dragData.possibleDragElements),n=new a.Event(b,{type:"grab"});if(3==b.which)l&&(l.activate(),l.trigger(new a.Event(b,{type:"cxttapstart"})),e.hoverData.down=l,e.hoverData.downTime=(new Date).getTime(),e.hoverData.cxtDragged=!1);else if(1==b.which){if(l&&l.activate(),null!=l&&e.nodeIsDraggable(l)){if("nodes"==l._private.group&&0==l._private.selected&&(m=e.dragData.possibleDragElements=[],g(l,m),l.trigger(n),("auto"==l._private.style.width.value||"auto"==l._private.style.height.value)&&f(l,!0,m),i(l,!0)),"nodes"==l._private.group&&1==l._private.selected){m=e.dragData.possibleDragElements=[];for(var o=!1,p=c.$("node:selected"),q=0;q<p.length;q++)e.nodeIsDraggable(p[q])&&(g(p[q],m),o||(l.trigger(n),o=!0),("auto"==p[q]._private.style.width.value||"auto"==p[q]._private.style.height.value)&&f(p[q],!1,m),i(p[q],!0))}l.trigger(new a.Event(b,{type:"mousedown"})).trigger(new a.Event(b,{type:"tapstart"})).trigger(new a.Event(b,{type:"vmousedown"}))}else null==l&&c.trigger(new a.Event(b,{type:"mousedown"})).trigger(new a.Event(b,{type:"tapstart"})).trigger(new a.Event(b,{type:"vmousedown"}));if(e.hoverData.down=l,e.hoverData.downTime=(new Date).getTime(),null==l||l.isEdge()){k[4]=1;var r=Math.max(0,h-(+new Date-e.hoverData.downTime));clearTimeout(e.bgActiveTimeout),e.bgActiveTimeout=setTimeout(function(){l&&l.unactivate(),e.data.bgActivePosistion={x:d[0],y:d[1]},e.data.canvasNeedsRedraw[j]=!0,e.data.canvasRedrawReason[j].push("bgactive"),e.redraw()},r)}}k[0]=k[2]=d[0],k[1]=k[3]=d[1],e.redraw()},!1),e.registerBinding(window,"mousemove",function(b){var c=!1,d=e.hoverData.capture;if(!d){var f=e.findContainerPageCoords();if(!(b.pageX>f[0]&&b.pageX<f[0]+e.data.container.clientWidth&&b.pageY>f[1]&&b.pageY<f[1]+e.data.container.clientHeight))return
}{var g=e.data.cy,i=e.projectIntoViewport(b.pageX,b.pageY),l=e.data.select,n=e.findNearestElement(i[0],i[1],!0),o=e.hoverData.last,p=e.hoverData.down,q=[i[0]-l[2],i[1]-l[3]],r=(e.getCachedNodes(),e.getCachedEdges(),e.dragData.possibleDragElements);b.shiftKey}c=!0;var s=new a.Event(b,{type:"mousemove"});if(null!=n?n.trigger(s):null==n&&g.trigger(s),3===e.hoverData.which){var t=new a.Event(b,{type:"cxtdrag"});p?p.trigger(t):g.trigger(t),e.hoverData.cxtDragged=!0}else if(e.hoverData.dragging){if(c=!0,g.panningEnabled()){var u={x:q[0]*g.zoom(),y:q[1]*g.zoom()};g.panBy(u)}i=e.projectIntoViewport(b.pageX,b.pageY)}else if(1==l[4]&&(null==p||p.isEdge())&&(!g.boxSelectionEnabled()||+new Date-e.hoverData.downTime>=h)&&Math.abs(l[3]-l[1])+Math.abs(l[2]-l[0])<4&&g.panningEnabled())e.hoverData.dragging=!0,l[4]=0;else{if(g.boxSelectionEnabled()&&Math.pow(l[2]-l[0],2)+Math.pow(l[3]-l[1],2)>7&&l[4]&&clearTimeout(e.bgActiveTimeout),p&&p.isEdge()&&p.active()&&p.unactivate(),n!=o&&(o&&o.trigger(new a.Event(b,{type:"mouseout"})),n&&n.trigger(new a.Event(b,{type:"mouseover"})),e.hoverData.last=n),p&&p.isNode()&&e.nodeIsDraggable(p)){e.dragData.didDrag=!0;for(var v=[],w=0;w<r.length;w++)"nodes"==r[w]._private.group&&e.nodeIsDraggable(r[w])&&(r[w]._private.position.x+=q[0],r[w]._private.position.y+=q[1],v.push(r[w]));new a.Collection(g,v).trigger(new a.Event(b,{type:"drag"})).trigger(new a.Event(b,{type:"position"})),l[2]==l[0]&&l[3]==l[1]&&(e.data.canvasNeedsRedraw[m]=!0,e.data.canvasRedrawReason[m].push("Node(s) and edge(s) moved to drag layer")),e.data.canvasNeedsRedraw[k]=!0,e.data.canvasRedrawReason[k].push("Nodes dragged")}g.boxSelectionEnabled()&&(e.data.canvasNeedsRedraw[j]=!0,e.data.canvasRedrawReason[j].push("Mouse moved, redraw selection box")),c=!0}return l[2]=i[0],l[3]=i[1],e.redraw(),c?(b.stopPropagation&&b.stopPropagation(),b.preventDefault&&b.preventDefault(),b.cancelBubble=!0,b.returnValue=!1,!1):void 0},!1),e.registerBinding(window,"mouseup",function(b){var c=e.hoverData.capture;if(c){e.hoverData.capture=!1;var d=e.data.cy,f=e.projectIntoViewport(b.pageX,b.pageY),g=e.data.select,h=e.findNearestElement(f[0],f[1],!0),l=(e.getCachedNodes(),e.getCachedEdges(),e.dragData.possibleDragElements),n=e.hoverData.down,o=b.shiftKey;if(e.data.bgActivePosistion=void 0,clearTimeout(e.bgActiveTimeout),n&&n.unactivate(),3===e.hoverData.which){var p=new a.Event(b,{type:"cxttapend"});if(n?n.trigger(p):d.trigger(p),!e.hoverData.cxtDragged){var q=new a.Event(b,{type:"cxttap"});n?n.trigger(q):d.trigger(q)}e.hoverData.cxtDragged=!1,e.hoverData.which=null}else{if(null!=n||e.dragData.didDrag||Math.pow(g[2]-g[0],2)+Math.pow(g[3]-g[1],2)>7&&g[4]||e.hoverData.dragging||(d.$(":selected").unselect(),l.length>0&&(e.data.canvasNeedsRedraw[m]=!0,e.data.canvasRedrawReason[m].push("De-select")),e.dragData.possibleDragElements=l=[]),Math.pow(g[2]-g[0],2)+Math.pow(g[3]-g[1],2)==0&&(null!=h?h.trigger(new a.Event(b,{type:"click"})).trigger(new a.Event(b,{type:"tap"})).trigger(new a.Event(b,{type:"vclick"})):null==h&&d.trigger(new a.Event(b,{type:"click"})).trigger(new a.Event(b,{type:"tap"})).trigger(new a.Event(b,{type:"vclick"}))),null!=h?h.trigger(new a.Event(b,{type:"mouseup"})).trigger(new a.Event(b,{type:"tapend"})).trigger(new a.Event(b,{type:"vmouseup"})):null==h&&d.trigger(new a.Event(b,{type:"mouseup"})).trigger(new a.Event(b,{type:"tapend"})).trigger(new a.Event(b,{type:"vmouseup"})),h!=n||e.dragData.didDrag){if(h==n&&null!=h&&h._private.grabbed){for(var r=d.$(":grabbed"),s=0;s<r.length;s++){var t=r[s];t._private.grabbed=!1;for(var u=t._private.edges,v=0;v<u.length;v++)u[v]._private.rscratch.inDragLayer=!1;i(t,!1)}var w=new a.Event(b,{type:"free"});r.trigger(w)}}else null!=h&&h._private.selectable&&(o||d.$(":selected").unselect(),h.selected()?h.unselect():h.select(),i(h,!1),e.data.canvasNeedsRedraw[m]=!0,e.data.canvasRedrawReason[m].push("sglslct"));if(d.boxSelectionEnabled()&&Math.pow(g[2]-g[0],2)+Math.pow(g[3]-g[1],2)>7&&g[4]){o||d.$(":selected").unselect();for(var x=[],y=e.getAllInBox(g[0],g[1],g[2],g[3]),s=(new a.Event(b,{type:"select"}),0);s<y.length;s++)y[s]._private.selectable&&(l.push(y[s]),x.push(y[s]));new a.Collection(d,x).select(),y.length>0&&(e.data.canvasNeedsRedraw[m]=!0,e.data.canvasRedrawReason[m].push("Selection"))}if(e.hoverData.dragging=!1,!g[4]){for(var w=new a.Event(b,{type:"free"}),s=0;s<l.length;s++)if("nodes"==l[s]._private.group){l[s]._private.rscratch.inDragLayer=!1;for(var u=l[s]._private.edges,v=0;v<u.length;v++)u[v]._private.rscratch.inDragLayer=!1;i(l[s],!1)}else"edges"==l[s]._private.group&&(l[s]._private.rscratch.inDragLayer=!1);n&&n.trigger(w),e.data.canvasNeedsRedraw[k]=!0,e.data.canvasRedrawReason[k].push("Node/nodes back from drag"),e.data.canvasNeedsRedraw[m]=!0,e.data.canvasRedrawReason[m].push("Node/nodes back from drag")}}g[4]=0,e.hoverData.down=null,e.data.canvasNeedsRedraw[j]=!0,e.data.canvasRedrawReason[j].push("Mouse up, selection box gone"),e.dragData.didDrag=!1,e.redraw()}},!1);var n=function(a){var b=e.data.cy,c=e.projectIntoViewport(a.pageX,a.pageY),d=[c[0]*b.zoom()+b.pan().x,c[1]*b.zoom()+b.pan().y];if(e.zoomData.freeToZoom){a.preventDefault();var f=a.wheelDeltaY/1e3||a.detail/-32;b.panningEnabled()&&b.zoomingEnabled()&&b.zoom({level:b.zoom()*Math.pow(10,f),position:{x:d[0],y:d[1]}}),e.data.wheel=!0,clearTimeout(e.data.wheelTimeout),e.data.wheelTimeout=setTimeout(function(){e.data.wheel=!1,e.data.canvasNeedsRedraw[m]=!0,e.redraw()},100)}};e.registerBinding(e.data.container,"mousewheel",n,!0),e.registerBinding(e.data.container,"DOMMouseScroll",n,!0),e.registerBinding(e.data.container,"MozMousePixelScroll",function(a){e.zoomData.freeToZoom&&a.preventDefault()},!1),e.registerBinding(e.data.container,"mousemove",function(a){e.zoomData.lastPointerX&&e.zoomData.lastPointerX!=a.pageX&&!e.zoomData.freeToZoom&&(e.zoomData.freeToZoom=!0),e.zoomData.lastPointerX=a.pageX},!1),e.registerBinding(e.data.container,"mouseout",function(){e.zoomData.freeToZoom=!1,e.zoomData.lastPointerX=null},!1),e.registerBinding(e.data.container,"mouseout",function(b){e.data.cy.trigger(new a.Event(b,{type:"mouseout"}))},!1),e.registerBinding(e.data.container,"mouseover",function(b){e.data.cy.trigger(new a.Event(b,{type:"mouseover"}))},!1);var o,p,q,r,s,t,u,v,w,x,y=e.data.container.clientWidth,z=e.data.container.clientHeight;e.registerBinding(e.data.container,"touchstart",function(b){function h(a){for(var b=0;b<a.length;b++)a[b]._private.grabbed=!1,a[b]._private.rscratch.inDragLayer=!1,a[b].active()&&a[b].unactivate()}b.target!==e.data.link&&b.preventDefault(),e.touchData.capture=!0,e.data.bgActivePosistion=void 0;var k=e.data.cy,l=e.getCachedNodes(),m=e.getCachedEdges(),n=e.touchData.now,A=e.touchData.earlier;if(b.touches[0]){var B=e.projectIntoViewport(b.touches[0].pageX,b.touches[0].pageY);n[0]=B[0],n[1]=B[1]}if(b.touches[1]){var B=e.projectIntoViewport(b.touches[1].pageX,b.touches[1].pageY);n[2]=B[0],n[3]=B[1]}if(b.touches[2]){var B=e.projectIntoViewport(b.touches[2].pageX,b.touches[2].pageY);n[4]=B[0],n[5]=B[1]}if(b.touches[1]){h(l),h(m);var C=e.findContainerPageCoords();w=C[1],v=C[0],o=b.touches[0].pageX-v,p=b.touches[0].pageY-w,q=b.touches[1].pageX-v,r=b.touches[1].pageY-w,x=o>=0&&y>=o&&q>=0&&y>=q&&p>=0&&z>=p&&r>=0&&z>=r;var D=k.pan(),E=k.zoom();if(s=c(o,p,q,r),t=[(o+q)/2,(p+r)/2],u=[(t[0]-D.x)/E,(t[1]-D.y)/E],100>s){var F=e.findNearestElement(n[0],n[1],!0),G=e.findNearestElement(n[2],n[3],!0),H=new a.Event(b,{type:"cxttapstart"});return F&&F.isNode()?(F.activate().trigger(H),e.touchData.start=F):G&&G.isNode()?(G.activate().trigger(H),e.touchData.start=G):(k.trigger(H),e.touchData.start=null),e.touchData.start&&(e.touchData.start._private.grabbed=!1),e.touchData.cxt=!0,e.touchData.cxtDragged=!1,e.data.bgActivePosistion=void 0,void e.redraw()}}if(b.touches[2]);else if(b.touches[1]);else if(b.touches[0]){var I=e.findNearestElement(n[0],n[1],!0);if(null!=I){if(I.activate(),e.touchData.start=I,"nodes"==I._private.group&&e.nodeIsDraggable(I)){var J=e.dragData.touchDragEles=[];if(g(I,J),I.trigger(new a.Event(b,{type:"grab"})),I.selected()){J=e.dragData.touchDragEles=[];for(var K=k.$("node:selected"),L=0;L<K.length;L++){var M=K[L];if(e.nodeIsDraggable(M)){J.push(M),M._private.rscratch.inDragLayer=!0;for(var N=M._private.edges,O=0;O<N.length;O++)N[O]._private.rscratch.inDragLayer=!0;("auto"==M._private.style.width.value||"auto"==M._private.style.height.value)&&f(M,!1,J),i(M,!0)}}}else("auto"==I._private.style.width.value||"auto"==I._private.style.height.value)&&f(I,!0,J),i(I,!0)}I.trigger(new a.Event(b,{type:"touchstart"})).trigger(new a.Event(b,{type:"tapstart"})).trigger(new a.Event(b,{type:"vmousdown"}))}null==I&&(k.trigger(new a.Event(b,{type:"touchstart"})).trigger(new a.Event(b,{type:"tapstart"})).trigger(new a.Event(b,{type:"vmousedown"})),e.data.bgActivePosistion={x:B[0],y:B[1]},e.data.canvasNeedsRedraw[j]=!0,e.data.canvasRedrawReason[j].push("bgactive"));for(var P=0;P<n.length;P++)A[P]=n[P],e.touchData.startPosition[P]=n[P];e.touchData.singleTouchMoved=!1,e.touchData.singleTouchStartTime=d();{setTimeout(function(){0==e.touchData.singleTouchMoved&&d()-e.touchData.singleTouchStartTime>250&&(e.touchData.start?e.touchData.start.trigger(new a.Event(b,{type:"taphold"})):(e.data.cy.trigger(new a.Event(b,{type:"taphold"})),k.$(":selected").unselect()))},1e3)}}e.redraw()},!1),e.registerBinding(window,"touchmove",function(b){var d=e.data.select,f=e.touchData.capture;f&&b.preventDefault();var g=e.data.cy,h=(e.getCachedNodes(),e.getCachedEdges(),e.touchData.now),i=e.touchData.earlier;if(b.touches[0]){var l=e.projectIntoViewport(b.touches[0].pageX,b.touches[0].pageY);h[0]=l[0],h[1]=l[1]}if(b.touches[1]){var l=e.projectIntoViewport(b.touches[1].pageX,b.touches[1].pageY);h[2]=l[0],h[3]=l[1]}if(b.touches[2]){var l=e.projectIntoViewport(b.touches[2].pageX,b.touches[2].pageY);h[4]=l[0],h[5]=l[1]}for(var n=[],t=0;t<h.length;t++)n[t]=h[t]-i[t];if(f&&e.touchData.cxt){var y=b.touches[0].pageX-v,z=b.touches[0].pageY-w,A=b.touches[1].pageX-v,B=b.touches[1].pageY-w,C=c(y,z,A,B),D=C/s;if(D>=1.5||C>=150){e.touchData.cxt=!1,e.touchData.start&&(e.touchData.start.unactivate(),e.touchData.start=null),e.data.bgActivePosistion=void 0,e.data.canvasNeedsRedraw[j]=!0;var E=new a.Event(b,{type:"cxttapend"});e.touchData.start?e.touchData.start.trigger(E):g.trigger(E)}}if(f&&e.touchData.cxt){var E=new a.Event(b,{type:"cxtdrag"});e.data.bgActivePosistion=void 0,e.data.canvasNeedsRedraw[j]=!0,e.touchData.start?e.touchData.start.trigger(E):g.trigger(E),e.touchData.start&&(e.touchData.start._private.grabbed=!1),e.touchData.cxtDragged=!0}else if(f&&b.touches[2]&&g.boxSelectionEnabled())e.data.bgActivePosistion=void 0,clearTimeout(this.threeFingerSelectTimeout),this.lastThreeTouch=+new Date,e.data.canvasNeedsRedraw[j]=!0,e.data.canvasRedrawReason[j].push("Touch moved, redraw selection box"),d&&0!==d.length&&void 0!==d[0]?(d[2]=(h[0]+h[2]+h[4])/3,d[3]=(h[1]+h[3]+h[5])/3):(d[0]=(h[0]+h[2]+h[4])/3,d[1]=(h[1]+h[3]+h[5])/3,d[2]=(h[0]+h[2]+h[4])/3+1,d[3]=(h[1]+h[3]+h[5])/3+1),d[4]=1;else if(f&&b.touches[1]&&g.zoomingEnabled()&&g.panningEnabled()){e.data.bgActivePosistion=void 0,e.data.canvasNeedsRedraw[j]=!0;var y=b.touches[0].pageX-v,z=b.touches[0].pageY-w,A=b.touches[1].pageX-v,B=b.touches[1].pageY-w,C=c(y,z,A,B),D=C/s;if(1!=D&&x){var F=y-o,G=z-p,H=A-q,I=B-r,J=(F+H)/2,K=(G+I)/2,L=g.zoom(),M=L*D,N=g.pan(),O=u[0]*L+N.x,P=u[1]*L+N.y,Q={x:-M/L*(O-N.x-J)+O,y:-M/L*(P-N.y-K)+P};g._private.zoom=M,g._private.pan=Q,g.trigger("pan zoom").notify("viewport"),s=C,o=y,p=z,q=A,r=B,e.pinching=!0}if(b.touches[0]){var l=e.projectIntoViewport(b.touches[0].pageX,b.touches[0].pageY);h[0]=l[0],h[1]=l[1]}if(b.touches[1]){var l=e.projectIntoViewport(b.touches[1].pageX,b.touches[1].pageY);h[2]=l[0],h[3]=l[1]}if(b.touches[2]){var l=e.projectIntoViewport(b.touches[2].pageX,b.touches[2].pageY);h[4]=l[0],h[5]=l[1]}}else if(b.touches[0]){var R=e.touchData.start,S=e.touchData.last;if(null!=R&&"nodes"==R._private.group&&e.nodeIsDraggable(R)){for(var T=e.dragData.touchDragEles,U=0;U<T.length;U++){var V=T[U];e.nodeIsDraggable(V)&&(e.dragData.didDrag=!0,V._private.position.x+=n[0],V._private.position.y+=n[1])}new a.Collection(g,T).trigger(new a.Event(b,{type:"drag"})).trigger(new a.Event(b,{type:"position"})),e.data.canvasNeedsRedraw[k]=!0,e.data.canvasRedrawReason[k].push("touchdrag node"),e.touchData.startPosition[0]==i[0]&&e.touchData.startPosition[1]==i[1]&&(e.data.canvasNeedsRedraw[m]=!0,e.data.canvasRedrawReason[m].push("node drag started"))}if(null!=R&&R.trigger(new a.Event(b,{type:"touchmove"})),null==R){var W=e.findNearestElement(h[0],h[1],!0);null!=W&&W.trigger(new a.Event(b,{type:"touchmove"})),null==W&&g.trigger(new a.Event(b,{type:"touchmove"}))}W!=S&&(S&&S.trigger(new a.Event(b,{type:"touchout"})),W&&W.trigger(new a.Event(b,{type:"touchover"}))),e.touchData.last=W;for(var X=0;X<h.length;X++)h[X]&&e.touchData.startPosition[X]&&Math.abs(h[X]-e.touchData.startPosition[X])>4&&(e.touchData.singleTouchMoved=!0);if(f&&(null==R||R.isEdge())&&g.panningEnabled()){R&&(R.unactivate(),e.data.bgActivePosistion||(e.data.bgActivePosistion={x:h[0],y:h[1]}),e.data.canvasNeedsRedraw[j]=!0,e.data.canvasRedrawReason[j].push("bgactive")),g.panBy({x:n[0]*g.zoom(),y:n[1]*g.zoom()}),e.swipePanning=!0;var l=e.projectIntoViewport(b.touches[0].pageX,b.touches[0].pageY);h[0]=l[0],h[1]=l[1]}}for(var t=0;t<h.length;t++)i[t]=h[t];e.redraw()},!1),e.registerBinding(window,"touchend",function(b){var c=e.touchData.capture;if(c){e.touchData.capture=!1,b.preventDefault();var d=e.data.select;e.swipePanning=!1;var f=e.data.cy,g=(e.getCachedNodes(),e.getCachedEdges(),e.touchData.now),h=e.touchData.earlier,l=e.touchData.start;if(b.touches[0]){var n=e.projectIntoViewport(b.touches[0].pageX,b.touches[0].pageY);g[0]=n[0],g[1]=n[1]}if(b.touches[1]){var n=e.projectIntoViewport(b.touches[1].pageX,b.touches[1].pageY);g[2]=n[0],g[3]=n[1]}if(b.touches[2]){var n=e.projectIntoViewport(b.touches[2].pageX,b.touches[2].pageY);g[4]=n[0],g[5]=n[1]}if(e.touchData.cxt){if(ctxTapend=new a.Event(b,{type:"cxttapend"}),l?(l.unactivate(),l.trigger(ctxTapend)):f.trigger(ctxTapend),!e.touchData.cxtDragged){var o=new a.Event(b,{type:"cxttap"});l?l.trigger(o):f.trigger(o)}return e.touchData.start&&(e.touchData.start._private.grabbed=!1),e.touchData.cxt=!1,e.touchData.start=null,void e.redraw()}{+new Date}!b.touches[2]&&f.boxSelectionEnabled()&&(clearTimeout(this.threeFingerSelectTimeout),this.threeFingerSelectTimeout=setTimeout(function(){var c=[],g=e.getAllInBox(d[0],d[1],d[2],d[3]);d[0]=void 0,d[1]=void 0,d[2]=void 0,d[3]=void 0,d[4]=0,e.data.canvasNeedsRedraw[j]=!0,e.data.canvasRedrawReason[j].push("Touch moved, redraw selection box");for(var h=(new a.Event(b,{type:"select"}),0);h<g.length;h++)g[h]._private.selectable&&c.push(g[h]);new a.Collection(f,c).select(),g.length>0&&(e.data.canvasNeedsRedraw[m]=!0,e.data.canvasRedrawReason[m].push("Selection"))},100)),b.touches[1]||(e.pinching=!1);var p=!1;if(null!=l&&(l._private.active=!1,p=!0,l.trigger(new a.Event(b,{type:"unactivate"}))),b.touches[2])e.data.bgActivePosistion=void 0;else if(b.touches[1]);else if(b.touches[0]);else if(!b.touches[0]){if(e.data.bgActivePosistion=void 0,null!=l){1==l._private.grabbed&&(l._private.grabbed=!1,l.trigger(new a.Event(b,{type:"free"})),l._private.rscratch.inDragLayer=!1);for(var q=l._private.edges,r=0;r<q.length;r++)q[r]._private.rscratch.inDragLayer=!1;if(i(l,!1),l.selected())for(var s=f.$("node:selected"),t=0;t<s.length;t++){var u=s[t];u._private.rscratch.inDragLayer=!1;for(var q=u._private.edges,r=0;r<q.length;r++)q[r]._private.rscratch.inDragLayer=!1;i(u,!1)}e.data.canvasNeedsRedraw[k]=!0,e.data.canvasRedrawReason[k].push("touchdrag node end"),e.data.canvasNeedsRedraw[m]=!0,e.data.canvasRedrawReason[m].push("touchdrag node end"),l.trigger(new a.Event(b,{type:"touchend"})).trigger(new a.Event(b,{type:"tapend"})).trigger(new a.Event(b,{type:"vmouseup"})),e.touchData.start=null}else{var v=e.findNearestElement(g[0],g[1],!0);null!=v&&v.trigger(new a.Event(b,{type:"touchend"})).trigger(new a.Event(b,{type:"tapend"})).trigger(new a.Event(b,{type:"vmouseup"})),null==v&&f.trigger(new a.Event(b,{type:"touchend"})).trigger(new a.Event(b,{type:"tapend"})).trigger(new a.Event(b,{type:"vmouseup"}))}null!=l&&!e.dragData.didDrag&&l._private.selectable&&Math.sqrt(Math.pow(e.touchData.startPosition[0]-g[0],2)+Math.pow(e.touchData.startPosition[1]-g[1],2))<6&&(l.selected()?(l._private.selected=!1,l.trigger(new a.Event(b,{type:"unselect"}))):(l._private.selected=!0,l.trigger(new a.Event(b,{type:"select"}))),p=!0,e.data.canvasNeedsRedraw[m]=!0,e.data.canvasRedrawReason[m].push("sglslct")),0==e.touchData.singleTouchMoved&&(l?l.trigger(new a.Event(b,{type:"tap"})).trigger(new a.Event(b,{type:"vclick"})):f.trigger(new a.Event(b,{type:"tap"})).trigger(new a.Event(b,{type:"vclick"}))),e.touchData.singleTouchMoved=!0}for(var r=0;r<g.length;r++)h[r]=g[r];e.dragData.didDrag=!1,p&&l&&l.updateStyle(!1),e.redraw()}},!1)},b.prototype.init=function(){},b.prototype.getCachedNodes=function(){var a=this.data,b=this.data.cy;return void 0==a.cache&&(a.cache={}),void 0==a.cache.cachedNodes&&(a.cache.cachedNodes=b.nodes()),a.cache.cachedNodes},b.prototype.updateNodesCache=function(){var a=this.data,b=this.data.cy;void 0==a.cache&&(a.cache={}),a.cache.cachedNodes=b.nodes()},b.prototype.getCachedEdges=function(){var a=this.data,b=this.data.cy;return void 0==a.cache&&(a.cache={}),void 0==a.cache.cachedEdges&&(a.cache.cachedEdges=b.edges()),a.cache.cachedEdges},b.prototype.updateEdgesCache=function(){var a=this.data,b=this.data.cy;void 0==a.cache&&(a.cache={}),a.cache.cachedEdges=b.edges()},b.prototype.projectIntoViewport=function(a,b){n=this.data.container;var c=this.findContainerPageCoords(),d=c[0],e=c[1];return x=a-d,y=b-e,x-=this.data.cy.pan().x,y-=this.data.cy.pan().y,x/=this.data.cy.zoom(),y/=this.data.cy.zoom(),[x,y]},b.prototype.findContainerPageCoords=function(){var a,b=0,c=0;a=this.data.container;for(var d=!1;null!=a;){var e=window.getComputedStyle(a);"fixed"===e.getPropertyValue("position").toLowerCase()?(b=a.offsetLeft+window.scrollX,c=a.offsetTop+window.scrollY,a=null):"number"==typeof a.offsetLeft&&(b+=a.offsetLeft,c+=a.offsetTop,(a==document.body||a==document.header)&&(d=!0),d||(b-=a.scrollLeft,c-=a.scrollTop)),a&&(a=a.offsetParent)}return[b,c]},b.prototype.findNearestElement=function(a,b,d){for(var g=this.data,h=this.getCachedNodes(),i=this.getCachedEdges(),j=[],k=this.data.cy.zoom(),l=(c?256:32)/k,m=(c?16:0)/k,n=0;n<h.length;n++)f[this.getNodeShape(h[n])].checkPointRough(a,b,h[n]._private.style["border-width"].value/2,this.getNodeWidth(h[n])+m,this.getNodeHeight(h[n])+m,h[n]._private.position.x,h[n]._private.position.y)&&f[this.getNodeShape(h[n])].checkPoint(a,b,h[n]._private.style["border-width"].value/2,this.getNodeWidth(h[n])+m,this.getNodeHeight(h[n])+m,h[n]._private.position.x,h[n]._private.position.y)&&(d?0!=h[n]._private.style.opacity.value&&"visible"==h[n]._private.style.visibility.value&&j.push(h[n]):j.push(h[n]));for(var o,n=0;n<i.length;n++){var p=i[n],r=p._private.rscratch;if(o=!1,"self"==r.edgeType?(this.inBezierVicinity(a,b,r.startX,r.startY,r.cp2ax,r.cp2ay,r.selfEdgeMidX,r.selfEdgeMidY,Math.pow(p._private.style.width.value/2,2))&&Math.pow(i[n]._private.style.width.value/2,2)+l>this.sqDistanceToQuadraticBezier(a,b,r.startX,r.startY,r.cp2ax,r.cp2ay,r.selfEdgeMidX,r.selfEdgeMidY)||this.inBezierVicinity(a,b,r.selfEdgeMidX,r.selfEdgeMidY,r.cp2cx,r.cp2cy,r.endX,r.endY,Math.pow(i[n]._private.style.width.value/2,2))&&Math.pow(i[n]._private.style.width.value/2,2)+l>this.sqDistanceToQuadraticBezier(a,b,r.selfEdgeMidX,r.selfEdgeMidY,r.cp2cx,r.cp2cy,r.endX,r.endY))&&(o=!0):"straight"==r.edgeType?this.inLineVicinity(a,b,r.startX,r.startY,r.endX,r.endY,2*i[n]._private.style.width.value)&&Math.pow(i[n]._private.style.width.value/2,2)+l>this.sqDistanceToFiniteLine(a,b,r.startX,r.startY,r.endX,r.endY)&&(o=!0):"bezier"==r.edgeType&&this.inBezierVicinity(a,b,r.startX,r.startY,r.cp2x,r.cp2y,r.endX,r.endY,Math.pow(i[n]._private.style.width.value/2,2))&&Math.pow(i[n]._private.style.width.value/2,2)+l>this.sqDistanceToQuadraticBezier(a,b,r.startX,r.startY,r.cp2x,r.cp2y,r.endX,r.endY)&&(o=!0),j.length&&j[j.length-1]==i[n]||(e[i[n]._private.style["source-arrow-shape"].value].roughCollide(a,b,i[n]._private.rscratch.arrowStartX,i[n]._private.rscratch.arrowStartY,this.getArrowWidth(i[n]._private.style.width.value),this.getArrowHeight(i[n]._private.style.width.value),[i[n]._private.rscratch.arrowStartX-i[n].source()[0]._private.position.x,i[n]._private.rscratch.arrowStartY-i[n].source()[0]._private.position.y],0)&&e[i[n]._private.style["source-arrow-shape"].value].collide(a,b,i[n]._private.rscratch.arrowStartX,i[n]._private.rscratch.arrowStartY,this.getArrowWidth(i[n]._private.style.width.value),this.getArrowHeight(i[n]._private.style.width.value),[i[n]._private.rscratch.arrowStartX-i[n].source()[0]._private.position.x,i[n]._private.rscratch.arrowStartY-i[n].source()[0]._private.position.y],0)||e[i[n]._private.style["target-arrow-shape"].value].roughCollide(a,b,i[n]._private.rscratch.arrowEndX,i[n]._private.rscratch.arrowEndY,this.getArrowWidth(i[n]._private.style.width.value),this.getArrowHeight(i[n]._private.style.width.value),[i[n]._private.rscratch.arrowEndX-i[n].target()[0]._private.position.x,i[n]._private.rscratch.arrowEndY-i[n].target()[0]._private.position.y],0)&&e[i[n]._private.style["target-arrow-shape"].value].collide(a,b,i[n]._private.rscratch.arrowEndX,i[n]._private.rscratch.arrowEndY,this.getArrowWidth(i[n]._private.style.width.value),this.getArrowHeight(i[n]._private.style.width.value),[i[n]._private.rscratch.arrowEndX-i[n].target()[0]._private.position.x,i[n]._private.rscratch.arrowEndY-i[n].target()[0]._private.position.y],0))&&(o=!0),o)if(d){var s=g.cy.getElementById(i[n]._private.data.source),t=g.cy.getElementById(i[n]._private.data.target);0!=i[n]._private.style.opacity.value&&"visible"==i[n]._private.style.visibility.value&&0!=s._private.style.opacity.value&&"visible"==s._private.style.visibility.value&&0!=t._private.style.opacity.value&&"visible"==t._private.style.visibility.value&&j.push(i[n])}else j.push(i[n])}return j.sort(q),j.length>0?j[j.length-1]:null},b.prototype.getAllInBox=function(a,b,c,d){var e=(this.data,this.getCachedNodes()),g=this.getCachedEdges(),h=[],i=Math.min(a,c),j=Math.max(a,c),k=Math.min(b,d),l=Math.max(b,d);a=i,c=j,b=k,d=l;for(var m,n=0;n<e.length;n++)f[this.getNodeShape(e[n])].intersectBox(a,b,c,d,this.getNodeWidth(e[n]),this.getNodeHeight(e[n]),e[n]._private.position.x,e[n]._private.position.y,e[n]._private.style["border-width"].value/2)&&h.push(e[n]);for(var n=0;n<g.length;n++)"self"==g[n]._private.rscratch.edgeType&&((m=this.boxInBezierVicinity(a,b,c,d,g[n]._private.rscratch.startX,g[n]._private.rscratch.startY,g[n]._private.rscratch.cp2ax,g[n]._private.rscratch.cp2ay,g[n]._private.rscratch.endX,g[n]._private.rscratch.endY,g[n]._private.style.width.value))&&(2==m||1==m&&this.checkBezierInBox(a,b,c,d,g[n]._private.rscratch.startX,g[n]._private.rscratch.startY,g[n]._private.rscratch.cp2ax,g[n]._private.rscratch.cp2ay,g[n]._private.rscratch.endX,g[n]._private.rscratch.endY,g[n]._private.style.width.value))||(m=this.boxInBezierVicinity(a,b,c,d,g[n]._private.rscratch.startX,g[n]._private.rscratch.startY,g[n]._private.rscratch.cp2cx,g[n]._private.rscratch.cp2cy,g[n]._private.rscratch.endX,g[n]._private.rscratch.endY,g[n]._private.style.width.value))&&(2==m||1==m&&this.checkBezierInBox(a,b,c,d,g[n]._private.rscratch.startX,g[n]._private.rscratch.startY,g[n]._private.rscratch.cp2cx,g[n]._private.rscratch.cp2cy,g[n]._private.rscratch.endX,g[n]._private.rscratch.endY,g[n]._private.style.width.value)))&&h.push(g[n]),"bezier"==g[n]._private.rscratch.edgeType&&(m=this.boxInBezierVicinity(a,b,c,d,g[n]._private.rscratch.startX,g[n]._private.rscratch.startY,g[n]._private.rscratch.cp2x,g[n]._private.rscratch.cp2y,g[n]._private.rscratch.endX,g[n]._private.rscratch.endY,g[n]._private.style.width.value))&&(2==m||1==m&&this.checkBezierInBox(a,b,c,d,g[n]._private.rscratch.startX,g[n]._private.rscratch.startY,g[n]._private.rscratch.cp2x,g[n]._private.rscratch.cp2y,g[n]._private.rscratch.endX,g[n]._private.rscratch.endY,g[n]._private.style.width.value))&&h.push(g[n]),"straight"==g[n]._private.rscratch.edgeType&&(m=this.boxInBezierVicinity(a,b,c,d,g[n]._private.rscratch.startX,g[n]._private.rscratch.startY,.5*g[n]._private.rscratch.startX+.5*g[n]._private.rscratch.endX,.5*g[n]._private.rscratch.startY+.5*g[n]._private.rscratch.endY,g[n]._private.rscratch.endX,g[n]._private.rscratch.endY,g[n]._private.style.width.value))&&(2==m||1==m&&this.checkStraightEdgeInBox(a,b,c,d,g[n]._private.rscratch.startX,g[n]._private.rscratch.startY,g[n]._private.rscratch.endX,g[n]._private.rscratch.endY,g[n]._private.style.width.value))&&h.push(g[n]);return h},b.prototype.updateAllCompounds=function(a){for(var b=a.length-1;b>=0;b--)if(a[b].isNode()&&("auto"==a[b]._private.style.width.value||"auto"==a[b]._private.style.height.value)&&a[b].children().length>0){var c=a[b],d=this.calcCompoundBounds(c);c._private.position.x=d.x,c._private.position.y=d.y,c._private.autoWidth=d.width,c._private.autoHeight=d.height}},b.prototype.calcCompoundBounds=function(a){var b=a.descendants().not(":removed"),c={x:a._private.position.x,y:a._private.position.y,width:a._private.autoWidth,height:a._private.autoHeight};if("visible"!=a._private.style.visibility.value)return c;for(var d=[],e=0;e<b.size();e++)"visible"==b[e]._private.style.visibility.value&&d.push(b[e]);if(0==d.length)return c;b=d;var f=this.borderValue(b,"left"),g=this.borderValue(b,"right"),h=this.borderValue(b,"top"),i=this.borderValue(b,"bottom"),j=this.getNodePadding(a),k=(f-j.left+g+j.right)/2,l=(h-j.top+i+j.bottom)/2,m=g-f+j.left+j.right,n=i-h+j.top+j.bottom;return c={x:k,y:l,width:m,height:n}},b.prototype.borderValue=function(a,b){var c,d,e=1/0,f=-1/0,g=this,h=function(a){var b={};return b.x=a._private.position.x,b.y=a._private.position.y,b.width=a.outerWidth(),b.height=a.outerHeight(),b},i=function(a){var b={},c=g.getNodeWidth(a),d=g.getNodeHeight(a);b.height=a._private.style["font-size"].value,b.width=b.height;var e=a._private.style["text-halign"].strValue;"left"==e?(b.x=a._private.position.x-c/2,b.left=b.x-b.width,b.right=b.x):"right"==e?(b.x=a._private.position.x+c/2,b.left=b.x,b.right=b.x+b.width):(b.x=a._private.position.x,b.left=b.x-b.width/2,b.right=b.x+b.width/2);var f=a._private.style["text-valign"].strValue;return"top"==f?(b.y=a._private.position.y-d/2,b.top=b.y-b.height,b.bottom=b.y):"bottom"==f?(b.y=a._private.position.y+d/2,b.top=b.y,b.bottom=b.y+b.height):(b.y=a._private.position.y,b.top=b.y-b.height/2,b.bottom=b.y+b.height/2),b};for(D=0;D<a.length;D++)if(c=h(a[D]),d=i(a[D]),"left"==b){var j=Math.min(c.x-c.width/2,d.left);e>j&&(e=j)}else if("right"==b){var k=Math.max(c.x+c.width/2,d.right);k>f&&(f=k)}else if("top"==b){var l=Math.min(c.y-c.height/2,d.top);e>l&&(e=l)}else if("bottom"==b){var m=Math.max(c.y+c.height/2,d.bottom);m>f&&(f=m)}return"left"==b||"top"==b?e:f},b.prototype.getNodeWidth=function(a){return"auto"==a._private.style.width.value||"auto"==a._private.style.height.value?a._private.autoWidth:a._private.style.width.value},b.prototype.getNodeHeight=function(a){return"auto"==a._private.style.width.value||"auto"==a._private.style.height.value?a._private.autoHeight:a._private.style.height.value},b.prototype.getNodeShape=function(a){var b=a._private.style.shape.value;return a.isParent()?"rectangle"===b||"roundrectangle"===b?b:"rectangle":b},b.prototype.getNodePadding=function(a){var b=a._private.style["padding-left"].value,c=a._private.style["padding-right"].value,d=a._private.style["padding-top"].value,e=a._private.style["padding-bottom"].value;return isNaN(b)&&(b=0),isNaN(c)&&(c=0),isNaN(d)&&(d=0),isNaN(e)&&(e=0),{left:b,right:c,top:d,bottom:e}},b.prototype.matchCanvasSize=function(a){var b,c=this.data,d=a.clientWidth,e=a.clientHeight,f=d,g=e;"devicePixelRatio"in window&&(f*=devicePixelRatio,g*=devicePixelRatio);for(var h=0;i>h;h++)b=c.canvases[h],(b.width!==f||b.height!==g)&&(b.width=f,b.height=g,b.style.width=d+"px",b.style.height=e+"px");for(var h=0;o>h;h++)b=c.bufferCanvases[h],(b.width!==f||b.height!==g)&&(b.width=f,b.height=g);this.data.overlay.style.width=d+"px",this.data.overlay.style.height=e+"px"};var p=function(a){return"nodes"==a._private.group?a.parents().size():"edges"==a._private.group?Math.max(a.source()[0].parents().size(),a.target()[0].parents().size()):0};b.prototype.getCachedZSortedEles=function(){var a=this.lastZOrderCachedNodes,b=this.lastZOrderCachedEdges,c=this.getCachedNodes(),d=this.getCachedEdges(),e=[];if(a&&b&&a===c&&b===d)e=this.cachedZSortedEles;else{for(var f=0;f<c.length;f++)e.push(c[f]);for(var f=0;f<d.length;f++)e.push(d[f]);e.sort(q),this.cachedZSortedEles=e}return this.lastZOrderCachedNodes=c,this.lastZOrderCachedEdges=d,e};var q=function(a,b){var c=a._private.style["z-index"].value-b._private.style["z-index"].value,d=0,e=0;return a.cy().hasCompoundNodes()&&(d=p(a),e=p(b)),d-e===0?"nodes"===a._private.group&&"edges"===b._private.group?1:"edges"===a._private.group&&"nodes"===b._private.group?-1:0===c?a._private.index-b._private.index:c:d-e};b.prototype.renderTo=function(a,b,c){this.redraw(a,!0,b,c)},b.prototype.redraw=function(a,b,c,d){var e=this;void 0===this.averageRedrawTime&&(this.averageRedrawTime=0);var f=1e3/60,g=1e3,h=this.averageRedrawTime;h=Math.max(f,h),h=Math.min(h,g),void 0===this.lastDrawTime&&(this.lastDrawTime=0);var i=+new Date,n=i-this.lastDrawTime,o=n>=h;if(!a){if(!o)return clearTimeout(this.redrawTimeout),void(this.redrawTimeout=setTimeout(function(){e.redraw()},h));this.lastDrawTime=i}setTimeout(function(){var f=i,g=e.data.cy,h=e.data,n=e.getCachedNodes(),o=e.getCachedEdges();e.matchCanvasSize(h.container);var p=g.zoom(),q=void 0!==c?c:p,r=g.pan(),s={x:r.x,y:r.y};d&&(s=d),"devicePixelRatio"in window&&(q*=devicePixelRatio,s.x*=devicePixelRatio,s.y*=devicePixelRatio);for(var t=[],u=0;u<n.length;u++)t.push(n[u]);for(var u=0;u<o.length;u++)t.push(o[u]);if(h.canvasNeedsRedraw[k]||h.canvasNeedsRedraw[m]||b){e.hideEdgesOnViewport&&(e.pinching||e.hoverData.dragging||e.data.wheel||e.swipePanning)||e.findEdgeControlPoints(o);var t=e.getCachedZSortedEles();g.hasCompoundNodes()&&e.updateAllCompounds(t)}var v,w,x;if(h.canvasNeedsRedraw[m]||b){if(!v||!w){v=[],w=[];for(var y=0;y<t.length;y++)x=t[y],x._private.rscratch.inDragLayer?v.push(x):w.push(x)}var z=a||h.canvases[m].getContext("2d");z.setTransform(1,0,0,1,0,0),z.clearRect(0,0,z.canvas.width,z.canvas.height),b||(z.translate(s.x,s.y),z.scale(q,q)),d&&z.translate(d.x,d.y),c&&z.scale(c,c);for(var y=0;y<w.length;y++)x=w[y],"nodes"==x._private.group?e.drawNode(z,x):"edges"==x._private.group&&e.drawEdge(z,x);for(var y=0;y<w.length;y++)x=w[y],"nodes"==x._private.group?e.drawNodeText(z,x):"edges"==x._private.group&&e.drawEdgeText(z,x),"nodes"==x._private.group?e.drawNode(z,x,!0):"edges"==x._private.group&&e.drawEdge(z,x,!0);b||(h.canvasNeedsRedraw[m]=!1,h.canvasRedrawReason[m]=[])}if(h.canvasNeedsRedraw[k]||b){if(!v||!w){v=[],w=[];for(var y=0;y<t.length;y++)x=t[y],x._private.rscratch.inDragLayer?v.push(x):w.push(x)}var z=a||h.canvases[k].getContext("2d");b||(z.setTransform(1,0,0,1,0,0),z.clearRect(0,0,z.canvas.width,z.canvas.height),z.translate(s.x,s.y),z.scale(q,q)),d&&z.translate(d.x,d.y),c&&z.scale(c,c);for(var x,y=0;y<v.length;y++)x=v[y],"nodes"==x._private.group?e.drawNode(z,x):"edges"==x._private.group&&e.drawEdge(z,x);for(var y=0;y<v.length;y++)x=v[y],"nodes"==x._private.group?e.drawNodeText(z,x):"edges"==x._private.group&&e.drawEdgeText(z,x),"nodes"==x._private.group?e.drawNode(z,x,!0):"edges"==x._private.group&&e.drawEdge(z,x,!0);b||(h.canvasNeedsRedraw[k]=!1,h.canvasRedrawReason[k]=[])}if(h.canvasNeedsRedraw[j]){var z=a||h.canvases[j].getContext("2d");b||(z.setTransform(1,0,0,1,0,0),z.clearRect(0,0,z.canvas.width,z.canvas.height),z.translate(s.x,s.y),z.scale(q,q)),d&&z.translate(d.x,d.y),c&&z.scale(c,c);var A=g.style()._private.coreStyle;
if(1==h.select[4]){var p=h.cy.zoom(),B=A["selection-box-border-width"].value/p;z.lineWidth=B,z.fillStyle="rgba("+A["selection-box-color"].value[0]+","+A["selection-box-color"].value[1]+","+A["selection-box-color"].value[2]+","+A["selection-box-opacity"].value+")",z.fillRect(h.select[0],h.select[1],h.select[2]-h.select[0],h.select[3]-h.select[1]),B>0&&(z.strokeStyle="rgba("+A["selection-box-border-color"].value[0]+","+A["selection-box-border-color"].value[1]+","+A["selection-box-border-color"].value[2]+","+A["selection-box-opacity"].value+")",z.strokeRect(h.select[0],h.select[1],h.select[2]-h.select[0],h.select[3]-h.select[1]))}if(h.bgActivePosistion){var p=h.cy.zoom(),C=h.bgActivePosistion;z.fillStyle="rgba("+A["active-bg-color"].value[0]+","+A["active-bg-color"].value[1]+","+A["active-bg-color"].value[2]+","+A["active-bg-opacity"].value+")",z.beginPath(),z.arc(C.x,C.y,A["active-bg-size"].pxValue/p,0,2*Math.PI),z.fill()}b||(h.canvasNeedsRedraw[j]=!1,h.canvasRedrawReason[j]=[])}if(e.options.showOverlay){var z=h.canvases[l].getContext("2d");z.lineJoin="round",z.font="14px helvetica",z.strokeStyle="#fff",z.lineWidth="4",z.fillStyle="#666",z.textAlign="right";{var D="cytoscape.js",E=z.canvas.width,F=z.canvas.height,G=4;z.measureText(D).width}z.clearRect(0,0,E,F),z.strokeText(D,E-G,F-G),z.fillText(D,E-G,F-G),h.overlayDrawn=!0}var H=+new Date;void 0===e.averageRedrawTime&&(e.averageRedrawTime=H-f),e.averageRedrawTime=e.averageRedrawTime/2+(H-f)/2},0)};var r={},s=9e3;b.prototype.getCachedImage=function(a,b){if(r[a]&&r[a].image)return r[a].keepTime=s,r[a].image;var c=r[a];return void 0==c&&(r[a]=new Object,r[a].image=new Image,r[a].image.onload=b,r[a].image.src=a,r[a].keepTime=s,c=r[a]),c.image},b.prototype.swapCachedImage=function(a){if(r[a]){if(r[a].image&&r[a].image.complete){var b=r[a].image,c=document.createElement("canvas");return c.width=b.width,c.height=b.height,c.getContext("2d").drawImage(b,0,0),r[a].image=c,r[a].swappedWithCanvas=!0,c}return null}return null},b.prototype.updateImageCaches=function(){for(var a in r)r[a].keepTime<=0?(void 0!=r[a].image&&(r[a].image.src=void 0,r[a].image=void 0),r[a]=void 0):r[a]-=1},b.prototype.drawImage=function(a,b,c,d,e,f,g){g.widthScale=.5,g.heightScale=.5,g.rotate=f;canvas.drawImage(g,b,c)},b.prototype.drawEdge=function(a,b,c){if(!this.hideEdgesOnViewport||!(this.dragData.didDrag||this.pinching||this.hoverData.dragging||this.data.wheel||this.swipePanning)){var d,e;if(d=b.source()[0],e=b.target()[0],"visible"==b._private.style.visibility.value&&"visible"==d._private.style.visibility.value&&"visible"==e._private.style.visibility.value){var f=b._private.style["overlay-padding"].value,g=b._private.style["overlay-opacity"].value,h=b._private.style["overlay-color"].value;if(c?(a.strokeStyle="rgba( "+h[0]+", "+h[1]+", "+h[2]+", "+g+" )",a.lineCap="round","self"==b._private.rscratch.edgeType&&(a.lineCap="butt")):a.strokeStyle="rgba("+b._private.style["line-color"].value[0]+","+b._private.style["line-color"].value[1]+","+b._private.style["line-color"].value[2]+","+b._private.style.opacity.value+")",!(b._private.style.width.value<=0)){var i=b._private.style.width.value+(c?2*f:0),j=c?"solid":b._private.style["line-style"].value;if(a.lineWidth=i,this.findEndpoints(b),"self"==b._private.rscratch.edgeType){var k=b._private.rscratch;this.drawStyledEdge(b,a,[k.startX,k.startY,k.cp2ax,k.cp2ay,k.selfEdgeMidX,k.selfEdgeMidY],j,i),this.drawStyledEdge(b,a,[k.selfEdgeMidX,k.selfEdgeMidY,k.cp2cx,k.cp2cy,k.endX,k.endY],j,i)}else if("straight"==b._private.rscratch.edgeType){var l=e._private.position.x-d._private.position.x,m=e._private.position.y-d._private.position.y,n=b._private.rscratch.endX-b._private.rscratch.startX,o=b._private.rscratch.endY-b._private.rscratch.startY;if(0>l*n+m*o)b._private.rscratch.straightEdgeTooShort=!0;else{var k=b._private.rscratch;this.drawStyledEdge(b,a,[k.startX,k.startY,k.endX,k.endY],j,i),b._private.rscratch.straightEdgeTooShort=!1}}else{var k=b._private.rscratch;this.drawStyledEdge(b,a,[k.startX,k.startY,k.cp2x,k.cp2y,k.endX,k.endY],j,i)}b._private.rscratch.noArrowPlacement!==!0&&void 0!==b._private.rscratch.startX&&this.drawArrowheads(a,b,c)}}}};var t=function(a,b){var c=Math.sqrt(Math.pow(a[4]-a[0],2)+Math.pow(a[5]-a[1],2));c+=Math.sqrt(Math.pow((a[4]+a[0])/2-a[2],2)+Math.pow((a[5]+a[1])/2-a[3],2));var d,e=Math.ceil(c/b);if(!(e>0))return null;d=new Array(2*e);for(var f=0;e>f;f++){var g=f/e;d[2*f]=a[0]*(1-g)*(1-g)+2*a[2]*(1-g)*g+a[4]*g*g,d[2*f+1]=a[1]*(1-g)*(1-g)+2*a[3]*(1-g)*g+a[5]*g*g}return d},u=function(a,b){var c,d=Math.sqrt(Math.pow(a[2]-a[0],2)+Math.pow(a[3]-a[1],2)),e=Math.ceil(d/b);if(!(e>0))return null;c=new Array(2*e);for(var f=[a[2]-a[0],a[3]-a[1]],g=0;e>g;g++){var h=g/e;c[2*g]=f[0]*h+a[0],c[2*g+1]=f[1]*h+a[1]}return c};b.prototype.createBuffer=function(a,b){var c=document.createElement("canvas");return c.width=a,c.height=b,[c,c.getContext("2d")]},b.prototype.drawStyledEdge=function(a,b,c,d,e){function f(a,b,c,d){return(1-d)*(1-d)*a+2*(1-d)*d*b+d*d*c}var g=this.data.cy,h=g.zoom();void 0===a._private.rstyle.bezierPts&&(a._private.rstyle.bezierPts=[]);var i=a._private.rstyle.bezierPts.length;a.isLoop()?i>=12&&(a._private.rstyle.bezierPts=[]):a._private.rstyle.bezierPts=[];var j=a._private.rstyle.bezierPts;if(6===c.length&&(j.push({x:f(c[0],c[2],c[4],.05),y:f(c[1],c[3],c[5],.05)}),j.push({x:f(c[0],c[2],c[4],.25),y:f(c[1],c[3],c[5],.25)}),j.push({x:f(c[0],c[2],c[4],.35),y:f(c[1],c[3],c[5],.35)}),j.push({x:f(c[0],c[2],c[4],.65),y:f(c[1],c[3],c[5],.65)}),j.push({x:f(c[0],c[2],c[4],.75),y:f(c[1],c[3],c[5],.75)}),j.push({x:f(c[0],c[2],c[4],.95),y:f(c[1],c[3],c[5],.95)})),"solid"==d)b.beginPath(),b.moveTo(c[0],c[1]),6==c.length?b.quadraticCurveTo(c[2],c[3],c[4],c[5]):b.lineTo(c[2],c[3]),b.stroke();else if("dotted"==d){var k;if(k=6==c.length?t(c,16,!0):u(c,16,!0),!k)return;var l=Math.max(1.6*e,3.4)*h,m=2*l,n=2*l;m=Math.max(m,1),n=Math.max(n,1);var o=this.createBuffer(m,n),p=o[1];p.setTransform(1,0,0,1,0,0),p.clearRect(0,0,m,n),p.fillStyle=b.strokeStyle,p.beginPath(),p.arc(m/2,n/2,.5*l,0,2*Math.PI,!1),p.fill(),b.beginPath();for(var q=0;q<k.length/2;q++)b.drawImage(o[0],k[2*q]-m/2/h,k[2*q+1]-n/2/h,m/h,n/h)}else if("dashed"==d){var k;if(k=6==c.length?t(c,14,!0):u(c,14,!0),!k)return;var m=2*e*h,n=7.8*h;m=Math.max(m,1),n=Math.max(n,1);var o=this.createBuffer(m,n),p=o[1];p.setTransform(1,0,0,1,0,0),p.clearRect(0,0,m,n),b.strokeStyle&&(p.strokeStyle=b.strokeStyle),p.lineWidth=e*g.zoom(),p.beginPath(),p.moveTo(m/2,.2*n),p.lineTo(m/2,.8*n),p.stroke();var r,s,v=!1;4==c.length?(r=[c[2]-c[0],c[3]-k[1]],s=Math.acos((0*r[0]+-1*r[1])/Math.sqrt(r[0]*r[0]+r[1]*r[1])),r[0]<0&&(s=-s+2*Math.PI)):6==c.length&&(v=!0);for(var q=0;q<k.length/2;q++){var w=q/Math.max(k.length/2-1,1);v&&(r=[2*(1-w)*(c[2]-c[0])+2*w*(c[4]-c[2]),2*(1-w)*(c[3]-c[1])+2*w*(c[5]-c[3])],s=Math.acos((0*r[0]+-1*r[1])/Math.sqrt(r[0]*r[0]+r[1]*r[1])),r[0]<0&&(s=-s+2*Math.PI)),b.translate(k[2*q],k[2*q+1]),b.rotate(s),b.translate(-m/2/h,-n/2/h),b.drawImage(o[0],0,0,m/h,n/h),b.translate(m/2/h,n/2/h),b.rotate(-s),b.translate(-k[2*q],-k[2*q+1])}}else this.drawStyledEdge(a,b,c,"solid",e)},b.prototype.drawEdgeText=function(a,b){if(!(this.hideEdgesOnViewport&&(this.dragData.didDrag||this.pinching||this.hoverData.dragging||this.data.wheel||this.swipePanning)||"visible"!=b._private.style.visibility.value)){var c=b._private.style["font-size"].pxValue*b.cy().zoom(),d=b._private.style["min-zoomed-font-size"].pxValue;if(!(d>c)){a.textAlign="center",a.textBaseline="middle";var e,f,g,h;"self"==b._private.rscratch.edgeType?(g=b._private.rscratch.selfEdgeMidX,h=b._private.rscratch.selfEdgeMidY):"straight"==b._private.rscratch.edgeType?(g=(b._private.rscratch.startX+b._private.rscratch.endX)/2,h=(b._private.rscratch.startY+b._private.rscratch.endY)/2):"bezier"==b._private.rscratch.edgeType&&(g=.25*b._private.rscratch.startX+.5*b._private.rscratch.cp2x+.25*b._private.rscratch.endX,h=Math.pow(.5,2)*b._private.rscratch.startY+.5*b._private.rscratch.cp2y+.25*b._private.rscratch.endY),e=g,f=h;var i=b._private.rstyle;i.labelX=e,i.labelY=f,this.drawText(a,b,e,f)}}},b.prototype.drawNode=function(a,b,c){var d,e;if("visible"==b._private.style.visibility.value){for(var g=1,h=b.parents(),i=0;i<h.length;i++){var j=h[i],l=j._private.style.opacity.value;if(g=l*g,0===l)return}if(d=this.getNodeWidth(b),e=this.getNodeHeight(b),a.lineWidth=b._private.style["border-width"].pxValue,void 0!==c&&c){var n=b._private.style["overlay-padding"].value,o=b._private.style["overlay-opacity"].value,p=b._private.style["overlay-color"].value;o>0&&(a.fillStyle="rgba( "+p[0]+", "+p[1]+", "+p[2]+", "+o+" )",f[this.getNodeShape(b)].draw(a,b._private.position.x,b._private.position.y,d+2*n,e+2*n))}else{a.fillStyle="rgba("+b._private.style["background-color"].value[0]+","+b._private.style["background-color"].value[1]+","+b._private.style["background-color"].value[2]+","+b._private.style["background-opacity"].value*b._private.style.opacity.value*g+")",a.strokeStyle="rgba("+b._private.style["border-color"].value[0]+","+b._private.style["border-color"].value[1]+","+b._private.style["border-color"].value[2]+","+b._private.style["border-opacity"].value*b._private.style.opacity.value*g+")";var q=b._private.style["background-image"].value[2]||b._private.style["background-image"].value[1];if(void 0!=q){var r=this,s=this.getCachedImage(q,function(){r.data.canvasNeedsRedraw[m]=!0,r.data.canvasRedrawReason[m].push("image finished load"),r.data.canvasNeedsRedraw[k]=!0,r.data.canvasRedrawReason[k].push("image finished load"),r.swapCachedImage(q),r.redraw()});0==s.complete?(f[r.getNodeShape(b)].drawPath(a,b._private.position.x,b._private.position.y,d,e),a.stroke(),a.fillStyle="#555555",a.fill()):this.drawInscribedImage(a,s,b)}else f[this.getNodeShape(b)].draw(a,b._private.position.x,b._private.position.y,d,e);b._private.style["border-width"].value>0&&a.stroke()}}},b.prototype.drawInscribedImage=function(a,b,c){var d=this,e=(this.data.cy._private.zoom,c._private.position.x),g=c._private.position.y,h=this.getNodeWidth(c),i=this.getNodeHeight(c);a.save(),f[d.getNodeShape(c)].drawPath(a,e,g,h,i),a.clip();var j=[b.width,b.height];a.drawImage(b,e-j[0]/2,g-j[1]/2,j[0],j[1]),a.restore(),c._private.style["border-width"].value>0&&a.stroke()},b.prototype.drawNodeText=function(a,b){if("visible"==b._private.style.visibility.value){var c=b._private.style["font-size"].pxValue*b.cy().zoom(),d=b._private.style["min-zoomed-font-size"].pxValue;if(!(d>c)){var e,f,g=this.getNodeWidth(b),h=this.getNodeHeight(b),i=b._private.style["text-halign"].strValue;"left"==i?(a.textAlign="right",e=b._private.position.x-g/2):"right"==i?(a.textAlign="left",e=b._private.position.x+g/2):"center"==i?(a.textAlign="center",e=b._private.position.x):(a.textAlign="center",e=b._private.position.x);var j=b._private.style["text-valign"].strValue;"top"==j?(a.textBaseline="bottom",f=b._private.position.y-h/2):"bottom"==j?(a.textBaseline="top",f=b._private.position.y+h/2):"middle"==j||"center"==j?(a.textBaseline="middle",f=b._private.position.y):(a.textBaseline="middle",f=b._private.position.y),this.drawText(a,b,e,f)}}},b.prototype.drawText=function(a,b,c,d){for(var e=1,f=b.parents(),g=0;g<f.length;g++){var h=f[g],i=h._private.style.opacity.value;if(e=i*e,0===i)return}var j=b._private.style["font-style"].strValue,k=b._private.style["font-size"].value+"px",l=b._private.style["font-family"].strValue,m=(b._private.style["font-variant"].strValue,b._private.style["font-weight"].strValue);a.font=j+" "+m+" "+k+" "+l;var n=String(b._private.style.content.value),o=b._private.style["text-transform"].value;if("none"==o||("uppercase"==o?n=n.toUpperCase():"lowercase"==o&&(n=n.toLowerCase())),a.lineJoin="round",a.fillStyle="rgba("+b._private.style.color.value[0]+","+b._private.style.color.value[1]+","+b._private.style.color.value[2]+","+b._private.style["text-opacity"].value*b._private.style.opacity.value*e+")",a.strokeStyle="rgba("+b._private.style["text-outline-color"].value[0]+","+b._private.style["text-outline-color"].value[1]+","+b._private.style["text-outline-color"].value[2]+","+b._private.style["text-opacity"].value*b._private.style.opacity.value*e+")",void 0!=n){var p=2*b._private.style["text-outline-width"].value;p>0&&(a.lineWidth=p,a.strokeText(n,c,d)),isNaN(c)&&(c=0),isNaN(d)&&(d=0),a.fillText(""+n,c,d),b._private.rstyle.labelWidth=a.measureText(n).width}},b.prototype.drawBackground=function(){},b.prototype.findEdgeControlPoints=function(a){for(var b,c={},d=this.data.cy,e=[],f=0;f<a.length;f++)b=a[f]._private.data.source>a[f]._private.data.target?a[f]._private.data.target+"-"+a[f]._private.data.source:a[f]._private.data.source+"-"+a[f]._private.data.target,void 0==c[b]&&(c[b]=[]),c[b].push(a[f]),e.push(b);for(var g,h,i=0;i<e.length;i++){b=e[i],g=d.getElementById(c[b][0]._private.data.source),h=d.getElementById(c[b][0]._private.data.target);var j,k,l=(g._private.position.x+h._private.position.x)/2,m=(g._private.position.y+h._private.position.y)/2;if(c[b].length>1){j=h._private.position.y-g._private.position.y,k=g._private.position.x-h._private.position.x;var n=Math.sqrt(j*j+k*k);j/=n,k/=n}for(var o,f=0;f<c[b].length;f++){o=c[b][f];var p=o._private.rscratch.lastEdgeIndex,q=f,r=o._private.rscratch.lastNumEdges,s=c[b].length,t=o._private.rscratch.lastSrcCtlPtX,u=g._private.position.x,v=o._private.rscratch.lastSrcCtlPtY,w=g._private.position.y,x=o._private.rscratch.lastSrcCtlPtW,y=g.outerWidth(),z=o._private.rscratch.lastSrcCtlPtH,A=g.outerHeight(),B=o._private.rscratch.lastTgtCtlPtX,C=h._private.position.x,D=o._private.rscratch.lastTgtCtlPtY,E=h._private.position.y,F=o._private.rscratch.lastTgtCtlPtW,G=h.outerWidth(),H=o._private.rscratch.lastTgtCtlPtH,I=h.outerHeight();if(t!==u||v!==w||x!==y||z!==A||B!==C||D!==E||F!==G||H!==I||p!==q||r!==s){var J=o._private.rscratch;if(J.lastSrcCtlPtX=u,J.lastSrcCtlPtY=w,J.lastSrcCtlPtW=y,J.lastSrcCtlPtH=A,J.lastTgtCtlPtX=C,J.lastTgtCtlPtY=E,J.lastTgtCtlPtW=G,J.lastTgtCtlPtH=I,J.lastEdgeIndex=q,J.lastNumEdges=s,g._private.data.id==h._private.data.id){var K=o._private.style["control-point-step-size"].pxValue;o._private.rscratch.edgeType="self",o._private.rscratch.cp2ax=g._private.position.x,o._private.rscratch.cp2ay=g._private.position.y-(1+Math.pow(this.getNodeHeight(g),1.12)/100)*K*(f/3+1),o._private.rscratch.cp2cx=g._private.position.x-(1+Math.pow(this.getNodeWidth(g),1.12)/100)*K*(f/3+1),o._private.rscratch.cp2cy=g._private.position.y,o._private.rscratch.selfEdgeMidX=(o._private.rscratch.cp2ax+o._private.rscratch.cp2cx)/2,o._private.rscratch.selfEdgeMidY=(o._private.rscratch.cp2ay+o._private.rscratch.cp2cy)/2}else if(c[b].length%2==1&&f==Math.floor(c[b].length/2))o._private.rscratch.edgeType="straight";else{var K=o._private.style["control-point-step-size"].value,L=(.5-c[b].length/2+f)*K;o._private.rscratch.edgeType="bezier",o._private.rscratch.cp2x=l+j*L,o._private.rscratch.cp2y=m+k*L}}}}return c},b.prototype.findEndpoints=function(a){var b,c=a.source()[0],d=a.target()[0],g=Math.max(this.getNodeWidth(c),this.getNodeHeight(c)),h=Math.max(this.getNodeWidth(d),this.getNodeHeight(d));g=0,h/=2;var i=[a.source().position().x,a.source().position().y],j=[a.target().position().x,a.target().position().y];if("self"==a._private.rscratch.edgeType){var k=[a._private.rscratch.cp2cx,a._private.rscratch.cp2cy];b=f[this.getNodeShape(d)].intersectLine(d._private.position.x,d._private.position.y,this.getNodeWidth(d),this.getNodeHeight(d),k[0],k[1],d._private.style["border-width"].value/2);var l=this.shortenIntersection(b,k,e[a._private.style["target-arrow-shape"].value].spacing(a)),m=this.shortenIntersection(b,k,e[a._private.style["target-arrow-shape"].value].gap(a));a._private.rscratch.endX=m[0],a._private.rscratch.endY=m[1],a._private.rscratch.arrowEndX=l[0],a._private.rscratch.arrowEndY=l[1];var k=[a._private.rscratch.cp2ax,a._private.rscratch.cp2ay];b=f[this.getNodeShape(c)].intersectLine(c._private.position.x,c._private.position.y,this.getNodeWidth(c),this.getNodeHeight(c),k[0],k[1],c._private.style["border-width"].value/2);var n=this.shortenIntersection(b,k,e[a._private.style["source-arrow-shape"].value].spacing(a)),o=this.shortenIntersection(b,k,e[a._private.style["source-arrow-shape"].value].gap(a));a._private.rscratch.startX=o[0],a._private.rscratch.startY=o[1],a._private.rscratch.arrowStartX=n[0],a._private.rscratch.arrowStartY=n[1]}else if("straight"==a._private.rscratch.edgeType){b=f[this.getNodeShape(d)].intersectLine(d._private.position.x,d._private.position.y,this.getNodeWidth(d),this.getNodeHeight(d),c.position().x,c.position().y,d._private.style["border-width"].value/2),a._private.rscratch.noArrowPlacement=0==b.length?!0:!1;var l=this.shortenIntersection(b,[c.position().x,c.position().y],e[a._private.style["target-arrow-shape"].value].spacing(a)),m=this.shortenIntersection(b,[c.position().x,c.position().y],e[a._private.style["target-arrow-shape"].value].gap(a));a._private.rscratch.endX=m[0],a._private.rscratch.endY=m[1],a._private.rscratch.arrowEndX=l[0],a._private.rscratch.arrowEndY=l[1],b=f[this.getNodeShape(c)].intersectLine(c._private.position.x,c._private.position.y,this.getNodeWidth(c),this.getNodeHeight(c),d.position().x,d.position().y,c._private.style["border-width"].value/2),a._private.rscratch.noArrowPlacement=0==b.length?!0:!1;var n=this.shortenIntersection(b,[d.position().x,d.position().y],e[a._private.style["source-arrow-shape"].value].spacing(a)),o=this.shortenIntersection(b,[d.position().x,d.position().y],e[a._private.style["source-arrow-shape"].value].gap(a));a._private.rscratch.startX=o[0],a._private.rscratch.startY=o[1],a._private.rscratch.arrowStartX=n[0],a._private.rscratch.arrowStartY=n[1]}else if("bezier"==a._private.rscratch.edgeType){{var k=[a._private.rscratch.cp2x,a._private.rscratch.cp2y];.25*i[0]+.25*j[0]+.5*k[0],.25*i[1]+.25*j[1]+.5*k[1]}b=f[this.getNodeShape(d)].intersectLine(d._private.position.x,d._private.position.y,this.getNodeWidth(d),this.getNodeHeight(d),k[0],k[1],d._private.style["border-width"].value/2);var l=this.shortenIntersection(b,k,e[a._private.style["target-arrow-shape"].value].spacing(a)),m=this.shortenIntersection(b,k,e[a._private.style["target-arrow-shape"].value].gap(a));a._private.rscratch.endX=m[0],a._private.rscratch.endY=m[1],a._private.rscratch.arrowEndX=l[0],a._private.rscratch.arrowEndY=l[1],b=f[this.getNodeShape(c)].intersectLine(c._private.position.x,c._private.position.y,this.getNodeWidth(c),this.getNodeHeight(c),k[0],k[1],c._private.style["border-width"].value/2);var n=this.shortenIntersection(b,k,e[a._private.style["source-arrow-shape"].value].spacing(a)),o=this.shortenIntersection(b,k,e[a._private.style["source-arrow-shape"].value].gap(a));a._private.rscratch.startX=o[0],a._private.rscratch.startY=o[1],a._private.rscratch.arrowStartX=n[0],a._private.rscratch.arrowStartY=n[1]}else if(a._private.rscratch.isArcEdge)return},b.prototype.findEdges=function(a){for(var b=this.getCachedEdges(),c={},d=[],e=0;e<a.length;e++)c[a[e]._private.data.id]=a[e];for(var e=0;e<b.length;e++)(c[b[e]._private.data.source]||c[b[e]._private.data.target])&&d.push(b[e]);return d},b.prototype.intersectLineEllipse=function(a,b,c,d,e,f){var g=c-a,h=d-b;g/=e,h/=f;var i=Math.sqrt(g*g+h*h),j=i-1;if(0>j)return[];var k=j/i;return[(c-a)*k+a,(d-b)*k+b]},b.prototype.dotProduct=function(a,b){if(2!=a.length||2!=b.length)throw"dot product: arguments are not vectors";return a[0]*b[0]+a[1]*b[1]},b.prototype.intersectLineCircle=function(a,b,c,d,e,f,g){var h=[c-a,d-b],i=[e,f],j=[a-e,b-f],k=h[0]*h[0]+h[1]*h[1],l=2*(j[0]*h[0]+j[1]*h[1]),i=j[0]*j[0]+j[1]*j[1]-g*g,m=l*l-4*k*i;if(0>m)return[];t1=(-l+Math.sqrt(m))/(2*k),t2=(-l-Math.sqrt(m))/(2*k);var n=Math.min(t1,t2),o=Math.max(t1,t2),p=[];if(n>=0&&1>=n&&p.push(n),o>=0&&1>=o&&p.push(o),0==p.length)return[];var q=p[0]*h[0]+a,r=p[0]*h[1]+b;if(p.length>1){if(p[0]==p[1])return[q,r];var s=p[1]*h[0]+a,t=p[1]*h[1]+b;return[q,r,s,t]}return[q,r]},b.prototype.findCircleNearPoint=function(a,b,c,d,e){var f=d-a,g=e-b,h=Math.sqrt(f*f+g*g),i=f/h,j=g/h;return[a+i*c,b+j*c]},b.prototype.findMaxSqDistanceToOrigin=function(a){for(var b,c=1e-6,d=0;d<a.length/2;d++)b=a[2*d]*a[2*d]+a[2*d+1]*a[2*d+1],b>c&&(c=b);return c},b.prototype.finiteLinesIntersect=function(a,b,c,d,e,f,g,h,i){var j=(g-e)*(b-f)-(h-f)*(a-e),k=(c-a)*(b-f)-(d-b)*(a-e),l=(h-f)*(c-a)-(g-e)*(d-b);if(0!=l){var m=j/l,n=k/l;return m>=0&&1>=m&&n>=0&&1>=n?[a+m*(c-a),b+m*(d-b)]:i?[a+m*(c-a),b+m*(d-b)]:[]}return 0==j||0==k?[a,c,g].sort()[1]==g?[g,h]:[a,c,e].sort()[1]==e?[e,f]:[e,g,c].sort()[1]==c?[c,d]:[]:[]},b.prototype.boxIntersectEllipse=function(a,b,c,d,e,f,g,h,i){if(a>c){var j=a;a=c,c=j}if(b>d){var k=b;b=d,d=k}var l=[h-f/2-e,i],m=[h+f/2+e,i],n=[h,i-g/2-e],o=[h,i+g/2+e];return c<l[0]?!1:a>m[0]?!1:b>o[1]?!1:d<n[1]?!1:a<=m[0]&&m[0]<=c&&b<=m[1]&&m[1]<=d?!0:a<=l[0]&&l[0]<=c&&b<=l[1]&&l[1]<=d?!0:a<=n[0]&&n[0]<=c&&b<=n[1]&&n[1]<=d?!0:a<=o[0]&&o[0]<=c&&b<=o[1]&&o[1]<=d?!0:(a=(a-h)/(f/2+e),c=(c-h)/(f/2+e),b=(b-i)/(g/2+e),d=(d-i)/(g/2+e),1>=a*a+b*b?!0:1>=c*c+b*b?!0:1>=c*c+d*d?!0:1>=a*a+d*d?!0:!1)},b.prototype.boxIntersectPolygon=function(a,b,c,d,e,f,g,h,i,j,k){if(a>c){var l=a;a=c,c=l}if(b>d){var m=b;b=d,d=m}var n=new Array(e.length),o=Math.asin(j[1]/Math.sqrt(j[0]*j[0]+j[1]*j[1]));j[0]<0?o+=Math.PI/2:o=-o-Math.PI/2;for(var p=Math.cos(-o),q=Math.sin(-o),r=0;r<n.length/2;r++)n[2*r]=f/2*(e[2*r]*p-e[2*r+1]*q),n[2*r+1]=g/2*(e[2*r+1]*p+e[2*r]*q),n[2*r]+=h,n[2*r+1]+=i;for(var s=n[0],t=n[0],u=n[1],v=n[1],r=1;r<n.length/2;r++)n[2*r]>t&&(t=n[2*r]),n[2*r]<s&&(s=n[2*r]),n[2*r+1]>v&&(v=n[2*r+1]),n[2*r+1]<u&&(u=n[2*r+1]);if(s-k>c)return!1;if(a>t+k)return!1;if(u-k>d)return!1;if(b>v+k)return!1;var x;if(k>0){var y=w.expandPolygon(n,-k);x=w.joinLines(y)}else x=n;for(var r=0;r<n.length/2;r++)if(a<=n[2*r]&&n[2*r]<=c&&b<=n[2*r+1]&&n[2*r+1]<=d)return!0;for(var r=0;r<x.length/2;r++){var z,A,B=x[2*r],C=x[2*r+1];if(r<x.length/2-1?(z=x[2*(r+1)],A=x[2*(r+1)+1]):(z=x[0],A=x[1]),w.finiteLinesIntersect(B,C,z,A,a,b,c,b,!1).length>0)return!0;if(w.finiteLinesIntersect(B,C,z,A,a,d,c,d,!1).length>0)return!0;if(w.finiteLinesIntersect(B,C,z,A,a,b,a,d,!1).length>0)return!0;if(w.finiteLinesIntersect(B,C,z,A,c,b,c,d,!1).length>0)return!0}return!1},b.prototype.polygonIntersectLine=function(a,b,c,d,e,f,g,h){for(var i,j=[],k=new Array(c.length),l=0;l<k.length/2;l++)k[2*l]=c[2*l]*f+d,k[2*l+1]=c[2*l+1]*g+e;var m;if(h>0){var n=w.expandPolygon(k,-h);m=w.joinLines(n)}else m=k;for(var o,p,q,r,l=0;l<m.length/2;l++)o=m[2*l],p=m[2*l+1],l<m.length/2-1?(q=m[2*(l+1)],r=m[2*(l+1)+1]):(q=m[0],r=m[1]),i=this.finiteLinesIntersect(a,b,d,e,o,p,q,r),0!=i.length&&j.push(i[0],i[1]);return j},b.prototype.shortenIntersection=function(a,b,c){var d=[a[0]-b[0],a[1]-b[1]],e=Math.sqrt(d[0]*d[0]+d[1]*d[1]),f=(e-c)/e;return 0>f?[]:[b[0]+f*d[0],b[1]+f*d[1]]},e.arrow={_points:[-.15,-.3,0,0,.15,-.3],collide:function(a,b,c,d,f,h,i,j){var k=e.arrow._points;return g.pointInsidePolygon(a,b,k,c,d,f,h,i,j)},roughCollide:function(a,b,c,d,f,h){return"undefined"==typeof e.arrow._farthestPointSqDistance&&(e.arrow._farthestPointSqDistance=g.findMaxSqDistanceToOrigin(e.arrow._points)),g.checkInBoundingCircle(a,b,e.arrow._farthestPointSqDistance,0,f,h,c,d)},draw:function(a){for(var b=e.arrow._points,c=0;c<b.length/2;c++)a.lineTo(b[2*c],b[2*c+1])},spacing:function(){return 0},gap:function(a){return 2*a._private.style.width.value}},e.triangle=e.arrow,e.none={collide:function(){return!1},roughCollide:function(){return!1},draw:function(){},spacing:function(){return 0},gap:function(){return 0}},e.circle={_baseRadius:.15,collide:function(a,b,c,d,f,g,h,i){if(f!=g){var j=Math.asin(h[1]/Math.sqrt(h[0]*h[0]+h[1]*h[1])),k=(Math.cos(-j),Math.sin(-j),(g+i)/(f+i));return b/=k,d/=k,Math.pow(c-a,2)+Math.pow(d-b,2)<=Math.pow((f+i)*e.circle._baseRadius,2)}return Math.pow(c-a,2)+Math.pow(d-b,2)<=Math.pow((f+i)*e.circle._baseRadius,2)},roughCollide:function(){return!0},draw:function(a){a.arc(0,0,e.circle._baseRadius,0,2*Math.PI,!1)},spacing:function(a){return g.getArrowWidth(a._private.style.width.value)*e.circle._baseRadius},gap:function(a){return 2*a._private.style.width.value}},e.inhibitor={_points:[-.25,0,-.25,-.1,.25,-.1,.25,0],collide:function(a,b,c,d,f,h,i,j){var k=e.inhibitor._points;return g.pointInsidePolygon(a,b,k,c,d,f,h,i,j)},roughCollide:function(a,b,c,d,f,h){return"undefined"==typeof e.inhibitor._farthestPointSqDistance&&(e.inhibitor._farthestPointSqDistance=g.findMaxSqDistanceToOrigin(e.inhibitor._points)),g.checkInBoundingCircle(a,b,e.inhibitor._farthestPointSqDistance,0,f,h,c,d)},draw:function(a){for(var b=e.inhibitor._points,c=0;c<b.length/2;c++)a.lineTo(b[2*c],b[2*c+1])},spacing:function(){return 4},gap:function(){return 4}},e.square={_points:[-.12,0,.12,0,.12,-.24,-.12,-.24],collide:function(a,b,c,d,f,h,i,j){var k=e.square._points;return g.pointInsidePolygon(a,b,k,c,d,f,h,i,j)},roughCollide:function(a,b,c,d,f,h){return"undefined"==typeof e.square._farthestPointSqDistance&&(e.square._farthestPointSqDistance=g.findMaxSqDistanceToOrigin(e.square._points)),g.checkInBoundingCircle(a,b,e.square._farthestPointSqDistance,0,f,h,c,d)},draw:function(a){for(var b=e.square._points,c=0;c<b.length/2;c++)a.lineTo(b[2*c],b[2*c+1])},spacing:function(){return 0},gap:function(a){return 2*a._private.style.width.value}},e.diamond={_points:[-.14,-.14,0,-.28,.14,-.14,0,0],collide:function(a,b,c,d,f,h,i,j){var k=e.diamond._points;return g.pointInsidePolygon(a,b,k,c,d,f,h,i,j)},roughCollide:function(a,b,c,d,f,h){return"undefined"==typeof e.diamond._farthestPointSqDistance&&(e.diamond._farthestPointSqDistance=g.findMaxSqDistanceToOrigin(e.diamond._points)),g.checkInBoundingCircle(a,b,e.diamond._farthestPointSqDistance,0,f,h,c,d)},draw:function(a){a.lineTo(-.14,-.14),a.lineTo(0,-.28),a.lineTo(.14,-.14),a.lineTo(0,0)},spacing:function(){return 0},gap:function(a){return 2*a._private.style.width.value}},e.tee=e.inhibitor,b.prototype.getArrowWidth=function(a){return Math.max(Math.pow(13.37*a,.9),29)},b.prototype.getArrowHeight=function(a){return Math.max(Math.pow(13.37*a,.9),29)},b.prototype.drawArrowheads=function(a,b,c){if(!c){var d,e,f=b._private.rscratch.arrowStartX,g=b._private.rscratch.arrowStartY;d=f-b.source().position().x,e=g-b.source().position().y,a.fillStyle="rgba("+b._private.style["source-arrow-color"].value[0]+","+b._private.style["source-arrow-color"].value[1]+","+b._private.style["source-arrow-color"].value[2]+","+b._private.style.opacity.value+")",a.lineWidth=b._private.style.width.value,this.drawArrowShape(a,b._private.style["source-arrow-shape"].value,f,g,d,e);var h=b._private.rscratch.arrowEndX,i=b._private.rscratch.arrowEndY;d=h-b.target().position().x,e=i-b.target().position().y,a.fillStyle="rgba("+b._private.style["target-arrow-color"].value[0]+","+b._private.style["target-arrow-color"].value[1]+","+b._private.style["target-arrow-color"].value[2]+","+b._private.style.opacity.value+")",a.lineWidth=b._private.style.width.value,this.drawArrowShape(a,b._private.style["target-arrow-shape"].value,h,i,d,e)}},b.prototype.drawArrowShape=function(a,b,c,d,f,g){var h=Math.asin(g/Math.sqrt(f*f+g*g));0>f?h+=Math.PI/2:h=-(Math.PI/2+h),a.translate(c,d),a.moveTo(0,0),a.rotate(-h);var i=this.getArrowWidth(a.lineWidth);a.scale(i,i),a.beginPath(),e[b].draw(a),a.closePath(),a.fill(),a.scale(1/i,1/i),a.rotate(h),a.translate(-c,-d)};var v=function(a,b){var c=1/a*2*Math.PI,d=a%2==0?Math.PI/2+c/2:Math.PI/2;d+=b;for(var e,f=new Array(2*a),g=0;a>g;g++)e=g*c+d,f[2*g]=Math.cos(e),f[2*g+1]=Math.sin(-e);for(var h=0,i=0,g=0;g<f.length/2;g++)Math.abs(f[2*g]>h)&&(h=Math.abs(f[2*g])),Math.abs(f[2*g+1]>i)&&(i=Math.abs(f[2*g+1]));for(var j=5e-4,k=Math.max(h,i),g=0;g<f.length/2;g++)k>j&&(f[2*g]*=1/k,f[2*g+1]*=1/k);return f},w=g;f.ellipse={draw:function(a,b,c,d,e){f.ellipse.drawPath(a,b,c,d,e),a.fill()},drawPath:function(a,b,c,d,e){a.beginPath(),a.translate(b,c),a.scale(d/2,e/2),a.arc(0,0,1,0,2*Math.PI*.999,!1),a.closePath(),a.scale(2/d,2/e),a.translate(-b,-c)},intersectLine:function(a,b,c,d,e,f,h){var i=g.intersectLineEllipse(e,f,a,b,c/2+h,d/2+h);return i},intersectBox:function(a,c,d,e,f,g,h,i,j){return b.prototype.boxIntersectEllipse(a,c,d,e,j,f,g,h,i)},checkPointRough:function(){return!0},checkPoint:function(a,b,c,d,e,f,g){return a-=f,b-=g,a/=d/2+c,b/=e/2+c,Math.pow(a,2)+Math.pow(b,2)<=1}},f.triangle={points:v(3,0),draw:function(a,b,c,d,e){w.drawPolygon(a,b,c,d,e,f.triangle.points)},drawPath:function(a,b,c,d,e){w.drawPolygonPath(a,b,c,d,e,f.triangle.points)},intersectLine:function(a,b,c,d,e,g,h){return w.polygonIntersectLine(e,g,f.triangle.points,a,b,c/2,d/2,h)},intersectBox:function(a,b,c,d,e,g,h,i,j){var k=f.triangle.points;return w.boxIntersectPolygon(a,b,c,d,k,e,g,h,i,[0,-1],j)},checkPointRough:function(a,b,c,d,e,g,h){return w.checkInBoundingBox(a,b,f.triangle.points,c,d,e,g,h)},checkPoint:function(a,b,c,d,e,g,h){return w.pointInsidePolygon(a,b,f.triangle.points,g,h,d,e,[0,-1],c)}},f.square={points:v(4,0),draw:function(a,b,c,d,e){w.drawPolygon(a,b,c,d,e,f.square.points)},drawPath:function(a,b,c,d,e){w.drawPolygonPath(a,b,c,d,e,f.square.points)},intersectLine:function(a,b,c,d,e,g,h){return w.polygonIntersectLine(e,g,f.square.points,a,b,c/2,d/2,h)},intersectBox:function(a,b,c,d,e,g,h,i,j){var k=f.square.points;return w.boxIntersectPolygon(a,b,c,d,k,e,g,h,i,[0,-1],j)},checkPointRough:function(a,b,c,d,e,g,h){return w.checkInBoundingBox(a,b,f.square.points,c,d,e,g,h)},checkPoint:function(a,b,c,d,e,g,h){return w.pointInsidePolygon(a,b,f.square.points,g,h,d,e,[0,-1],c)}},f.rectangle=f.square,f.octogon={},f.roundrectangle={points:v(4,0),draw:function(a,b,c,d,e){w.drawRoundRectangle(a,b,c,d,e,10)},drawPath:function(a,b,c,d,e){w.drawRoundRectanglePath(a,b,c,d,e,10)},intersectLine:function(a,b,c,d,e,f,g){return w.roundRectangleIntersectLine(e,f,a,b,c,d,g)},intersectBox:function(a,b,c,d,e,f,g,h,i){return w.roundRectangleIntersectBox(a,b,c,d,e,f,g,h,i)},checkPointRough:function(a,b,c,d,e,g,h){return w.checkInBoundingBox(a,b,f.roundrectangle.points,c,d,e,g,h)},checkPoint:function(a,b,c,d,e,g,h){var i=w.getRoundRectangleRadius(d,e);if(w.pointInsidePolygon(a,b,f.roundrectangle.points,g,h,d,e-2*i,[0,-1],c))return!0;if(w.pointInsidePolygon(a,b,f.roundrectangle.points,g,h,d-2*i,e,[0,-1],c))return!0;var j=function(a,b,c,d,e,f,g){return a-=c,b-=d,a/=e/2+g,b/=f/2+g,Math.pow(a,2)+Math.pow(b,2)<=1};return j(a,b,g-d/2+i,h-e/2+i,2*i,2*i,c)?!0:j(a,b,g+d/2-i,h-e/2+i,2*i,2*i,c)?!0:j(a,b,g+d/2-i,h+e/2-i,2*i,2*i,c)?!0:j(a,b,g-d/2+i,h+e/2-i,2*i,2*i,c)?!0:!1}},f.roundrectangle2={roundness:4.99,draw:function(a,b,c){2*roundness>=b||w.drawPolygon(a._private.position.x,a._private.position.y,b,c,nodeSapes.roundrectangle2.points)},intersectLine:function(a,b,c,d,e){return w.findPolygonIntersection(a,b,c,d,e,f.square.points)},intersectBox:function(){f.square.points}},f.pentagon={points:v(5,0),draw:function(a,b,c,d,e){w.drawPolygon(a,b,c,d,e,f.pentagon.points)},drawPath:function(a,b,c,d,e){w.drawPolygonPath(a,b,c,d,e,f.pentagon.points)},intersectLine:function(a,b,c,d,e,g,h){return w.polygonIntersectLine(e,g,f.pentagon.points,a,b,c/2,d/2,h)},intersectBox:function(a,b,c,d,e,g,h,i,j){var k=f.pentagon.points;return w.boxIntersectPolygon(a,b,c,d,k,e,g,h,i,[0,-1],j)},checkPointRough:function(a,b,c,d,e,g,h){return w.checkInBoundingBox(a,b,f.pentagon.points,c,d,e,g,h)},checkPoint:function(a,b,c,d,e,g,h){return w.pointInsidePolygon(a,b,f.pentagon.points,g,h,d,e,[0,-1],c)}},f.hexagon={points:v(6,0),draw:function(a,b,c,d,e){w.drawPolygon(a,b,c,d,e,f.hexagon.points)},drawPath:function(a,b,c,d,e){w.drawPolygonPath(a,b,c,d,e,f.hexagon.points)},intersectLine:function(a,b,c,d,e,g,h){return w.polygonIntersectLine(e,g,f.hexagon.points,a,b,c/2,d/2,h)},intersectBox:function(a,b,c,d,e,g,h,i,j){var k=f.hexagon.points;return w.boxIntersectPolygon(a,b,c,d,k,e,g,h,i,[0,-1],j)},checkPointRough:function(a,b,c,d,e,g,h){return w.checkInBoundingBox(a,b,f.hexagon.points,c,d,e,g,h)},checkPoint:function(a,b,c,d,e,g,h){return w.pointInsidePolygon(a,b,f.hexagon.points,g,h,d,e,[0,-1],c)}},f.heptagon={points:v(7,0),draw:function(a,b,c,d,e){w.drawPolygon(a,b,c,d,e,f.heptagon.points)},drawPath:function(a,b,c,d,e){w.drawPolygonPath(a,b,c,d,e,f.heptagon.points)
},intersectLine:function(a,b,c,d,e,g,h){return w.polygonIntersectLine(e,g,f.heptagon.points,a,b,c/2,d/2,h)},intersectBox:function(a,b,c,d,e,g,h,i,j){var k=f.heptagon.points;return w.boxIntersectPolygon(a,b,c,d,k,e,g,h,i,[0,-1],j)},checkPointRough:function(a,b,c,d,e,g,h){return w.checkInBoundingBox(a,b,f.heptagon.points,c,d,e,g,h)},checkPoint:function(a,b,c,d,e,g,h){return w.pointInsidePolygon(a,b,f.heptagon.points,g,h,d,e,[0,-1],c)}},f.octagon={points:v(8,0),draw:function(a,b,c,d,e){w.drawPolygon(a,b,c,d,e,f.octagon.points)},drawPath:function(a,b,c,d,e){w.drawPolygonPath(a,b,c,d,e,f.octagon.points)},intersectLine:function(a,b,c,d,e,g,h){return w.polygonIntersectLine(e,g,f.octagon.points,a,b,c/2,d/2,h)},intersectBox:function(a,b,c,d,e,g,h,i,j){var k=f.octagon.points;return w.boxIntersectPolygon(a,b,c,d,k,e,g,h,i,[0,-1],j)},checkPointRough:function(a,b,c,d,e,g,h){return w.checkInBoundingBox(a,b,f.octagon.points,c,d,e,g,h)},checkPoint:function(a,b,c,d,e,g,h){return w.pointInsidePolygon(a,b,f.octagon.points,g,h,d,e,[0,-1],c)}};var z=new Array(20),A=v(5,0),B=v(5,Math.PI/5),C=.5*(3-Math.sqrt(5));C*=1.57;for(var D=0;D<B.length/2;D++)B[2*D]*=C,B[2*D+1]*=C;for(var D=0;5>D;D++)z[4*D]=A[2*D],z[4*D+1]=A[2*D+1],z[4*D+2]=B[2*D],z[4*D+3]=B[2*D+1];f.star5={points:z,draw:function(a,b,c,d,e){w.drawPolygon(a,b,c,d,e,f.star5.points)},drawPath:function(a,b,c,d,e){w.drawPolygonPath(a,b,c,d,e,f.star5.points)},intersectLine:function(a,b,c,d,e,g,h){return w.polygonIntersectLine(e,g,f.star5.points,a,b,c/2,d/2,h)},intersectBox:function(a,b,c,d,e,g,h,i,j){var k=f.star5.points;return w.boxIntersectPolygon(a,b,c,d,k,e,g,h,i,[0,-1],j)},checkPointRough:function(a,b,c,d,e,g,h){return w.checkInBoundingBox(a,b,f.star5.points,c,d,e,g,h)},checkPoint:function(a,b,c,d,e,g,h){return w.pointInsidePolygon(a,b,f.star5.points,g,h,d,e,[0,-1],c)}},b.prototype.expandPolygon=function(a,b){for(var c,d,e,f,g=new Array(2*a.length),h=0;h<a.length/2;h++){c=a[2*h],d=a[2*h+1],h<a.length/2-1?(e=a[2*(h+1)],f=a[2*(h+1)+1]):(e=a[0],f=a[1]);var i=f-d,j=-(e-c),k=Math.sqrt(i*i+j*j),l=i/k,m=j/k;g[4*h]=c+l*b,g[4*h+1]=d+m*b,g[4*h+2]=e+l*b,g[4*h+3]=f+m*b}return g},b.prototype.joinLines=function(a){for(var b,c,d,e,f,g,h,i,j=new Array(a.length/2),k=0;k<a.length/4;k++){b=a[4*k],c=a[4*k+1],d=a[4*k+2],e=a[4*k+3],k<a.length/4-1?(f=a[4*(k+1)],g=a[4*(k+1)+1],h=a[4*(k+1)+2],i=a[4*(k+1)+3]):(f=a[0],g=a[1],h=a[2],i=a[3]);var l=this.finiteLinesIntersect(b,c,d,e,f,g,h,i,!0);j[2*k]=l[0],j[2*k+1]=l[1]}return j},b.prototype.pointInsidePolygon=function(a,b,c,d,e,f,g,h,i){var j=new Array(c.length),k=Math.asin(h[1]/Math.sqrt(h[0]*h[0]+h[1]*h[1]));h[0]<0?k+=Math.PI/2:k=-k-Math.PI/2;for(var l=Math.cos(-k),m=Math.sin(-k),n=0;n<j.length/2;n++)j[2*n]=f/2*(c[2*n]*l-c[2*n+1]*m),j[2*n+1]=g/2*(c[2*n+1]*l+c[2*n]*m),j[2*n]+=d,j[2*n+1]+=e;var o;if(i>0){var p=w.expandPolygon(j,-i);o=w.joinLines(p)}else o=j;for(var q,r,s,t,u,v=0,x=0,n=0;n<o.length/2;n++)if(q=o[2*n],r=o[2*n+1],n+1<o.length/2?(s=o[2*(n+1)],t=o[2*(n+1)+1]):(s=o[2*(n+1-o.length/2)],t=o[2*(n+1-o.length/2)+1]),q==a&&s==a);else{if(!(q>=a&&a>=s||a>=q&&s>=a))continue;u=(a-q)/(s-q)*(t-r)+r,u>b&&v++,b>u&&x++}return v%2==0?!1:!0},b.prototype.drawPolygonPath=function(a,b,c,d,e,f){a.translate(b,c),a.scale(d/2,e/2),a.beginPath(),a.moveTo(f[0],f[1]);for(var g=1;g<f.length/2;g++)a.lineTo(f[2*g],f[2*g+1]);a.closePath(),a.scale(2/d,2/e),a.translate(-b,-c)},b.prototype.drawPolygon=function(a,b,c,d,e,f){this.drawPolygonPath(a,b,c,d,e,f),a.fill()},b.prototype.getRoundRectangleRadius=function(a,b){return Math.min(a/2,b/2,10)},b.prototype.drawRoundRectanglePath=function(a,b,c,d,e){var f=d/2,g=e/2,h=this.getRoundRectangleRadius(d,e);a.translate(b,c),a.beginPath(),a.moveTo(0,-g),a.arcTo(f,-g,f,0,h),a.arcTo(f,g,0,g,h),a.arcTo(-f,g,-f,0,h),a.arcTo(-f,-g,0,-g,h),a.lineTo(0,-g),a.closePath(),a.translate(-b,-c)},b.prototype.drawRoundRectangle=function(a,b,c,d,e,f){this.drawRoundRectanglePath(a,b,c,d,e,f),a.fill()},b.prototype.roundRectangleIntersectLine=function(a,b,c,d,e,f,g){var h,i=this.getRoundRectangleRadius(e,f),j=e/2,k=f/2,l=c-j+i-g,m=d-k-g,n=c+j-i+g,o=m;if(h=this.finiteLinesIntersect(a,b,c,d,l,m,n,o,!1),h.length>0)return h;var p=c+j+g,q=d-k+i-g,r=p,s=d+k-i+g;if(h=this.finiteLinesIntersect(a,b,c,d,p,q,r,s,!1),h.length>0)return h;var t=c-j+i-g,u=d+k+g,v=c+j-i+g,w=u;if(h=this.finiteLinesIntersect(a,b,c,d,t,u,v,w,!1),h.length>0)return h;var x=c-j-g,y=d-k+i-g,z=x,A=d+k-i+g;if(h=this.finiteLinesIntersect(a,b,c,d,x,y,z,A,!1),h.length>0)return h;var B,C=c-j+i,D=d-k+i;if(B=this.intersectLineCircle(a,b,c,d,C,D,i+g),B.length>0&&B[0]<=C&&B[1]<=D)return[B[0],B[1]];var E=c+j-i,F=d-k+i;if(B=this.intersectLineCircle(a,b,c,d,E,F,i+g),B.length>0&&B[0]>=E&&B[1]<=F)return[B[0],B[1]];var G=c+j-i,H=d+k-i;if(B=this.intersectLineCircle(a,b,c,d,G,H,i+g),B.length>0&&B[0]>=G&&B[1]>=H)return[B[0],B[1]];var I=c-j+i,J=d+k-i;return B=this.intersectLineCircle(a,b,c,d,I,J,i+g),B.length>0&&B[0]<=I&&B[1]>=J?[B[0],B[1]]:void 0},b.prototype.roundRectangleIntersectBox=function(a,b,c,d,e,f,g,h,i){var j=this.getRoundRectangleRadius(e,f),k=g-e/2-i,l=h-f/2+j-i,m=g+e/2+i,n=h+f/2-j+i,o=g-e/2+j-i,p=h-f/2-i,q=g+e/2-j+i,r=h+f/2+i,s=Math.min(a,c),t=Math.max(a,c),u=Math.min(b,d),v=Math.max(b,d);return k>t?!1:s>m?!1:p>v?!1:u>r?!1:k>=s&&t>=k&&l>=u&&v>=l?!0:m>=s&&t>=m&&l>=u&&v>=l?!0:m>=s&&t>=m&&n>=u&&v>=n?!0:k>=s&&t>=k&&n>=u&&v>=n?!0:s>=k&&m>=s&&u>=l&&n>=u?!0:t>=k&&m>=t&&u>=l&&n>=u?!0:t>=k&&m>=t&&v>=l&&n>=v?!0:s>=k&&m>=s&&v>=l&&n>=v?!0:o>=s&&t>=o&&p>=u&&v>=p?!0:q>=s&&t>=q&&p>=u&&v>=p?!0:q>=s&&t>=q&&r>=u&&v>=r?!0:o>=s&&t>=o&&r>=u&&v>=r?!0:s>=o&&q>=s&&u>=p&&r>=u?!0:t>=o&&q>=t&&u>=p&&r>=u?!0:t>=o&&q>=t&&v>=p&&r>=v?!0:s>=o&&q>=s&&v>=p&&r>=v?!0:this.boxIntersectEllipse(s,u,t,v,i,2*j,2*j,o+i,l+i)?!0:this.boxIntersectEllipse(s,u,t,v,i,2*j,2*j,q-i,l+i)?!0:this.boxIntersectEllipse(s,u,t,v,i,2*j,2*j,q-i,n-i)?!0:this.boxIntersectEllipse(s,u,t,v,i,2*j,2*j,o+i,n-i)?!0:!1},b.prototype.checkInBoundingCircle=function(a,b,c,d,e,f,g,h){return a=(a-g)/(e+d),b=(b-h)/(f+d),c>=a*a+b*b},b.prototype.checkInBoundingBox=function(a,b,c,d,e,f,g,h){for(var i=c[0],j=c[1],k=c[0],l=c[1],m=1;m<c.length/2;m++)c[2*m]<i?i=c[2*m]:c[2*m]>k&&(k=c[2*m]),c[2*m+1]<j?j=c[2*m+1]:c[2*m+1]>l&&(l=c[2*m+1]);return a-=g,b-=h,a/=e,b/=f,i>a?!1:a>k?!1:j>b?!1:b>l?!1:!0},b.prototype.boxInBezierVicinity=function(a,b,c,d,e,f,g,h,i,j,k){var l=.25*e+.5*g+.25*i,m=.25*f+.5*h+.25*j,n=Math.min(a,c)-k,o=Math.min(b,d)-k,p=Math.max(a,c)+k,q=Math.max(b,d)+k;if(e>=n&&p>=e&&f>=o&&q>=f)return 1;if(i>=n&&p>=i&&j>=o&&q>=j)return 1;if(l>=n&&p>=l&&m>=o&&q>=m)return 1;if(g>=n&&p>=g&&h>=o&&q>=h)return 1;var r=Math.min(e,l,i),s=Math.min(f,m,j),t=Math.max(e,l,i),u=Math.max(f,m,j);return r>p||n>t||s>q||o>u?0:1},b.prototype.checkBezierInBox=function(a,b,c,d,e,f,g,h,i,j){function k(a,b,c,d){return(1-d)*(1-d)*a+2*(1-d)*d*b+d*d*c}function l(l){var m=k(e,g,i,l),n=k(f,h,j,l);return m>=a&&c>=m&&n>=b&&d>=n}for(var m=0;1>=m;m+=.25)if(!l(m))return!1;return!0},b.prototype.checkStraightEdgeInBox=function(a,b,c,d,e,f,g,h){return e>=a&&c>=e&&g>=a&&c>=g&&f>=b&&d>=f&&h>=b&&d>=h},b.prototype.checkStraightEdgeCrossesBox=function(a,b,c,d,e,f,g,h,i){var j,k,l=Math.min(a,c)-i,m=Math.min(b,d)-i,n=Math.max(a,c)+i,o=Math.max(b,d)+i,p=g-e,q=e,r=h-f,s=f;if(Math.abs(p)<1e-4)return e>=l&&n>=e&&Math.min(f,h)<=m&&Math.max(f,h)>=o;var t=(l-q)/p;if(t>0&&1>=t&&(j=r*t+s,j>=m&&o>=j))return!0;var u=(n-q)/p;if(u>0&&1>=u&&(j=r*u+s,j>=m&&o>=j))return!0;var v=(m-s)/r;if(v>0&&1>=v&&(k=p*v+q,k>=l&&n>=k))return!0;var w=(o-s)/r;return w>0&&1>=w&&(k=p*w+q,k>=l&&n>=k)?!0:!1},b.prototype.checkBezierCrossesBox=function(a,b,c,d,e,f,g,h,i,j,k){var l=Math.min(a,c)-k,m=Math.min(b,d)-k,n=Math.max(a,c)+k,o=Math.max(b,d)+k;if(e>=l&&n>=e&&f>=m&&o>=f)return!0;if(i>=l&&n>=i&&j>=m&&o>=j)return!0;var p=e-2*g+i,q=-2*e+2*g,r=e,s=[];if(Math.abs(p)<1e-4){var t=(l-e)/q,u=(n-e)/q;s.push(t,u)}else{var v,w,x=q*q-4*p*(r-l);if(x>0){var y=Math.sqrt(x);v=(-q+y)/(2*p),w=(-q-y)/(2*p),s.push(v,w)}var z,A,B=q*q-4*p*(r-n);if(B>0){var y=Math.sqrt(B);z=(-q+y)/(2*p),A=(-q-y)/(2*p),s.push(z,A)}}s.sort(function(a,b){return a-b});var C=f-2*h+j,D=-2*f+2*h,E=f,F=[];if(Math.abs(C)<1e-4){var G=(m-f)/D,H=(o-f)/D;F.push(G,H)}else{var I,J,K=D*D-4*C*(E-m);if(K>0){var y=Math.sqrt(K);I=(-D+y)/(2*C),J=(-D-y)/(2*C),F.push(I,J)}var L,M,N=D*D-4*C*(E-o);if(N>0){var y=Math.sqrt(N);L=(-D+y)/(2*C),M=(-D-y)/(2*C),F.push(L,M)}}F.sort(function(a,b){return a-b});for(var O=0;O<s.length;O+=2)for(var P=1;P<F.length;P+=2)if(s[O]<F[P]&&F[P]>=0&&s[O]<=1&&s[O+1]>F[P-1]&&F[P-1]<=1&&s[O+1]>=0)return!0;return!1},b.prototype.inLineVicinity=function(a,b,c,d,e,f,g){var h=g,i=Math.min(c,e),j=Math.max(c,e),k=Math.min(d,f),l=Math.max(d,f);return a>=i-h&&j+h>=a&&b>=k-h&&l+h>=b},b.prototype.inBezierVicinity=function(a,b,c,d,e,f,g,h,i){var j=.25*c+.5*e+.25*g,k=.25*d+.5*f+.25*h,l={x1:Math.min(c,g,j),x2:Math.max(c,g,j),y1:Math.min(d,h,k),y2:Math.max(d,h,k)};if(a<l.x1||a>l.x2||b<l.y1||b>l.y2)return!1;var m,n,o=function(a,b,c,d,e,f,g,h){if(m=(f-d)*(a-c)+(c-e)*(b-d),n=m*m,sideSquared=(f-d)*(f-d)+(c-e)*(c-e),h){if(m>0)return!1}else if(0>m)return!1;return n/sideSquared>g},p=(j+e)/2,q=(k+f)/2,r=!0;return o(p,q,c,d,e,f,0,r)&&(r=!r),!o(a,b,c,d,e,f,i,r)&&!o(a,b,e,f,g,h,i,r)&&!o(a,b,g,h,c,d,i,r)},b.prototype.solveCubic=function(a,b,c,d,e){b/=a,c/=a,d/=a;var f,g,h,i,j,k,l,m;return g=(3*c-b*b)/9,h=-(27*d)+b*(9*c-2*b*b),h/=54,f=g*g*g+h*h,e[1]=0,l=b/3,f>0?(j=h+Math.sqrt(f),j=0>j?-Math.pow(-j,1/3):Math.pow(j,1/3),k=h-Math.sqrt(f),k=0>k?-Math.pow(-k,1/3):Math.pow(k,1/3),e[0]=-l+j+k,l+=(j+k)/2,e[4]=e[2]=-l,l=Math.sqrt(3)*(-k+j)/2,e[3]=l,void(e[5]=-l)):(e[5]=e[3]=0,0==f?(m=0>h?-Math.pow(-h,1/3):Math.pow(h,1/3),e[0]=-l+2*m,void(e[4]=e[2]=-(m+l))):(g=-g,i=g*g*g,i=Math.acos(h/Math.sqrt(i)),m=2*Math.sqrt(g),e[0]=-l+m*Math.cos(i/3),e[2]=-l+m*Math.cos((i+2*Math.PI)/3),void(e[4]=-l+m*Math.cos((i+4*Math.PI)/3))))},b.prototype.sqDistanceToQuadraticBezier=function(a,b,c,d,e,f,g,h){var i=1*c*c-4*c*e+2*c*g+4*e*e-4*e*g+g*g+d*d-4*d*f+2*d*h+4*f*f-4*f*h+h*h,j=9*c*e-3*c*c-3*c*g-6*e*e+3*e*g+9*d*f-3*d*d-3*d*h-6*f*f+3*f*h,k=3*c*c-6*c*e+c*g-c*a+2*e*e+2*e*a-g*a+3*d*d-6*d*f+d*h-d*b+2*f*f+2*f*b-h*b,l=1*c*e-c*c+c*a-e*a+d*f-d*d+d*b-f*b;E("coefficients: "+i/i+", "+j/i+", "+k/i+", "+l/i);var m=[];this.solveCubic(i,j,k,l,m);for(var n=1e-7,o=[],p=0;6>p;p+=2)Math.abs(m[p+1])<n&&m[p]>=0&&m[p]<=1&&o.push(m[p]);o.push(1),o.push(0);for(var q,r,s,t,u=-1,v=0;v<o.length;v++)r=Math.pow(1-o[v],2)*c+2*(1-o[v])*o[v]*e+o[v]*o[v]*g,s=Math.pow(1-o[v],2)*d+2*(1-o[v])*o[v]*f+o[v]*o[v]*h,t=Math.pow(r-a,2)+Math.pow(s-b,2),E("distance for param "+o[v]+": "+Math.sqrt(t)),u>=0?u>t&&(u=t,q=o[v]):(u=t,q=o[v]);return E("given: ( "+a+", "+b+"), ( "+c+", "+d+"), ( "+e+", "+f+"), ( "+g+", "+h+")"),E("roots: "+m),E("params: "+o),E("closest param: "+q),u},b.prototype.sqDistanceToFiniteLine=function(a,b,c,d,e,f){var g=[a-c,b-d],h=[e-c,f-d],i=h[0]*h[0]+h[1]*h[1],j=g[0]*g[0]+g[1]*g[1],k=g[0]*h[0]+g[1]*h[1],l=k*k/i;return 0>k?j:l>i?(a-e)*(a-e)+(b-f)*(b-f):j-l};var E=function(){};a("renderer","canvas",b)}(cytoscape),function(a){function b(b){this.options=a.util.extend(!0,{},c,b)}var c={ready:function(){},stop:function(){}};b.prototype.run=function(){var a=this.options,b=a.cy;b.nodes().positions(function(){return{x:0,y:0}}),b.one("layoutready",a.ready),b.trigger("layoutready"),b.one("layoutstop",a.stop),b.trigger("layoutstop")},b.prototype.stop=function(){var a=this.options;cy.one("layoutstop",a.stop),cy.trigger("layoutstop")},a("layout","null",b)}(cytoscape),function(a){function b(b){this.options=a.util.extend(!0,{},c,b)}var c={ready:void 0,stop:void 0,fit:!0,padding:30};b.prototype.run=function(){var a=this.options,b=a.cy,c=b.nodes(),d=(b.edges(),b.container()),e=d.clientWidth,f=d.clientHeight;c.positions(function(a,b){return b.locked()?!1:{x:Math.round(Math.random()*e),y:Math.round(Math.random()*f)}}),b.one("layoutready",a.ready),b.trigger("layoutready"),a.fit&&b.fit(a.padding),b.one("layoutstop",a.stop),b.trigger("layoutstop")},b.prototype.stop=function(){},a("layout","random",b)}(cytoscape),function(a){function b(b){this.options=a.util.extend({},c,b)}var c={fit:!0,rows:void 0,columns:void 0,ready:void 0,stop:void 0};b.prototype.run=function(){function a(a){if(void 0==a)return Math.min(l,m);var b=Math.min(l,m);b==l?l=a:m=a}function b(a){if(void 0==a)return Math.max(l,m);var b=Math.max(l,m);b==l?l=a:m=a}var c=this.options,d=c,e=c.cy,f=e.nodes(),g=(e.edges(),e.container()),h=g.clientWidth,i=g.clientHeight;if(0==i||0==h)f.positions(function(){return{x:0,y:0}});else{var j=f.size(),k=Math.sqrt(j*i/h),l=Math.round(k),m=Math.round(h/i*k);if(null!=d.rows&&null!=d.columns)l=d.rows,m=d.columns;else if(null!=d.rows&&null==d.columns)l=d.rows,m=Math.ceil(j/l);else if(null==d.rows&&null!=d.columns)m=d.columns,l=Math.ceil(j/m);else if(m*l>j){var n=a(),o=b();(n-1)*o>=j?a(n-1):(o-1)*n>=j&&b(o-1)}else for(;j>m*l;){var n=a(),o=b();(o+1)*n>=j?b(o+1):a(n+1)}var p=h/m,q=i/l,r=0,s=0;f.positions(function(a,b){if(b.locked())return!1;var c=s*p+p/2,d=r*q+q/2;return s++,s>=m&&(s=0,r++),{x:c,y:d}})}c.fit&&e.reset(),e.one("layoutready",c.ready),e.trigger("layoutready"),e.one("layoutstop",c.stop),e.trigger("layoutstop")},b.prototype.stop=function(){},a("layout","grid",b)}(cytoscape),function(a){function b(b){this.options=a.util.extend(!0,{},c,b)}var c={fit:!0,ready:void 0,stop:void 0,positions:void 0,zoom:void 0,pan:void 0,padding:30};b.prototype.run=function(){function a(a){return null==b.positions?null:null==b.positions[a._private.data.id]?null:b.positions[a._private.data.id]}{var b=this.options,c=b.cy,d=c.nodes();c.edges(),c.container()}d.positions(function(b,c){var d=a(c);return c.locked()||null==d?!1:d}),null!=b.pan&&c.pan(b.pan),null!=b.zoom&&c.zoom(b.zoom),c.one("layoutready",b.ready),c.trigger("layoutready"),b.fit&&c.fit(b.padding),c.one("layoutstop",b.stop),c.trigger("layoutstop")},a("layout","preset",b),a("core","presetLayout",function(){var a=this,b={},c={};return a.nodes().each(function(a,b){c[b.data("id")]=b.position()}),b.positions=c,b.name="preset",b.zoom=a.zoom(),b.pan=a.pan(),b})}(cytoscape),function(a){function b(b){this.options=a.util.extend({},c,b)}var c={liveUpdate:!0,ready:void 0,stop:void 0,maxSimulationTime:4e3,fit:!0,padding:[50,50,50,50],ungrabifyWhileSimulating:!0,repulsion:void 0,stiffness:void 0,friction:void 0,gravity:!0,fps:void 0,precision:void 0,nodeMass:void 0,edgeLength:void 0,stepSize:1,stableEnergy:function(a){var b=a;return b.max<=.5||b.mean<=.3}};b.prototype.run=function(){function b(a,b){return null==b?void 0:"function"==typeof b?b.apply(a,[a._private.data,{nodes:g.length,edges:h.length,element:a}]):b}function c(a){var b=a.x,c=a.y,d=j,e=k,f=-2,g=2,h=4;return{x:b/d*h+f,y:c/e*h+g}}function d(a){e.fit&&f.fit(),a()}var e=this.options,f=e.cy,g=f.nodes(),h=f.edges(),i=f.container(),j=i.clientWidth,k=i.clientHeight;if(f.nodes().size()<=1)return e.fit&&f.reset(),f.nodes().position({x:Math.round(j/2),y:Math.round(k/2)}),f.one("layoutstop",e.stop),f.trigger("layoutstop"),f.one("layoutstop",e.stop),void f.trigger("layoutstop");var l=this.system=arbor.ParticleSystem(e.repulsion,e.stiffness,e.friction,e.gravity,e.fps,e.dt,e.precision);this.system=l,e.liveUpdate&&e.fit&&f.reset();var m,n=250,o=!1,p=+new Date,q={init:function(){},redraw:function(){var b=l.energy();if(null!=e.stableEnergy&&null!=b&&b.n>0&&e.stableEnergy(b))return void l.stop();clearTimeout(m),m=setTimeout(t,n);var c=[];l.eachNode(function(a,b){var d=(a.name,a.data),e=d.element;if(null!=e){var f=e._private.position;e.locked()||e.grabbed()||(f.x=b.x,f.y=b.y,c.push(e))}});var d=+new Date-p>=16;e.liveUpdate&&c.length>0&&d&&(new a.Collection(f,c).rtrigger("position"),p=+new Date),o||(o=!0,f.one("layoutready",e.ready),f.trigger("layoutready"))}};l.renderer=q,l.screenSize(j,k),l.screenPadding(e.padding[0],e.padding[1],e.padding[2],e.padding[3]),l.screenStep(e.stepSize);var r=function(a){grabbed=this;var b=l.fromScreen(this.position()),c=arbor.Point(b.x,b.y);switch(this.scratch().arbor.p=c,a.type){case"grab":this.scratch().arbor.fixed=!0;break;case"dragstop":this.scratch().arbor.fixed=!1,this.scratch().arbor.tempMass=1e3}};g.bind("grab drag dragstop",r),g.each(function(a,d){var f=this._private.data.id,g=b(this,e.nodeMass),h=this._private.locked,i=c({x:d.position().x,y:d.position().y});d.locked()||(this.scratch().arbor=l.addNode(f,{element:this,mass:g,fixed:h,x:h?i.x:void 0,y:h?i.y:void 0}))}),h.each(function(){var a=(this.id(),this.source().id()),c=this.target().id(),d=b(this,e.edgeLength);this.scratch().arbor=l.addEdge(a,c,{length:d})});var s=g.filter(":grabbable");e.ungrabifyWhileSimulating&&s.ungrabify();var t=function(){function a(){e.liveUpdate||(e.fit&&f.reset(),f.nodes().rtrigger("position")),g.unbind("grab drag dragstop",r),e.ungrabifyWhileSimulating&&s.grabify(),f.one("layoutstop",e.stop),f.trigger("layoutstop")}window.isIE?d(function(){a()}):a()};l.start(),setTimeout(function(){l.stop()},e.maxSimulationTime)},b.prototype.stop=function(){null!=this.system&&system.stop()},a("layout","arbor",b)}(cytoscape),function(a){function b(b){this.options=a.util.extend({},c,b)}var c={fit:!0,ready:void 0,stop:void 0,rStepSize:10,padding:30,startAngle:1.5*Math.PI,counterclockwise:!1};b.prototype.run=function(){function a(){var a=0,b=k,c={x:i.x+o*Math.cos(a),y:i.y+o*Math.sin(a)},d={x:i.x+o*Math.cos(b),y:i.y+o*Math.sin(b)},e=Math.sqrt((d.x-c.x)*(d.x-c.x)+(d.y-c.y)*(d.y-c.y));return e}for(var b=this.options,c=b,d=b.cy,e=d.nodes(),f=(d.edges(),d.container()),g=f.clientWidth,h=f.clientHeight,i={x:g/2,y:h/2},j=c.startAngle,k=2*Math.PI/e.length,l=0,m=0;m<e.length;m++){var n=e[m];l=Math.max(n.outerWidth(),n.outerHeight())}for(var o=g/2-l;a()<l;)o+=c.rStepSize;var m=0;e.positions(function(){var a=o*Math.cos(j),b=o*Math.sin(j),d={x:i.x+a,y:i.y+b};return m++,j=c.counterclockwise?j-k:j+k,d}),b.fit&&d.fit(c.padding),d.one("layoutready",b.ready),d.trigger("layoutready"),d.one("layoutstop",b.stop),d.trigger("layoutstop")},b.prototype.stop=function(){},a("layout","circle",b)}(cytoscape),function(a){function b(b){this.options=a.util.extend({},c,b)}var c={fit:!0,ready:void 0,stop:void 0,directed:!0,padding:30,circle:!1,roots:void 0};b.prototype.run=function(){function b(){for(var a=0;a<p.length;a++)for(var b=p[a],c=0;c<b.length;c++){var d=b[c];d._private.scratch.BreadthFirstLayout={depth:a,index:c}}}function c(a){if(D[a.id()])return D[a.id()];for(var b=a._private.scratch.BreadthFirstLayout.depth,c=a.neighborhood().nodes(),d=0,e=0,f=0;f<c.length;f++){var g=c[f],h=(g.edgesWith(a),g._private.scratch.BreadthFirstLayout.index),i=g._private.scratch.BreadthFirstLayout.depth,j=p[i].length;(b>i||0===b)&&(d+=h/j,e++)}return e=Math.max(1,e),d/=e,0===e&&(d=void 0),D[a.id()]=d,d}var d,e=this.options,f=e,g=e.cy,h=g.nodes(),i=(g.edges(),g.container()),j=i.clientWidth,k=i.clientHeight;if(a.is.elementOrCollection(f.roots))d=f.roots;else if(a.is.array(f.roots)){for(var l=[],m=0;m<f.roots.length;m++){var n=f.roots[m],o=g.getElementById(n);d.push(o)}d=new a.Collection(g,l)}else d=h.roots();var p=[],q={},r={};d.bfs(function(a,b){var c=this[0];p[b]||(p[b]=[]),p[b].push(c),q[c.id()]=!0,r[c.id()]=b},f.directed);for(var s=[],m=0;m<h.length;m++){var o=h[m];q[o.id()]||s.push(o)}for(var t=3*s.length,u=0;0!==s.length&&t>u;){for(var v=s.shift(),w=v.neighborhood().nodes(),x=!1,m=0;m<w.length;m++){var y=r[w[m].id()];if(void 0!==y){p[y].push(v),x=!0;break}}x||s.push(v),u++}for(;0!==s.length;){for(var v=s.shift(),z=v.bfs(),x=!1,m=0;m<z.length;m++){var y=r[z[m].id()];if(void 0!==y){p[y].push(v),x=!0;break}}x||(0===p.length&&p.push([]),p[0].push(v))}b();for(var A=0,m=0;m<h.length;m++){var B=h[m].outerWidth(),C=h[m].outerHeight();A=Math.max(A,B,C)}A*=1.75;for(var D={},E=0;3>E;E++){for(var m=0;m<p.length;m++){var y=m;p[m]=p[m].sort(function(a,b){var d=c(a),e=c(b);return d-e})}b()}var F={x:j/2,y:k/2};h.positions(function(){var a=this[0],b=a._private.scratch.BreadthFirstLayout,c=b.depth,d=b.index,e=Math.max(j/(p[c].length+1),A),g=Math.max(k/(p.length+1),A),h=Math.min(j/2/p.length,k/2/p.length);if(h=Math.max(h,A),f.circle){var i=h*c+h-(p.length>0&&p[0].length<=3?h/2:0),l=2*Math.PI/p[c].length*d;return 0===c&&1===p[0].length&&(i=1),{x:F.x+i*Math.cos(l),y:F.y+i*Math.sin(l)}}return{x:(d+1)*e,y:(c+1)*g}}),e.fit&&g.fit(f.padding),g.one("layoutready",e.ready),g.trigger("layoutready"),g.one("layoutstop",e.stop),g.trigger("layoutstop")},b.prototype.stop=function(){},a("layout","breadthfirst",b)}(cytoscape);var cytoscape;!function(){var a=cytoscape=function(){return cytoscape.init.apply(cytoscape,arguments)};a.init=function(b){return void 0===b&&(b={}),a.is.plainObject(b)?new a.Core(b):a.is.string(b)?a.extension.apply(a.extension,arguments):void 0},a.fn={},"undefined"!=typeof exports&&(exports=module.exports=cytoscape),window.cytoscape=cytoscape}(),function(a){a.is={string:function(a){return null!=a&&"string"==typeof a},fn:function(a){return null!=a&&"function"==typeof a},array:function(a){return null!=a&&a instanceof Array},plainObject:function(b){return null!=b&&typeof b==typeof{}&&!a.is.array(b)&&b.constructor===Object},number:function(a){return null!=a&&"number"==typeof a&&!isNaN(a)},integer:function(b){return a.is.number(b)&&Math.floor(b)===b},color:function(a){return null!=a&&"string"==typeof a&&""!==$.Color(a).toString()},bool:function(a){return null!=a&&typeof a==typeof!0},elementOrCollection:function(b){return a.is.element(b)||a.is.collection(b)},element:function(b){return b instanceof a.Element&&b._private.single},collection:function(b){return b instanceof a.Collection&&!b._private.single},core:function(b){return b instanceof a.Core},style:function(b){return b instanceof a.Style},stylesheet:function(b){return b instanceof a.Stylesheet},event:function(b){return b instanceof a.Event},emptyString:function(b){return b?a.is.string(b)&&(""===b||b.match(/^\s+$/))?!0:!1:!0},nonemptyString:function(b){return b&&a.is.string(b)&&""!==b&&!b.match(/^\s+$/)?!0:!1},domElement:function(a){return"undefined"==typeof HTMLElement?!1:a instanceof HTMLElement}}}(cytoscape),function(a){a.util={extend:function(){var b,c,d,e,f,g,h=arguments[0]||{},i=1,j=arguments.length,k=!1;for("boolean"==typeof h&&(k=h,h=arguments[1]||{},i=2),"object"==typeof h||a.is.fn(h)||(h={}),j===i&&(h=this,--i);j>i;i++)if(null!=(b=arguments[i]))for(c in b)d=h[c],e=b[c],h!==e&&(k&&e&&(a.is.plainObject(e)||(f=a.is.array(e)))?(f?(f=!1,g=d&&a.is.array(d)?d:[]):g=d&&a.is.plainObject(d)?d:{},h[c]=a.util.extend(k,g,e)):void 0!==e&&(h[c]=e));return h},error:function(a){if(!console)throw a;if(console.error)console.error(a);else{if(!console.log)throw a;console.log(a)}},clone:function(a){var b={};for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b},copy:function(b){return null==b?b:a.is.array(b)?b.slice():a.is.plainObject(b)?a.util.clone(b):b},mapEmpty:function(a){var b=!0;if(null!=a)for(var c in a){b=!1;break}return b},pushMap:function(b){var c=a.util.getMap(b);null==c?a.util.setMap($.extend({},b,{value:[b.value]})):c.push(b.value)},setMap:function(b){for(var c,d=b.map,e=b.keys,f=e.length,g=0;f>g;g++){var c=e[g];a.is.plainObject(c)&&a.util.error("Tried to set map with object key"),g<e.length-1?(null==d[c]&&(d[c]={}),d=d[c]):d[c]=b.value}},getMap:function(b){for(var c=b.map,d=b.keys,e=d.length,f=0;e>f;f++){var g=d[f];if(a.is.plainObject(g)&&a.util.error("Tried to get map with object key"),c=c[g],null==c)return c}return c},deleteMap:function(b){for(var c=b.map,d=b.keys,e=d.length,f=b.keepChildren,g=0;e>g;g++){var h=d[g];a.is.plainObject(h)&&a.util.error("Tried to delete map with object key");var i=g===b.keys.length-1;if(i)if(f)for(var j in c)f[j]||delete c[j];else delete c[h];else c=c[h]}},capitalize:function(b){return a.is.emptyString(b)?b:b.charAt(0).toUpperCase()+b.substring(1)},camel2dash:function(a){for(var b=[],c=0;c<a.length;c++){var d=a[c],e=d.toLowerCase(),f=d!==e;f?(b.push("-"),b.push(e)):b.push(d)}var g=b.length===a.length;return g?a:b.join("")},dash2camel:function(a){for(var b=[],c=!1,d=0;d<a.length;d++){var e=a[d],f="-"===e;f?c=!0:(b.push(c?e.toUpperCase():e),c=!1)}return b.join("")},trim:function(a){var b,c;for(b=0;b<a.length&&" "===a[b];b++);for(c=a.length-1;c>b&&" "===a[c];c--);return a.substring(b,c+1)},hex2tuple:function(a){if((4===a.length||7===a.length)&&"#"===a[0]){var b,c,d,e=4===a.length,f=16;return e?(b=parseInt(a[1]+a[1],f),c=parseInt(a[2]+a[2],f),d=parseInt(a[3]+a[3],f)):(b=parseInt(a[1]+a[2],f),c=parseInt(a[3]+a[4],f),d=parseInt(a[5]+a[6],f)),[b,c,d]}},hsl2tuple:function(b){function c(a,b,c){return 0>c&&(c+=1),c>1&&(c-=1),1/6>c?a+6*(b-a)*c:.5>c?b:2/3>c?a+(b-a)*(2/3-c)*6:a}var d,e,f,g,h,i,j,k,l=(a.util.regex.number,new RegExp("^"+a.util.regex.hsla+"$").exec(b));if(l){if(e=parseInt(l[1]),0>e?e=(360- -1*e%360)%360:e>360&&(e%=360),e/=360,f=parseFloat(l[2]),0>f||f>100)return;if(f/=100,g=parseFloat(l[3]),0>g||g>100)return;if(g/=100,h=l[4],void 0!==h&&(h=parseFloat(h),0>h||h>1))return;if(0===f)i=j=k=Math.round(255*g);else{var m=.5>g?g*(1+f):g+f-g*f,n=2*g-m;i=Math.round(255*c(n,m,e+1/3)),j=Math.round(255*c(n,m,e)),k=Math.round(255*c(n,m,e-1/3))}d=[i,j,k,h]}return d},rgb2tuple:function(b){var c,d=(a.util.regex.number,new RegExp("^"+a.util.regex.rgba+"$").exec(b));if(d){c=[];for(var e=[],f=1;3>=f;f++){var g=d[f];if("%"===g[g.length-1]&&(e[f]=!0),g=parseFloat(g),e[f]&&(g=g/100*255),0>g||g>255)return;c.push(Math.floor(g))}var h=e[1]||e[2]||e[3],i=e[1]&&e[2]&&e[3];if(h&&!i)return;var j=d[4];if(void 0!==j){if(j=parseFloat(j),0>j||j>1)return;c.push(j)}}return c},colorname2tuple:function(b){return a.util.colors[b.toLowerCase()]},color2tuple:function(b){return a.util.colorname2tuple(b)||a.util.hex2tuple(b)||a.util.rgb2tuple(b)||a.util.hsl2tuple(b)},tuple2hex:function(a){function b(a){var b=a.toString(16);return 1===b.length&&(b="0"+b),b}var c=a[0],d=a[1],e=a[2];return"#"+b(c)+b(d)+b(e)},colors:{transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},a.util.regex={},a.util.regex.number="(?:\\d*\\.\\d+|\\d+|\\d*\\.\\d+[eE]\\d+)",a.util.regex.rgba="rgb[a]?\\(("+a.util.regex.number+"[%]?)\\s*,\\s*("+a.util.regex.number+"[%]?)\\s*,\\s*("+a.util.regex.number+"[%]?)(?:\\s*,\\s*("+a.util.regex.number+"))?\\)",a.util.regex.rgbaNoBackRefs="rgb[a]?\\((?:"+a.util.regex.number+"[%]?)\\s*,\\s*(?:"+a.util.regex.number+"[%]?)\\s*,\\s*(?:"+a.util.regex.number+"[%]?)(?:\\s*,\\s*(?:"+a.util.regex.number+"))?\\)",a.util.regex.hsla="hsl[a]?\\(("+a.util.regex.number+")\\s*,\\s*("+a.util.regex.number+"[%])\\s*,\\s*("+a.util.regex.number+"[%])(?:\\s*,\\s*("+a.util.regex.number+"))?\\)",a.util.regex.hslaNoBackRefs="hsl[a]?\\((?:"+a.util.regex.number+")\\s*,\\s*(?:"+a.util.regex.number+"[%])\\s*,\\s*(?:"+a.util.regex.number+"[%])(?:\\s*,\\s*(?:"+a.util.regex.number+"))?\\)",a.util.regex.hex3="\\#[0-9a-fA-F]{3}",a.util.regex.hex6="\\#[0-9a-fA-F]{6}"}(cytoscape),function(a){a.math={},a.math.boxInBezierVicinity=function(a,b,c,d,e,f,g,h,i,j,k){var l=Math.min(a,c)-k,m=Math.min(b,d)-k,n=Math.max(a,c)+k,o=Math.max(b,d)+k;if(e>=l&&n>=e&&f>=m&&o>=f)return 2;if(i>=l&&n>=i&&j>=m&&o>=j)return 2;if(g>=l&&n>=g&&h>=m&&o>=h)return 1;var p=Math.min(e,g,i),q=Math.min(f,h,j),r=Math.max(e,g,i),s=Math.max(f,h,j);return p>n||l>r||q>o||m>s?0:1},a.math.checkStraightEdgeCrossesBox=function(a,b,c,d,e,f,g,h,i){var j,k,l=Math.min(a,c)-i,m=Math.min(b,d)-i,n=Math.max(a,c)+i,o=Math.max(b,d)+i,p=g-e,q=e,r=h-f,s=f;if(Math.abs(p)<1e-4)return e>=l&&n>=e&&Math.min(f,h)<=m&&Math.max(f,h)>=o;var t=(l-q)/p;if(t>0&&1>=t&&(j=r*t+s,j>=m&&o>=j))return!0;var u=(n-q)/p;if(u>0&&1>=u&&(j=r*u+s,j>=m&&o>=j))return!0;var v=(m-s)/r;if(v>0&&1>=v&&(k=p*v+q,k>=l&&n>=k))return!0;var w=(o-s)/r;return w>0&&1>=w&&(k=p*w+q,k>=l&&n>=k)?!0:!1},a.math.checkBezierCrossesBox=function(a,b,c,d,e,f,g,h,i,j,k){var l=Math.min(a,c)-k,m=Math.min(b,d)-k,n=Math.max(a,c)+k,o=Math.max(b,d)+k;if(e>=l&&n>=e&&f>=m&&o>=f)return!0;if(i>=l&&n>=i&&j>=m&&o>=j)return!0;var p=e-2*g+i,q=-2*e+2*g,r=e,s=[];if(Math.abs(p)<1e-4){var t=(l-e)/q,u=(n-e)/q;s.push(t,u)}else{var v,w,x=q*q-4*p*(r-l);if(x>0){var y=Math.sqrt(x);v=(-q+y)/(2*p),w=(-q-y)/(2*p),s.push(v,w)}var z,A,B=q*q-4*p*(r-n);if(B>0){var y=Math.sqrt(B);z=(-q+y)/(2*p),A=(-q-y)/(2*p),s.push(z,A)}}s.sort(function(a,b){return a-b});var C=f-2*h+j,D=-2*f+2*h,E=f,F=[];if(Math.abs(C)<1e-4){var G=(m-f)/D,H=(o-f)/D;F.push(G,H)}else{var I,J,K=D*D-4*C*(E-m);if(K>0){var y=Math.sqrt(K);I=(-D+y)/(2*C),J=(-D-y)/(2*C),F.push(I,J)}var L,M,N=D*D-4*C*(E-o);if(N>0){var y=Math.sqrt(N);L=(-D+y)/(2*C),M=(-D-y)/(2*C),F.push(L,M)}}F.sort(function(a,b){return a-b});for(var O=0;O<s.length;O+=2)for(var P=1;P<F.length;P+=2)if(s[O]<F[P]&&F[P]>=0&&s[O]<=1&&s[O+1]>F[P-1]&&F[P-1]<=1&&s[O+1]>=0)return!0;return!1},a.math.inBezierVicinity=function(a,b,c,d,e,f,g,h,i){var j,k,l=.25*c+.5*e+.25*g,m=.25*d+.5*f+.25*h,n=function(a,b,c,d,e,f,g,h){if(j=(f-d)*(a-c)+(c-e)*(b-d),k=j*j,sideSquared=(f-d)*(f-d)+(c-e)*(c-e),h){if(j>0)return!1}else if(0>j)return!1;
return k/sideSquared>g},o=(l+e)/2,p=(m+f)/2,q=!0;return n(o,p,c,d,e,f,0,q)&&(q=!q),!n(a,b,c,d,e,f,i,q)&&!n(a,b,e,f,g,h,i,q)&&!n(a,b,g,h,c,d,i,q)},a.math.solveCubic=function(a,b,c,d,e){b/=a,c/=a,d/=a;var f,g,h,i,j,k,l,m;return g=(3*c-b*b)/9,h=-(27*d)+b*(9*c-2*b*b),h/=54,f=g*g*g+h*h,e[1]=0,l=b/3,f>0?(j=h+Math.sqrt(f),j=0>j?-Math.pow(-j,1/3):Math.pow(j,1/3),k=h-Math.sqrt(f),k=0>k?-Math.pow(-k,1/3):Math.pow(k,1/3),e[0]=-l+j+k,l+=(j+k)/2,e[4]=e[2]=-l,l=Math.sqrt(3)*(-k+j)/2,e[3]=l,void(e[5]=-l)):(e[5]=e[3]=0,0==f?(m=0>h?-Math.pow(-h,1/3):Math.pow(h,1/3),e[0]=-l+2*m,void(e[4]=e[2]=-(m+l))):(g=-g,i=g*g*g,i=Math.acos(h/Math.sqrt(i)),m=2*Math.sqrt(g),e[0]=-l+m*Math.cos(i/3),e[2]=-l+m*Math.cos((i+2*Math.PI)/3),void(e[4]=-l+m*Math.cos((i+4*Math.PI)/3))))},a.math.sqDistanceToQuadraticBezier=function(a,c,d,e,f,g,h,i){var j=1*d*d-4*d*f+2*d*h+4*f*f-4*f*h+h*h+e*e-4*e*g+2*e*i+4*g*g-4*g*i+i*i,k=9*d*f-3*d*d-3*d*h-6*f*f+3*f*h+9*e*g-3*e*e-3*e*i-6*g*g+3*g*i,l=3*d*d-6*d*f+d*h-d*a+2*f*f+2*f*a-h*a+3*e*e-6*e*g+e*i-e*c+2*g*g+2*g*c-i*c,m=1*d*f-d*d+d*a-f*a+e*g-e*e+e*c-g*c;b("coefficients: "+j/j+", "+k/j+", "+l/j+", "+m/j);var n=[];this.solveCubic(j,k,l,m,n);for(var o=1e-7,p=[],q=0;6>q;q+=2)Math.abs(n[q+1])<o&&n[q]>=0&&n[q]<=1&&p.push(n[q]);p.push(1),p.push(0);for(var r,s,t,u,v=-1,w=0;w<p.length;w++)s=Math.pow(1-p[w],2)*d+2*(1-p[w])*p[w]*f+p[w]*p[w]*h,t=Math.pow(1-p[w],2)*e+2*(1-p[w])*p[w]*g+p[w]*p[w]*i,u=Math.pow(s-a,2)+Math.pow(t-c,2),b("distance for param "+p[w]+": "+Math.sqrt(u)),v>=0?v>u&&(v=u,r=p[w]):(v=u,r=p[w]);return b("given: ( "+a+", "+c+"), ( "+d+", "+e+"), ( "+f+", "+g+"), ( "+h+", "+i+")"),b("roots: "+n),b("params: "+p),b("closest param: "+r),v};var b=function(a){}}(cytoscape),function(a){a.instances=[],a.instanceCounter=0,a.lastInstanceTime,a.registerInstance=function(b,c){var d;a.is.core(b)?d=b:a.is.domElement(b)&&(c=b);var e=a.getRegistrationForInstance(b,c);if(e)return e.cy?a.util.error("Tried to register on a pre-existing registration"):(e.cy=b,e.domElement=c),e;var f,g=+new Date;a.lastInstanceTime&&a.lastInstanceTime!==g?++a.instanceCounter:a.instanceCounter=0,a.lastInstanceTime=g,f=a.instanceCounter;var h="cy-"+g+"-"+f,i={id:h,cy:d,domElement:c,readies:[]};return a.instances.push(i),a.instances[h]=i,i},a.removeRegistrationForInstance=function(b,c){var d;if(a.is.core(b)?d=b:a.is.domElement(b)&&(c=b),a.is.core(d)){var e=d._private.instanceId;delete a.instances[e],a.instances.splice(e,1)}else if(a.is.domElement(c))for(var f=0;f<a.instances.length;f++){var g=a.instances[f];g.domElement===c&&(delete a.instances[g.id],a.instances.splice(f,1),f--)}},a.getRegistrationForInstance=function(b,c){var d;if(a.is.core(b)?b.registered()&&(d=b):a.is.domElement(b)&&(c=b),a.is.core(d)){var e=d._private.instanceId;return a.instances[e]}if(a.is.domElement(c))for(var f=a.instances.length-1;f>=0;f--){var g=a.instances[f];if(g.domElement===c)return g}}}(cytoscape),function(a){function b(b,c,d){var e={};switch(e[c]=d,b){case"core":case"collection":a.fn[b](e)}return a.util.setMap({map:f,keys:[b,c],value:d})}function c(b,c){return a.util.getMap({map:f,keys:[b,c]})}function d(b,c,d,e,f){return a.util.setMap({map:g,keys:[b,c,d,e],value:f})}function e(b,c,d,e){return a.util.getMap({map:g,keys:[b,c,d,e]})}var f={};a.extensions=f;var g={};a.modules=g,a.extension=function(){return 2==arguments.length?c.apply(this,arguments):3==arguments.length?b.apply(this,arguments):4==arguments.length?e.apply(this,arguments):5==arguments.length?d.apply(this,arguments):void $.error("Invalid extension access syntax")}}(cytoscape),function(a,b){a&&(a.fn.cytoscape=function(c){var d=a(this);if("get"===c){var e=b.getRegistrationForInstance(d[0]);return e.cy}if(!b.is.fn(c)){if(b.is.plainObject(c))return d.each(function(){var b=a.extend({},c,{container:a(this)[0]});cytoscape(b)});for(var f=d[0],g=[],h=[],i=1;i<arguments.length;i++)h[i-1]=arguments[i];return d.each(function(){var a=b.getRegistrationForInstance(f),d=a.cy,e=c;if(d&&b.is.fn(d[e])){var i=d[e].apply(d,h);g.push(i)}}),1===g.length?g=g[0]:0==g.length&&(g=a(this)),g}var j=c,f=d[0],e=b.getRegistrationForInstance(f);e||(e=b.registerInstance(f)),e&&e.cy&&e.cy.ready()?e.cy.trigger("ready",[],j):e.readies.push(j)},a.cytoscape=cytoscape,null==a.fn.cy&&null==a.cy&&(a.fn.cy=a.fn.cytoscape,a.cy=a.cytoscape))}("undefined"!=typeof jQuery?jQuery:null,cytoscape),function(a){function b(){return!1}function c(){return!0}a.Event=function(d,e){return this instanceof a.Event?(d&&d.type?(this.originalEvent=d,this.type=d.type,this.isDefaultPrevented=d.defaultPrevented||d.returnValue===!1||d.getPreventDefault&&d.getPreventDefault()?c:b):this.type=d,e&&a.util.extend(this,e),void(this.timeStamp=d&&d.timeStamp||+new Date)):new a.Event(d,e)},a.Event.prototype={preventDefault:function(){this.isDefaultPrevented=c;var a=this.originalEvent;a&&(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=c;var a=this.originalEvent;a&&(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=c,this.stopPropagation()},isDefaultPrevented:b,isPropagationStopped:b,isImmediatePropagationStopped:b}}(cytoscape),function(a){a.define={data:function(b){var c={field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateMappers:!1};return b=a.util.extend({},c,b),function(c,d){var e=b,f=this,g=void 0!==f.length,h=g?f:[f],i=g?f[0]:f;if(a.is.string(c)){if(e.allowGetting&&void 0===d){var j;return i&&(j=i._private[e.field][c]),j}if(e.allowSetting&&void 0!==d){var k=!e.immutableKeys[c];if(k){for(var l=0,m=h.length;m>l;l++)h[l]._private[e.field][c]=d;e.updateMappers&&f.updateMappers(),e.settingTriggersEvent&&f[e.triggerFnName](e.settingEvent)}}}else if(e.allowSetting&&a.is.plainObject(c)){var n,o,p=c;for(n in p){o=p[n];var k=!e.immutableKeys[n];if(k)for(var l=0,m=h.length;m>l;l++)h[l]._private[e.field][n]=o}e.updateMappers&&f.updateMappers(),e.settingTriggersEvent&&f[e.triggerFnName](e.settingEvent)}else if(e.allowBinding&&a.is.fn(c)){var q=c;f.bind(e.bindingEvent,q)}else if(e.allowGetting&&void 0===c){var j;return i&&(j=i._private[e.field]),j}return f}},batchData:function(b){var c={field:"data",event:"data",triggerFnName:"trigger",immutableKeys:{},updateMappers:!1},d=b=a.util.extend({},c,b);return function(b){var c=this,e=void 0!==c.length,f=e?c:c._private.elements;if(0===f.length)return c;for(var g=e?f[0]._private.cy:c,h=0;h<f.length;h++){var i=f[h],j=i._private.data.id,k=b[j];if(void 0!==k&&null!==k){var l,m,n=k;for(l in n){m=n[l];var o=!d.immutableKeys[l];o&&(i._private[d.field][l]=m)}}}var p=new a.Collection(g,f);return d.updateMappers&&p.updateMappers(),p[d.triggerFnName](d.event),c}},removeData:function(b){var c={field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}};return b=a.util.extend({},c,b),function(c){{var d=b,e=this,f=void 0!==e.length,g=f?e:[e];f?e[0]:e}if(a.is.string(c)){for(var h=c.split(/\s+/),i=h.length,j=0;i>j;j++){var k=h[j];if(!a.is.emptyString(k)){var l=!d.immutableKeys[k];if(l)for(var m=0,n=g.length;n>m;m++)delete g[m]._private[d.field][k]}}d.triggerEvent&&e[d.triggerFnName](d.event)}else if(void 0===c){for(var m=0,n=g.length;n>m;m++){var o=g[m]._private[d.field];for(var k in o){var p=!d.immutableKeys[k];p&&delete o[k]}}d.triggerEvent&&e[d.triggerFnName](d.event)}return e}},event:{regex:/(\w+)(\.\w+)?/,optionalTypeRegex:/(\w+)?(\.\w+)?/,props:"altKey bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase metaKey offsetX offsetY originalTarget pageX pageY prevValue relatedTarget screenX screenY shiftKey target view which".split(/\s+/),aliases:"mousedown mouseup click mouseover mouseout mousemove touchstart touchmove touchend grab drag free".split(/\s+/),aliasesOn:function(b){for(var c=a.define.event.aliases,d=0;d<c.length;d++){var e=c[d];b[e]=function(b,c){return a.is.fn(c)?this.on(e,b,c):a.is.fn(b)?(c=b,this.on(e,c)):this.trigger(e),this}}},falseCallback:function(){return!1}},on:function(b){var c={unbindSelfOnTrigger:!1,unbindAllBindersOnTrigger:!1};return b=a.util.extend({},c,b),function(c,d,e,f){var g=this,h=void 0!==g.length,i=h?g:[g],j=(h?g[0]:g,a.is.string(c)),k=b;if(a.is.plainObject(d)?(f=e,e=d,d=void 0):(a.is.fn(d)||d===!1)&&(f=d,e=void 0,d=void 0),(a.is.fn(e)||e===!1)&&(f=e,e=void 0),!a.is.fn(f)&&f!==!1&&j)return g;if(j){var l={};l[c]=f,c=l}for(var m in c)if(f=c[m],f===!1&&(f=a.define.event.falseCallback),a.is.fn(f)){m=m.split(/\s+/);for(var n=0;n<m.length;n++){var o=m[n];if(!a.is.emptyString(o)){var p=o.match(a.define.event.regex);if(p)for(var q=p[1],r=p[2]?p[2]:void 0,s={callback:f,data:e,delegated:d?!0:!1,selector:d,type:q,namespace:r,unbindSelfOnTrigger:k.unbindSelfOnTrigger,unbindAllBindersOnTrigger:k.unbindAllBindersOnTrigger,binders:i},t=0;t<i.length;t++)i[t]._private.listeners.push(s)}}}return g}},off:function(b){var c={};return b=a.util.extend({},c,b),function(b,c,d){var e=this,f=void 0!==e.length,g=f?e:[e],h=(f?e[0]:e,a.is.string(b));if(0===arguments.length){for(var i=0;i<g.length;i++)g[i]._private.listeners=[];return e}if((a.is.fn(c)||c===!1)&&(d=c,c=void 0),h){var j={};j[b]=d,b=j}for(var k in b){d=b[k],d===!1&&(d=a.define.event.falseCallback),k=k.split(/\s+/);for(var l=0;l<k.length;l++){var m=k[l];if(!a.is.emptyString(m)){var n=m.match(a.define.event.optionalTypeRegex);if(n)for(var o=n[1]?n[1]:void 0,p=n[2]?n[2]:void 0,i=0;i<g.length;i++)for(var q=g[i]._private.listeners,r=0;r<q.length;r++){var s=q[r],t=!p||p===s.namespace,u=!o||s.type===o,v=!d||d===s.callback,w=t&&u&&v;w&&(q.splice(r,1),r--)}}}}return e}},trigger:function(b){var c={};return b=a.util.extend({},c,b),function(b,c,d){var e=this,f=void 0!==e.length,g=f?e:[e],h=(f?e[0]:e,a.is.string(b)),i=a.is.plainObject(b),j=a.is.event(b),k=this._private.cy||this;if(h){var l=b.split(/\s+/);b=[];for(var m=0;m<l.length;m++){var n=l[m];if(!a.is.emptyString(n)){var o=n.match(a.define.event.regex),p=o[1],q=o[2]?o[2]:void 0;b.push({type:p,namespace:q})}}}else if(i){var r=b;b=[r]}c?a.is.array(c)||(c=[c]):c=[];for(var m=0;m<b.length;m++)for(var s=b[m],t=0;t<g.length;t++){var n,u=g[t],v=u._private.listeners,w=a.is.element(u),x=w;if(j)n=s,n.cyTarget=n.cyTarget||u,n.cy=n.cy||k,n.namespace=n.namespace||s.namespace;else{n=new a.Event(s,{cyTarget:u,cy:k,namespace:s.namespace});for(var y=a.define.event.props,z=0;z<y.length;z++){var A=y[z];n[A]=s[A]}}d&&(v=[{namespace:n.namespace,type:n.type,callback:d}]);for(var z=0;z<v.length;z++){var B=v[z],C=!B.namespace||B.namespace===n.namespace,D=B.type===n.type,E=B.delegated?u!==n.cyTarget&&a.is.element(n.cyTarget)&&n.cyTarget.is(B.selector):!0,F=C&&D&&E;if(F){var G=[n];if(G=G.concat(c),n.data=B.data?B.data:void 0,(B.unbindSelfOnTrigger||B.unbindAllBindersOnTrigger)&&(v.splice(z,1),z--),B.unbindAllBindersOnTrigger)for(var H=B.binders,I=0;I<H.length;I++){var J=H[I];if(J&&J!==u)for(var K=J._private.listeners,L=0;L<K.length;L++){var M=K[L];M===B&&(K.splice(L,1),L--)}}var N=B.delegated?n.cyTarget:u,O=B.callback.apply(N,G);(O===!1||n.isPropagationStopped())&&(x=!1,O===!1&&(n.stopPropagation(),n.preventDefault()))}}if(x){var P=u.parent(),Q=0!==P.length;Q?(P=P[0],P.trigger(n)):k.trigger(n)}}return e}}}}(cytoscape),function($$,window){var isTouch="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch;$$.Style=function(a){return this instanceof $$.Style?$$.is.core(a)?(this._private={cy:a,coreStyle:{}},this.length=0,void this.addDefaultStylesheet()):void $$.util.error("A style must have a core reference"):new $$.Style(a)},$$.style=$$.Style,$$.styfn=$$.Style.prototype,$$.fn.style=function(a){for(var b in a){var c=a[b];$$.Style.prototype=c}},$$.stylesheet=$$.Stylesheet=function(){return this instanceof $$.Stylesheet?void(this.length=0):new $$.Stylesheet},$$.Stylesheet.prototype.selector=function(a){var b=this.length++;return this[b]={selector:a,properties:[]},this},$$.Stylesheet.prototype.css=function(a,b){var c=this.length-1;if($$.is.string(a))this[c].properties.push({name:a,value:b});else if($$.is.plainObject(a)){map=a;for(var d=0;d<$$.style.properties.length;d++){var e=$$.style.properties[d],f=map[e.name];if(void 0===f&&(f=map[$$.util.dash2camel(e.name)]),void 0!==f){var a=e.name,b=f;this[c].properties.push({name:a,value:b})}}}return this},$$.style.fromJson=function(a,b){for(var c=new $$.Style(a),d=0;d<b.length;d++){var e=b[d],f=e.selector,g=e.css;c.selector(f);for(var h in g){var i=g[h];c.css(h,i)}}return c},$$.styfn.fromJson=function(a){var b=this;b.resetToDefault();for(var c=0;c<a.length;c++){var d=a[c],e=d.selector,f=d.css;b.selector(e);for(var g in f){var h=f[g];b.css(g,h)}}return b},$$.Stylesheet.prototype.generateStyle=function(a){for(var b=new $$.Style(a),c=0;c<this.length;c++){var d=this[c],e=d.selector,f=d.properties;b.selector(e);for(var g=0;g<f.length;g++){var h=f[g];b.css(h.name,h.value)}}return b},$$.Stylesheet.prototype.assignToStyle=function(a,b){a.clear(),(b||void 0===b)&&a.addDefaultStylesheet();for(var c=0;c<this.length;c++){var d=this[c],e=d.selector,f=d.properties;a.selector(e);for(var g=0;g<f.length;g++){var h=f[g];a.css(h.name,h.value)}}},function(){var a=$$.util.regex.number,b=$$.util.regex.rgbaNoBackRefs,c=$$.util.regex.hslaNoBackRefs,d=$$.util.regex.hex3,e=$$.util.regex.hex6;$$.style.types={zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},size:{number:!0,min:0,enums:["auto"]},bgSize:{number:!0,min:0,allowPercent:!0},color:{color:!0},lineStyle:{enums:["solid","dotted","dashed"]},curveStyle:{enums:["bundled","bezier"]},fontFamily:{regex:"^([\\w- ]+(?:\\s*,\\s*[\\w- ]+)*)$"},fontVariant:{enums:["small-caps","normal"]},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","capitalize","uppercase","lowercase"]},nodeShape:{enums:["rectangle","roundrectangle","ellipse","triangle","square","pentagon","hexagon","heptagon","octagon"]},arrowShape:{enums:["tee","triangle","square","circle","diamond","none"]},visibility:{enums:["hidden","visible"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},positionx:{enums:["left","center","right"],number:!0,allowPercent:!0},positiony:{enums:["top","center","bottom"],number:!0,allowPercent:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"]},cursor:{enums:["auto","crosshair","default","e-resize","n-resize","ne-resize","nw-resize","pointer","progress","s-resize","sw-resize","text","w-resize","wait","grab","grabbing"]},text:{string:!0},data:{mapping:!0,regex:"^data\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},mapData:{mapping:!0,regex:"^mapData\\(([\\w\\.]+)\\s*\\,\\s*("+a+")\\s*\\,\\s*("+a+")\\s*,\\s*("+a+"|\\w+|"+b+"|"+c+"|"+d+"|"+e+")\\s*\\,\\s*("+a+"|\\w+|"+b+"|"+c+"|"+d+"|"+e+")\\)$"},url:{regex:"^url\\s*\\(\\s*([^\\s]+)\\s*\\s*\\)|none|(.+)$"}};var f=$$.style.types;$$.style.properties=[{name:"cursor",type:f.cursor},{name:"text-valign",type:f.valign},{name:"text-halign",type:f.halign},{name:"color",type:f.color},{name:"content",type:f.text},{name:"text-outline-color",type:f.color},{name:"text-outline-width",type:f.size},{name:"text-outline-opacity",type:f.zeroOneNumber},{name:"text-opacity",type:f.zeroOneNumber},{name:"text-decoration",type:f.textDecoration},{name:"text-transform",type:f.textTransform},{name:"font-family",type:f.fontFamily},{name:"font-style",type:f.fontStyle},{name:"font-variant",type:f.fontVariant},{name:"font-weight",type:f.fontWeight},{name:"font-size",type:f.size},{name:"min-zoomed-font-size",type:f.size},{name:"visibility",type:f.visibility},{name:"opacity",type:f.zeroOneNumber},{name:"z-index",type:f.nonNegativeInt},{name:"overlay-padding",type:f.size},{name:"overlay-color",type:f.color},{name:"overlay-opacity",type:f.zeroOneNumber},{name:"background-color",type:f.color},{name:"background-opacity",type:f.zeroOneNumber},{name:"background-image",type:f.url},{name:"background-position-x",type:f.positionx},{name:"background-position-y",type:f.positiony},{name:"background-repeat",type:f.bgRepeat},{name:"background-size-x",type:f.bgSize},{name:"background-size-y",type:f.bgSize},{name:"border-color",type:f.color},{name:"border-opacity",type:f.zeroOneNumber},{name:"border-width",type:f.size},{name:"border-style",type:f.lineStyle},{name:"height",type:f.size},{name:"width",type:f.size},{name:"padding-left",type:f.size},{name:"padding-right",type:f.size},{name:"padding-top",type:f.size},{name:"padding-bottom",type:f.size},{name:"shape",type:f.nodeShape},{name:"source-arrow-shape",type:f.arrowShape},{name:"target-arrow-shape",type:f.arrowShape},{name:"source-arrow-color",type:f.color},{name:"target-arrow-color",type:f.color},{name:"line-style",type:f.lineStyle},{name:"line-color",type:f.color},{name:"control-point-step-size",type:f.size},{name:"curve-style",type:f.curveStyle},{name:"selection-box-color",type:f.color},{name:"selection-box-opacity",type:f.zeroOneNumber},{name:"selection-box-border-color",type:f.color},{name:"selection-box-border-width",type:f.size},{name:"panning-cursor",type:f.cursor},{name:"active-bg-color",type:f.color},{name:"active-bg-opacity",type:f.zeroOneNumber},{name:"active-bg-size",type:f.size}];for(var g=$$.style.properties,h=0;h<g.length;h++){var i=g[h];g[i.name]=i}}(),$$.styfn.addDefaultStylesheet=function(){var a=this.containerPropertyAsString("font-family")||"sans-serif",b=this.containerPropertyAsString("font-style")||"normal",c=this.containerPropertyAsString("font-variant")||"normal",d=this.containerPropertyAsString("font-weight")||"normal",e=this.containerPropertyAsString("color")||"#000",f=this.containerPropertyAsString("text-transform")||"none",g=(this.containerPropertyAsString("text-decoration")||"none",this.containerPropertyAsString("font-size")||12);this.selector("node, edge").css({cursor:"default","text-valign":"top","text-halign":"center",color:e,content:void 0,"text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":f,"font-family":a,"font-style":b,"font-variant":c,"font-weight":d,"font-size":g,"min-zoomed-font-size":0,visibility:"visible",opacity:1,"z-index":0,content:"","overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"background-color":"#888","background-opacity":1,"background-image":"none","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid",height:30,width:30,"padding-top":0,"padding-bottom":0,"padding-left":0,"padding-right":0,shape:"ellipse","source-arrow-shape":"none","target-arrow-shape":"none","source-arrow-color":"#bbb","target-arrow-color":"#bbb","line-style":"solid","line-color":"#bbb","control-point-step-size":40,"curve-style":"bezier"}).selector("$node > node").css({width:"auto",height:"auto",shape:"rectangle","background-opacity":.5,"padding-top":10,"padding-right":10,"padding-left":10,"padding-bottom":10}).selector("edge").css({width:1}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}).selector("core").css({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"panning-cursor":"grabbing","active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":isTouch?40:15})},$$.styfn.clear=function(){this._private.newStyle=!0;for(var a=0;a<this.length;a++)delete this[a];return this.length=0,this},$$.styfn.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this},$$.styfn.core=function(){return this._private.coreStyle},$$.styfn.parse=function(a,b,c){a=$$.util.camel2dash(a);var d=$$.style.properties[a],e=b;if(!d)return null;if(void 0===b||null===b)return null;var f=$$.is.string(b);f&&(b=$$.util.trim(b));var g=d.type;if(!g)return null;if(c&&(""===b||null===b))return{name:a,value:b,bypass:!0,deleteBypass:!0};var h,i;if(f){if(h=new RegExp($$.style.types.data.regex).exec(b))return{name:a,value:h,strValue:b,mapped:$$.style.types.data,field:h[1],bypass:c};if(i=new RegExp($$.style.types.mapData.regex).exec(b)){if(!g.color&&!g.number)return!1;var j=this.parse(a,i[4]);if(!j||j.mapped)return!1;var k=this.parse(a,i[5]);if(!k||k.mapped)return!1;if(j.value===k.value)return!1;if(g.color){var l=j.value,m=k.value,n=!(l[0]!==m[0]||l[1]!==m[1]||l[2]!==m[2]||l[3]!==m[3]&&(null!=l[3]&&1!==l[3]||null!=m[3]&&1!==m[3]));if(n)return!1}return{name:a,value:i,strValue:b,mapped:$$.style.types.mapData,field:i[1],fieldMin:parseFloat(i[2]),fieldMax:parseFloat(i[3]),valueMin:j.value,valueMax:k.value,bypass:c}}}else;if(g.number){var o;if(!g.unitless)if(f){var p=b.match("^("+$$.util.regex.number+")(px|em"+(g.allowPercent?"|\\%":"")+")?$");if(!g.enums){if(!p)return null;b=p[1],o=p[2]||"px"}}else o="px";if(b=parseFloat(b),isNaN(b)&&void 0!==g.enums){b=e;for(var q=0;q<g.enums.length;q++){var r=g.enums[q];if(r===b)return{name:a,value:b,strValue:b,bypass:c}}return null}if(g.integer&&!$$.is.integer(b))return null;if(void 0!==g.min&&b<g.min||void 0!==g.max&&b>g.max)return null;var s={name:a,value:b,strValue:""+b+(o?o:""),units:o,bypass:c,pxValue:g.unitless||"%"===o?void 0:"px"!==o&&o?this.getEmSizeInPixels()*b:b};return s}if(g.color){var t=$$.util.color2tuple(b);return{name:a,value:t,strValue:b,bypass:c}}if(!g.enums){if(g.regex){var u=new RegExp(g.regex),v=u.exec(b);return v?{name:a,value:v,strValue:b,bypass:c}:null}return g.string?{name:a,value:b,strValue:b,bypass:c}:null}for(var q=0;q<g.enums.length;q++){var r=g.enums[q];if(r===b)return{name:a,value:b,strValue:b,bypass:c}}},$$.styfn.getEmSizeInPixels=function(){var a=this._private.cy,b=a.container();if(window&&b){var c=window.getComputedStyle(b).getPropertyValue("font-size"),d=parseFloat(c);return d}return 1},$$.styfn.containerCss=function(a){var b=this._private.cy,c=b.container();return window&&c?window.getComputedStyle(c).getPropertyValue(a):void 0},$$.styfn.containerProperty=function(a){var b=this.containerCss(a),c=this.parse(a,b);return c},$$.styfn.containerPropertyAsString=function(a){var b=this.containerProperty(a);return b?b.strValue:void 0},$$.styfn.selector=function(a){var b="core"===a?null:new $$.Selector(a),c=this.length++;return this[c]={selector:b,properties:[]},this},$$.styfn.css=function(){var a=arguments;switch(a.length){case 1:for(var b=a[0],c=0;c<$$.style.properties.length;c++){var d=$$.style.properties[c],e=b[d.name];void 0===e&&(e=b[$$.util.dash2camel(d.name)]),void 0!==e&&this.cssRule(d.name,e)}break;case 2:this.cssRule(a[0],a[1])}return this},$$.styfn.cssRule=function(a,b){var c=this.parse(a,b);if(c){var d=this.length-1;this[d].properties.push(c);var e=!this[d].selector;e&&(this._private.coreStyle[c.name]=c)}return this},$$.styfn.applyParsedProperty=function(ele,parsedProp,context){parsedProp=$$.util.clone(parsedProp);var prop=parsedProp,style=ele._private.style,fieldVal,flatProp,type=$$.style.properties[prop.name].type,propIsBypass=prop.bypass,origProp=style[prop.name],origPropIsBypass=origProp&&origProp.bypass;if(("height"===parsedProp.name||"width"===parsedProp.name)&&"auto"===parsedProp.value&&ele.isNode()&&!ele.isParent())return!1;if(propIsBypass&&prop.deleteBypass){var currentProp=style[prop.name];return currentProp?currentProp.bypass&&currentProp.bypassed?(style[prop.name]=currentProp.bypassed,!0):!1:!0}switch(prop.mapped){case $$.style.types.mapData:if(fieldVal=ele._private.data[prop.field],!$$.is.number(fieldVal))return!1;var percent=(fieldVal-prop.fieldMin)/(prop.fieldMax-prop.fieldMin);if(type.color){var r1=prop.valueMin[0],r2=prop.valueMax[0],g1=prop.valueMin[1],g2=prop.valueMax[1],b1=prop.valueMin[2],b2=prop.valueMax[2],a1=null==prop.valueMin[3]?1:prop.valueMin[3],a2=null==prop.valueMax[3]?1:prop.valueMax[3],clr=[Math.round(r1+(r2-r1)*percent),Math.round(g1+(g2-g1)*percent),Math.round(b1+(b2-b1)*percent),Math.round(a1+(a2-a1)*percent)];flatProp={bypass:prop.bypass,name:prop.name,value:clr,strValue:["rgba(",clr[0],", ",clr[1],", ",clr[2],", ",clr[3],")"].join("")}}else{if(!type.number)return!1;var calcValue=prop.valueMin+(prop.valueMax-prop.valueMin)*percent;flatProp=this.parse(prop.name,calcValue,prop.bypass)}flatProp||(flatProp=this.parse(prop.name,origProp.strValue,prop.bypass)),flatProp.mapping=prop,prop=flatProp;break;case $$.style.types.data:fieldVal=eval("ele._private.data."+prop.field),flatProp=this.parse(prop.name,fieldVal,prop.bypass),flatProp||(flatProp=this.parse(prop.name,origProp.strValue,prop.bypass)),flatProp.mapping=prop,prop=flatProp;break;case void 0:break;default:return!1}if(propIsBypass)prop.bypassed=origPropIsBypass?origProp.bypassed:origProp,style[prop.name]=prop;else{var prevProp;origPropIsBypass?(prevProp=origProp.bypassed,origProp.bypassed=prop):(prevProp=style[prop.name],style[prop.name]=prop),prevProp&&prevProp.mapping&&prop.mapping&&prevProp.context===context&&(prevProp=prevProp.prev),prevProp&&prevProp!==prop&&(prop.prev=prevProp)}return prop.context=context,!0},$$.styfn.rollBackContext=function(a,b){for(var c=0;c<b.properties.length;c++){var d=b.properties[c],e=a._private.style[d.name];e.bypassed&&(e=e.bypassed);for(var f,g=!0,h=0;e.prev;){var i=e.prev;e.context===b&&(g?a._private.style[d.name]=i:f&&(f.prev=i)),f=e,e=i,g=!1,h++}}},$$.styfn.apply=function(a){for(var b=this,c=0;c<a.length;c++){var d=a[c];b._private.newStyle&&(d._private.styleCxts=[],d._private.style={});for(var e=0;e<this.length;e++){var f=this[e],g=f.selector&&f.selector.filter(d).length>0,h=f.properties;if(g){for(var i=0;i<h.length;i++){var j=h[i];(!d._private.styleCxts[e]||j.mapped)&&this.applyParsedProperty(d,j,f)}d._private.styleCxts[e]=f}else d._private.styleCxts[e]&&this.rollBackContext(d,f),delete d._private.styleCxts[e]}}b._private.newStyle=!1},$$.styfn.update=function(){var a=this._private.cy,b=a.elements();b.updateStyle()},$$.styfn.getRenderedStyle=function(a){var a=a[0];if(a){for(var b={},c=a._private.style,d=this._private.cy,e=d.zoom(),f=0;f<$$.style.properties.length;f++){var g=$$.style.properties[f],h=c[g.name];if(h){var i=h.unitless?h.strValue:h.pxValue*e+"px";b[g.name]=i,b[$$.util.dash2camel(g.name)]=i}}return b}},$$.styfn.getRawStyle=function(a){var a=a[0];if(a){for(var b={},c=a._private.style,d=0;d<$$.style.properties.length;d++){var e=$$.style.properties[d],f=c[e.name];f&&(b[e.name]=f.strValue,b[$$.util.dash2camel(e.name)]=f.strValue)}return b}},$$.styfn.getValueStyle=function(a){var b,c;if($$.is.element(a)?(b={},c=a._private.style):(b={},c=a),c)for(var d=0;d<$$.style.properties.length;d++){var e=$$.style.properties[d],f=c[e.name]||c[$$.util.dash2camel(e.name)];if(void 0===f||$$.is.plainObject(f)||(f=this.parse(e.name,f)),f){var g=void 0===f.value?f:f.value;b[e.name]=g,b[$$.util.dash2camel(e.name)]=g}}return b},$$.styfn.updateFunctionalProperties=function(a){for(var b=0;b<a.length;b++)for(var c=a[b],d=c._private.style,e=0;e<$$.style.properties.length;e++){var f=$$.style.properties[e],g=d[f.name];if(g&&g.mapping){var h=g.mapping;this.applyParsedProperty(c,h)}}},$$.styfn.applyBypass=function(a,b,c){var d=[];if("*"===b||"**"===b){if(void 0!==c)for(var e=0;e<$$.style.properties.length;e++){var f=$$.style.properties[e],b=f.name,g=this.parse(b,c,!0);g&&d.push(g)}}else if($$.is.string(b)){var g=this.parse(b,c,!0);g&&d.push(g)}else{if(!$$.is.plainObject(b))return!1;for(var h=b,e=0;e<$$.style.properties.length;e++){var f=$$.style.properties[e],b=f.name,c=h[b];if(void 0===c&&(c=h[$$.util.dash2camel(b)]),void 0!==c){var g=this.parse(b,c,!0);g&&d.push(g)}}}if(0===d.length)return!1;for(var i=!1,e=0;e<a.length;e++)for(var j=a[e],k=0;k<d.length;k++){var f=d[k];i=this.applyParsedProperty(j,f)||i}return i},$$.styfn.removeAllBypasses=function(a){for(var b=0;b<$$.style.properties.length;b++)for(var c=$$.style.properties[b],d=c.name,e="",f=this.parse(d,e,!0),g=0;g<a.length;g++){var h=a[g];this.applyParsedProperty(h,f)}}}(cytoscape,"undefined"==typeof window?null:window),function(a){var b={showOverlay:!0,hideEdgesOnViewport:!1},c=a.util.copy(b);a.defaults=function(d){b=a.util.extend({},c,d)},a.fn.core=function(b){for(var c in b){var d=b[c];a.Core.prototype[c]=d}},a.Core=function(c){if(!(this instanceof a.Core))return new a.Core(c);var d=this;c=a.util.extend({},b,c);var e=c.container,f=a.getRegistrationForInstance(d,e);f&&f.cy&&(f.domElement.innerHTML="",f.cy.notify({type:"destroy"}),a.removeRegistrationForInstance(f.cy,f.domElement)),f=a.registerInstance(d,e);var g=f.readies,h=c;h.layout=a.util.extend({name:"undefined"==typeof window?"null":"grid"},h.layout),h.renderer=a.util.extend({name:"undefined"==typeof window?"null":"canvas"},h.renderer),this._private={ready:!1,instanceId:f.id,options:h,elements:[],id2index:{},listeners:[],aniEles:[],scratch:{},layout:null,renderer:null,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomEnabled:void 0===h.zoomEnabled?!0:h.zoomEnabled,panEnabled:void 0===h.panEnabled?!0:h.panEnabled,boxSelectionEnabled:void 0===h.boxSelectionEnabled?!0:h.boxSelectionEnabled,zoom:a.is.number(h.zoom)?h.zoom:1,pan:{x:a.is.plainObject(h.pan)&&a.is.number(h.pan.x)?h.pan.x:0,y:a.is.plainObject(h.pan)&&a.is.number(h.pan.y)?h.pan.y:0},hasCompoundNodes:!1},a.is.number(h.minZoom)&&a.is.number(h.maxZoom)&&h.minZoom<h.maxZoom?(this._private.minZoom=h.minZoom,this._private.maxZoom=h.maxZoom):a.is.number(h.minZoom)&&void 0===h.maxZoom?this._private.minZoom=h.minZoom:a.is.number(h.maxZoom)&&void 0===h.minZoom&&(this._private.maxZoom=h.maxZoom),this._private.style=a.is.stylesheet(h.style)?h.style.generateStyle(this):a.is.array(h.style)?a.style.fromJson(this,h.style):new a.Style(d),d.initRenderer(a.util.extend({showOverlay:h.showOverlay,hideEdgesOnViewport:h.hideEdgesOnViewport},h.renderer)),d.load(h.elements,function(){d.startAnimationLoop(),d._private.ready=!0,a.is.fn(h.ready)&&d.bind("ready",h.ready);for(var b=0;b<g.length;b++){var c=g[b];d.bind("ready",c)}f.readies=[],d.trigger("ready")},h.done)},a.corefn=a.Core.prototype,a.fn.core({ready:function(){return this._private.ready},registered:function(){return this._private&&null!=this._private.instanceId?!0:!1},registeredId:function(){return this._private.instanceId},getElementById:function(b){var c=this._private.id2index[b];return void 0!==c?this._private.elements[c]:new a.Collection(this)},hasCompoundNodes:function(){return this._private.hasCompoundNodes},addToPool:function(a){for(var b=this._private.elements,c=this._private.id2index,d=0;d<a.length;d++){var e=a[d],f=e._private.data.id,g=c[f],h=void 0!==g;h||(g=b.length,b.push(e),c[f]=g,e._private.index=g)}return this},removeFromPool:function(a){for(var b=this._private.elements,c=this._private.id2index,d=0;d<a.length;d++){var e=a[d],f=e._private.data.id,g=c[f],h=void 0!==g;if(h){delete this._private.id2index[f],b.splice(g,1);for(var i=g;i<b.length;i++){var j=b[i]._private.data.id;c[j]--}}}},container:function(){return this._private.options.container},options:function(){return a.util.copy(this._private.options)},json:function(){var a={},b=this;return a.elements={},b.elements().each(function(b,c){var d=c.group();a.elements[d]||(a.elements[d]=[]),a.elements[d].push(c.json())}),a.style=b.style(),a.scratch=b.scratch(),a.zoomEnabled=b._private.zoomEnabled,a.panEnabled=b._private.panEnabled,a.layout=b._private.options.layout,a.renderer=b._private.options.renderer,a}})}(cytoscape),function(a,b){a.fn.core({add:function(b){var c,d=this;if(a.is.elementOrCollection(b)){for(var e=b,f=[],g=0;g<e.length;g++){var h=e[g];f.push(h.json())}c=new a.Collection(d,f)}else if(a.is.array(b)){var f=b;c=new a.Collection(d,f)}else if(a.is.plainObject(b)&&(a.is.array(b.nodes)||a.is.array(b.edges))){for(var i=b,f=[],j=["nodes","edges"],g=0,k=j.length;k>g;g++){var l=j[g],m=i[l];if(a.is.array(m))for(var n=0,o=m.length;o>n;n++){var p=m[n],q=a.util.extend({},p,{group:l});f.push(q)}}c=new a.Collection(d,f)}else{var p=b;c=new a.Element(d,p).collection()}return c.filter(function(){return!this.removed()})
},remove:function(b){if(a.is.elementOrCollection(b))b=b;else if(a.is.string(b)){var c=b;b=this.$(c)}return b.remove()},load:function(b,c,d){function e(){f.one("layoutready",function(a){f.notifications(!0),f.trigger(a),f.notify({type:"load",collection:f.elements(),style:f._private.style}),f.one("load",c),f.trigger("load")}).one("layoutstop",function(){f.one("done",d),f.trigger("done")}),f.layout(f._private.options.layout)}var f=this,g=f.elements();g.length>0&&g.remove(),f.notifications(!1);return null!=b&&(a.is.plainObject(b)||a.is.array(b))&&f.add(b),setTimeout(function(){e()},30),this}})}(cytoscape,"undefined"==typeof window?null:window),function(a){a.fn.core({addToAnimationPool:function(a){for(var b=this,c=b._private.aniEles,d=[],e=0;e<c.length;e++){var f=c[e]._private.data.id;d[f]=!0}for(var e=0;e<a.length;e++){var g=a[e],f=g._private.data.id;d[f]||c.push(g)}},startAnimationLoop:function(){function b(){function a(){k(function(a){c(a),b()},l)}i?setTimeout(function(){a()},h):a()}function c(b){b=+new Date;for(var c=g._private.aniEles,e=0;e<c.length;e++){var f=c[e],h=f._private.animation.current,i=f._private.animation.queue;if(0===h.length){var j=i,k=j.length>0?j.shift():null;null!=k&&(k.callTime=+new Date,h.push(k))}for(var l=[],m=0;m<h.length;m++){var n=h[m];d(f,n,b),h[m].done&&(l.push(n),h.splice(m,1),m--)}for(var m=0;m<l.length;m++){var n=l[m],o=n.params.complete;a.is.fn(o)&&o.apply(f,[b])}}c.length>0&&g.notify({type:"draw",collection:c});for(var m=0;m<c.length;m++){var f=c[m],i=f._private.animation.queue,h=f._private.animation.current,p=h.length>0||i.length>0;p||(c.splice(m,1),m--)}}function d(b,c,d){var h,i=g._private.style,j=c.properties,k=c.params,l=c.callTime;if(h=0===c.duration?1:Math.min(1,(d-l)/c.duration),0>h?h=0:h>1&&(h=1),null==j.delay){var m=c.startPosition,n=j.position,o=b._private.position;if(n&&(e(m.x,n.x)&&(o.x=f(m.x,n.x,h)),e(m.y,n.y)&&(o.y=f(m.y,n.y,h))),j.css)for(var p=a.style.properties,q=0;q<p.length;q++){var r=p[q].name,s=j.css[r];if(void 0!==s){var t=c.startStyle[r],u=f(t,s,h);i.applyBypass(b,r,u)}}}return a.is.fn(k.step)&&k.step.apply(b,[d]),h>=1&&(c.done=!0),h}function e(b,c){return null==b||null==c?!1:a.is.number(b)&&a.is.number(c)?!0:b&&c?!0:!1}function f(b,c,d){function e(a,b){var c=b-a,e=a;return Math.round(d*c+e)}if(0>d?d=0:d>1&&(d=1),a.is.number(b)&&a.is.number(c))return b+(c-b)*d;if(a.is.number(b[0])&&a.is.number(c[0])){var f=b,g=c,h=e(f[0],g[0]),i=e(f[1],g[1]),j=e(f[2],g[2]);return"rgb("+h+", "+i+", "+j+")"}return void 0}var g=this,h=1e3/60,i=!1,j=!0;g._private.aniEles=[];var k="undefined"==typeof window?function(){}:window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame;null!=k&&j||(k=function(a){window.setTimeout(function(){a(+new Date)},h)});var l=g.container();b()}})}(cytoscape),function(a){a.fn.core({data:a.define.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0}),removeData:a.define.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0}),batchData:a.define.batchData({field:"data",event:"data",triggerFnName:"trigger",immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateMappers:!0}),scratch:a.define.data({field:"scratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeScratch:a.define.removeData({field:"scratch",triggerEvent:!1})})}(cytoscape),function(a){a.fn.core({on:a.define.on(),one:a.define.on({unbindSelfOnTrigger:!0}),once:a.define.on({unbindAllBindersOnTrigger:!0}),off:a.define.off(),trigger:a.define.trigger()}),a.corefn.bind=a.corefn.on,a.corefn.unbind=a.corefn.off,a.define.event.aliasesOn(a.corefn)}(cytoscape),function(a){a.fn.core({png:function(){var a=this._private.renderer;return a.png()}})}(cytoscape),function(a){a.fn.core({layout:function(a){var b=this;return this._private.layoutRunning?this:(null==a&&(a=this._private.options.layout),this.initLayout(a),b.trigger("layoutstart"),this._private.layoutRunning=!0,this.one("layoutstop",function(){this._private.layoutRunning=!1}),this._private.layout.run(),this)},initLayout:function(b){if(null==b)return void a.util.error("Layout options must be specified to run a layout");if(null==b.name)return void a.util.error("A `name` must be specified to run a layout");var c=b.name,d=a.extension("layout",c);return null==d?void a.util.error("Can not apply layout: No such layout `%s` found; did you include its JS file?",c):(this._private.layout=new d(a.util.extend({},b,{renderer:this._private.renderer,cy:this})),void(this._private.options.layout=b))}})}(cytoscape),function(a){a.fn.core({notify:function(b){if(this._private.notificationsEnabled){var c=this.renderer(),d=this;if(a.is.element(b.collection)){var e=b.collection;b.collection=new a.Collection(d,[e])}else if(a.is.array(b.collection)){var f=b.collection;b.collection=new a.Collection(d,f)}c.notify(b)}},notifications:function(a){var b=this._private;return void 0===a?b.notificationsEnabled:void(b.notificationsEnabled=a?!0:!1)},noNotifications:function(a){this.notifications(!1),a(),this.notifications(!0)}})}(cytoscape),function(a){a.fn.core({renderTo:function(a,b,c){var d=this._private.renderer;d.renderTo(a,b,c)},renderer:function(){return this._private.renderer},initRenderer:function(b){var c=this,d=a.extension("renderer",b.name);return null==d?void a.util.error("Can not initialise: No such renderer `%s` found; did you include its JS file?",b.name):void(this._private.renderer=new d(a.util.extend({},b,{cy:c,style:c._private.style})))}})}(cytoscape),function(a){a.fn.core({collection:function(b){return a.is.string(b)?this.$(b):a.is.elementOrCollection(b)?b.collection():new a.Collection(this)},nodes:function(a){var b=this.$("node");return a?b.filter(a):b},edges:function(a){var b=this.$("edge");return a?b.filter(a):b},$:function(b){var c=new a.Collection(this,this._private.elements);return b?c.filter(b):c}}),a.corefn.elements=a.corefn.filter=a.corefn.$}(cytoscape),function(a){a.fn.core({style:function(){return this._private.style}})}(cytoscape),function(a){a.fn.core({panningEnabled:function(a){return void 0===a?this._private.panEnabled:(this._private.panEnabled=a?!0:!1,this)},zoomingEnabled:function(a){return void 0===a?this._private.zoomEnabled:(this._private.zoomEnabled=a?!0:!1,this)},boxSelectionEnabled:function(a){return void 0===a?this._private.boxSelectionEnabled:(this._private.boxSelectionEnabled=a?!0:!1,this)},pan:function(){var b,c,d,e,f,g=arguments,h=this._private.pan;switch(g.length){case 0:return h;case 1:if(!this._private.panEnabled)return this;if(a.is.string(g[0]))return b=g[0],h[b];a.is.plainObject(g[0])&&(d=g[0],e=d.x,f=d.y,a.is.number(e)&&(h.x=e),a.is.number(f)&&(h.y=f),this.trigger("pan"));break;case 2:if(!this._private.panEnabled)return this;b=g[0],c=g[1],"x"!==b&&"y"!==b||!a.is.number(c)||(h[b]=c),this.trigger("pan")}return this.notify({type:"viewport"}),this},panBy:function(){var b,c,d,e,f,g=arguments,h=this._private.pan;if(!this._private.panEnabled)return this;switch(g.length){case 1:a.is.plainObject(g[0])&&(d=g[0],e=d.x,f=d.y,a.is.number(e)&&(h.x+=e),a.is.number(f)&&(h.y+=f),this.trigger("pan"));break;case 2:b=g[0],c=g[1],"x"!==b&&"y"!==b||!a.is.number(c)||(h[b]+=c),this.trigger("pan")}return this.notify({type:"viewport"}),this},fit:function(b,c){if(a.is.number(b)&&void 0===c&&(c=b,b=void 0),!this._private.panEnabled||!this._private.zoomEnabled)return this;if(a.is.string(b)){var d=b;b=this.$(d)}else a.is.elementOrCollection(b)||(b=this.elements());var e,f=b.boundingBox(),g=this.style(),h=parseFloat(g.containerCss("width")),i=parseFloat(g.containerCss("height"));return c=a.is.number(c)?c:0,isNaN(h)||isNaN(i)||(e=this._private.zoom=Math.min((h-2*c)/f.w,(i-2*c)/f.h),e=e>this._private.maxZoom?this._private.maxZoom:e,e=e<this._private.minZoom?this._private.minZoom:e,this._private.pan={x:(h-e*(f.x1+f.x2))/2,y:(i-e*(f.y1+f.y2))/2}),this.trigger("pan zoom"),this.notify({type:"viewport"}),this},minZoom:function(b){return void 0===b?this._private.minZoom:(a.is.number(b)&&(this._private.minZoom=b),this)},maxZoom:function(b){return void 0===b?this._private.maxZoom:(a.is.number(b)&&(this._private.maxZoom=b),this)},zoom:function(b){var c,d;if(void 0===b)return this._private.zoom;if(a.is.number(b))d=b,c={x:0,y:0};else if(a.is.plainObject(b)){if(d=b.level,b.renderedPosition){var e=b.renderedPosition,f=this._private.pan,g=this._private.zoom;c={x:(e.x-f.x)/g,y:(e.y-f.y)/g}}else b.position&&(c=b.position);if(c&&!this._private.panEnabled)return this}if(!this._private.zoomEnabled)return this;if(!a.is.number(d)||!a.is.number(c.x)||!a.is.number(c.y))return this;d=d>this._private.maxZoom?this._private.maxZoom:d,d=d<this._private.minZoom?this._private.minZoom:d;var h=this._private.pan,i=this._private.zoom,j=d,k={x:-j/i*(c.x-h.x)+c.x,y:-j/i*(c.y-h.y)+c.y};this._private.zoom=d,this._private.pan=k;var l=h.x!==k.x||h.y!==k.y;return this.trigger("zoom"+(l?" pan":"")),this.notify({type:"viewport"}),this},boundingBox:function(a){var b=this.$(a);return b.boundingBox()},center:function(b){if(!this._private.panEnabled||!this._private.zoomEnabled)return this;if(a.is.string(b)){var c=b;b=cy.elements(c)}else a.is.elementOrCollection(b)||(b=cy.elements());var d=b.boundingBox(),e=this.style(),f=parseFloat(e.containerCss("width")),g=parseFloat(e.containerCss("height")),h=this._private.zoom;return this.pan({x:(f-h*(d.x1+d.x2))/2,y:(g-h*(d.y1+d.y2))/2}),this.trigger("pan"),this.notify({type:"viewport"}),this},reset:function(){return this._private.panEnabled&&this._private.zoomEnabled?(this.pan({x:0,y:0}),this._private.maxZoom>1&&this._private.minZoom<1&&this.zoom(1),this.notify({type:"viewport"}),this):this}})}(cytoscape),function(a){a.fn.collection=a.fn.eles=function(b){for(var c in b){var d=b[c];a.Collection.prototype[c]=d}};var b={prefix:{nodes:"n",edges:"e"},id:{nodes:0,edges:0},generate:function(b,c,d){var e=a.is.element(c)?c._private:c,f=e.group,g=null!=d?d:this.prefix[f]+this.id[f];if(b.getElementById(g).empty())this.id[f]++;else for(;!b.getElementById(g).empty();)g=this.prefix[f]+ ++this.id[f];return g}};a.Element=function(b,c,d){if(!(this instanceof a.Element))return new a.Element(b,c,d);var e=this;if(d=void 0===d||d?!0:!1,void 0===b||void 0===c||!a.is.core(b))return void a.util.error("An element must have a core reference and parameters set");if("nodes"!==c.group&&"edges"!==c.group)return void a.util.error("An element must be of type `nodes` or `edges`; you specified `"+c.group+"`");if(this.length=1,this[0]=this,this._private={cy:b,single:!0,data:c.data||{},position:c.position||{},autoWidth:void 0,autoHeight:void 0,listeners:[],group:c.group,style:{},rstyle:{},styleCxts:[],removed:!0,selected:c.selected?!0:!1,selectable:void 0===c.selectable?!0:c.selectable?!0:!1,locked:c.locked?!0:!1,grabbed:!1,grabbable:void 0===c.grabbable?!0:c.grabbable?!0:!1,active:!1,classes:{},animation:{current:[],queue:[]},rscratch:{},scratch:{},edges:[],children:[]},c.renderedPosition){var f=c.renderedPosition,g=b.pan(),h=b.zoom();this._private.position={x:(f.x-g.x)/h,y:(f.y-g.y)/h}}if(a.is.string(c.classes))for(var i=c.classes.split(/\s+/),j=0,k=i.length;k>j;j++){var l=i[j];l&&""!==l&&(e._private.classes[l]=!0)}(void 0===d||d)&&this.restore()},a.Collection=function(c,d){if(!(this instanceof a.Collection))return new a.Collection(c,d);if(void 0===c||!a.is.core(c))return void a.util.error("A collection must have a reference to the core");var e={},f=[],g=!1;if(d){if(d.length>0&&a.is.plainObject(d[0])&&!a.is.element(d[0])){g=!0;for(var h=[],i={},j=0,k=d.length;k>j;j++){var l=d[j];null==l.data&&(l.data={});var m=l.data;if(null==m.id)m.id=b.generate(c,l);else if(0!=c.getElementById(m.id).length||i[m.id])continue;var n=new a.Element(c,l,!1);h.push(n),i[m.id]=!0}d=h}}else d=[];for(var j=0,k=d.length;k>j;j++){var o=d[j];if(o){var p=o._private.data.id;e[p]||(e[p]=o,f.push(o))}}for(var j=0,k=f.length;k>j;j++)this[j]=f[j];this.length=f.length,this._private={cy:c,ids:e},g&&this.restore()},a.elefn=a.elesfn=a.Element.prototype=a.Collection.prototype,a.elesfn.cy=function(){return this._private.cy},a.elesfn.element=function(){return this[0]},a.elesfn.collection=function(){return a.is.collection(this)?this:new a.Collection(this._private.cy,[this])},a.elesfn.json=function(){var b=this.element();if(null==b)return void 0;var c=b._private,d=a.util.copy({data:c.data,position:c.position,group:c.group,bypass:c.bypass,removed:c.removed,selected:c.selected,selectable:c.selectable,locked:c.locked,grabbed:c.grabbed,grabbable:c.grabbable,classes:""}),e=[];for(var f in c.classes)e.push(f);for(var g=0;g<e.length;g++){var f=e[g];d.classes+=f+(g<e.length-1?" ":"")}return d},a.elesfn.restore=function(c){var d=this,e=[],f=d.cy();void 0===c&&(c=!0);for(var g=[],h=[],i=[],j=0,k=0,l=0,m=d.length;m>l;l++){var n=d[l];n.isNode()?(h.push(n),j++):(i.push(n),k++)}g=h.concat(i);for(var l=0,m=g.length;m>l;l++){var n=g[l];if(n.removed()){var o=n._private,p=o.data;if(void 0===p.id)p.id=b.generate(f,n);else{if(a.is.emptyString(p.id)||!a.is.string(p.id))continue;if(0!=f.getElementById(p.id).length)continue}{p.id}if(n.isEdge()){for(var q=n,r=["source","target"],s=r.length,t=0;s>t;t++){var u=r[t],v=p[u];null!=v&&""!==v&&!f.getElementById(v).empty()}var w=f.getElementById(p.source),x=f.getElementById(p.target);w._private.edges.push(q),x._private.edges.push(q)}o.ids={},o.ids[p.id]=n,o.removed=!1,f.addToPool(n),e.push(n)}}for(var l=0;j>l;l++){var y=g[l],p=y._private.data,z=(p.id,y._private.data.parent),A=null!=z;if(A){var B=f.getElementById(z);if(B.empty())delete p.parent;else{for(var C=!1,D=B;!D.empty();){if(y.same(D)){C=!0,delete p.parent;break}D=D.parent()}C||(B[0]._private.children.push(y),f._private.hasCompoundNodes=!0)}}}if(e=new a.Collection(f,e),e.length>0){var E=e.add(e.connectedNodes()).add(e.parent());E.updateStyle(c),c?e.rtrigger("add"):e.trigger("add")}return d},a.elesfn.removed=function(){var a=this[0];return a&&a._private.removed},a.elesfn.inside=function(){var a=this[0];return a&&!a._private.removed},a.elesfn.remove=function(b){function c(a){for(var b=a._private.edges,c=0;c<b.length;c++)e(b[c])}function d(a){for(var b=a._private.children,c=0;c<b.length;c++)e(b[c])}function e(a){var b=k[a.id()];b||(k[a.id()]=!0,a.isNode()?(j.push(a),c(a),d(a)):j.unshift(a))}function f(a,b){for(var c=a._private.edges,d=0;d<c.length;d++){var e=c[d];if(b===e){c.splice(d,1);break}}}function g(a,b){b=b[0],a=a[0];for(var c=a._private.children,d=0;d<c.length;d++)if(c[d][0]===b[0]){c.splice(d,1);break}}var h=this,i=[],j=[],k={},l=h._private.cy;void 0===b&&(b=!0);for(var m=0,n=h.length;n>m;m++){var o=h[m];e(o)}for(var m=0;m<j.length;m++){var o=j[m];if(o._private.removed=!0,l.removeFromPool(o),i.push(o),o.isEdge()){var p=o.source()[0],q=o.target()[0];f(p,o),f(q,o)}else{var r=o.parent();0!==r.length&&g(r,o)}}var s=l._private.elements;l._private.hasCompoundNodes=!1;for(var m=0;m<s.length;m++){var o=s[m];if(o.isParent()){l._private.hasCompoundNodes=!0;break}}var t=new a.Collection(this.cy(),i);t.size()>0&&(b&&this.cy().notify({type:"remove",collection:t}),t.trigger("remove"));for(var u={},m=0;m<j.length;m++){var o=j[m],v="nodes"===o._private.group,w=o._private.data.parent;if(v&&void 0!==w&&!u[w]){u[w]=!0;var r=l.getElementById(w);r&&0!==r.length&&!r._private.removed&&0===r.children().length&&r.updateStyle()}}return this}}(cytoscape),function(a){a.fn.eles({animated:function(){var a=this[0];return a?a._private.animation.current.length>0:void 0},clearQueue:function(){for(var a=0;a<this.length;a++){var b=this[a];b._private.animation.queue=[]}return this},delay:function(a,b){return this.animate({delay:a},{duration:a,complete:b}),this},animate:function(a,b){var c,d=+new Date,e=this._private.cy,f=e.style();switch(void 0===b&&(b={}),void 0===b.duration&&(b.duration=400),b.duration){case"slow":b.duration=600;break;case"fast":b.duration=200}if(null==a||null==a.position&&null==a.css&&null==a.delay)return this;a.css&&(a.css=f.getValueStyle(a.css));for(var g=0;g<this.length;g++){var h=this[g],i=h._private.position,j={x:i.x,y:i.y},k=f.getValueStyle(h);c=h.animated()&&(void 0===b.queue||b.queue)?h._private.animation.queue:h._private.animation.current,c.push({properties:a,duration:b.duration,params:b,callTime:d,startPosition:j,startStyle:k})}return e.addToAnimationPool(this),this},stop:function(a,b){for(var c=0;c<this.length;c++){for(var d=this[c],e=d._private.animation.current,f=0;f<e.length;f++){var g=e[f];b&&(g.duration=0)}a&&(d._private.animation.queue=[])}return this.cy().notify({collection:this,type:"draw"}),this}})}(cytoscape),function(a){a.fn.eles({addClass:function(b){b=b.split(/\s+/);for(var c=this,d=[],e=0;e<b.length;e++){var f=b[e];if(!a.is.emptyString(f))for(var g=0;g<c.length;g++){var h=c[g],i=h._private.classes[f];h._private.classes[f]=!0,i||d.push(h)}}return d.length>0&&new a.Collection(this._private.cy,d).updateStyle(),c.trigger("class"),c},hasClass:function(a){var b=this[0];return null!=b&&b._private.classes[a]},toggleClass:function(b,c){for(var d=b.split(/\s+/),e=this,f=[],g=0,h=e.length;h>g;g++)for(var i=e[g],j=0;j<d.length;j++){var k=d[j];if(!a.is.emptyString(k)){var l=i._private.classes[k],m=c||void 0===c&&!l;m?(i._private.classes[k]=!0,l||f.push(i)):(i._private.classes[k]=!1,l&&f.push(i))}}return f.length>0&&new a.Collection(this._private.cy,f).updateStyle(),e.trigger("class"),e},removeClass:function(b){b=b.split(/\s+/);for(var c=this,d=[],e=0;e<c.length;e++)for(var f=c[e],g=0;g<b.length;g++){var h=b[g];if(h&&""!==h){var i=f._private.classes[h];delete f._private.classes[h],i&&d.push(f)}}return d.length>0&&new a.Collection(c._private.cy,d).updateStyle(),c.trigger("class"),c}})}(cytoscape),function(a){a.fn.eles({allAre:function(a){return this.filter(a).length===this.length},is:function(a){return this.filter(a).length>0},same:function(a){return a=this.cy().collection(a),this.length!==a.length?!1:this.intersect(a).length===this.length},anySame:function(a){return a=this.cy().collection(a),this.intersect(a).length>0},allAreNeighbors:function(a){return a=this.cy().collection(a),this.neighborhood().intersect(a).length===a.length}})}(cytoscape),function(a){var b=1.4,c=1;a.fn.eles({updateStyle:function(a){var b=this._private.cy,c=b.style();return a=a||void 0===a?!0:!1,c.apply(this),a?this.rtrigger("style"):this.trigger("style"),this},updateMappers:function(a){var b=this._private.cy,c=b.style();a=a||void 0===a?!0:!1;for(var d=0;d<this.length;d++){var e=this[d];c.apply(e)}return a?this.rtrigger("style"):this.trigger("style"),this},data:a.define.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateMappers:!0}),removeData:a.define.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateMappers:!0}),batchData:a.define.batchData({field:"data",event:"data",triggerFnName:"trigger",immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateMappers:!0}),scratch:a.define.data({field:"scratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeScratch:a.define.removeData({field:"scratch",triggerEvent:!1}),rscratch:a.define.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:a.define.removeData({field:"rscratch",triggerEvent:!1}),id:function(){var a=this[0];return a?a._private.data.id:void 0},position:a.define.data({field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"rtrigger",allowGetting:!0,validKeys:["x","y"]}),positions:function(b){if(a.is.plainObject(b))this.position(b);else if(a.is.fn(b)){for(var c=b,d=0;d<this.length;d++){var e=this[d],b=c.apply(e,[d,e]);if(b&&!e.locked()){var f=e._private.position;f.x=b.x,f.y=b.y}}this.rtrigger("position")}return this},renderedPosition:function(a){var b=this[0],c=this.cy(),d=c.zoom(),e=c.pan();if(b&&b.isNode()){var f=b._private.position,g={x:f.x*d+e.x,y:f.y*d+e.y};return void 0===a?g:g[a]}},renderedCss:function(a){var b=this[0];if(b){var c=b.cy().style().getRenderedStyle(b);return void 0===a?c:c[a]}},css:function(b,c){var d=this.cy().style();if(a.is.plainObject(b)){var e=b;d.applyBypass(this,e),this.rtrigger("style")}else if(a.is.string(b)){if(void 0===c){var f=this[0];return f?f._private.style[b].strValue:void 0}d.applyBypass(this,b,c),this.rtrigger("style")}else if(void 0===b){var f=this[0];return f?d.getRawStyle(f):void 0}return this},removeCss:function(){for(var a=this.cy().style(),b=this,c=0;c<b.length;c++){var d=b[c];a.removeAllBypasses(d)}this.rtrigger("style")},show:function(){return this.css("visibility","visible"),this},hide:function(){return this.css("visibility","hidden"),this},visible:function(){var a=this[0];if(a){if("visible"!==a.css("visibility"))return!1;if(a.isNode()){for(var b=a.parents(),c=0;c<b.length;c++){var d=b[c],e=d.css("visibility");if("visible"!==e)return!1}return!0}if(a.isEdge()){var f=a.source(),g=a.target();return f.visible()&&g.visible()}}},hidden:function(){var a=this[0];return a?!this.visible():void 0},width:function(){var a=this[0];if(a){var b=this._private.style.width;return"auto"===b.strValue?a._private.autoWidth:b.pxValue}},outerWidth:function(){var a=this[0];if(a){var d=this._private.style,e="auto"===d.width.strValue?a._private.autoWidth:d.width.pxValue,f=d["border-width"]?d["border-width"].pxValue*b+c:0;return e+f}},renderedWidth:function(){var a=this[0];if(a){var b=this.width();return b*this.cy().zoom()}},renderedOuterWidth:function(){var a=this[0];if(a){var b=this.outerWidth();return b*this.cy().zoom()}},height:function(){var a=this[0];if(a&&a.isNode()){var b=this._private.style.height;return"auto"===b.strValue?a._private.autoHeight:b.pxValue}},outerHeight:function(){var a=this[0];if(a){var d=this._private.style,e="auto"===d.height.strValue?a._private.autoHeight:d.height.pxValue,f=d["border-width"]?d["border-width"].pxValue*b+c:0;return e+f}},renderedHeight:function(){var a=this[0];if(a){var b=this.height();return b*this.cy().zoom()}},renderedOuterHeight:function(){var a=this[0];if(a){var b=this.outerHeight();return b*this.cy().zoom()}},offset:function(){var a=this[0];if(a&&a.isNode()){for(var b={x:a._private.position.x,y:a._private.position.y},c=a.parents(),d=0;d<c.length;d++){var e=c[d],f=e._private.position;b.x+=f.x,b.y+=f.y}return b}},renderedOffset:function(){var a=this[0];if(a&&a.isNode()){var b=this.offset(),c=this.cy(),d=c.zoom(),e=c.pan();return{x:b.x*d+e.x,y:b.y*d+e.y}}},boundingBox:function(b){var c=this;!b||a.is.elementOrCollection(b)&&0===b.length?c=this:a.is.string(b)?c=this.filter(b):a.is.elementOrCollection(b)&&(c=b);for(var d=1/0,e=-1/0,f=1/0,g=-1/0,h=0;h<c.length;h++){var i,j,k,l,m,n,o=c[h];if(o.isNode()){var p=o._private.position;m=p.x,n=p.y;var q=o.outerWidth(),r=q/2,s=o.outerHeight(),t=s/2;i=m-r,j=m+r,k=n-t,l=n+t,d=d>i?i:d,e=j>e?j:e,f=f>k?k:f,g=l>g?l:g}else{var u=o.source()[0]._private.position,v=o.target()[0]._private.position,w=o._private.rstyle;if(m=w.labelX,n=w.labelY,i=u.x,j=v.x,k=u.y,l=v.y,i>j){var x=i;i=j,j=x}if(k>l){var x=k;k=l,l=x}d=d>i?i:d,e=j>e?j:e,f=f>k?k:f,g=l>g?l:g;for(var y=w.bezierPts||[],q=o._private.style.width.value,z=0;z<y.length;z++){var A=y[z];d=A.x-q<d?A.x-q:d,e=A.x+q>e?A.x+q:e,f=A.y-q<f?A.y-q:f,g=A.y+q>g?A.y+q:g}}var B=o._private.style,C=B.content.value,D=B["font-size"],E=B["text-halign"],F=B["text-valign"],G=o._private.rstyle.labelWidth;if(C&&D&&void 0!=G&&E&&F){var H,I,J,K,L=D.value,M=G;switch(E.value){case"left":H=i-M,I=i;break;case"center":H=m-M/2,I=m+M/2;break;case"right":H=j,I=j+M}switch(o.isEdge()&&(H=m-M/2,I=m+M/2),F.value){case"top":J=k-L,K=k;break;case"center":J=n-L/2,K=n+L/2;break;case"bottom":J=l,K=l+L}o.isEdge()&&(J=n-L/2,K=n+L/2),d=d>H?H:d,e=I>e?I:e,f=f>J?J:f,g=K>g?K:g}}return{x1:d,x2:e,y1:f,y2:g,w:e-d,h:g-f}}})}(cytoscape),function(a){function b(a){return function(){var b=this;if(0!==b.length&&b.isNode()&&!b.removed()){for(var c=0,d=b[0],e=d._private.edges,f=0;f<e.length;f++){var g=e[f];c+=a(d,g)}return c}}}function c(a,b){return function(){for(var c=void 0,d=this.nodes(),e=0;e<d.length;e++){var f=d[e],g=f[a]();void 0===g||void 0!==c&&!b(g,c)||(c=g)}return c}}a.fn.eles({degree:b(function(a,b){return b.source().same(b.target())?2:1}),indegree:b(function(a,b){return b.target().same(a)?1:0}),outdegree:b(function(a,b){return b.source().same(a)?1:0})}),a.fn.eles({minDegree:c("degree",function(a,b){return b>a}),maxDegree:c("degree",function(a,b){return a>b}),minIndegree:c("indegree",function(a,b){return b>a}),maxIndegree:c("indegree",function(a,b){return a>b}),minOutdegree:c("outdegree",function(a,b){return b>a}),maxOutdegree:c("outdegree",function(a,b){return a>b})}),a.fn.eles({totalDegree:function(){for(var a=0,b=this.nodes(),c=0;c<b.length;c++)a+=b[c].degree();return a}})}(cytoscape),function(a){a.fn.eles({on:a.define.on(),one:a.define.on({unbindSelfOnTrigger:!0}),once:a.define.on({unbindAllBindersOnTrigger:!0}),off:a.define.off(),trigger:a.define.trigger(),rtrigger:function(a,b){return this.cy().notify({type:a,collection:this.filter(function(){return!this.removed()})}),this.trigger(a,b),this}}),a.elesfn.bind=a.elesfn.on,a.elesfn.unbind=a.elesfn.off,a.define.event.aliasesOn(a.elesfn)}(cytoscape),function(a){a.fn.eles({isNode:function(){return"nodes"===this.group()},isEdge:function(){return"edges"===this.group()},isLoop:function(){return this.isEdge()&&this.source().id()===this.target().id()},group:function(){var a=this[0];return a?a._private.group:void 0}})}(cytoscape),function(a){a.fn.eles({each:function(b){if(a.is.fn(b))for(var c=0;c<this.length;c++){var d=this[c],e=b.apply(d,[c,d]);if(e===!1)break}return this},toArray:function(){for(var a=[],b=0;b<this.length;b++)a.push(this[b]);return a},slice:function(b,c){var d=[],e=this.length;null==c&&(c=e),0>b&&(b=e+b);for(var f=b;f>=0&&c>f&&e>f;f++)d.push(this[f]);return new a.Collection(this.cy(),d)},size:function(){return this.length},eq:function(a){return this[a]},empty:function(){return 0===this.length},nonempty:function(){return!this.empty()}})}(cytoscape),function(a){function b(a){return function(){var b=arguments;if(2===b.length){var c=b[0],d=b[1];this.bind(a.event,c,d)}else if(1===b.length){var d=b[0];this.bind(a.event,d)}else if(0===b.length){for(var e=0;e<this.length;e++){var f=this[e];(!a.ableField||f._private[a.ableField])&&(f._private[a.field]=a.value)}this.updateStyle(),this.trigger(a.event)}return this}}function c(c){a.elesfn[c.field]=function(){var a=this[0];return a?a._private[c.field]:void 0},a.elesfn[c.on]=b({event:c.on,field:c.field,ableField:c.ableField,value:!0}),a.elesfn[c.off]=b({event:c.off,field:c.field,ableField:c.ableField,value:!1})}c({field:"locked",on:"lock",off:"unlock"}),c({field:"grabbable",on:"grabify",off:"ungrabify"}),c({field:"selected",ableField:"selectable",on:"select",off:"unselect"}),c({field:"selectable",on:"selectify",off:"unselectify"}),a.elesfn.grabbed=function(){var a=this[0];return a?a._private.grabbed:void 0},c({field:"active",on:"activate",off:"unactivate"}),a.elesfn.inactive=function(){var a=this[0];return a?!a._private.active:void 0}}(cytoscape),function(a){function b(b){return function(c){for(var d=[],e=this.edges(),f=this._private.cy,g=0;g<e.length;g++){var h=e[g],i=h._private.data[b.attr],j=f.getElementById(i);j.length>0&&d.push(j)}return new a.Collection(f,d).filter(c)}}function c(b){return function(c){var d=[],e=this._private.cy,f=b||{};a.is.string(c)&&(c=e.$(c));for(var g=c.connectedEdges(),h=this._private.ids,i=0;i<g.length;i++){var j,k=g[i],l=k._private.data;if(f.thisIs){var m=l[f.thisIs];j=h[m]}else j=h[l.source]||h[l.target];j&&d.push(k)}return new a.Collection(e,d)}}function d(b){var c={codirected:!1};return b=a.util.extend({},c,b),function(c){for(var d=this._private.cy,e=[],f=this.edges(),g=b,h=0;h<f.length;h++)for(var i=f[h],j=i.source()[0],k=j.id(),l=i.target()[0],m=l.id(),n=j._private.edges,o=0;o<n.length;o++){var p=n[o],q=p._private.data,r=q.target,s=q.source,t=r===m&&s===k,u=k===r&&m===s;(g.codirected&&t||!g.codirected&&(t||u))&&e.push(p)}return new a.Collection(d,e).filter(c)}}a.fn.eles({nodes:function(a){return this.filter(function(a,b){return b.isNode()}).filter(a)},edges:function(a){return this.filter(function(a,b){return b.isEdge()}).filter(a)},filter:function(b){var c=this._private.cy;if(a.is.fn(b)){for(var d=[],e=0;e<this.length;e++){var f=this[e];b.apply(f,[e,f])&&d.push(f)}return new a.Collection(c,d)}return a.is.string(b)||a.is.elementOrCollection(b)?new a.Selector(b).filter(this):void 0===b?this:new a.Collection(c)},not:function(b){var c=this._private.cy;if(b){a.is.string(b)&&(b=this.filter(b));for(var d=[],e=0;e<this.length;e++){var f=this[e],g=b._private.ids[f.id()];g||d.push(f)}return new a.Collection(c,d)}return this},intersect:function(b){var c=this._private.cy;if(a.is.string(b)){var d=b;return this.filter(d)}var e=[],f=this,g=b,h=this.length<b.length,i=h?f._private.ids:g._private.ids,j=h?g._private.ids:f._private.ids;for(var k in i){var l=j[k];l&&e.push(l)}return new a.Collection(c,e)},add:function(b){function c(a){a&&(h[a.id()]||(g.push(a),h[a.id()]=!0))}var d=this,e=this._private.cy;if(!b)return this;if(a.is.string(b)){var f=b;b=e.elements(f)}for(var g=[],h={},i=0;i<d.length;i++){var j=d[i];c(j)}for(var i=0;i<b.length;i++){var j=b[i];c(j)}return new a.Collection(e,g)}}),a.fn.eles({breadthFirstSearch:function(b,c){b=b||function(){};for(var d=this._private.cy,e=this,f=[],g={},h={},i={},j=[],k=0;k<e.length;k++)e[k].isNode()&&(f.unshift(e[k]),g[e[k].id()]=!0,h[e[k].id()]=0,j.push(e[k]));for(k=0;0!==f.length;){for(var l=f.shift(),m=0,n=i[l.id()];n;)m++,n=i[n];h[l.id()]=m;var o=b.call(l,k,m);if(k++,o===!0)return new a.Collection(d,[l]);if(o===!1)break;for(var p=l.connectedEdges(c?'[source = "'+l.id()+'"]':void 0),q=0;q<p.length;q++){var r=p[q],s=r.connectedNodes('[id != "'+l.id()+'"]');0!==s.length&&(s=s[0],g[s.id()]||(g[s.id()]=!0,f.unshift(s),i[s.id()]=l.id(),j.push(s),j.push(r)))}}return new a.Collection(d,j)},depthFirstSearch:function(b,c){function d(a){var b=a.id();return i[b]||j[b]||k[b]||l[b]}b=b||function(){};for(var e=this._private.cy,f=this,g=[],h=[],i={},j={},k={},l={},m={},n=0;n<f.length;n++)f[n].isNode()&&(g.push(f[n]),h[f[n].id()]=!0);for(;0!==g.length;){var o=g[g.length-1],p=b.call(o),q=!1;if(p===!0)return new a.Collection(e,[o]);for(var r=o.connectedEdges(c?'[source = "'+o.id()+'"]':void 0),n=0;n<r.length;n++){var s=r[n];if(!d(s)){var t=s.connectedNodes('[id != "'+o.id()+'"]');if(0!==t.length){t=t[0];var u=t.id();if(!h[u]&&!m[u]){l[u]=!0,h[u]=!0,g.push(t),q=!0;break}h[u]?j[u]=!0:k[u]=!0}}}q||(m[o.id()]=!0,g.pop())}},roots:function(b){for(var c=this,d=[],e=0;e<c.length;e++){var f=c[e];if(f.isNode()){var g=f.connectedEdges('[target = "'+f.id()+'"][source != "'+f.id()+'"]').length>0;g||d.push(f)}}return new a.Collection(this._private.cy,d).filter(b)},kruskal:function(b){function c(a){for(var b=0;b<e.length;b++){var c=e[b];if(c.anySame(a))return{eles:c,index:b}}}b=b||function(){return 1};for(var d=new a.Collection(this._private.cy,[]),e=[],f=this.nodes(),g=0;g<f.length;g++)e.push(f[g].collection());for(var h=this.edges(),i=h.toArray().sort(function(a,c){var d=b.call(a),e=b.call(c);return d-e}),g=0;g<i.length;g++){var j=i[g],k=j.source()[0],l=j.target()[0],m=c(k),n=c(l);m.eles!==n.eles&&(d=d.add(j),e[m.index]=m.eles.add(n.eles),e.splice(n.index,1))}return f.add(d)},dijkstra:function(b,c,d){var e=this._private.cy;if(d=a.is.fn(c)?d:c,d=void 0===d||d,c=a.is.fn(c)?c:function(){return 1},0===this.length||!b||!a.is.elementOrCollection(b)||0===b.length)return new a.Collection(e,[]);var f=this[0];b=b[0];for(var g={},h={},i=e.nodes(),j=0;j<i.length;j++)g[i[j].id()]=1/0;g[f.id()]=0;for(var k=i,l=function(a){var b,c=1/0;for(var d in g)g[d]<c&&0!==a.$("#"+d).length&&(c=g[d],b=d);return b},m=function(a,b){for(var d,e=a.edgesWith(b),f=1/0,g=0;g<e.length;g++){var h=e[g],i=c.call(h);
f>i&&(f=i,d=h)}return{edge:d,dist:f}};0!==k.length;){var n=l(k),o=k.filter("#"+n);if(0!==o.length){if(k=k.not(o),o.same(b))break;if(g[n]===Math.Infinite)break;for(var p=o.neighborhood().nodes(),j=0;j<p.length;j++){var q=p[j],r=q.id(),s=m(o,q),t=g[n]+s.dist;t<g[r]&&(g[r]=t,h[r]={node:q,edge:s.edge})}}}}}),a.elesfn.bfs=a.elesfn.breadthFirstSearch,a.elesfn.dfs=a.elesfn.depthFirstSearch,a.fn.eles({neighborhood:function(b){for(var c=[],d=this._private.cy,e=this.nodes(),f=0;f<e.length;f++)for(var g=e[f],h=g.connectedEdges(),i=0;i<h.length;i++){var j=h[i],k=j.connectedNodes().not(g);k.length>0&&c.push(k[0]),c.push(j[0])}return new a.Collection(d,c).filter(b)},closedNeighborhood:function(a){return this.neighborhood().add(this).filter(a)},openNeighborhood:function(a){return this.neighborhood(a)}}),a.fn.eles({source:b({attr:"source"}),target:b({attr:"target"})}),a.fn.eles({edgesWith:c(),edgesTo:c({thisIs:"source"})}),a.fn.eles({connectedEdges:function(b){for(var c=[],d=this._private.cy,e=this.nodes(),f=0;f<e.length;f++)for(var g=e[f],h=g._private.edges,i=0;i<h.length;i++){var j=h[i];c.push(j)}return new a.Collection(d,c).filter(b)},connectedNodes:function(b){for(var c=[],d=this._private.cy,e=this.edges(),f=0;f<e.length;f++){var g=e[f];c.push(g.source()[0]),c.push(g.target()[0])}return new a.Collection(d,c).filter(b)},parallelEdges:d(),codirectedEdges:d({codirected:!0}),parallelIndex:function(){var a=this[0];if(a.isEdge())for(var b=a.source()[0],c=b._private.edges,d=0,e=0;e<c.length;e++){var f=c[e],g=f===a;if(g)return d;var h=a._private.data.source===f._private.data.source&&a._private.data.target===f._private.data.target,i=a._private.data.source===f._private.data.target&&a._private.data.target===f._private.data.source,j=h||i;j&&d++}},parallelSize:function(){var a=this[0];if(a.isEdge()){for(var b=a.source()[0],c=b._private.edges,d=0,e=0;e<c.length;e++){var f=c[e],g=a._private.data.source===f._private.data.source&&a._private.data.target===f._private.data.target,h=a._private.data.source===f._private.data.target&&a._private.data.target===f._private.data.source,i=g||h;i&&d++}return d}}}),a.fn.eles({parent:function(b){for(var c=[],d=this._private.cy,e=0;e<this.length;e++){var f=this[e],g=d.getElementById(f._private.data.parent);g.size()>0&&c.push(g)}return new a.Collection(d,c).filter(b)},parents:function(b){for(var c=[],d=this.parent();d.nonempty();){for(var e=0;e<d.length;e++){var f=d[e];c.push(f)}d=d.parent()}return new a.Collection(this.cy(),c).filter(b)},children:function(b){for(var c=[],d=0;d<this.length;d++){var e=this[d];c=c.concat(e._private.children)}return new a.Collection(this.cy(),c).filter(b)},siblings:function(a){return this.parent().children().not(this).filter(a)},isParent:function(){var a=this[0];return a?0!==a._private.children.length:void 0},isChild:function(){var a=this[0];return a?void 0!==a._private.data.parent&&0!==a.parent().length:void 0},descendants:function(b){function c(a){for(var b=0;b<a.length;b++){var e=a[b];d.push(e),e.children().nonempty()&&c(e.children())}}var d=[];return c(this.children()),new a.Collection(this.cy(),d).filter(b)}})}(cytoscape),function($$){$$.fn.selector=function(a){for(var b in a){var c=a[b];$$.Selector.prototype[b]=c}},$$.Selector=function(a,b){function c(){return{classes:[],colonSelectors:[],data:[],group:null,ids:[],meta:[],collection:null,filter:null,parent:null,ancestor:null,subject:null,child:null,descendant:null}}function d(a){return a.replace(new RegExp("\\\\("+i+")","g"),"")}function e(a){for(var b,c,d,e=0;e<A.length;e++){var f=A[e],g=f.name;if(!$$.is.fn(a)||a(g,f)){var h=D.match(new RegExp("^"+f.regex));if(null!=h){c=h,b=f,d=g;var i=h[0];D=D.substring(i.length);break}}}return{expr:b,match:c,name:d}}function f(){var a=D.match(/^\s+/);if(a){var b=a[0];D=D.substring(b.length)}}if(!(this instanceof $$.Selector))return new $$.Selector(a,b);void 0===b&&void 0!==a&&(b=a,a=void 0);var g=this;if(g._private={selectorText:null,invalid:!0},!b||$$.is.string(b)&&b.match(/^\s*$/))null==a?g.length=0:(g[0]=c(),g[0].group=a,g.length=1);else if($$.is.element(b)){var h=new $$.Collection(g.cy(),[b]);g[0]=c(),g[0].collection=h,g.length=1}else if($$.is.collection(b))g[0]=c(),g[0].collection=b,g.length=1;else if($$.is.fn(b))g[0]=c(),g[0].filter=b,g.length=1;else{if(!$$.is.string(b))return void $$.util.error("A selector must be created from a string; found "+b);for(var i="[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",j="(?:[\\w-]|(?:\\\\"+i+"))+",k="=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",l="\\?|\\!|\\^",m="\"(?:\\\\\"|[^\"])+\"|'(?:\\\\'|[^'])+'",n=$$.util.regex.number,o=m+"|"+n,p="degree|indegree|outdegree",q="\\s*,\\s*",r=j,s="\\s+",t="\\s+>\\s+",u="\\$",v=j,w=k.split("|"),x=0;x<w.length;x++){var y=w[x];k+="|@"+y}var z=null,A={group:{query:!0,regex:"(node|edge|\\*)",populate:function(a){this.group="*"==a?a:a+"s"}},state:{query:!0,regex:"(:selected|:unselected|:locked|:unlocked|:visible|:hidden|:grabbed|:free|:removed|:inside|:grabbable|:ungrabbable|:animated|:unanimated|:selectable|:unselectable|:parent|:child|:active|:inactive|:touch)",populate:function(a){this.colonSelectors.push(a)}},id:{query:!0,regex:"\\#("+v+")",populate:function(a){this.ids.push(d(a))}},className:{query:!0,regex:"\\.("+r+")",populate:function(a){this.classes.push(d(a))}},dataExists:{query:!0,regex:"\\[\\s*("+j+")\\s*\\]",populate:function(a){this.data.push({field:d(a)})}},dataCompare:{query:!0,regex:"\\[\\s*("+j+")\\s*("+k+")\\s*("+o+")\\s*\\]",populate:function(a,b,c){this.data.push({field:d(a),operator:b,value:c})}},dataBool:{query:!0,regex:"\\[\\s*("+l+")\\s*("+j+")\\s*\\]",populate:function(a,b){this.data.push({field:d(b),operator:a})}},metaCompare:{query:!0,regex:"\\{\\s*("+p+")\\s*("+k+")\\s*("+n+")\\s*\\}",populate:function(a,b,c){this.meta.push({field:d(a),operator:b,value:c})}},nextQuery:{separator:!0,regex:q,populate:function(){g[++x]=c(),z=null}},child:{separator:!0,regex:t,populate:function(){var a=c();a.parent=this,a.subject=z,g[x]=a}},descendant:{separator:!0,regex:s,populate:function(){var a=c();a.ancestor=this,a.subject=z,g[x]=a}},subject:{modifier:!0,regex:u,populate:function(){return null!=z&&this.subject!=this?($$.util.error("Redefinition of subject in selector `"+b+"`"),!1):(z=this,void(this.subject=this))}}},B=0;for(var C in A)A[B]=A[C],A[B].name=C,B++;A.length=B,g._private.selectorText=b;var D=b,x=0;for(g[0]=c(),f();;){var E=e();if(null==E.expr)return void $$.util.error("The selector `"+b+"`is invalid");for(var F=[],B=1;B<E.match.length;B++)F.push(E.match[B]);var G=E.expr.populate.apply(g[x],F);if(G===!1)return;if(D.match(/^\s*$/))break}for(g.length=x+1,B=0;B<g.length;B++){var H=g[B];if(null!=H.subject){for(;H.subject!=H;)if(null!=H.parent){var I=H.parent,t=H;t.parent=null,I.child=t,H=I}else{if(null==H.ancestor){$$.util.error("When adjusting references for the selector `"+H+"`, neither parent nor ancestor was found");break}var J=H.ancestor,s=H;s.ancestor=null,J.descendant=s,H=J}g[B]=H.subject}}if(null!=a)for(var B=0;B<g.length;B++){if(null!=g[B].group&&g[B].group!=a)return void $$.util.error("Group `"+g[B].group+"` conflicts with implicit group `"+a+"` in selector `"+b+"`");g[B].group=a}}g._private.invalid=!1},$$.selfn=$$.Selector.prototype,$$.selfn.size=function(){return this.length},$$.selfn.eq=function(a){return this[a]},$$.selfn.find=function(){},$$.selfn.filter=function(collection,addLiveFunction){var self=this,cy=collection.cy();if(self._private.invalid)return new $$.Collection(cy);var queryMatches=function(query,element){function operandsMatch(params){for(var allDataMatches=!0,k=0;k<query[params.name].length;k++){var data=query[params.name][k],operator=data.operator,value=data.value,field=data.field,matches;if(null!=operator&&null!=value){var fieldStr=""+params.fieldValue(field),valStr=""+eval(value),caseInsensitive=!1;switch("@"==operator.charAt(0)&&(fieldStr=fieldStr.toLowerCase(),valStr=valStr.toLowerCase(),operator=operator.substring(1),caseInsensitive=!0),"="==operator&&(operator="=="),operator){case"*=":matches=fieldStr.search(valStr)>=0;break;case"$=":matches=null!=new RegExp(valStr+"$").exec(fieldStr);break;case"^=":matches=null!=new RegExp("^"+valStr).exec(fieldStr);break;default:if(caseInsensitive){var expr="fieldStr "+operator+" valStr";matches=eval(expr)}else{var expr=params.fieldRef(field)+" "+operator+" "+value;matches=eval(expr)}}}else if(null!=operator)switch(operator){case"?":matches=params.fieldTruthy(field);break;case"!":matches=!params.fieldTruthy(field);break;case"^":matches=params.fieldUndefined(field)}else matches=!params.fieldUndefined(field);if(!matches){allDataMatches=!1;break}}return allDataMatches}function confirmRelations(a,b){if(null!=a){var c=!1;b=b();for(var d=0;d<b.size();d++)if(queryMatches(a,b.eq(d))){c=!0;break}return c}return!0}if(null!=query.group&&"*"!=query.group&&query.group!=element._private.group)return!1;for(var allColonSelectorsMatch=!0,k=0;k<query.colonSelectors.length;k++){var sel=query.colonSelectors[k],renderer=cy.renderer();switch(sel){case":selected":allColonSelectorsMatch=element.selected();break;case":unselected":allColonSelectorsMatch=!element.selected();break;case":selectable":allColonSelectorsMatch=element.selectable();break;case":unselectable":allColonSelectorsMatch=!element.selectable();break;case":locked":allColonSelectorsMatch=element.locked();break;case":unlocked":allColonSelectorsMatch=!element.locked();break;case":visible":allColonSelectorsMatch=element.visible();break;case":hidden":allColonSelectorsMatch=!element.visible();break;case":grabbed":allColonSelectorsMatch=element.grabbed();break;case":free":allColonSelectorsMatch=!element.grabbed();break;case":removed":allColonSelectorsMatch=element.removed();break;case":inside":allColonSelectorsMatch=!element.removed();break;case":grabbable":allColonSelectorsMatch=element.grabbable();break;case":ungrabbable":allColonSelectorsMatch=!element.grabbable();break;case":animated":allColonSelectorsMatch=element.animated();break;case":unanimated":allColonSelectorsMatch=!element.animated();break;case":parent":allColonSelectorsMatch=element.children().nonempty();break;case":child":allColonSelectorsMatch=element.parent().nonempty();break;case":active":allColonSelectorsMatch=element.active();break;case":inactive":allColonSelectorsMatch=!element.active();break;case":touch":allColonSelectorsMatch=window&&document&&("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)}if(!allColonSelectorsMatch)break}if(!allColonSelectorsMatch)return!1;for(var allIdsMatch=!0,k=0;k<query.ids.length;k++){var id=query.ids[k],actualId=element._private.data.id;if(allIdsMatch=allIdsMatch&&id==actualId,!allIdsMatch)break}if(!allIdsMatch)return!1;for(var allClassesMatch=!0,k=0;k<query.classes.length;k++){var cls=query.classes[k];if(allClassesMatch=allClassesMatch&&element.hasClass(cls),!allClassesMatch)break}if(!allClassesMatch)return!1;var allDataMatches=operandsMatch({name:"data",fieldValue:function(a){return element._private.data[a]},fieldRef:function(a){return"element._private.data."+a},fieldUndefined:function(a){return void 0===element._private.data[a]},fieldTruthy:function(a){return element._private.data[a]?!0:!1}});if(!allDataMatches)return!1;var allMetaMatches=operandsMatch({name:"meta",fieldValue:function(a){return element[a]()},fieldRef:function(a){return"element."+a+"()"},fieldUndefined:function(a){return void 0==element[a]()},fieldTruthy:function(a){return element[a]()?!0:!1}});if(!allMetaMatches)return!1;if(null!=query.collection){var matchesAny=null!=query.collection._private.ids[element.id()];if(!matchesAny)return!1}return null!=query.filter&&0==element.collection().filter(query.filter).size()?!1:confirmRelations(query.parent,function(){return element.parent()})?confirmRelations(query.ancestor,function(){return element.parents()})?confirmRelations(query.child,function(){return element.children()})?confirmRelations(query.descendant,function(){return element.descendants()})?!0:!1:!1:!1:!1},selectorFunction=function(a,b){for(var c=0;c<self.length;c++){var d=self[c];if(queryMatches(d,b))return!0}return!1};null==self._private.selectorText&&(selectorFunction=function(){return!0});var filteredCollection=collection.filter(selectorFunction);return filteredCollection},$$.selfn.toString=$$.selfn.selector=function(){function a(a){return $$.is.string(a)?a:""}function b(c){var e="",f=a(c.group);e+=f.substring(0,f.length-1);for(var g=0;g<c.data.length;g++){var h=c.data[g];e+="["+h.field+a(h.operator)+a(h.value)+"]"}for(var g=0;g<c.meta.length;g++){var i=c.meta[g];e+="{"+i.field+a(i.operator)+a(i.value)+"}"}for(var g=0;g<c.colonSelectors.length;g++){var j=c.colonSelectors[d];e+=j}for(var g=0;g<c.ids.length;g++){var j="#"+c.ids[d];e+=j}for(var g=0;g<c.classes.length;g++){var j="."+c.classes[d];e+=j}return null!=c.parent&&(e=b(c.parent)+" > "+e),null!=c.ancestor&&(e=b(c.ancestor)+" "+e),null!=c.child&&(e+=" > "+b(c.child)),null!=c.descendant&&(e+=" "+b(c.descendant)),e}for(var c="",d=0;d<this.length;d++){var e=this[d];c+=b(e),this.length>1&&d<this.length-1&&(c+=", ")}return c}}(cytoscape),function(a){function b(){}b.prototype.notify=function(){},a("renderer","null",b)}(cytoscape),function(a){function b(a){this.options=a,this.data={select:[void 0,void 0,void 0,void 0,0],renderer:this,cy:a.cy,container:a.cy.container(),canvases:new Array(i),canvasRedrawReason:new Array(i),canvasNeedsRedraw:new Array(i),bufferCanvases:new Array(o)},this.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},this.timeoutData={panTimeout:null},this.dragData={possibleDragElements:[]},this.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},this.zoomData={freeToZoom:!1,lastPointerX:null},this.redraws=0,this.bindings=[],this.init();for(var b=0;i>b;b++)this.data.canvases[b]=document.createElement("canvas"),this.data.canvases[b].style.position="absolute",this.data.canvases[b].setAttribute("data-id","layer"+b),this.data.canvases[b].style.zIndex=String(i-b),this.data.container.appendChild(this.data.canvases[b]),this.data.canvasRedrawReason[b]=new Array,this.data.canvasNeedsRedraw[b]=!1;this.data.canvases[m].setAttribute("data-id","layer"+m+"-node"),this.data.canvases[j].setAttribute("data-id","layer"+j+"-selectbox"),this.data.canvases[k].setAttribute("data-id","layer"+k+"-drag"),this.data.canvases[l].setAttribute("data-id","layer"+l+"-overlay");for(var b=0;o>b;b++)this.data.bufferCanvases[b]=document.createElement("canvas"),this.data.bufferCanvases[b].style.position="absolute",this.data.bufferCanvases[b].setAttribute("data-id","buffer"+b),this.data.bufferCanvases[b].style.zIndex=String(-b-1),this.data.bufferCanvases[b].style.visibility="visible",this.data.container.appendChild(this.data.bufferCanvases[b]);var c=document.createElement("div");if(this.data.container.appendChild(c),this.data.overlay=c,c.style.position="absolute",c.style.zIndex=1e3,a.showOverlay){var d=document.createElement("a");c.appendChild(d),this.data.link=d,d.innerHTML="cytoscape.js",d.style.font="14px helvetica",d.style.position="absolute",d.style.right=0,d.style.bottom=0,d.style.padding="1px 3px",d.style.paddingLeft="5px",d.style.paddingTop="5px",d.style.opacity=0,d.style["-webkit-tap-highlight-color"]="transparent",d.style.background="red",d.href="http://cytoscape.github.io/cytoscape.js/",d.target="_blank"}this.hideEdgesOnViewport=a.hideEdgesOnViewport,this.load()}var c="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,d=function(){return Date.now()},e={},f={},g=b.prototype,h=400,i=5,j=0,k=2,l=3,m=4,o=2;b.prototype.notify=function(a){return"destroy"==a.type?void this.destroy():(("add"==a.type||"remove"==a.type||"load"==a.type)&&(this.updateNodesCache(),this.updateEdgesCache()),"viewport"==a.type&&(this.data.canvasNeedsRedraw[j]=!0,this.data.canvasRedrawReason[j].push("viewchange")),this.data.canvasNeedsRedraw[k]=!0,this.data.canvasRedrawReason[k].push("notify"),this.data.canvasNeedsRedraw[m]=!0,this.data.canvasRedrawReason[m].push("notify"),this.redraws++,void this.redraw())},b.prototype.registerBinding=function(a,b,c,d){this.bindings.push({target:a,event:b,handler:c,useCapture:d}),a.addEventListener(b,c,d)},b.prototype.destroy=function(){this.destroyed=!0;for(var a=0;a<this.bindings.length;a++){var b=this.bindings[a],c=b;c.target.removeEventListener(c.event,c.handler,c.useCapture)}},b.prototype.png=function(){var a=this.data;this.data.container.clientHeight>0&&this.data.container.clientWidth>0&&(context=a.bufferCanvases[1].getContext("2d"),context.globalCompositeOperation="copy",context.drawImage(a.canvases[4],0,0),context.globalCompositeOperation="source-over",context.drawImage(a.canvases[2],0,0),context.drawImage(a.canvases[0],0,0),context=a.bufferCanvases[0].getContext("2d"),context.globalCompositeOperation="copy",context.drawImage(a.bufferCanvases[1],0,0));var b=this.data.bufferCanvases[0];return b.toDataURL("image/png")},b.prototype.load=function(){function c(a,b,c,d){return Math.sqrt((c-a)*(c-a)+(d-b)*(d-b))}var e=this,f=function(a,b,c){if(!b)for(var d=a.parents(),e=0;e<d.size();e++)if(d[e]._private.selected)return;for(var f=a.descendants(),e=0;e<f.size();e++)if(b||!f[e]._private.selected){f[e]._private.rscratch.inDragLayer=!0,c.push(f[e]);for(var g=0;g<f[e]._private.edges.length;g++)f[e]._private.edges[g]._private.rscratch.inDragLayer=!0}},g=function(a,b){a._private.grabbed=!0,a._private.rscratch.inDragLayer=!0,b.push(a);for(var c=0;c<a._private.edges.length;c++)a._private.edges[c]._private.rscratch.inDragLayer=!0},i=function(a,b){for(var c=a;c.parent().nonempty();)c=c.parent()[0];if(c!=a||!b)for(var d=c.descendants().add(c),e=0;e<d.size();e++){d[e]._private.rscratch.inDragLayer=b;for(var f=0;f<d[e]._private.edges.length;f++)d[e]._private.edges[f]._private.rscratch.inDragLayer=b}};b.prototype.nodeIsDraggable=function(a){return 0!=a._private.style.opacity.value&&"visible"==a._private.style.visibility.value&&!a._private.locked&&a._private.grabbable?!0:!1},e.registerBinding(window,"resize",function(){e.data.canvasNeedsRedraw[m]=!0,e.data.canvasNeedsRedraw[l]=!0,e.matchCanvasSize(e.data.container),e.redraw()},!0),e.registerBinding(e.data.container,"contextmenu",function(a){a.preventDefault()}),e.registerBinding(e.data.container,"mousedown",function(b){b.preventDefault(),e.hoverData.capture=!0,e.hoverData.which=b.which;var c=e.data.cy,d=e.projectIntoViewport(b.pageX,b.pageY),k=e.data.select,l=e.findNearestElement(d[0],d[1],!0),m=(e.hoverData.down,e.dragData.possibleDragElements),n=new a.Event(b,{type:"grab"});if(3==b.which)l&&(l.activate(),l.trigger(new a.Event(b,{type:"cxttapstart"})),e.hoverData.down=l,e.hoverData.downTime=(new Date).getTime(),e.hoverData.cxtDragged=!1);else if(1==b.which){if(l&&l.activate(),null!=l&&e.nodeIsDraggable(l)){if("nodes"==l._private.group&&0==l._private.selected&&(m=e.dragData.possibleDragElements=[],g(l,m),l.trigger(n),("auto"==l._private.style.width.value||"auto"==l._private.style.height.value)&&f(l,!0,m),i(l,!0)),"nodes"==l._private.group&&1==l._private.selected){m=e.dragData.possibleDragElements=[];for(var o=!1,p=c.$("node:selected"),q=0;q<p.length;q++)e.nodeIsDraggable(p[q])&&(g(p[q],m),o||(l.trigger(n),o=!0),("auto"==p[q]._private.style.width.value||"auto"==p[q]._private.style.height.value)&&f(p[q],!1,m),i(p[q],!0))}l.trigger(new a.Event(b,{type:"mousedown"})).trigger(new a.Event(b,{type:"tapstart"})).trigger(new a.Event(b,{type:"vmousedown"}))}else null==l&&c.trigger(new a.Event(b,{type:"mousedown"})).trigger(new a.Event(b,{type:"tapstart"})).trigger(new a.Event(b,{type:"vmousedown"}));if(e.hoverData.down=l,e.hoverData.downTime=(new Date).getTime(),null==l||l.isEdge()){k[4]=1;var r=Math.max(0,h-(+new Date-e.hoverData.downTime));clearTimeout(e.bgActiveTimeout),e.bgActiveTimeout=setTimeout(function(){l&&l.unactivate(),e.data.bgActivePosistion={x:d[0],y:d[1]},e.data.canvasNeedsRedraw[j]=!0,e.data.canvasRedrawReason[j].push("bgactive"),e.redraw()},r)}}k[0]=k[2]=d[0],k[1]=k[3]=d[1],e.redraw()},!1),e.registerBinding(window,"mousemove",function(b){var c=!1,d=e.hoverData.capture;if(!d){var f=e.findContainerPageCoords();if(!(b.pageX>f[0]&&b.pageX<f[0]+e.data.container.clientWidth&&b.pageY>f[1]&&b.pageY<f[1]+e.data.container.clientHeight))return}{var g=e.data.cy,i=e.projectIntoViewport(b.pageX,b.pageY),l=e.data.select,n=e.findNearestElement(i[0],i[1],!0),o=e.hoverData.last,p=e.hoverData.down,q=[i[0]-l[2],i[1]-l[3]],r=(e.getCachedNodes(),e.getCachedEdges(),e.dragData.possibleDragElements);b.shiftKey}c=!0;var s=new a.Event(b,{type:"mousemove"});if(null!=n?n.trigger(s):null==n&&g.trigger(s),3===e.hoverData.which){var t=new a.Event(b,{type:"cxtdrag"});p?p.trigger(t):g.trigger(t),e.hoverData.cxtDragged=!0}else if(e.hoverData.dragging){if(c=!0,g.panningEnabled()){var u={x:q[0]*g.zoom(),y:q[1]*g.zoom()};g.panBy(u)}i=e.projectIntoViewport(b.pageX,b.pageY)}else if(1==l[4]&&(null==p||p.isEdge())&&(!g.boxSelectionEnabled()||+new Date-e.hoverData.downTime>=h)&&Math.abs(l[3]-l[1])+Math.abs(l[2]-l[0])<4&&g.panningEnabled())e.hoverData.dragging=!0,l[4]=0;else{if(g.boxSelectionEnabled()&&Math.pow(l[2]-l[0],2)+Math.pow(l[3]-l[1],2)>7&&l[4]&&clearTimeout(e.bgActiveTimeout),p&&p.isEdge()&&p.active()&&p.unactivate(),n!=o&&(o&&o.trigger(new a.Event(b,{type:"mouseout"})),n&&n.trigger(new a.Event(b,{type:"mouseover"})),e.hoverData.last=n),p&&p.isNode()&&e.nodeIsDraggable(p)){e.dragData.didDrag=!0;for(var v=[],w=0;w<r.length;w++)"nodes"==r[w]._private.group&&e.nodeIsDraggable(r[w])&&(r[w]._private.position.x+=q[0],r[w]._private.position.y+=q[1],v.push(r[w]));new a.Collection(g,v).trigger(new a.Event(b,{type:"drag"})).trigger(new a.Event(b,{type:"position"})),l[2]==l[0]&&l[3]==l[1]&&(e.data.canvasNeedsRedraw[m]=!0,e.data.canvasRedrawReason[m].push("Node(s) and edge(s) moved to drag layer")),e.data.canvasNeedsRedraw[k]=!0,e.data.canvasRedrawReason[k].push("Nodes dragged")}g.boxSelectionEnabled()&&(e.data.canvasNeedsRedraw[j]=!0,e.data.canvasRedrawReason[j].push("Mouse moved, redraw selection box")),c=!0}return l[2]=i[0],l[3]=i[1],e.redraw(),c?(b.stopPropagation&&b.stopPropagation(),b.preventDefault&&b.preventDefault(),b.cancelBubble=!0,b.returnValue=!1,!1):void 0},!1),e.registerBinding(window,"mouseup",function(b){var c=e.hoverData.capture;if(c){e.hoverData.capture=!1;var d=e.data.cy,f=e.projectIntoViewport(b.pageX,b.pageY),g=e.data.select,h=e.findNearestElement(f[0],f[1],!0),l=(e.getCachedNodes(),e.getCachedEdges(),e.dragData.possibleDragElements),n=e.hoverData.down,o=b.shiftKey;if(e.data.bgActivePosistion=void 0,clearTimeout(e.bgActiveTimeout),n&&n.unactivate(),3===e.hoverData.which){var p=new a.Event(b,{type:"cxttapend"});if(n?n.trigger(p):d.trigger(p),!e.hoverData.cxtDragged){var q=new a.Event(b,{type:"cxttap"});n?n.trigger(q):d.trigger(q)}e.hoverData.cxtDragged=!1,e.hoverData.which=null}else{if(null!=n||e.dragData.didDrag||Math.pow(g[2]-g[0],2)+Math.pow(g[3]-g[1],2)>7&&g[4]||e.hoverData.dragging||(d.$(":selected").unselect(),l.length>0&&(e.data.canvasNeedsRedraw[m]=!0,e.data.canvasRedrawReason[m].push("De-select")),e.dragData.possibleDragElements=l=[]),Math.pow(g[2]-g[0],2)+Math.pow(g[3]-g[1],2)==0&&(null!=h?h.trigger(new a.Event(b,{type:"click"})).trigger(new a.Event(b,{type:"tap"})).trigger(new a.Event(b,{type:"vclick"})):null==h&&d.trigger(new a.Event(b,{type:"click"})).trigger(new a.Event(b,{type:"tap"})).trigger(new a.Event(b,{type:"vclick"}))),null!=h?h.trigger(new a.Event(b,{type:"mouseup"})).trigger(new a.Event(b,{type:"tapend"})).trigger(new a.Event(b,{type:"vmouseup"})):null==h&&d.trigger(new a.Event(b,{type:"mouseup"})).trigger(new a.Event(b,{type:"tapend"})).trigger(new a.Event(b,{type:"vmouseup"})),h!=n||e.dragData.didDrag){if(h==n&&null!=h&&h._private.grabbed){for(var r=d.$(":grabbed"),s=0;s<r.length;s++){var t=r[s];t._private.grabbed=!1;for(var u=t._private.edges,v=0;v<u.length;v++)u[v]._private.rscratch.inDragLayer=!1;i(t,!1)}var w=new a.Event(b,{type:"free"});r.trigger(w)}}else null!=h&&h._private.selectable&&(o||d.$(":selected").unselect(),h.selected()?h.unselect():h.select(),i(h,!1),e.data.canvasNeedsRedraw[m]=!0,e.data.canvasRedrawReason[m].push("sglslct"));if(d.boxSelectionEnabled()&&Math.pow(g[2]-g[0],2)+Math.pow(g[3]-g[1],2)>7&&g[4]){o||d.$(":selected").unselect();for(var x=[],y=e.getAllInBox(g[0],g[1],g[2],g[3]),s=(new a.Event(b,{type:"select"}),0);s<y.length;s++)y[s]._private.selectable&&(l.push(y[s]),x.push(y[s]));new a.Collection(d,x).select(),y.length>0&&(e.data.canvasNeedsRedraw[m]=!0,e.data.canvasRedrawReason[m].push("Selection"))}if(e.hoverData.dragging=!1,!g[4]){for(var w=new a.Event(b,{type:"free"}),s=0;s<l.length;s++)if("nodes"==l[s]._private.group){l[s]._private.rscratch.inDragLayer=!1;for(var u=l[s]._private.edges,v=0;v<u.length;v++)u[v]._private.rscratch.inDragLayer=!1;i(l[s],!1)}else"edges"==l[s]._private.group&&(l[s]._private.rscratch.inDragLayer=!1);n&&n.trigger(w),e.data.canvasNeedsRedraw[k]=!0,e.data.canvasRedrawReason[k].push("Node/nodes back from drag"),e.data.canvasNeedsRedraw[m]=!0,e.data.canvasRedrawReason[m].push("Node/nodes back from drag")}}g[4]=0,e.hoverData.down=null,e.data.canvasNeedsRedraw[j]=!0,e.data.canvasRedrawReason[j].push("Mouse up, selection box gone"),e.dragData.didDrag=!1,e.redraw()}},!1);var n=function(a){var b=e.data.cy,c=e.projectIntoViewport(a.pageX,a.pageY),d=[c[0]*b.zoom()+b.pan().x,c[1]*b.zoom()+b.pan().y];if(e.zoomData.freeToZoom){a.preventDefault();var f=a.wheelDeltaY/1e3||a.detail/-32;b.panningEnabled()&&b.zoomingEnabled()&&b.zoom({level:b.zoom()*Math.pow(10,f),position:{x:d[0],y:d[1]}}),e.data.wheel=!0,clearTimeout(e.data.wheelTimeout),e.data.wheelTimeout=setTimeout(function(){e.data.wheel=!1,e.data.canvasNeedsRedraw[m]=!0,e.redraw()},100)}};e.registerBinding(e.data.container,"mousewheel",n,!0),e.registerBinding(e.data.container,"DOMMouseScroll",n,!0),e.registerBinding(e.data.container,"MozMousePixelScroll",function(a){e.zoomData.freeToZoom&&a.preventDefault()},!1),e.registerBinding(e.data.container,"mousemove",function(a){e.zoomData.lastPointerX&&e.zoomData.lastPointerX!=a.pageX&&!e.zoomData.freeToZoom&&(e.zoomData.freeToZoom=!0),e.zoomData.lastPointerX=a.pageX},!1),e.registerBinding(e.data.container,"mouseout",function(){e.zoomData.freeToZoom=!1,e.zoomData.lastPointerX=null},!1),e.registerBinding(e.data.container,"mouseout",function(b){e.data.cy.trigger(new a.Event(b,{type:"mouseout"}))},!1),e.registerBinding(e.data.container,"mouseover",function(b){e.data.cy.trigger(new a.Event(b,{type:"mouseover"}))},!1);var o,p,q,r,s,t,u,v,w,x,y=e.data.container.clientWidth,z=e.data.container.clientHeight;e.registerBinding(e.data.container,"touchstart",function(b){function h(a){for(var b=0;b<a.length;b++)a[b]._private.grabbed=!1,a[b]._private.rscratch.inDragLayer=!1,a[b].active()&&a[b].unactivate()}b.target!==e.data.link&&b.preventDefault(),e.touchData.capture=!0,e.data.bgActivePosistion=void 0;var k=e.data.cy,l=e.getCachedNodes(),m=e.getCachedEdges(),n=e.touchData.now,A=e.touchData.earlier;if(b.touches[0]){var B=e.projectIntoViewport(b.touches[0].pageX,b.touches[0].pageY);n[0]=B[0],n[1]=B[1]}if(b.touches[1]){var B=e.projectIntoViewport(b.touches[1].pageX,b.touches[1].pageY);n[2]=B[0],n[3]=B[1]}if(b.touches[2]){var B=e.projectIntoViewport(b.touches[2].pageX,b.touches[2].pageY);n[4]=B[0],n[5]=B[1]}if(b.touches[1]){h(l),h(m);var C=e.findContainerPageCoords();w=C[1],v=C[0],o=b.touches[0].pageX-v,p=b.touches[0].pageY-w,q=b.touches[1].pageX-v,r=b.touches[1].pageY-w,x=o>=0&&y>=o&&q>=0&&y>=q&&p>=0&&z>=p&&r>=0&&z>=r;var D=k.pan(),E=k.zoom();if(s=c(o,p,q,r),t=[(o+q)/2,(p+r)/2],u=[(t[0]-D.x)/E,(t[1]-D.y)/E],100>s){var F=e.findNearestElement(n[0],n[1],!0),G=e.findNearestElement(n[2],n[3],!0),H=new a.Event(b,{type:"cxttapstart"});return F&&F.isNode()?(F.activate().trigger(H),e.touchData.start=F):G&&G.isNode()?(G.activate().trigger(H),e.touchData.start=G):(k.trigger(H),e.touchData.start=null),e.touchData.start&&(e.touchData.start._private.grabbed=!1),e.touchData.cxt=!0,e.touchData.cxtDragged=!1,e.data.bgActivePosistion=void 0,void e.redraw()}}if(b.touches[2]);else if(b.touches[1]);else if(b.touches[0]){var I=e.findNearestElement(n[0],n[1],!0);if(null!=I){if(I.activate(),e.touchData.start=I,"nodes"==I._private.group&&e.nodeIsDraggable(I)){var J=e.dragData.touchDragEles=[];if(g(I,J),I.trigger(new a.Event(b,{type:"grab"})),I.selected()){J=e.dragData.touchDragEles=[];for(var K=k.$("node:selected"),L=0;L<K.length;L++){var M=K[L];if(e.nodeIsDraggable(M)){J.push(M),M._private.rscratch.inDragLayer=!0;for(var N=M._private.edges,O=0;O<N.length;O++)N[O]._private.rscratch.inDragLayer=!0;("auto"==M._private.style.width.value||"auto"==M._private.style.height.value)&&f(M,!1,J),i(M,!0)}}}else("auto"==I._private.style.width.value||"auto"==I._private.style.height.value)&&f(I,!0,J),i(I,!0)}I.trigger(new a.Event(b,{type:"touchstart"})).trigger(new a.Event(b,{type:"tapstart"})).trigger(new a.Event(b,{type:"vmousdown"}))}null==I&&(k.trigger(new a.Event(b,{type:"touchstart"})).trigger(new a.Event(b,{type:"tapstart"})).trigger(new a.Event(b,{type:"vmousedown"})),e.data.bgActivePosistion={x:B[0],y:B[1]},e.data.canvasNeedsRedraw[j]=!0,e.data.canvasRedrawReason[j].push("bgactive"));for(var P=0;P<n.length;P++)A[P]=n[P],e.touchData.startPosition[P]=n[P];e.touchData.singleTouchMoved=!1,e.touchData.singleTouchStartTime=d();{setTimeout(function(){0==e.touchData.singleTouchMoved&&d()-e.touchData.singleTouchStartTime>250&&(e.touchData.start?e.touchData.start.trigger(new a.Event(b,{type:"taphold"})):(e.data.cy.trigger(new a.Event(b,{type:"taphold"})),k.$(":selected").unselect()))},1e3)}}e.redraw()},!1),e.registerBinding(window,"touchmove",function(b){var d=e.data.select,f=e.touchData.capture;f&&b.preventDefault();var g=e.data.cy,h=(e.getCachedNodes(),e.getCachedEdges(),e.touchData.now),i=e.touchData.earlier;if(b.touches[0]){var l=e.projectIntoViewport(b.touches[0].pageX,b.touches[0].pageY);h[0]=l[0],h[1]=l[1]}if(b.touches[1]){var l=e.projectIntoViewport(b.touches[1].pageX,b.touches[1].pageY);h[2]=l[0],h[3]=l[1]}if(b.touches[2]){var l=e.projectIntoViewport(b.touches[2].pageX,b.touches[2].pageY);h[4]=l[0],h[5]=l[1]}for(var n=[],t=0;t<h.length;t++)n[t]=h[t]-i[t];if(f&&e.touchData.cxt){var y=b.touches[0].pageX-v,z=b.touches[0].pageY-w,A=b.touches[1].pageX-v,B=b.touches[1].pageY-w,C=c(y,z,A,B),D=C/s;if(D>=1.5||C>=150){e.touchData.cxt=!1,e.touchData.start&&(e.touchData.start.unactivate(),e.touchData.start=null),e.data.bgActivePosistion=void 0,e.data.canvasNeedsRedraw[j]=!0;var E=new a.Event(b,{type:"cxttapend"});e.touchData.start?e.touchData.start.trigger(E):g.trigger(E)}}if(f&&e.touchData.cxt){var E=new a.Event(b,{type:"cxtdrag"});e.data.bgActivePosistion=void 0,e.data.canvasNeedsRedraw[j]=!0,e.touchData.start?e.touchData.start.trigger(E):g.trigger(E),e.touchData.start&&(e.touchData.start._private.grabbed=!1),e.touchData.cxtDragged=!0}else if(f&&b.touches[2]&&g.boxSelectionEnabled())e.data.bgActivePosistion=void 0,clearTimeout(this.threeFingerSelectTimeout),this.lastThreeTouch=+new Date,e.data.canvasNeedsRedraw[j]=!0,e.data.canvasRedrawReason[j].push("Touch moved, redraw selection box"),d&&0!==d.length&&void 0!==d[0]?(d[2]=(h[0]+h[2]+h[4])/3,d[3]=(h[1]+h[3]+h[5])/3):(d[0]=(h[0]+h[2]+h[4])/3,d[1]=(h[1]+h[3]+h[5])/3,d[2]=(h[0]+h[2]+h[4])/3+1,d[3]=(h[1]+h[3]+h[5])/3+1),d[4]=1;else if(f&&b.touches[1]&&g.zoomingEnabled()&&g.panningEnabled()){e.data.bgActivePosistion=void 0,e.data.canvasNeedsRedraw[j]=!0;var y=b.touches[0].pageX-v,z=b.touches[0].pageY-w,A=b.touches[1].pageX-v,B=b.touches[1].pageY-w,C=c(y,z,A,B),D=C/s;if(1!=D&&x){var F=y-o,G=z-p,H=A-q,I=B-r,J=(F+H)/2,K=(G+I)/2,L=g.zoom(),M=L*D,N=g.pan(),O=u[0]*L+N.x,P=u[1]*L+N.y,Q={x:-M/L*(O-N.x-J)+O,y:-M/L*(P-N.y-K)+P};g._private.zoom=M,g._private.pan=Q,g.trigger("pan zoom").notify("viewport"),s=C,o=y,p=z,q=A,r=B,e.pinching=!0}if(b.touches[0]){var l=e.projectIntoViewport(b.touches[0].pageX,b.touches[0].pageY);
h[0]=l[0],h[1]=l[1]}if(b.touches[1]){var l=e.projectIntoViewport(b.touches[1].pageX,b.touches[1].pageY);h[2]=l[0],h[3]=l[1]}if(b.touches[2]){var l=e.projectIntoViewport(b.touches[2].pageX,b.touches[2].pageY);h[4]=l[0],h[5]=l[1]}}else if(b.touches[0]){var R=e.touchData.start,S=e.touchData.last;if(null!=R&&"nodes"==R._private.group&&e.nodeIsDraggable(R)){for(var T=e.dragData.touchDragEles,U=0;U<T.length;U++){var V=T[U];e.nodeIsDraggable(V)&&(e.dragData.didDrag=!0,V._private.position.x+=n[0],V._private.position.y+=n[1])}new a.Collection(g,T).trigger(new a.Event(b,{type:"drag"})).trigger(new a.Event(b,{type:"position"})),e.data.canvasNeedsRedraw[k]=!0,e.data.canvasRedrawReason[k].push("touchdrag node"),e.touchData.startPosition[0]==i[0]&&e.touchData.startPosition[1]==i[1]&&(e.data.canvasNeedsRedraw[m]=!0,e.data.canvasRedrawReason[m].push("node drag started"))}if(null!=R&&R.trigger(new a.Event(b,{type:"touchmove"})),null==R){var W=e.findNearestElement(h[0],h[1],!0);null!=W&&W.trigger(new a.Event(b,{type:"touchmove"})),null==W&&g.trigger(new a.Event(b,{type:"touchmove"}))}W!=S&&(S&&S.trigger(new a.Event(b,{type:"touchout"})),W&&W.trigger(new a.Event(b,{type:"touchover"}))),e.touchData.last=W;for(var X=0;X<h.length;X++)h[X]&&e.touchData.startPosition[X]&&Math.abs(h[X]-e.touchData.startPosition[X])>4&&(e.touchData.singleTouchMoved=!0);if(f&&(null==R||R.isEdge())&&g.panningEnabled()){R&&(R.unactivate(),e.data.bgActivePosistion||(e.data.bgActivePosistion={x:h[0],y:h[1]}),e.data.canvasNeedsRedraw[j]=!0,e.data.canvasRedrawReason[j].push("bgactive")),g.panBy({x:n[0]*g.zoom(),y:n[1]*g.zoom()}),e.swipePanning=!0;var l=e.projectIntoViewport(b.touches[0].pageX,b.touches[0].pageY);h[0]=l[0],h[1]=l[1]}}for(var t=0;t<h.length;t++)i[t]=h[t];e.redraw()},!1),e.registerBinding(window,"touchend",function(b){var c=e.touchData.capture;if(c){e.touchData.capture=!1,b.preventDefault();var d=e.data.select;e.swipePanning=!1;var f=e.data.cy,g=(e.getCachedNodes(),e.getCachedEdges(),e.touchData.now),h=e.touchData.earlier,l=e.touchData.start;if(b.touches[0]){var n=e.projectIntoViewport(b.touches[0].pageX,b.touches[0].pageY);g[0]=n[0],g[1]=n[1]}if(b.touches[1]){var n=e.projectIntoViewport(b.touches[1].pageX,b.touches[1].pageY);g[2]=n[0],g[3]=n[1]}if(b.touches[2]){var n=e.projectIntoViewport(b.touches[2].pageX,b.touches[2].pageY);g[4]=n[0],g[5]=n[1]}if(e.touchData.cxt){if(ctxTapend=new a.Event(b,{type:"cxttapend"}),l?(l.unactivate(),l.trigger(ctxTapend)):f.trigger(ctxTapend),!e.touchData.cxtDragged){var o=new a.Event(b,{type:"cxttap"});l?l.trigger(o):f.trigger(o)}return e.touchData.start&&(e.touchData.start._private.grabbed=!1),e.touchData.cxt=!1,e.touchData.start=null,void e.redraw()}{+new Date}!b.touches[2]&&f.boxSelectionEnabled()&&(clearTimeout(this.threeFingerSelectTimeout),this.threeFingerSelectTimeout=setTimeout(function(){var c=[],g=e.getAllInBox(d[0],d[1],d[2],d[3]);d[0]=void 0,d[1]=void 0,d[2]=void 0,d[3]=void 0,d[4]=0,e.data.canvasNeedsRedraw[j]=!0,e.data.canvasRedrawReason[j].push("Touch moved, redraw selection box");for(var h=(new a.Event(b,{type:"select"}),0);h<g.length;h++)g[h]._private.selectable&&c.push(g[h]);new a.Collection(f,c).select(),g.length>0&&(e.data.canvasNeedsRedraw[m]=!0,e.data.canvasRedrawReason[m].push("Selection"))},100)),b.touches[1]||(e.pinching=!1);var p=!1;if(null!=l&&(l._private.active=!1,p=!0,l.trigger(new a.Event(b,{type:"unactivate"}))),b.touches[2])e.data.bgActivePosistion=void 0;else if(b.touches[1]);else if(b.touches[0]);else if(!b.touches[0]){if(e.data.bgActivePosistion=void 0,null!=l){1==l._private.grabbed&&(l._private.grabbed=!1,l.trigger(new a.Event(b,{type:"free"})),l._private.rscratch.inDragLayer=!1);for(var q=l._private.edges,r=0;r<q.length;r++)q[r]._private.rscratch.inDragLayer=!1;if(i(l,!1),l.selected())for(var s=f.$("node:selected"),t=0;t<s.length;t++){var u=s[t];u._private.rscratch.inDragLayer=!1;for(var q=u._private.edges,r=0;r<q.length;r++)q[r]._private.rscratch.inDragLayer=!1;i(u,!1)}e.data.canvasNeedsRedraw[k]=!0,e.data.canvasRedrawReason[k].push("touchdrag node end"),e.data.canvasNeedsRedraw[m]=!0,e.data.canvasRedrawReason[m].push("touchdrag node end"),l.trigger(new a.Event(b,{type:"touchend"})).trigger(new a.Event(b,{type:"tapend"})).trigger(new a.Event(b,{type:"vmouseup"})),e.touchData.start=null}else{var v=e.findNearestElement(g[0],g[1],!0);null!=v&&v.trigger(new a.Event(b,{type:"touchend"})).trigger(new a.Event(b,{type:"tapend"})).trigger(new a.Event(b,{type:"vmouseup"})),null==v&&f.trigger(new a.Event(b,{type:"touchend"})).trigger(new a.Event(b,{type:"tapend"})).trigger(new a.Event(b,{type:"vmouseup"}))}null!=l&&!e.dragData.didDrag&&l._private.selectable&&Math.sqrt(Math.pow(e.touchData.startPosition[0]-g[0],2)+Math.pow(e.touchData.startPosition[1]-g[1],2))<6&&(l.selected()?(l._private.selected=!1,l.trigger(new a.Event(b,{type:"unselect"}))):(l._private.selected=!0,l.trigger(new a.Event(b,{type:"select"}))),p=!0,e.data.canvasNeedsRedraw[m]=!0,e.data.canvasRedrawReason[m].push("sglslct")),0==e.touchData.singleTouchMoved&&(l?l.trigger(new a.Event(b,{type:"tap"})).trigger(new a.Event(b,{type:"vclick"})):f.trigger(new a.Event(b,{type:"tap"})).trigger(new a.Event(b,{type:"vclick"}))),e.touchData.singleTouchMoved=!0}for(var r=0;r<g.length;r++)h[r]=g[r];e.dragData.didDrag=!1,p&&l&&l.updateStyle(!1),e.redraw()}},!1)},b.prototype.init=function(){},b.prototype.getCachedNodes=function(){var a=this.data,b=this.data.cy;return void 0==a.cache&&(a.cache={}),void 0==a.cache.cachedNodes&&(a.cache.cachedNodes=b.nodes()),a.cache.cachedNodes},b.prototype.updateNodesCache=function(){var a=this.data,b=this.data.cy;void 0==a.cache&&(a.cache={}),a.cache.cachedNodes=b.nodes()},b.prototype.getCachedEdges=function(){var a=this.data,b=this.data.cy;return void 0==a.cache&&(a.cache={}),void 0==a.cache.cachedEdges&&(a.cache.cachedEdges=b.edges()),a.cache.cachedEdges},b.prototype.updateEdgesCache=function(){var a=this.data,b=this.data.cy;void 0==a.cache&&(a.cache={}),a.cache.cachedEdges=b.edges()},b.prototype.projectIntoViewport=function(a,b){n=this.data.container;var c=this.findContainerPageCoords(),d=c[0],e=c[1];return x=a-d,y=b-e,x-=this.data.cy.pan().x,y-=this.data.cy.pan().y,x/=this.data.cy.zoom(),y/=this.data.cy.zoom(),[x,y]},b.prototype.findContainerPageCoords=function(){var a,b=0,c=0;a=this.data.container;for(var d=!1;null!=a;){var e=window.getComputedStyle(a);"fixed"===e.getPropertyValue("position").toLowerCase()?(b=a.offsetLeft+window.scrollX,c=a.offsetTop+window.scrollY,a=null):"number"==typeof a.offsetLeft&&(b+=a.offsetLeft,c+=a.offsetTop,(a==document.body||a==document.header)&&(d=!0),d||(b-=a.scrollLeft,c-=a.scrollTop)),a&&(a=a.offsetParent)}return[b,c]},b.prototype.findNearestElement=function(a,b,d){for(var g=this.data,h=this.getCachedNodes(),i=this.getCachedEdges(),j=[],k=this.data.cy.zoom(),l=(c?256:32)/k,m=(c?16:0)/k,n=0;n<h.length;n++)f[this.getNodeShape(h[n])].checkPointRough(a,b,h[n]._private.style["border-width"].value/2,this.getNodeWidth(h[n])+m,this.getNodeHeight(h[n])+m,h[n]._private.position.x,h[n]._private.position.y)&&f[this.getNodeShape(h[n])].checkPoint(a,b,h[n]._private.style["border-width"].value/2,this.getNodeWidth(h[n])+m,this.getNodeHeight(h[n])+m,h[n]._private.position.x,h[n]._private.position.y)&&(d?0!=h[n]._private.style.opacity.value&&"visible"==h[n]._private.style.visibility.value&&j.push(h[n]):j.push(h[n]));for(var o,n=0;n<i.length;n++){var p=i[n],r=p._private.rscratch;if(o=!1,"self"==r.edgeType?(this.inBezierVicinity(a,b,r.startX,r.startY,r.cp2ax,r.cp2ay,r.selfEdgeMidX,r.selfEdgeMidY,Math.pow(p._private.style.width.value/2,2))&&Math.pow(i[n]._private.style.width.value/2,2)+l>this.sqDistanceToQuadraticBezier(a,b,r.startX,r.startY,r.cp2ax,r.cp2ay,r.selfEdgeMidX,r.selfEdgeMidY)||this.inBezierVicinity(a,b,r.selfEdgeMidX,r.selfEdgeMidY,r.cp2cx,r.cp2cy,r.endX,r.endY,Math.pow(i[n]._private.style.width.value/2,2))&&Math.pow(i[n]._private.style.width.value/2,2)+l>this.sqDistanceToQuadraticBezier(a,b,r.selfEdgeMidX,r.selfEdgeMidY,r.cp2cx,r.cp2cy,r.endX,r.endY))&&(o=!0):"straight"==r.edgeType?this.inLineVicinity(a,b,r.startX,r.startY,r.endX,r.endY,2*i[n]._private.style.width.value)&&Math.pow(i[n]._private.style.width.value/2,2)+l>this.sqDistanceToFiniteLine(a,b,r.startX,r.startY,r.endX,r.endY)&&(o=!0):"bezier"==r.edgeType&&this.inBezierVicinity(a,b,r.startX,r.startY,r.cp2x,r.cp2y,r.endX,r.endY,Math.pow(i[n]._private.style.width.value/2,2))&&Math.pow(i[n]._private.style.width.value/2,2)+l>this.sqDistanceToQuadraticBezier(a,b,r.startX,r.startY,r.cp2x,r.cp2y,r.endX,r.endY)&&(o=!0),j.length&&j[j.length-1]==i[n]||(e[i[n]._private.style["source-arrow-shape"].value].roughCollide(a,b,i[n]._private.rscratch.arrowStartX,i[n]._private.rscratch.arrowStartY,this.getArrowWidth(i[n]._private.style.width.value),this.getArrowHeight(i[n]._private.style.width.value),[i[n]._private.rscratch.arrowStartX-i[n].source()[0]._private.position.x,i[n]._private.rscratch.arrowStartY-i[n].source()[0]._private.position.y],0)&&e[i[n]._private.style["source-arrow-shape"].value].collide(a,b,i[n]._private.rscratch.arrowStartX,i[n]._private.rscratch.arrowStartY,this.getArrowWidth(i[n]._private.style.width.value),this.getArrowHeight(i[n]._private.style.width.value),[i[n]._private.rscratch.arrowStartX-i[n].source()[0]._private.position.x,i[n]._private.rscratch.arrowStartY-i[n].source()[0]._private.position.y],0)||e[i[n]._private.style["target-arrow-shape"].value].roughCollide(a,b,i[n]._private.rscratch.arrowEndX,i[n]._private.rscratch.arrowEndY,this.getArrowWidth(i[n]._private.style.width.value),this.getArrowHeight(i[n]._private.style.width.value),[i[n]._private.rscratch.arrowEndX-i[n].target()[0]._private.position.x,i[n]._private.rscratch.arrowEndY-i[n].target()[0]._private.position.y],0)&&e[i[n]._private.style["target-arrow-shape"].value].collide(a,b,i[n]._private.rscratch.arrowEndX,i[n]._private.rscratch.arrowEndY,this.getArrowWidth(i[n]._private.style.width.value),this.getArrowHeight(i[n]._private.style.width.value),[i[n]._private.rscratch.arrowEndX-i[n].target()[0]._private.position.x,i[n]._private.rscratch.arrowEndY-i[n].target()[0]._private.position.y],0))&&(o=!0),o)if(d){var s=g.cy.getElementById(i[n]._private.data.source),t=g.cy.getElementById(i[n]._private.data.target);0!=i[n]._private.style.opacity.value&&"visible"==i[n]._private.style.visibility.value&&0!=s._private.style.opacity.value&&"visible"==s._private.style.visibility.value&&0!=t._private.style.opacity.value&&"visible"==t._private.style.visibility.value&&j.push(i[n])}else j.push(i[n])}return j.sort(q),j.length>0?j[j.length-1]:null},b.prototype.getAllInBox=function(a,b,c,d){var e=(this.data,this.getCachedNodes()),g=this.getCachedEdges(),h=[],i=Math.min(a,c),j=Math.max(a,c),k=Math.min(b,d),l=Math.max(b,d);a=i,c=j,b=k,d=l;for(var m,n=0;n<e.length;n++)f[this.getNodeShape(e[n])].intersectBox(a,b,c,d,this.getNodeWidth(e[n]),this.getNodeHeight(e[n]),e[n]._private.position.x,e[n]._private.position.y,e[n]._private.style["border-width"].value/2)&&h.push(e[n]);for(var n=0;n<g.length;n++)"self"==g[n]._private.rscratch.edgeType&&((m=this.boxInBezierVicinity(a,b,c,d,g[n]._private.rscratch.startX,g[n]._private.rscratch.startY,g[n]._private.rscratch.cp2ax,g[n]._private.rscratch.cp2ay,g[n]._private.rscratch.endX,g[n]._private.rscratch.endY,g[n]._private.style.width.value))&&(2==m||1==m&&this.checkBezierInBox(a,b,c,d,g[n]._private.rscratch.startX,g[n]._private.rscratch.startY,g[n]._private.rscratch.cp2ax,g[n]._private.rscratch.cp2ay,g[n]._private.rscratch.endX,g[n]._private.rscratch.endY,g[n]._private.style.width.value))||(m=this.boxInBezierVicinity(a,b,c,d,g[n]._private.rscratch.startX,g[n]._private.rscratch.startY,g[n]._private.rscratch.cp2cx,g[n]._private.rscratch.cp2cy,g[n]._private.rscratch.endX,g[n]._private.rscratch.endY,g[n]._private.style.width.value))&&(2==m||1==m&&this.checkBezierInBox(a,b,c,d,g[n]._private.rscratch.startX,g[n]._private.rscratch.startY,g[n]._private.rscratch.cp2cx,g[n]._private.rscratch.cp2cy,g[n]._private.rscratch.endX,g[n]._private.rscratch.endY,g[n]._private.style.width.value)))&&h.push(g[n]),"bezier"==g[n]._private.rscratch.edgeType&&(m=this.boxInBezierVicinity(a,b,c,d,g[n]._private.rscratch.startX,g[n]._private.rscratch.startY,g[n]._private.rscratch.cp2x,g[n]._private.rscratch.cp2y,g[n]._private.rscratch.endX,g[n]._private.rscratch.endY,g[n]._private.style.width.value))&&(2==m||1==m&&this.checkBezierInBox(a,b,c,d,g[n]._private.rscratch.startX,g[n]._private.rscratch.startY,g[n]._private.rscratch.cp2x,g[n]._private.rscratch.cp2y,g[n]._private.rscratch.endX,g[n]._private.rscratch.endY,g[n]._private.style.width.value))&&h.push(g[n]),"straight"==g[n]._private.rscratch.edgeType&&(m=this.boxInBezierVicinity(a,b,c,d,g[n]._private.rscratch.startX,g[n]._private.rscratch.startY,.5*g[n]._private.rscratch.startX+.5*g[n]._private.rscratch.endX,.5*g[n]._private.rscratch.startY+.5*g[n]._private.rscratch.endY,g[n]._private.rscratch.endX,g[n]._private.rscratch.endY,g[n]._private.style.width.value))&&(2==m||1==m&&this.checkStraightEdgeInBox(a,b,c,d,g[n]._private.rscratch.startX,g[n]._private.rscratch.startY,g[n]._private.rscratch.endX,g[n]._private.rscratch.endY,g[n]._private.style.width.value))&&h.push(g[n]);return h},b.prototype.updateAllCompounds=function(a){for(var b=a.length-1;b>=0;b--)if(a[b].isNode()&&("auto"==a[b]._private.style.width.value||"auto"==a[b]._private.style.height.value)&&a[b].children().length>0){var c=a[b],d=this.calcCompoundBounds(c);c._private.position.x=d.x,c._private.position.y=d.y,c._private.autoWidth=d.width,c._private.autoHeight=d.height}},b.prototype.calcCompoundBounds=function(a){var b=a.descendants().not(":removed"),c={x:a._private.position.x,y:a._private.position.y,width:a._private.autoWidth,height:a._private.autoHeight};if("visible"!=a._private.style.visibility.value)return c;for(var d=[],e=0;e<b.size();e++)"visible"==b[e]._private.style.visibility.value&&d.push(b[e]);if(0==d.length)return c;b=d;var f=this.borderValue(b,"left"),g=this.borderValue(b,"right"),h=this.borderValue(b,"top"),i=this.borderValue(b,"bottom"),j=this.getNodePadding(a),k=(f-j.left+g+j.right)/2,l=(h-j.top+i+j.bottom)/2,m=g-f+j.left+j.right,n=i-h+j.top+j.bottom;return c={x:k,y:l,width:m,height:n}},b.prototype.borderValue=function(a,b){var c,d,e=1/0,f=-1/0,g=this,h=function(a){var b={};return b.x=a._private.position.x,b.y=a._private.position.y,b.width=a.outerWidth(),b.height=a.outerHeight(),b},i=function(a){var b={},c=g.getNodeWidth(a),d=g.getNodeHeight(a);b.height=a._private.style["font-size"].value,b.width=b.height;var e=a._private.style["text-halign"].strValue;"left"==e?(b.x=a._private.position.x-c/2,b.left=b.x-b.width,b.right=b.x):"right"==e?(b.x=a._private.position.x+c/2,b.left=b.x,b.right=b.x+b.width):(b.x=a._private.position.x,b.left=b.x-b.width/2,b.right=b.x+b.width/2);var f=a._private.style["text-valign"].strValue;return"top"==f?(b.y=a._private.position.y-d/2,b.top=b.y-b.height,b.bottom=b.y):"bottom"==f?(b.y=a._private.position.y+d/2,b.top=b.y,b.bottom=b.y+b.height):(b.y=a._private.position.y,b.top=b.y-b.height/2,b.bottom=b.y+b.height/2),b};for(D=0;D<a.length;D++)if(c=h(a[D]),d=i(a[D]),"left"==b){var j=Math.min(c.x-c.width/2,d.left);e>j&&(e=j)}else if("right"==b){var k=Math.max(c.x+c.width/2,d.right);k>f&&(f=k)}else if("top"==b){var l=Math.min(c.y-c.height/2,d.top);e>l&&(e=l)}else if("bottom"==b){var m=Math.max(c.y+c.height/2,d.bottom);m>f&&(f=m)}return"left"==b||"top"==b?e:f},b.prototype.getNodeWidth=function(a){return"auto"==a._private.style.width.value||"auto"==a._private.style.height.value?a._private.autoWidth:a._private.style.width.value},b.prototype.getNodeHeight=function(a){return"auto"==a._private.style.width.value||"auto"==a._private.style.height.value?a._private.autoHeight:a._private.style.height.value},b.prototype.getNodeShape=function(a){var b=a._private.style.shape.value;return a.isParent()?"rectangle"===b||"roundrectangle"===b?b:"rectangle":b},b.prototype.getNodePadding=function(a){var b=a._private.style["padding-left"].value,c=a._private.style["padding-right"].value,d=a._private.style["padding-top"].value,e=a._private.style["padding-bottom"].value;return isNaN(b)&&(b=0),isNaN(c)&&(c=0),isNaN(d)&&(d=0),isNaN(e)&&(e=0),{left:b,right:c,top:d,bottom:e}},b.prototype.matchCanvasSize=function(a){var b,c=this.data,d=a.clientWidth,e=a.clientHeight,f=d,g=e;"devicePixelRatio"in window&&(f*=devicePixelRatio,g*=devicePixelRatio);for(var h=0;i>h;h++)b=c.canvases[h],(b.width!==f||b.height!==g)&&(b.width=f,b.height=g,b.style.width=d+"px",b.style.height=e+"px");for(var h=0;o>h;h++)b=c.bufferCanvases[h],(b.width!==f||b.height!==g)&&(b.width=f,b.height=g);this.data.overlay.style.width=d+"px",this.data.overlay.style.height=e+"px"};var p=function(a){return"nodes"==a._private.group?a.parents().size():"edges"==a._private.group?Math.max(a.source()[0].parents().size(),a.target()[0].parents().size()):0};b.prototype.getCachedZSortedEles=function(){var a=this.lastZOrderCachedNodes,b=this.lastZOrderCachedEdges,c=this.getCachedNodes(),d=this.getCachedEdges(),e=[];if(a&&b&&a===c&&b===d)e=this.cachedZSortedEles;else{for(var f=0;f<c.length;f++)e.push(c[f]);for(var f=0;f<d.length;f++)e.push(d[f]);e.sort(q),this.cachedZSortedEles=e}return this.lastZOrderCachedNodes=c,this.lastZOrderCachedEdges=d,e};var q=function(a,b){var c=a._private.style["z-index"].value-b._private.style["z-index"].value,d=0,e=0;return a.cy().hasCompoundNodes()&&(d=p(a),e=p(b)),d-e===0?"nodes"===a._private.group&&"edges"===b._private.group?1:"edges"===a._private.group&&"nodes"===b._private.group?-1:0===c?a._private.index-b._private.index:c:d-e};b.prototype.renderTo=function(a,b,c){this.redraw(a,!0,b,c)},b.prototype.redraw=function(a,b,c,d){var e=this;void 0===this.averageRedrawTime&&(this.averageRedrawTime=0);var f=1e3/60,g=1e3,h=this.averageRedrawTime;h=Math.max(f,h),h=Math.min(h,g),void 0===this.lastDrawTime&&(this.lastDrawTime=0);var i=+new Date,n=i-this.lastDrawTime,o=n>=h;if(!a){if(!o)return clearTimeout(this.redrawTimeout),void(this.redrawTimeout=setTimeout(function(){e.redraw()},h));this.lastDrawTime=i}setTimeout(function(){var f=i,g=e.data.cy,h=e.data,n=e.getCachedNodes(),o=e.getCachedEdges();e.matchCanvasSize(h.container);var p=g.zoom(),q=void 0!==c?c:p,r=g.pan(),s={x:r.x,y:r.y};d&&(s=d),"devicePixelRatio"in window&&(q*=devicePixelRatio,s.x*=devicePixelRatio,s.y*=devicePixelRatio);for(var t=[],u=0;u<n.length;u++)t.push(n[u]);for(var u=0;u<o.length;u++)t.push(o[u]);if(h.canvasNeedsRedraw[k]||h.canvasNeedsRedraw[m]||b){e.hideEdgesOnViewport&&(e.pinching||e.hoverData.dragging||e.data.wheel||e.swipePanning)||e.findEdgeControlPoints(o);var t=e.getCachedZSortedEles();g.hasCompoundNodes()&&e.updateAllCompounds(t)}var v,w,x;if(h.canvasNeedsRedraw[m]||b){if(!v||!w){v=[],w=[];for(var y=0;y<t.length;y++)x=t[y],x._private.rscratch.inDragLayer?v.push(x):w.push(x)}var z=a||h.canvases[m].getContext("2d");z.setTransform(1,0,0,1,0,0),z.clearRect(0,0,z.canvas.width,z.canvas.height),b||(z.translate(s.x,s.y),z.scale(q,q)),d&&z.translate(d.x,d.y),c&&z.scale(c,c);for(var y=0;y<w.length;y++)x=w[y],"nodes"==x._private.group?e.drawNode(z,x):"edges"==x._private.group&&e.drawEdge(z,x);for(var y=0;y<w.length;y++)x=w[y],"nodes"==x._private.group?e.drawNodeText(z,x):"edges"==x._private.group&&e.drawEdgeText(z,x),"nodes"==x._private.group?e.drawNode(z,x,!0):"edges"==x._private.group&&e.drawEdge(z,x,!0);b||(h.canvasNeedsRedraw[m]=!1,h.canvasRedrawReason[m]=[])}if(h.canvasNeedsRedraw[k]||b){if(!v||!w){v=[],w=[];for(var y=0;y<t.length;y++)x=t[y],x._private.rscratch.inDragLayer?v.push(x):w.push(x)}var z=a||h.canvases[k].getContext("2d");b||(z.setTransform(1,0,0,1,0,0),z.clearRect(0,0,z.canvas.width,z.canvas.height),z.translate(s.x,s.y),z.scale(q,q)),d&&z.translate(d.x,d.y),c&&z.scale(c,c);for(var x,y=0;y<v.length;y++)x=v[y],"nodes"==x._private.group?e.drawNode(z,x):"edges"==x._private.group&&e.drawEdge(z,x);for(var y=0;y<v.length;y++)x=v[y],"nodes"==x._private.group?e.drawNodeText(z,x):"edges"==x._private.group&&e.drawEdgeText(z,x),"nodes"==x._private.group?e.drawNode(z,x,!0):"edges"==x._private.group&&e.drawEdge(z,x,!0);b||(h.canvasNeedsRedraw[k]=!1,h.canvasRedrawReason[k]=[])}if(h.canvasNeedsRedraw[j]){var z=a||h.canvases[j].getContext("2d");b||(z.setTransform(1,0,0,1,0,0),z.clearRect(0,0,z.canvas.width,z.canvas.height),z.translate(s.x,s.y),z.scale(q,q)),d&&z.translate(d.x,d.y),c&&z.scale(c,c);var A=g.style()._private.coreStyle;if(1==h.select[4]){var p=h.cy.zoom(),B=A["selection-box-border-width"].value/p;z.lineWidth=B,z.fillStyle="rgba("+A["selection-box-color"].value[0]+","+A["selection-box-color"].value[1]+","+A["selection-box-color"].value[2]+","+A["selection-box-opacity"].value+")",z.fillRect(h.select[0],h.select[1],h.select[2]-h.select[0],h.select[3]-h.select[1]),B>0&&(z.strokeStyle="rgba("+A["selection-box-border-color"].value[0]+","+A["selection-box-border-color"].value[1]+","+A["selection-box-border-color"].value[2]+","+A["selection-box-opacity"].value+")",z.strokeRect(h.select[0],h.select[1],h.select[2]-h.select[0],h.select[3]-h.select[1]))}if(h.bgActivePosistion){var p=h.cy.zoom(),C=h.bgActivePosistion;z.fillStyle="rgba("+A["active-bg-color"].value[0]+","+A["active-bg-color"].value[1]+","+A["active-bg-color"].value[2]+","+A["active-bg-opacity"].value+")",z.beginPath(),z.arc(C.x,C.y,A["active-bg-size"].pxValue/p,0,2*Math.PI),z.fill()}b||(h.canvasNeedsRedraw[j]=!1,h.canvasRedrawReason[j]=[])}if(e.options.showOverlay){var z=h.canvases[l].getContext("2d");z.lineJoin="round",z.font="14px helvetica",z.strokeStyle="#fff",z.lineWidth="4",z.fillStyle="#666",z.textAlign="right";{var D="cytoscape.js",E=z.canvas.width,F=z.canvas.height,G=4;z.measureText(D).width}z.clearRect(0,0,E,F),z.strokeText(D,E-G,F-G),z.fillText(D,E-G,F-G),h.overlayDrawn=!0}var H=+new Date;void 0===e.averageRedrawTime&&(e.averageRedrawTime=H-f),e.averageRedrawTime=e.averageRedrawTime/2+(H-f)/2},0)};var r={},s=9e3;b.prototype.getCachedImage=function(a,b){if(r[a]&&r[a].image)return r[a].keepTime=s,r[a].image;var c=r[a];return void 0==c&&(r[a]=new Object,r[a].image=new Image,r[a].image.onload=b,r[a].image.src=a,r[a].keepTime=s,c=r[a]),c.image},b.prototype.swapCachedImage=function(a){if(r[a]){if(r[a].image&&r[a].image.complete){var b=r[a].image,c=document.createElement("canvas");return c.width=b.width,c.height=b.height,c.getContext("2d").drawImage(b,0,0),r[a].image=c,r[a].swappedWithCanvas=!0,c}return null}return null},b.prototype.updateImageCaches=function(){for(var a in r)r[a].keepTime<=0?(void 0!=r[a].image&&(r[a].image.src=void 0,r[a].image=void 0),r[a]=void 0):r[a]-=1},b.prototype.drawImage=function(a,b,c,d,e,f,g){g.widthScale=.5,g.heightScale=.5,g.rotate=f;canvas.drawImage(g,b,c)},b.prototype.drawEdge=function(a,b,c){if(!this.hideEdgesOnViewport||!(this.dragData.didDrag||this.pinching||this.hoverData.dragging||this.data.wheel||this.swipePanning)){var d,e;if(d=b.source()[0],e=b.target()[0],"visible"==b._private.style.visibility.value&&"visible"==d._private.style.visibility.value&&"visible"==e._private.style.visibility.value){var f=b._private.style["overlay-padding"].value,g=b._private.style["overlay-opacity"].value,h=b._private.style["overlay-color"].value;if(c?(a.strokeStyle="rgba( "+h[0]+", "+h[1]+", "+h[2]+", "+g+" )",a.lineCap="round","self"==b._private.rscratch.edgeType&&(a.lineCap="butt")):a.strokeStyle="rgba("+b._private.style["line-color"].value[0]+","+b._private.style["line-color"].value[1]+","+b._private.style["line-color"].value[2]+","+b._private.style.opacity.value+")",!(b._private.style.width.value<=0)){var i=b._private.style.width.value+(c?2*f:0),j=c?"solid":b._private.style["line-style"].value;if(a.lineWidth=i,this.findEndpoints(b),"self"==b._private.rscratch.edgeType){var k=b._private.rscratch;this.drawStyledEdge(b,a,[k.startX,k.startY,k.cp2ax,k.cp2ay,k.selfEdgeMidX,k.selfEdgeMidY],j,i),this.drawStyledEdge(b,a,[k.selfEdgeMidX,k.selfEdgeMidY,k.cp2cx,k.cp2cy,k.endX,k.endY],j,i)}else if("straight"==b._private.rscratch.edgeType){var l=e._private.position.x-d._private.position.x,m=e._private.position.y-d._private.position.y,n=b._private.rscratch.endX-b._private.rscratch.startX,o=b._private.rscratch.endY-b._private.rscratch.startY;if(0>l*n+m*o)b._private.rscratch.straightEdgeTooShort=!0;else{var k=b._private.rscratch;this.drawStyledEdge(b,a,[k.startX,k.startY,k.endX,k.endY],j,i),b._private.rscratch.straightEdgeTooShort=!1}}else{var k=b._private.rscratch;this.drawStyledEdge(b,a,[k.startX,k.startY,k.cp2x,k.cp2y,k.endX,k.endY],j,i)}b._private.rscratch.noArrowPlacement!==!0&&void 0!==b._private.rscratch.startX&&this.drawArrowheads(a,b,c)}}}};var t=function(a,b){var c=Math.sqrt(Math.pow(a[4]-a[0],2)+Math.pow(a[5]-a[1],2));c+=Math.sqrt(Math.pow((a[4]+a[0])/2-a[2],2)+Math.pow((a[5]+a[1])/2-a[3],2));var d,e=Math.ceil(c/b);if(!(e>0))return null;d=new Array(2*e);for(var f=0;e>f;f++){var g=f/e;d[2*f]=a[0]*(1-g)*(1-g)+2*a[2]*(1-g)*g+a[4]*g*g,d[2*f+1]=a[1]*(1-g)*(1-g)+2*a[3]*(1-g)*g+a[5]*g*g}return d},u=function(a,b){var c,d=Math.sqrt(Math.pow(a[2]-a[0],2)+Math.pow(a[3]-a[1],2)),e=Math.ceil(d/b);if(!(e>0))return null;c=new Array(2*e);for(var f=[a[2]-a[0],a[3]-a[1]],g=0;e>g;g++){var h=g/e;c[2*g]=f[0]*h+a[0],c[2*g+1]=f[1]*h+a[1]}return c};b.prototype.createBuffer=function(a,b){var c=document.createElement("canvas");return c.width=a,c.height=b,[c,c.getContext("2d")]},b.prototype.drawStyledEdge=function(a,b,c,d,e){function f(a,b,c,d){return(1-d)*(1-d)*a+2*(1-d)*d*b+d*d*c}var g=this.data.cy,h=g.zoom();void 0===a._private.rstyle.bezierPts&&(a._private.rstyle.bezierPts=[]);var i=a._private.rstyle.bezierPts.length;a.isLoop()?i>=12&&(a._private.rstyle.bezierPts=[]):a._private.rstyle.bezierPts=[];var j=a._private.rstyle.bezierPts;if(6===c.length&&(j.push({x:f(c[0],c[2],c[4],.05),y:f(c[1],c[3],c[5],.05)}),j.push({x:f(c[0],c[2],c[4],.25),y:f(c[1],c[3],c[5],.25)}),j.push({x:f(c[0],c[2],c[4],.35),y:f(c[1],c[3],c[5],.35)}),j.push({x:f(c[0],c[2],c[4],.65),y:f(c[1],c[3],c[5],.65)}),j.push({x:f(c[0],c[2],c[4],.75),y:f(c[1],c[3],c[5],.75)}),j.push({x:f(c[0],c[2],c[4],.95),y:f(c[1],c[3],c[5],.95)})),"solid"==d)b.beginPath(),b.moveTo(c[0],c[1]),6==c.length?b.quadraticCurveTo(c[2],c[3],c[4],c[5]):b.lineTo(c[2],c[3]),b.stroke();else if("dotted"==d){var k;if(k=6==c.length?t(c,16,!0):u(c,16,!0),!k)return;var l=Math.max(1.6*e,3.4)*h,m=2*l,n=2*l;m=Math.max(m,1),n=Math.max(n,1);var o=this.createBuffer(m,n),p=o[1];p.setTransform(1,0,0,1,0,0),p.clearRect(0,0,m,n),p.fillStyle=b.strokeStyle,p.beginPath(),p.arc(m/2,n/2,.5*l,0,2*Math.PI,!1),p.fill(),b.beginPath();for(var q=0;q<k.length/2;q++)b.drawImage(o[0],k[2*q]-m/2/h,k[2*q+1]-n/2/h,m/h,n/h)}else if("dashed"==d){var k;if(k=6==c.length?t(c,14,!0):u(c,14,!0),!k)return;var m=2*e*h,n=7.8*h;m=Math.max(m,1),n=Math.max(n,1);var o=this.createBuffer(m,n),p=o[1];p.setTransform(1,0,0,1,0,0),p.clearRect(0,0,m,n),b.strokeStyle&&(p.strokeStyle=b.strokeStyle),p.lineWidth=e*g.zoom(),p.beginPath(),p.moveTo(m/2,.2*n),p.lineTo(m/2,.8*n),p.stroke();var r,s,v=!1;4==c.length?(r=[c[2]-c[0],c[3]-k[1]],s=Math.acos((0*r[0]+-1*r[1])/Math.sqrt(r[0]*r[0]+r[1]*r[1])),r[0]<0&&(s=-s+2*Math.PI)):6==c.length&&(v=!0);for(var q=0;q<k.length/2;q++){var w=q/Math.max(k.length/2-1,1);v&&(r=[2*(1-w)*(c[2]-c[0])+2*w*(c[4]-c[2]),2*(1-w)*(c[3]-c[1])+2*w*(c[5]-c[3])],s=Math.acos((0*r[0]+-1*r[1])/Math.sqrt(r[0]*r[0]+r[1]*r[1])),r[0]<0&&(s=-s+2*Math.PI)),b.translate(k[2*q],k[2*q+1]),b.rotate(s),b.translate(-m/2/h,-n/2/h),b.drawImage(o[0],0,0,m/h,n/h),b.translate(m/2/h,n/2/h),b.rotate(-s),b.translate(-k[2*q],-k[2*q+1])}}else this.drawStyledEdge(a,b,c,"solid",e)},b.prototype.drawEdgeText=function(a,b){if(!(this.hideEdgesOnViewport&&(this.dragData.didDrag||this.pinching||this.hoverData.dragging||this.data.wheel||this.swipePanning)||"visible"!=b._private.style.visibility.value)){var c=b._private.style["font-size"].pxValue*b.cy().zoom(),d=b._private.style["min-zoomed-font-size"].pxValue;if(!(d>c)){a.textAlign="center",a.textBaseline="middle";var e,f,g,h;"self"==b._private.rscratch.edgeType?(g=b._private.rscratch.selfEdgeMidX,h=b._private.rscratch.selfEdgeMidY):"straight"==b._private.rscratch.edgeType?(g=(b._private.rscratch.startX+b._private.rscratch.endX)/2,h=(b._private.rscratch.startY+b._private.rscratch.endY)/2):"bezier"==b._private.rscratch.edgeType&&(g=.25*b._private.rscratch.startX+.5*b._private.rscratch.cp2x+.25*b._private.rscratch.endX,h=Math.pow(.5,2)*b._private.rscratch.startY+.5*b._private.rscratch.cp2y+.25*b._private.rscratch.endY),e=g,f=h;var i=b._private.rstyle;i.labelX=e,i.labelY=f,this.drawText(a,b,e,f)}}},b.prototype.drawNode=function(a,b,c){var d,e;if("visible"==b._private.style.visibility.value){for(var g=1,h=b.parents(),i=0;i<h.length;i++){var j=h[i],l=j._private.style.opacity.value;if(g=l*g,0===l)return}if(d=this.getNodeWidth(b),e=this.getNodeHeight(b),a.lineWidth=b._private.style["border-width"].pxValue,void 0!==c&&c){var n=b._private.style["overlay-padding"].value,o=b._private.style["overlay-opacity"].value,p=b._private.style["overlay-color"].value;o>0&&(a.fillStyle="rgba( "+p[0]+", "+p[1]+", "+p[2]+", "+o+" )",f[this.getNodeShape(b)].draw(a,b._private.position.x,b._private.position.y,d+2*n,e+2*n))}else{a.fillStyle="rgba("+b._private.style["background-color"].value[0]+","+b._private.style["background-color"].value[1]+","+b._private.style["background-color"].value[2]+","+b._private.style["background-opacity"].value*b._private.style.opacity.value*g+")",a.strokeStyle="rgba("+b._private.style["border-color"].value[0]+","+b._private.style["border-color"].value[1]+","+b._private.style["border-color"].value[2]+","+b._private.style["border-opacity"].value*b._private.style.opacity.value*g+")";var q=b._private.style["background-image"].value[2]||b._private.style["background-image"].value[1];if(void 0!=q){var r=this,s=this.getCachedImage(q,function(){r.data.canvasNeedsRedraw[m]=!0,r.data.canvasRedrawReason[m].push("image finished load"),r.data.canvasNeedsRedraw[k]=!0,r.data.canvasRedrawReason[k].push("image finished load"),r.swapCachedImage(q),r.redraw()});0==s.complete?(f[r.getNodeShape(b)].drawPath(a,b._private.position.x,b._private.position.y,d,e),a.stroke(),a.fillStyle="#555555",a.fill()):this.drawInscribedImage(a,s,b)}else f[this.getNodeShape(b)].draw(a,b._private.position.x,b._private.position.y,d,e);b._private.style["border-width"].value>0&&a.stroke()}}},b.prototype.drawInscribedImage=function(a,b,c){var d=this,e=(this.data.cy._private.zoom,c._private.position.x),g=c._private.position.y,h=this.getNodeWidth(c),i=this.getNodeHeight(c);a.save(),f[d.getNodeShape(c)].drawPath(a,e,g,h,i),a.clip();var j=[b.width,b.height];a.drawImage(b,e-j[0]/2,g-j[1]/2,j[0],j[1]),a.restore(),c._private.style["border-width"].value>0&&a.stroke()},b.prototype.drawNodeText=function(a,b){if("visible"==b._private.style.visibility.value){var c=b._private.style["font-size"].pxValue*b.cy().zoom(),d=b._private.style["min-zoomed-font-size"].pxValue;if(!(d>c)){var e,f,g=this.getNodeWidth(b),h=this.getNodeHeight(b),i=b._private.style["text-halign"].strValue;"left"==i?(a.textAlign="right",e=b._private.position.x-g/2):"right"==i?(a.textAlign="left",e=b._private.position.x+g/2):"center"==i?(a.textAlign="center",e=b._private.position.x):(a.textAlign="center",e=b._private.position.x);var j=b._private.style["text-valign"].strValue;"top"==j?(a.textBaseline="bottom",f=b._private.position.y-h/2):"bottom"==j?(a.textBaseline="top",f=b._private.position.y+h/2):"middle"==j||"center"==j?(a.textBaseline="middle",f=b._private.position.y):(a.textBaseline="middle",f=b._private.position.y),this.drawText(a,b,e,f)}}},b.prototype.drawText=function(a,b,c,d){for(var e=1,f=b.parents(),g=0;g<f.length;g++){var h=f[g],i=h._private.style.opacity.value;if(e=i*e,0===i)return}var j=b._private.style["font-style"].strValue,k=b._private.style["font-size"].value+"px",l=b._private.style["font-family"].strValue,m=(b._private.style["font-variant"].strValue,b._private.style["font-weight"].strValue);a.font=j+" "+m+" "+k+" "+l;var n=String(b._private.style.content.value),o=b._private.style["text-transform"].value;
if("none"==o||("uppercase"==o?n=n.toUpperCase():"lowercase"==o&&(n=n.toLowerCase())),a.lineJoin="round",a.fillStyle="rgba("+b._private.style.color.value[0]+","+b._private.style.color.value[1]+","+b._private.style.color.value[2]+","+b._private.style["text-opacity"].value*b._private.style.opacity.value*e+")",a.strokeStyle="rgba("+b._private.style["text-outline-color"].value[0]+","+b._private.style["text-outline-color"].value[1]+","+b._private.style["text-outline-color"].value[2]+","+b._private.style["text-opacity"].value*b._private.style.opacity.value*e+")",void 0!=n){var p=2*b._private.style["text-outline-width"].value;p>0&&(a.lineWidth=p,a.strokeText(n,c,d)),isNaN(c)&&(c=0),isNaN(d)&&(d=0),a.fillText(""+n,c,d),b._private.rstyle.labelWidth=a.measureText(n).width}},b.prototype.drawBackground=function(){},b.prototype.findEdgeControlPoints=function(a){for(var b,c={},d=this.data.cy,e=[],f=0;f<a.length;f++)b=a[f]._private.data.source>a[f]._private.data.target?a[f]._private.data.target+"-"+a[f]._private.data.source:a[f]._private.data.source+"-"+a[f]._private.data.target,void 0==c[b]&&(c[b]=[]),c[b].push(a[f]),e.push(b);for(var g,h,i=0;i<e.length;i++){b=e[i],g=d.getElementById(c[b][0]._private.data.source),h=d.getElementById(c[b][0]._private.data.target);var j,k,l=(g._private.position.x+h._private.position.x)/2,m=(g._private.position.y+h._private.position.y)/2;if(c[b].length>1){j=h._private.position.y-g._private.position.y,k=g._private.position.x-h._private.position.x;var n=Math.sqrt(j*j+k*k);j/=n,k/=n}for(var o,f=0;f<c[b].length;f++){o=c[b][f];var p=o._private.rscratch.lastEdgeIndex,q=f,r=o._private.rscratch.lastNumEdges,s=c[b].length,t=o._private.rscratch.lastSrcCtlPtX,u=g._private.position.x,v=o._private.rscratch.lastSrcCtlPtY,w=g._private.position.y,x=o._private.rscratch.lastSrcCtlPtW,y=g.outerWidth(),z=o._private.rscratch.lastSrcCtlPtH,A=g.outerHeight(),B=o._private.rscratch.lastTgtCtlPtX,C=h._private.position.x,D=o._private.rscratch.lastTgtCtlPtY,E=h._private.position.y,F=o._private.rscratch.lastTgtCtlPtW,G=h.outerWidth(),H=o._private.rscratch.lastTgtCtlPtH,I=h.outerHeight();if(t!==u||v!==w||x!==y||z!==A||B!==C||D!==E||F!==G||H!==I||p!==q||r!==s){var J=o._private.rscratch;if(J.lastSrcCtlPtX=u,J.lastSrcCtlPtY=w,J.lastSrcCtlPtW=y,J.lastSrcCtlPtH=A,J.lastTgtCtlPtX=C,J.lastTgtCtlPtY=E,J.lastTgtCtlPtW=G,J.lastTgtCtlPtH=I,J.lastEdgeIndex=q,J.lastNumEdges=s,g._private.data.id==h._private.data.id){var K=o._private.style["control-point-step-size"].pxValue;o._private.rscratch.edgeType="self",o._private.rscratch.cp2ax=g._private.position.x,o._private.rscratch.cp2ay=g._private.position.y-(1+Math.pow(this.getNodeHeight(g),1.12)/100)*K*(f/3+1),o._private.rscratch.cp2cx=g._private.position.x-(1+Math.pow(this.getNodeWidth(g),1.12)/100)*K*(f/3+1),o._private.rscratch.cp2cy=g._private.position.y,o._private.rscratch.selfEdgeMidX=(o._private.rscratch.cp2ax+o._private.rscratch.cp2cx)/2,o._private.rscratch.selfEdgeMidY=(o._private.rscratch.cp2ay+o._private.rscratch.cp2cy)/2}else if(c[b].length%2==1&&f==Math.floor(c[b].length/2))o._private.rscratch.edgeType="straight";else{var K=o._private.style["control-point-step-size"].value,L=(.5-c[b].length/2+f)*K;o._private.rscratch.edgeType="bezier",o._private.rscratch.cp2x=l+j*L,o._private.rscratch.cp2y=m+k*L}}}}return c},b.prototype.findEndpoints=function(a){var b,c=a.source()[0],d=a.target()[0],g=Math.max(this.getNodeWidth(c),this.getNodeHeight(c)),h=Math.max(this.getNodeWidth(d),this.getNodeHeight(d));g=0,h/=2;var i=[a.source().position().x,a.source().position().y],j=[a.target().position().x,a.target().position().y];if("self"==a._private.rscratch.edgeType){var k=[a._private.rscratch.cp2cx,a._private.rscratch.cp2cy];b=f[this.getNodeShape(d)].intersectLine(d._private.position.x,d._private.position.y,this.getNodeWidth(d),this.getNodeHeight(d),k[0],k[1],d._private.style["border-width"].value/2);var l=this.shortenIntersection(b,k,e[a._private.style["target-arrow-shape"].value].spacing(a)),m=this.shortenIntersection(b,k,e[a._private.style["target-arrow-shape"].value].gap(a));a._private.rscratch.endX=m[0],a._private.rscratch.endY=m[1],a._private.rscratch.arrowEndX=l[0],a._private.rscratch.arrowEndY=l[1];var k=[a._private.rscratch.cp2ax,a._private.rscratch.cp2ay];b=f[this.getNodeShape(c)].intersectLine(c._private.position.x,c._private.position.y,this.getNodeWidth(c),this.getNodeHeight(c),k[0],k[1],c._private.style["border-width"].value/2);var n=this.shortenIntersection(b,k,e[a._private.style["source-arrow-shape"].value].spacing(a)),o=this.shortenIntersection(b,k,e[a._private.style["source-arrow-shape"].value].gap(a));a._private.rscratch.startX=o[0],a._private.rscratch.startY=o[1],a._private.rscratch.arrowStartX=n[0],a._private.rscratch.arrowStartY=n[1]}else if("straight"==a._private.rscratch.edgeType){b=f[this.getNodeShape(d)].intersectLine(d._private.position.x,d._private.position.y,this.getNodeWidth(d),this.getNodeHeight(d),c.position().x,c.position().y,d._private.style["border-width"].value/2),a._private.rscratch.noArrowPlacement=0==b.length?!0:!1;var l=this.shortenIntersection(b,[c.position().x,c.position().y],e[a._private.style["target-arrow-shape"].value].spacing(a)),m=this.shortenIntersection(b,[c.position().x,c.position().y],e[a._private.style["target-arrow-shape"].value].gap(a));a._private.rscratch.endX=m[0],a._private.rscratch.endY=m[1],a._private.rscratch.arrowEndX=l[0],a._private.rscratch.arrowEndY=l[1],b=f[this.getNodeShape(c)].intersectLine(c._private.position.x,c._private.position.y,this.getNodeWidth(c),this.getNodeHeight(c),d.position().x,d.position().y,c._private.style["border-width"].value/2),a._private.rscratch.noArrowPlacement=0==b.length?!0:!1;var n=this.shortenIntersection(b,[d.position().x,d.position().y],e[a._private.style["source-arrow-shape"].value].spacing(a)),o=this.shortenIntersection(b,[d.position().x,d.position().y],e[a._private.style["source-arrow-shape"].value].gap(a));a._private.rscratch.startX=o[0],a._private.rscratch.startY=o[1],a._private.rscratch.arrowStartX=n[0],a._private.rscratch.arrowStartY=n[1]}else if("bezier"==a._private.rscratch.edgeType){{var k=[a._private.rscratch.cp2x,a._private.rscratch.cp2y];.25*i[0]+.25*j[0]+.5*k[0],.25*i[1]+.25*j[1]+.5*k[1]}b=f[this.getNodeShape(d)].intersectLine(d._private.position.x,d._private.position.y,this.getNodeWidth(d),this.getNodeHeight(d),k[0],k[1],d._private.style["border-width"].value/2);var l=this.shortenIntersection(b,k,e[a._private.style["target-arrow-shape"].value].spacing(a)),m=this.shortenIntersection(b,k,e[a._private.style["target-arrow-shape"].value].gap(a));a._private.rscratch.endX=m[0],a._private.rscratch.endY=m[1],a._private.rscratch.arrowEndX=l[0],a._private.rscratch.arrowEndY=l[1],b=f[this.getNodeShape(c)].intersectLine(c._private.position.x,c._private.position.y,this.getNodeWidth(c),this.getNodeHeight(c),k[0],k[1],c._private.style["border-width"].value/2);var n=this.shortenIntersection(b,k,e[a._private.style["source-arrow-shape"].value].spacing(a)),o=this.shortenIntersection(b,k,e[a._private.style["source-arrow-shape"].value].gap(a));a._private.rscratch.startX=o[0],a._private.rscratch.startY=o[1],a._private.rscratch.arrowStartX=n[0],a._private.rscratch.arrowStartY=n[1]}else if(a._private.rscratch.isArcEdge)return},b.prototype.findEdges=function(a){for(var b=this.getCachedEdges(),c={},d=[],e=0;e<a.length;e++)c[a[e]._private.data.id]=a[e];for(var e=0;e<b.length;e++)(c[b[e]._private.data.source]||c[b[e]._private.data.target])&&d.push(b[e]);return d},b.prototype.intersectLineEllipse=function(a,b,c,d,e,f){var g=c-a,h=d-b;g/=e,h/=f;var i=Math.sqrt(g*g+h*h),j=i-1;if(0>j)return[];var k=j/i;return[(c-a)*k+a,(d-b)*k+b]},b.prototype.dotProduct=function(a,b){if(2!=a.length||2!=b.length)throw"dot product: arguments are not vectors";return a[0]*b[0]+a[1]*b[1]},b.prototype.intersectLineCircle=function(a,b,c,d,e,f,g){var h=[c-a,d-b],i=[e,f],j=[a-e,b-f],k=h[0]*h[0]+h[1]*h[1],l=2*(j[0]*h[0]+j[1]*h[1]),i=j[0]*j[0]+j[1]*j[1]-g*g,m=l*l-4*k*i;if(0>m)return[];t1=(-l+Math.sqrt(m))/(2*k),t2=(-l-Math.sqrt(m))/(2*k);var n=Math.min(t1,t2),o=Math.max(t1,t2),p=[];if(n>=0&&1>=n&&p.push(n),o>=0&&1>=o&&p.push(o),0==p.length)return[];var q=p[0]*h[0]+a,r=p[0]*h[1]+b;if(p.length>1){if(p[0]==p[1])return[q,r];var s=p[1]*h[0]+a,t=p[1]*h[1]+b;return[q,r,s,t]}return[q,r]},b.prototype.findCircleNearPoint=function(a,b,c,d,e){var f=d-a,g=e-b,h=Math.sqrt(f*f+g*g),i=f/h,j=g/h;return[a+i*c,b+j*c]},b.prototype.findMaxSqDistanceToOrigin=function(a){for(var b,c=1e-6,d=0;d<a.length/2;d++)b=a[2*d]*a[2*d]+a[2*d+1]*a[2*d+1],b>c&&(c=b);return c},b.prototype.finiteLinesIntersect=function(a,b,c,d,e,f,g,h,i){var j=(g-e)*(b-f)-(h-f)*(a-e),k=(c-a)*(b-f)-(d-b)*(a-e),l=(h-f)*(c-a)-(g-e)*(d-b);if(0!=l){var m=j/l,n=k/l;return m>=0&&1>=m&&n>=0&&1>=n?[a+m*(c-a),b+m*(d-b)]:i?[a+m*(c-a),b+m*(d-b)]:[]}return 0==j||0==k?[a,c,g].sort()[1]==g?[g,h]:[a,c,e].sort()[1]==e?[e,f]:[e,g,c].sort()[1]==c?[c,d]:[]:[]},b.prototype.boxIntersectEllipse=function(a,b,c,d,e,f,g,h,i){if(a>c){var j=a;a=c,c=j}if(b>d){var k=b;b=d,d=k}var l=[h-f/2-e,i],m=[h+f/2+e,i],n=[h,i-g/2-e],o=[h,i+g/2+e];return c<l[0]?!1:a>m[0]?!1:b>o[1]?!1:d<n[1]?!1:a<=m[0]&&m[0]<=c&&b<=m[1]&&m[1]<=d?!0:a<=l[0]&&l[0]<=c&&b<=l[1]&&l[1]<=d?!0:a<=n[0]&&n[0]<=c&&b<=n[1]&&n[1]<=d?!0:a<=o[0]&&o[0]<=c&&b<=o[1]&&o[1]<=d?!0:(a=(a-h)/(f/2+e),c=(c-h)/(f/2+e),b=(b-i)/(g/2+e),d=(d-i)/(g/2+e),1>=a*a+b*b?!0:1>=c*c+b*b?!0:1>=c*c+d*d?!0:1>=a*a+d*d?!0:!1)},b.prototype.boxIntersectPolygon=function(a,b,c,d,e,f,g,h,i,j,k){if(a>c){var l=a;a=c,c=l}if(b>d){var m=b;b=d,d=m}var n=new Array(e.length),o=Math.asin(j[1]/Math.sqrt(j[0]*j[0]+j[1]*j[1]));j[0]<0?o+=Math.PI/2:o=-o-Math.PI/2;for(var p=Math.cos(-o),q=Math.sin(-o),r=0;r<n.length/2;r++)n[2*r]=f/2*(e[2*r]*p-e[2*r+1]*q),n[2*r+1]=g/2*(e[2*r+1]*p+e[2*r]*q),n[2*r]+=h,n[2*r+1]+=i;for(var s=n[0],t=n[0],u=n[1],v=n[1],r=1;r<n.length/2;r++)n[2*r]>t&&(t=n[2*r]),n[2*r]<s&&(s=n[2*r]),n[2*r+1]>v&&(v=n[2*r+1]),n[2*r+1]<u&&(u=n[2*r+1]);if(s-k>c)return!1;if(a>t+k)return!1;if(u-k>d)return!1;if(b>v+k)return!1;var x;if(k>0){var y=w.expandPolygon(n,-k);x=w.joinLines(y)}else x=n;for(var r=0;r<n.length/2;r++)if(a<=n[2*r]&&n[2*r]<=c&&b<=n[2*r+1]&&n[2*r+1]<=d)return!0;for(var r=0;r<x.length/2;r++){var z,A,B=x[2*r],C=x[2*r+1];if(r<x.length/2-1?(z=x[2*(r+1)],A=x[2*(r+1)+1]):(z=x[0],A=x[1]),w.finiteLinesIntersect(B,C,z,A,a,b,c,b,!1).length>0)return!0;if(w.finiteLinesIntersect(B,C,z,A,a,d,c,d,!1).length>0)return!0;if(w.finiteLinesIntersect(B,C,z,A,a,b,a,d,!1).length>0)return!0;if(w.finiteLinesIntersect(B,C,z,A,c,b,c,d,!1).length>0)return!0}return!1},b.prototype.polygonIntersectLine=function(a,b,c,d,e,f,g,h){for(var i,j=[],k=new Array(c.length),l=0;l<k.length/2;l++)k[2*l]=c[2*l]*f+d,k[2*l+1]=c[2*l+1]*g+e;var m;if(h>0){var n=w.expandPolygon(k,-h);m=w.joinLines(n)}else m=k;for(var o,p,q,r,l=0;l<m.length/2;l++)o=m[2*l],p=m[2*l+1],l<m.length/2-1?(q=m[2*(l+1)],r=m[2*(l+1)+1]):(q=m[0],r=m[1]),i=this.finiteLinesIntersect(a,b,d,e,o,p,q,r),0!=i.length&&j.push(i[0],i[1]);return j},b.prototype.shortenIntersection=function(a,b,c){var d=[a[0]-b[0],a[1]-b[1]],e=Math.sqrt(d[0]*d[0]+d[1]*d[1]),f=(e-c)/e;return 0>f?[]:[b[0]+f*d[0],b[1]+f*d[1]]},e.arrow={_points:[-.15,-.3,0,0,.15,-.3],collide:function(a,b,c,d,f,h,i,j){var k=e.arrow._points;return g.pointInsidePolygon(a,b,k,c,d,f,h,i,j)},roughCollide:function(a,b,c,d,f,h){return"undefined"==typeof e.arrow._farthestPointSqDistance&&(e.arrow._farthestPointSqDistance=g.findMaxSqDistanceToOrigin(e.arrow._points)),g.checkInBoundingCircle(a,b,e.arrow._farthestPointSqDistance,0,f,h,c,d)},draw:function(a){for(var b=e.arrow._points,c=0;c<b.length/2;c++)a.lineTo(b[2*c],b[2*c+1])},spacing:function(){return 0},gap:function(a){return 2*a._private.style.width.value}},e.triangle=e.arrow,e.none={collide:function(){return!1},roughCollide:function(){return!1},draw:function(){},spacing:function(){return 0},gap:function(){return 0}},e.circle={_baseRadius:.15,collide:function(a,b,c,d,f,g,h,i){if(f!=g){var j=Math.asin(h[1]/Math.sqrt(h[0]*h[0]+h[1]*h[1])),k=(Math.cos(-j),Math.sin(-j),(g+i)/(f+i));return b/=k,d/=k,Math.pow(c-a,2)+Math.pow(d-b,2)<=Math.pow((f+i)*e.circle._baseRadius,2)}return Math.pow(c-a,2)+Math.pow(d-b,2)<=Math.pow((f+i)*e.circle._baseRadius,2)},roughCollide:function(){return!0},draw:function(a){a.arc(0,0,e.circle._baseRadius,0,2*Math.PI,!1)},spacing:function(a){return g.getArrowWidth(a._private.style.width.value)*e.circle._baseRadius},gap:function(a){return 2*a._private.style.width.value}},e.inhibitor={_points:[-.25,0,-.25,-.1,.25,-.1,.25,0],collide:function(a,b,c,d,f,h,i,j){var k=e.inhibitor._points;return g.pointInsidePolygon(a,b,k,c,d,f,h,i,j)},roughCollide:function(a,b,c,d,f,h){return"undefined"==typeof e.inhibitor._farthestPointSqDistance&&(e.inhibitor._farthestPointSqDistance=g.findMaxSqDistanceToOrigin(e.inhibitor._points)),g.checkInBoundingCircle(a,b,e.inhibitor._farthestPointSqDistance,0,f,h,c,d)},draw:function(a){for(var b=e.inhibitor._points,c=0;c<b.length/2;c++)a.lineTo(b[2*c],b[2*c+1])},spacing:function(){return 4},gap:function(){return 4}},e.square={_points:[-.12,0,.12,0,.12,-.24,-.12,-.24],collide:function(a,b,c,d,f,h,i,j){var k=e.square._points;return g.pointInsidePolygon(a,b,k,c,d,f,h,i,j)},roughCollide:function(a,b,c,d,f,h){return"undefined"==typeof e.square._farthestPointSqDistance&&(e.square._farthestPointSqDistance=g.findMaxSqDistanceToOrigin(e.square._points)),g.checkInBoundingCircle(a,b,e.square._farthestPointSqDistance,0,f,h,c,d)},draw:function(a){for(var b=e.square._points,c=0;c<b.length/2;c++)a.lineTo(b[2*c],b[2*c+1])},spacing:function(){return 0},gap:function(a){return 2*a._private.style.width.value}},e.diamond={_points:[-.14,-.14,0,-.28,.14,-.14,0,0],collide:function(a,b,c,d,f,h,i,j){var k=e.diamond._points;return g.pointInsidePolygon(a,b,k,c,d,f,h,i,j)},roughCollide:function(a,b,c,d,f,h){return"undefined"==typeof e.diamond._farthestPointSqDistance&&(e.diamond._farthestPointSqDistance=g.findMaxSqDistanceToOrigin(e.diamond._points)),g.checkInBoundingCircle(a,b,e.diamond._farthestPointSqDistance,0,f,h,c,d)},draw:function(a){a.lineTo(-.14,-.14),a.lineTo(0,-.28),a.lineTo(.14,-.14),a.lineTo(0,0)},spacing:function(){return 0},gap:function(a){return 2*a._private.style.width.value}},e.tee=e.inhibitor,b.prototype.getArrowWidth=function(a){return Math.max(Math.pow(13.37*a,.9),29)},b.prototype.getArrowHeight=function(a){return Math.max(Math.pow(13.37*a,.9),29)},b.prototype.drawArrowheads=function(a,b,c){if(!c){var d,e,f=b._private.rscratch.arrowStartX,g=b._private.rscratch.arrowStartY;d=f-b.source().position().x,e=g-b.source().position().y,a.fillStyle="rgba("+b._private.style["source-arrow-color"].value[0]+","+b._private.style["source-arrow-color"].value[1]+","+b._private.style["source-arrow-color"].value[2]+","+b._private.style.opacity.value+")",a.lineWidth=b._private.style.width.value,this.drawArrowShape(a,b._private.style["source-arrow-shape"].value,f,g,d,e);var h=b._private.rscratch.arrowEndX,i=b._private.rscratch.arrowEndY;d=h-b.target().position().x,e=i-b.target().position().y,a.fillStyle="rgba("+b._private.style["target-arrow-color"].value[0]+","+b._private.style["target-arrow-color"].value[1]+","+b._private.style["target-arrow-color"].value[2]+","+b._private.style.opacity.value+")",a.lineWidth=b._private.style.width.value,this.drawArrowShape(a,b._private.style["target-arrow-shape"].value,h,i,d,e)}},b.prototype.drawArrowShape=function(a,b,c,d,f,g){var h=Math.asin(g/Math.sqrt(f*f+g*g));0>f?h+=Math.PI/2:h=-(Math.PI/2+h),a.translate(c,d),a.moveTo(0,0),a.rotate(-h);var i=this.getArrowWidth(a.lineWidth);a.scale(i,i),a.beginPath(),e[b].draw(a),a.closePath(),a.fill(),a.scale(1/i,1/i),a.rotate(h),a.translate(-c,-d)};var v=function(a,b){var c=1/a*2*Math.PI,d=a%2==0?Math.PI/2+c/2:Math.PI/2;d+=b;for(var e,f=new Array(2*a),g=0;a>g;g++)e=g*c+d,f[2*g]=Math.cos(e),f[2*g+1]=Math.sin(-e);for(var h=0,i=0,g=0;g<f.length/2;g++)Math.abs(f[2*g]>h)&&(h=Math.abs(f[2*g])),Math.abs(f[2*g+1]>i)&&(i=Math.abs(f[2*g+1]));for(var j=5e-4,k=Math.max(h,i),g=0;g<f.length/2;g++)k>j&&(f[2*g]*=1/k,f[2*g+1]*=1/k);return f},w=g;f.ellipse={draw:function(a,b,c,d,e){f.ellipse.drawPath(a,b,c,d,e),a.fill()},drawPath:function(a,b,c,d,e){a.beginPath(),a.translate(b,c),a.scale(d/2,e/2),a.arc(0,0,1,0,2*Math.PI*.999,!1),a.closePath(),a.scale(2/d,2/e),a.translate(-b,-c)},intersectLine:function(a,b,c,d,e,f,h){var i=g.intersectLineEllipse(e,f,a,b,c/2+h,d/2+h);return i},intersectBox:function(a,c,d,e,f,g,h,i,j){return b.prototype.boxIntersectEllipse(a,c,d,e,j,f,g,h,i)},checkPointRough:function(){return!0},checkPoint:function(a,b,c,d,e,f,g){return a-=f,b-=g,a/=d/2+c,b/=e/2+c,Math.pow(a,2)+Math.pow(b,2)<=1}},f.triangle={points:v(3,0),draw:function(a,b,c,d,e){w.drawPolygon(a,b,c,d,e,f.triangle.points)},drawPath:function(a,b,c,d,e){w.drawPolygonPath(a,b,c,d,e,f.triangle.points)},intersectLine:function(a,b,c,d,e,g,h){return w.polygonIntersectLine(e,g,f.triangle.points,a,b,c/2,d/2,h)},intersectBox:function(a,b,c,d,e,g,h,i,j){var k=f.triangle.points;return w.boxIntersectPolygon(a,b,c,d,k,e,g,h,i,[0,-1],j)},checkPointRough:function(a,b,c,d,e,g,h){return w.checkInBoundingBox(a,b,f.triangle.points,c,d,e,g,h)},checkPoint:function(a,b,c,d,e,g,h){return w.pointInsidePolygon(a,b,f.triangle.points,g,h,d,e,[0,-1],c)}},f.square={points:v(4,0),draw:function(a,b,c,d,e){w.drawPolygon(a,b,c,d,e,f.square.points)},drawPath:function(a,b,c,d,e){w.drawPolygonPath(a,b,c,d,e,f.square.points)},intersectLine:function(a,b,c,d,e,g,h){return w.polygonIntersectLine(e,g,f.square.points,a,b,c/2,d/2,h)},intersectBox:function(a,b,c,d,e,g,h,i,j){var k=f.square.points;return w.boxIntersectPolygon(a,b,c,d,k,e,g,h,i,[0,-1],j)},checkPointRough:function(a,b,c,d,e,g,h){return w.checkInBoundingBox(a,b,f.square.points,c,d,e,g,h)},checkPoint:function(a,b,c,d,e,g,h){return w.pointInsidePolygon(a,b,f.square.points,g,h,d,e,[0,-1],c)}},f.rectangle=f.square,f.octogon={},f.roundrectangle={points:v(4,0),draw:function(a,b,c,d,e){w.drawRoundRectangle(a,b,c,d,e,10)},drawPath:function(a,b,c,d,e){w.drawRoundRectanglePath(a,b,c,d,e,10)},intersectLine:function(a,b,c,d,e,f,g){return w.roundRectangleIntersectLine(e,f,a,b,c,d,g)},intersectBox:function(a,b,c,d,e,f,g,h,i){return w.roundRectangleIntersectBox(a,b,c,d,e,f,g,h,i)},checkPointRough:function(a,b,c,d,e,g,h){return w.checkInBoundingBox(a,b,f.roundrectangle.points,c,d,e,g,h)},checkPoint:function(a,b,c,d,e,g,h){var i=w.getRoundRectangleRadius(d,e);if(w.pointInsidePolygon(a,b,f.roundrectangle.points,g,h,d,e-2*i,[0,-1],c))return!0;if(w.pointInsidePolygon(a,b,f.roundrectangle.points,g,h,d-2*i,e,[0,-1],c))return!0;var j=function(a,b,c,d,e,f,g){return a-=c,b-=d,a/=e/2+g,b/=f/2+g,Math.pow(a,2)+Math.pow(b,2)<=1};return j(a,b,g-d/2+i,h-e/2+i,2*i,2*i,c)?!0:j(a,b,g+d/2-i,h-e/2+i,2*i,2*i,c)?!0:j(a,b,g+d/2-i,h+e/2-i,2*i,2*i,c)?!0:j(a,b,g-d/2+i,h+e/2-i,2*i,2*i,c)?!0:!1}},f.roundrectangle2={roundness:4.99,draw:function(a,b,c){2*roundness>=b||w.drawPolygon(a._private.position.x,a._private.position.y,b,c,nodeSapes.roundrectangle2.points)},intersectLine:function(a,b,c,d,e){return w.findPolygonIntersection(a,b,c,d,e,f.square.points)},intersectBox:function(){f.square.points}},f.pentagon={points:v(5,0),draw:function(a,b,c,d,e){w.drawPolygon(a,b,c,d,e,f.pentagon.points)},drawPath:function(a,b,c,d,e){w.drawPolygonPath(a,b,c,d,e,f.pentagon.points)},intersectLine:function(a,b,c,d,e,g,h){return w.polygonIntersectLine(e,g,f.pentagon.points,a,b,c/2,d/2,h)},intersectBox:function(a,b,c,d,e,g,h,i,j){var k=f.pentagon.points;return w.boxIntersectPolygon(a,b,c,d,k,e,g,h,i,[0,-1],j)},checkPointRough:function(a,b,c,d,e,g,h){return w.checkInBoundingBox(a,b,f.pentagon.points,c,d,e,g,h)},checkPoint:function(a,b,c,d,e,g,h){return w.pointInsidePolygon(a,b,f.pentagon.points,g,h,d,e,[0,-1],c)}},f.hexagon={points:v(6,0),draw:function(a,b,c,d,e){w.drawPolygon(a,b,c,d,e,f.hexagon.points)},drawPath:function(a,b,c,d,e){w.drawPolygonPath(a,b,c,d,e,f.hexagon.points)},intersectLine:function(a,b,c,d,e,g,h){return w.polygonIntersectLine(e,g,f.hexagon.points,a,b,c/2,d/2,h)},intersectBox:function(a,b,c,d,e,g,h,i,j){var k=f.hexagon.points;return w.boxIntersectPolygon(a,b,c,d,k,e,g,h,i,[0,-1],j)},checkPointRough:function(a,b,c,d,e,g,h){return w.checkInBoundingBox(a,b,f.hexagon.points,c,d,e,g,h)},checkPoint:function(a,b,c,d,e,g,h){return w.pointInsidePolygon(a,b,f.hexagon.points,g,h,d,e,[0,-1],c)}},f.heptagon={points:v(7,0),draw:function(a,b,c,d,e){w.drawPolygon(a,b,c,d,e,f.heptagon.points)},drawPath:function(a,b,c,d,e){w.drawPolygonPath(a,b,c,d,e,f.heptagon.points)},intersectLine:function(a,b,c,d,e,g,h){return w.polygonIntersectLine(e,g,f.heptagon.points,a,b,c/2,d/2,h)},intersectBox:function(a,b,c,d,e,g,h,i,j){var k=f.heptagon.points;return w.boxIntersectPolygon(a,b,c,d,k,e,g,h,i,[0,-1],j)},checkPointRough:function(a,b,c,d,e,g,h){return w.checkInBoundingBox(a,b,f.heptagon.points,c,d,e,g,h)},checkPoint:function(a,b,c,d,e,g,h){return w.pointInsidePolygon(a,b,f.heptagon.points,g,h,d,e,[0,-1],c)}},f.octagon={points:v(8,0),draw:function(a,b,c,d,e){w.drawPolygon(a,b,c,d,e,f.octagon.points)},drawPath:function(a,b,c,d,e){w.drawPolygonPath(a,b,c,d,e,f.octagon.points)},intersectLine:function(a,b,c,d,e,g,h){return w.polygonIntersectLine(e,g,f.octagon.points,a,b,c/2,d/2,h)},intersectBox:function(a,b,c,d,e,g,h,i,j){var k=f.octagon.points;return w.boxIntersectPolygon(a,b,c,d,k,e,g,h,i,[0,-1],j)},checkPointRough:function(a,b,c,d,e,g,h){return w.checkInBoundingBox(a,b,f.octagon.points,c,d,e,g,h)},checkPoint:function(a,b,c,d,e,g,h){return w.pointInsidePolygon(a,b,f.octagon.points,g,h,d,e,[0,-1],c)}};var z=new Array(20),A=v(5,0),B=v(5,Math.PI/5),C=.5*(3-Math.sqrt(5));C*=1.57;for(var D=0;D<B.length/2;D++)B[2*D]*=C,B[2*D+1]*=C;for(var D=0;5>D;D++)z[4*D]=A[2*D],z[4*D+1]=A[2*D+1],z[4*D+2]=B[2*D],z[4*D+3]=B[2*D+1];f.star5={points:z,draw:function(a,b,c,d,e){w.drawPolygon(a,b,c,d,e,f.star5.points)},drawPath:function(a,b,c,d,e){w.drawPolygonPath(a,b,c,d,e,f.star5.points)},intersectLine:function(a,b,c,d,e,g,h){return w.polygonIntersectLine(e,g,f.star5.points,a,b,c/2,d/2,h)},intersectBox:function(a,b,c,d,e,g,h,i,j){var k=f.star5.points;return w.boxIntersectPolygon(a,b,c,d,k,e,g,h,i,[0,-1],j)},checkPointRough:function(a,b,c,d,e,g,h){return w.checkInBoundingBox(a,b,f.star5.points,c,d,e,g,h)},checkPoint:function(a,b,c,d,e,g,h){return w.pointInsidePolygon(a,b,f.star5.points,g,h,d,e,[0,-1],c)}},b.prototype.expandPolygon=function(a,b){for(var c,d,e,f,g=new Array(2*a.length),h=0;h<a.length/2;h++){c=a[2*h],d=a[2*h+1],h<a.length/2-1?(e=a[2*(h+1)],f=a[2*(h+1)+1]):(e=a[0],f=a[1]);var i=f-d,j=-(e-c),k=Math.sqrt(i*i+j*j),l=i/k,m=j/k;g[4*h]=c+l*b,g[4*h+1]=d+m*b,g[4*h+2]=e+l*b,g[4*h+3]=f+m*b}return g},b.prototype.joinLines=function(a){for(var b,c,d,e,f,g,h,i,j=new Array(a.length/2),k=0;k<a.length/4;k++){b=a[4*k],c=a[4*k+1],d=a[4*k+2],e=a[4*k+3],k<a.length/4-1?(f=a[4*(k+1)],g=a[4*(k+1)+1],h=a[4*(k+1)+2],i=a[4*(k+1)+3]):(f=a[0],g=a[1],h=a[2],i=a[3]);var l=this.finiteLinesIntersect(b,c,d,e,f,g,h,i,!0);j[2*k]=l[0],j[2*k+1]=l[1]}return j},b.prototype.pointInsidePolygon=function(a,b,c,d,e,f,g,h,i){var j=new Array(c.length),k=Math.asin(h[1]/Math.sqrt(h[0]*h[0]+h[1]*h[1]));h[0]<0?k+=Math.PI/2:k=-k-Math.PI/2;for(var l=Math.cos(-k),m=Math.sin(-k),n=0;n<j.length/2;n++)j[2*n]=f/2*(c[2*n]*l-c[2*n+1]*m),j[2*n+1]=g/2*(c[2*n+1]*l+c[2*n]*m),j[2*n]+=d,j[2*n+1]+=e;var o;if(i>0){var p=w.expandPolygon(j,-i);o=w.joinLines(p)}else o=j;for(var q,r,s,t,u,v=0,x=0,n=0;n<o.length/2;n++)if(q=o[2*n],r=o[2*n+1],n+1<o.length/2?(s=o[2*(n+1)],t=o[2*(n+1)+1]):(s=o[2*(n+1-o.length/2)],t=o[2*(n+1-o.length/2)+1]),q==a&&s==a);else{if(!(q>=a&&a>=s||a>=q&&s>=a))continue;u=(a-q)/(s-q)*(t-r)+r,u>b&&v++,b>u&&x++}return v%2==0?!1:!0},b.prototype.drawPolygonPath=function(a,b,c,d,e,f){a.translate(b,c),a.scale(d/2,e/2),a.beginPath(),a.moveTo(f[0],f[1]);for(var g=1;g<f.length/2;g++)a.lineTo(f[2*g],f[2*g+1]);a.closePath(),a.scale(2/d,2/e),a.translate(-b,-c)},b.prototype.drawPolygon=function(a,b,c,d,e,f){this.drawPolygonPath(a,b,c,d,e,f),a.fill()},b.prototype.getRoundRectangleRadius=function(a,b){return Math.min(a/2,b/2,10)},b.prototype.drawRoundRectanglePath=function(a,b,c,d,e){var f=d/2,g=e/2,h=this.getRoundRectangleRadius(d,e);a.translate(b,c),a.beginPath(),a.moveTo(0,-g),a.arcTo(f,-g,f,0,h),a.arcTo(f,g,0,g,h),a.arcTo(-f,g,-f,0,h),a.arcTo(-f,-g,0,-g,h),a.lineTo(0,-g),a.closePath(),a.translate(-b,-c)},b.prototype.drawRoundRectangle=function(a,b,c,d,e,f){this.drawRoundRectanglePath(a,b,c,d,e,f),a.fill()},b.prototype.roundRectangleIntersectLine=function(a,b,c,d,e,f,g){var h,i=this.getRoundRectangleRadius(e,f),j=e/2,k=f/2,l=c-j+i-g,m=d-k-g,n=c+j-i+g,o=m;if(h=this.finiteLinesIntersect(a,b,c,d,l,m,n,o,!1),h.length>0)return h;var p=c+j+g,q=d-k+i-g,r=p,s=d+k-i+g;if(h=this.finiteLinesIntersect(a,b,c,d,p,q,r,s,!1),h.length>0)return h;var t=c-j+i-g,u=d+k+g,v=c+j-i+g,w=u;if(h=this.finiteLinesIntersect(a,b,c,d,t,u,v,w,!1),h.length>0)return h;var x=c-j-g,y=d-k+i-g,z=x,A=d+k-i+g;if(h=this.finiteLinesIntersect(a,b,c,d,x,y,z,A,!1),h.length>0)return h;var B,C=c-j+i,D=d-k+i;if(B=this.intersectLineCircle(a,b,c,d,C,D,i+g),B.length>0&&B[0]<=C&&B[1]<=D)return[B[0],B[1]];var E=c+j-i,F=d-k+i;if(B=this.intersectLineCircle(a,b,c,d,E,F,i+g),B.length>0&&B[0]>=E&&B[1]<=F)return[B[0],B[1]];var G=c+j-i,H=d+k-i;if(B=this.intersectLineCircle(a,b,c,d,G,H,i+g),B.length>0&&B[0]>=G&&B[1]>=H)return[B[0],B[1]];var I=c-j+i,J=d+k-i;return B=this.intersectLineCircle(a,b,c,d,I,J,i+g),B.length>0&&B[0]<=I&&B[1]>=J?[B[0],B[1]]:void 0},b.prototype.roundRectangleIntersectBox=function(a,b,c,d,e,f,g,h,i){var j=this.getRoundRectangleRadius(e,f),k=g-e/2-i,l=h-f/2+j-i,m=g+e/2+i,n=h+f/2-j+i,o=g-e/2+j-i,p=h-f/2-i,q=g+e/2-j+i,r=h+f/2+i,s=Math.min(a,c),t=Math.max(a,c),u=Math.min(b,d),v=Math.max(b,d);return k>t?!1:s>m?!1:p>v?!1:u>r?!1:k>=s&&t>=k&&l>=u&&v>=l?!0:m>=s&&t>=m&&l>=u&&v>=l?!0:m>=s&&t>=m&&n>=u&&v>=n?!0:k>=s&&t>=k&&n>=u&&v>=n?!0:s>=k&&m>=s&&u>=l&&n>=u?!0:t>=k&&m>=t&&u>=l&&n>=u?!0:t>=k&&m>=t&&v>=l&&n>=v?!0:s>=k&&m>=s&&v>=l&&n>=v?!0:o>=s&&t>=o&&p>=u&&v>=p?!0:q>=s&&t>=q&&p>=u&&v>=p?!0:q>=s&&t>=q&&r>=u&&v>=r?!0:o>=s&&t>=o&&r>=u&&v>=r?!0:s>=o&&q>=s&&u>=p&&r>=u?!0:t>=o&&q>=t&&u>=p&&r>=u?!0:t>=o&&q>=t&&v>=p&&r>=v?!0:s>=o&&q>=s&&v>=p&&r>=v?!0:this.boxIntersectEllipse(s,u,t,v,i,2*j,2*j,o+i,l+i)?!0:this.boxIntersectEllipse(s,u,t,v,i,2*j,2*j,q-i,l+i)?!0:this.boxIntersectEllipse(s,u,t,v,i,2*j,2*j,q-i,n-i)?!0:this.boxIntersectEllipse(s,u,t,v,i,2*j,2*j,o+i,n-i)?!0:!1},b.prototype.checkInBoundingCircle=function(a,b,c,d,e,f,g,h){return a=(a-g)/(e+d),b=(b-h)/(f+d),c>=a*a+b*b},b.prototype.checkInBoundingBox=function(a,b,c,d,e,f,g,h){for(var i=c[0],j=c[1],k=c[0],l=c[1],m=1;m<c.length/2;m++)c[2*m]<i?i=c[2*m]:c[2*m]>k&&(k=c[2*m]),c[2*m+1]<j?j=c[2*m+1]:c[2*m+1]>l&&(l=c[2*m+1]);return a-=g,b-=h,a/=e,b/=f,i>a?!1:a>k?!1:j>b?!1:b>l?!1:!0},b.prototype.boxInBezierVicinity=function(a,b,c,d,e,f,g,h,i,j,k){var l=.25*e+.5*g+.25*i,m=.25*f+.5*h+.25*j,n=Math.min(a,c)-k,o=Math.min(b,d)-k,p=Math.max(a,c)+k,q=Math.max(b,d)+k;if(e>=n&&p>=e&&f>=o&&q>=f)return 1;if(i>=n&&p>=i&&j>=o&&q>=j)return 1;if(l>=n&&p>=l&&m>=o&&q>=m)return 1;if(g>=n&&p>=g&&h>=o&&q>=h)return 1;var r=Math.min(e,l,i),s=Math.min(f,m,j),t=Math.max(e,l,i),u=Math.max(f,m,j);return r>p||n>t||s>q||o>u?0:1},b.prototype.checkBezierInBox=function(a,b,c,d,e,f,g,h,i,j){function k(a,b,c,d){return(1-d)*(1-d)*a+2*(1-d)*d*b+d*d*c}function l(l){var m=k(e,g,i,l),n=k(f,h,j,l);return m>=a&&c>=m&&n>=b&&d>=n}for(var m=0;1>=m;m+=.25)if(!l(m))return!1;return!0},b.prototype.checkStraightEdgeInBox=function(a,b,c,d,e,f,g,h){return e>=a&&c>=e&&g>=a&&c>=g&&f>=b&&d>=f&&h>=b&&d>=h},b.prototype.checkStraightEdgeCrossesBox=function(a,b,c,d,e,f,g,h,i){var j,k,l=Math.min(a,c)-i,m=Math.min(b,d)-i,n=Math.max(a,c)+i,o=Math.max(b,d)+i,p=g-e,q=e,r=h-f,s=f;if(Math.abs(p)<1e-4)return e>=l&&n>=e&&Math.min(f,h)<=m&&Math.max(f,h)>=o;var t=(l-q)/p;if(t>0&&1>=t&&(j=r*t+s,j>=m&&o>=j))return!0;var u=(n-q)/p;if(u>0&&1>=u&&(j=r*u+s,j>=m&&o>=j))return!0;var v=(m-s)/r;if(v>0&&1>=v&&(k=p*v+q,k>=l&&n>=k))return!0;var w=(o-s)/r;return w>0&&1>=w&&(k=p*w+q,k>=l&&n>=k)?!0:!1},b.prototype.checkBezierCrossesBox=function(a,b,c,d,e,f,g,h,i,j,k){var l=Math.min(a,c)-k,m=Math.min(b,d)-k,n=Math.max(a,c)+k,o=Math.max(b,d)+k;if(e>=l&&n>=e&&f>=m&&o>=f)return!0;if(i>=l&&n>=i&&j>=m&&o>=j)return!0;var p=e-2*g+i,q=-2*e+2*g,r=e,s=[];if(Math.abs(p)<1e-4){var t=(l-e)/q,u=(n-e)/q;s.push(t,u)}else{var v,w,x=q*q-4*p*(r-l);if(x>0){var y=Math.sqrt(x);v=(-q+y)/(2*p),w=(-q-y)/(2*p),s.push(v,w)}var z,A,B=q*q-4*p*(r-n);if(B>0){var y=Math.sqrt(B);z=(-q+y)/(2*p),A=(-q-y)/(2*p),s.push(z,A)}}s.sort(function(a,b){return a-b});var C=f-2*h+j,D=-2*f+2*h,E=f,F=[];if(Math.abs(C)<1e-4){var G=(m-f)/D,H=(o-f)/D;F.push(G,H)}else{var I,J,K=D*D-4*C*(E-m);if(K>0){var y=Math.sqrt(K);I=(-D+y)/(2*C),J=(-D-y)/(2*C),F.push(I,J)}var L,M,N=D*D-4*C*(E-o);if(N>0){var y=Math.sqrt(N);L=(-D+y)/(2*C),M=(-D-y)/(2*C),F.push(L,M)}}F.sort(function(a,b){return a-b});for(var O=0;O<s.length;O+=2)for(var P=1;P<F.length;P+=2)if(s[O]<F[P]&&F[P]>=0&&s[O]<=1&&s[O+1]>F[P-1]&&F[P-1]<=1&&s[O+1]>=0)return!0;return!1},b.prototype.inLineVicinity=function(a,b,c,d,e,f,g){var h=g,i=Math.min(c,e),j=Math.max(c,e),k=Math.min(d,f),l=Math.max(d,f);return a>=i-h&&j+h>=a&&b>=k-h&&l+h>=b},b.prototype.inBezierVicinity=function(a,b,c,d,e,f,g,h,i){var j=.25*c+.5*e+.25*g,k=.25*d+.5*f+.25*h,l={x1:Math.min(c,g,j),x2:Math.max(c,g,j),y1:Math.min(d,h,k),y2:Math.max(d,h,k)};if(a<l.x1||a>l.x2||b<l.y1||b>l.y2)return!1;var m,n,o=function(a,b,c,d,e,f,g,h){if(m=(f-d)*(a-c)+(c-e)*(b-d),n=m*m,sideSquared=(f-d)*(f-d)+(c-e)*(c-e),h){if(m>0)return!1}else if(0>m)return!1;return n/sideSquared>g},p=(j+e)/2,q=(k+f)/2,r=!0;return o(p,q,c,d,e,f,0,r)&&(r=!r),!o(a,b,c,d,e,f,i,r)&&!o(a,b,e,f,g,h,i,r)&&!o(a,b,g,h,c,d,i,r)},b.prototype.solveCubic=function(a,b,c,d,e){b/=a,c/=a,d/=a;var f,g,h,i,j,k,l,m;return g=(3*c-b*b)/9,h=-(27*d)+b*(9*c-2*b*b),h/=54,f=g*g*g+h*h,e[1]=0,l=b/3,f>0?(j=h+Math.sqrt(f),j=0>j?-Math.pow(-j,1/3):Math.pow(j,1/3),k=h-Math.sqrt(f),k=0>k?-Math.pow(-k,1/3):Math.pow(k,1/3),e[0]=-l+j+k,l+=(j+k)/2,e[4]=e[2]=-l,l=Math.sqrt(3)*(-k+j)/2,e[3]=l,void(e[5]=-l)):(e[5]=e[3]=0,0==f?(m=0>h?-Math.pow(-h,1/3):Math.pow(h,1/3),e[0]=-l+2*m,void(e[4]=e[2]=-(m+l))):(g=-g,i=g*g*g,i=Math.acos(h/Math.sqrt(i)),m=2*Math.sqrt(g),e[0]=-l+m*Math.cos(i/3),e[2]=-l+m*Math.cos((i+2*Math.PI)/3),void(e[4]=-l+m*Math.cos((i+4*Math.PI)/3))))},b.prototype.sqDistanceToQuadraticBezier=function(a,b,c,d,e,f,g,h){var i=1*c*c-4*c*e+2*c*g+4*e*e-4*e*g+g*g+d*d-4*d*f+2*d*h+4*f*f-4*f*h+h*h,j=9*c*e-3*c*c-3*c*g-6*e*e+3*e*g+9*d*f-3*d*d-3*d*h-6*f*f+3*f*h,k=3*c*c-6*c*e+c*g-c*a+2*e*e+2*e*a-g*a+3*d*d-6*d*f+d*h-d*b+2*f*f+2*f*b-h*b,l=1*c*e-c*c+c*a-e*a+d*f-d*d+d*b-f*b;E("coefficients: "+i/i+", "+j/i+", "+k/i+", "+l/i);var m=[];this.solveCubic(i,j,k,l,m);for(var n=1e-7,o=[],p=0;6>p;p+=2)Math.abs(m[p+1])<n&&m[p]>=0&&m[p]<=1&&o.push(m[p]);o.push(1),o.push(0);for(var q,r,s,t,u=-1,v=0;v<o.length;v++)r=Math.pow(1-o[v],2)*c+2*(1-o[v])*o[v]*e+o[v]*o[v]*g,s=Math.pow(1-o[v],2)*d+2*(1-o[v])*o[v]*f+o[v]*o[v]*h,t=Math.pow(r-a,2)+Math.pow(s-b,2),E("distance for param "+o[v]+": "+Math.sqrt(t)),u>=0?u>t&&(u=t,q=o[v]):(u=t,q=o[v]);return E("given: ( "+a+", "+b+"), ( "+c+", "+d+"), ( "+e+", "+f+"), ( "+g+", "+h+")"),E("roots: "+m),E("params: "+o),E("closest param: "+q),u},b.prototype.sqDistanceToFiniteLine=function(a,b,c,d,e,f){var g=[a-c,b-d],h=[e-c,f-d],i=h[0]*h[0]+h[1]*h[1],j=g[0]*g[0]+g[1]*g[1],k=g[0]*h[0]+g[1]*h[1],l=k*k/i;return 0>k?j:l>i?(a-e)*(a-e)+(b-f)*(b-f):j-l};var E=function(){};a("renderer","canvas",b)}(cytoscape),function(a){function b(b){this.options=a.util.extend(!0,{},c,b)}var c={ready:function(){},stop:function(){}};b.prototype.run=function(){var a=this.options,b=a.cy;b.nodes().positions(function(){return{x:0,y:0}}),b.one("layoutready",a.ready),b.trigger("layoutready"),b.one("layoutstop",a.stop),b.trigger("layoutstop")},b.prototype.stop=function(){var a=this.options;cy.one("layoutstop",a.stop),cy.trigger("layoutstop")},a("layout","null",b)}(cytoscape),function(a){function b(b){this.options=a.util.extend(!0,{},c,b)}var c={ready:void 0,stop:void 0,fit:!0,padding:30};b.prototype.run=function(){var a=this.options,b=a.cy,c=b.nodes(),d=(b.edges(),b.container()),e=d.clientWidth,f=d.clientHeight;
c.positions(function(a,b){return b.locked()?!1:{x:Math.round(Math.random()*e),y:Math.round(Math.random()*f)}}),b.one("layoutready",a.ready),b.trigger("layoutready"),a.fit&&b.fit(a.padding),b.one("layoutstop",a.stop),b.trigger("layoutstop")},b.prototype.stop=function(){},a("layout","random",b)}(cytoscape),function(a){function b(b){this.options=a.util.extend({},c,b)}var c={fit:!0,rows:void 0,columns:void 0,ready:void 0,stop:void 0};b.prototype.run=function(){function a(a){if(void 0==a)return Math.min(l,m);var b=Math.min(l,m);b==l?l=a:m=a}function b(a){if(void 0==a)return Math.max(l,m);var b=Math.max(l,m);b==l?l=a:m=a}var c=this.options,d=c,e=c.cy,f=e.nodes(),g=(e.edges(),e.container()),h=g.clientWidth,i=g.clientHeight;if(0==i||0==h)f.positions(function(){return{x:0,y:0}});else{var j=f.size(),k=Math.sqrt(j*i/h),l=Math.round(k),m=Math.round(h/i*k);if(null!=d.rows&&null!=d.columns)l=d.rows,m=d.columns;else if(null!=d.rows&&null==d.columns)l=d.rows,m=Math.ceil(j/l);else if(null==d.rows&&null!=d.columns)m=d.columns,l=Math.ceil(j/m);else if(m*l>j){var n=a(),o=b();(n-1)*o>=j?a(n-1):(o-1)*n>=j&&b(o-1)}else for(;j>m*l;){var n=a(),o=b();(o+1)*n>=j?b(o+1):a(n+1)}var p=h/m,q=i/l,r=0,s=0;f.positions(function(a,b){if(b.locked())return!1;var c=s*p+p/2,d=r*q+q/2;return s++,s>=m&&(s=0,r++),{x:c,y:d}})}c.fit&&e.reset(),e.one("layoutready",c.ready),e.trigger("layoutready"),e.one("layoutstop",c.stop),e.trigger("layoutstop")},b.prototype.stop=function(){},a("layout","grid",b)}(cytoscape),function(a){function b(b){this.options=a.util.extend(!0,{},c,b)}var c={fit:!0,ready:void 0,stop:void 0,positions:void 0,zoom:void 0,pan:void 0,padding:30};b.prototype.run=function(){function a(a){return null==b.positions?null:null==b.positions[a._private.data.id]?null:b.positions[a._private.data.id]}{var b=this.options,c=b.cy,d=c.nodes();c.edges(),c.container()}d.positions(function(b,c){var d=a(c);return c.locked()||null==d?!1:d}),null!=b.pan&&c.pan(b.pan),null!=b.zoom&&c.zoom(b.zoom),c.one("layoutready",b.ready),c.trigger("layoutready"),b.fit&&c.fit(b.padding),c.one("layoutstop",b.stop),c.trigger("layoutstop")},a("layout","preset",b),a("core","presetLayout",function(){var a=this,b={},c={};return a.nodes().each(function(a,b){c[b.data("id")]=b.position()}),b.positions=c,b.name="preset",b.zoom=a.zoom(),b.pan=a.pan(),b})}(cytoscape),function(a){function b(b){this.options=a.util.extend({},c,b)}var c={liveUpdate:!0,ready:void 0,stop:void 0,maxSimulationTime:4e3,fit:!0,padding:[50,50,50,50],ungrabifyWhileSimulating:!0,repulsion:void 0,stiffness:void 0,friction:void 0,gravity:!0,fps:void 0,precision:void 0,nodeMass:void 0,edgeLength:void 0,stepSize:1,stableEnergy:function(a){var b=a;return b.max<=.5||b.mean<=.3}};b.prototype.run=function(){function b(a,b){return null==b?void 0:"function"==typeof b?b.apply(a,[a._private.data,{nodes:g.length,edges:h.length,element:a}]):b}function c(a){var b=a.x,c=a.y,d=j,e=k,f=-2,g=2,h=4;return{x:b/d*h+f,y:c/e*h+g}}function d(a){e.fit&&f.fit(),a()}var e=this.options,f=e.cy,g=f.nodes(),h=f.edges(),i=f.container(),j=i.clientWidth,k=i.clientHeight;if(f.nodes().size()<=1)return e.fit&&f.reset(),f.nodes().position({x:Math.round(j/2),y:Math.round(k/2)}),f.one("layoutstop",e.stop),f.trigger("layoutstop"),f.one("layoutstop",e.stop),void f.trigger("layoutstop");var l=this.system=arbor.ParticleSystem(e.repulsion,e.stiffness,e.friction,e.gravity,e.fps,e.dt,e.precision);this.system=l,e.liveUpdate&&e.fit&&f.reset();var m,n=250,o=!1,p=+new Date,q={init:function(){},redraw:function(){var b=l.energy();if(null!=e.stableEnergy&&null!=b&&b.n>0&&e.stableEnergy(b))return void l.stop();clearTimeout(m),m=setTimeout(t,n);var c=[];l.eachNode(function(a,b){var d=(a.name,a.data),e=d.element;if(null!=e){var f=e._private.position;e.locked()||e.grabbed()||(f.x=b.x,f.y=b.y,c.push(e))}});var d=+new Date-p>=16;e.liveUpdate&&c.length>0&&d&&(new a.Collection(f,c).rtrigger("position"),p=+new Date),o||(o=!0,f.one("layoutready",e.ready),f.trigger("layoutready"))}};l.renderer=q,l.screenSize(j,k),l.screenPadding(e.padding[0],e.padding[1],e.padding[2],e.padding[3]),l.screenStep(e.stepSize);var r=function(a){grabbed=this;var b=l.fromScreen(this.position()),c=arbor.Point(b.x,b.y);switch(this.scratch().arbor.p=c,a.type){case"grab":this.scratch().arbor.fixed=!0;break;case"dragstop":this.scratch().arbor.fixed=!1,this.scratch().arbor.tempMass=1e3}};g.bind("grab drag dragstop",r),g.each(function(a,d){var f=this._private.data.id,g=b(this,e.nodeMass),h=this._private.locked,i=c({x:d.position().x,y:d.position().y});d.locked()||(this.scratch().arbor=l.addNode(f,{element:this,mass:g,fixed:h,x:h?i.x:void 0,y:h?i.y:void 0}))}),h.each(function(){var a=(this.id(),this.source().id()),c=this.target().id(),d=b(this,e.edgeLength);this.scratch().arbor=l.addEdge(a,c,{length:d})});var s=g.filter(":grabbable");e.ungrabifyWhileSimulating&&s.ungrabify();var t=function(){function a(){e.liveUpdate||(e.fit&&f.reset(),f.nodes().rtrigger("position")),g.unbind("grab drag dragstop",r),e.ungrabifyWhileSimulating&&s.grabify(),f.one("layoutstop",e.stop),f.trigger("layoutstop")}window.isIE?d(function(){a()}):a()};l.start(),setTimeout(function(){l.stop()},e.maxSimulationTime)},b.prototype.stop=function(){null!=this.system&&system.stop()},a("layout","arbor",b)}(cytoscape),function(a){function b(b){this.options=a.util.extend({},c,b)}var c={fit:!0,ready:void 0,stop:void 0,rStepSize:10,padding:30,startAngle:1.5*Math.PI,counterclockwise:!1};b.prototype.run=function(){function a(){var a=0,b=k,c={x:i.x+o*Math.cos(a),y:i.y+o*Math.sin(a)},d={x:i.x+o*Math.cos(b),y:i.y+o*Math.sin(b)},e=Math.sqrt((d.x-c.x)*(d.x-c.x)+(d.y-c.y)*(d.y-c.y));return e}for(var b=this.options,c=b,d=b.cy,e=d.nodes(),f=(d.edges(),d.container()),g=f.clientWidth,h=f.clientHeight,i={x:g/2,y:h/2},j=c.startAngle,k=2*Math.PI/e.length,l=0,m=0;m<e.length;m++){var n=e[m];l=Math.max(n.outerWidth(),n.outerHeight())}for(var o=g/2-l;a()<l;)o+=c.rStepSize;var m=0;e.positions(function(){var a=o*Math.cos(j),b=o*Math.sin(j),d={x:i.x+a,y:i.y+b};return m++,j=c.counterclockwise?j-k:j+k,d}),b.fit&&d.fit(c.padding),d.one("layoutready",b.ready),d.trigger("layoutready"),d.one("layoutstop",b.stop),d.trigger("layoutstop")},b.prototype.stop=function(){},a("layout","circle",b)}(cytoscape),function(a){function b(b){this.options=a.util.extend({},c,b)}var c={fit:!0,ready:void 0,stop:void 0,directed:!0,padding:30,circle:!1,roots:void 0};b.prototype.run=function(){function b(){for(var a=0;a<p.length;a++)for(var b=p[a],c=0;c<b.length;c++){var d=b[c];d._private.scratch.BreadthFirstLayout={depth:a,index:c}}}function c(a){if(D[a.id()])return D[a.id()];for(var b=a._private.scratch.BreadthFirstLayout.depth,c=a.neighborhood().nodes(),d=0,e=0,f=0;f<c.length;f++){var g=c[f],h=(g.edgesWith(a),g._private.scratch.BreadthFirstLayout.index),i=g._private.scratch.BreadthFirstLayout.depth,j=p[i].length;(b>i||0===b)&&(d+=h/j,e++)}return e=Math.max(1,e),d/=e,0===e&&(d=void 0),D[a.id()]=d,d}var d,e=this.options,f=e,g=e.cy,h=g.nodes(),i=(g.edges(),g.container()),j=i.clientWidth,k=i.clientHeight;if(a.is.elementOrCollection(f.roots))d=f.roots;else if(a.is.array(f.roots)){for(var l=[],m=0;m<f.roots.length;m++){var n=f.roots[m],o=g.getElementById(n);d.push(o)}d=new a.Collection(g,l)}else d=h.roots();var p=[],q={},r={};d.bfs(function(a,b){var c=this[0];p[b]||(p[b]=[]),p[b].push(c),q[c.id()]=!0,r[c.id()]=b},f.directed);for(var s=[],m=0;m<h.length;m++){var o=h[m];q[o.id()]||s.push(o)}for(var t=3*s.length,u=0;0!==s.length&&t>u;){for(var v=s.shift(),w=v.neighborhood().nodes(),x=!1,m=0;m<w.length;m++){var y=r[w[m].id()];if(void 0!==y){p[y].push(v),x=!0;break}}x||s.push(v),u++}for(;0!==s.length;){for(var v=s.shift(),z=v.bfs(),x=!1,m=0;m<z.length;m++){var y=r[z[m].id()];if(void 0!==y){p[y].push(v),x=!0;break}}x||(0===p.length&&p.push([]),p[0].push(v))}b();for(var A=0,m=0;m<h.length;m++){var B=h[m].outerWidth(),C=h[m].outerHeight();A=Math.max(A,B,C)}A*=1.75;for(var D={},E=0;3>E;E++){for(var m=0;m<p.length;m++){var y=m;p[m]=p[m].sort(function(a,b){var d=c(a),e=c(b);return d-e})}b()}var F={x:j/2,y:k/2};h.positions(function(){var a=this[0],b=a._private.scratch.BreadthFirstLayout,c=b.depth,d=b.index,e=Math.max(j/(p[c].length+1),A),g=Math.max(k/(p.length+1),A),h=Math.min(j/2/p.length,k/2/p.length);if(h=Math.max(h,A),f.circle){var i=h*c+h-(p.length>0&&p[0].length<=3?h/2:0),l=2*Math.PI/p[c].length*d;return 0===c&&1===p[0].length&&(i=1),{x:F.x+i*Math.cos(l),y:F.y+i*Math.sin(l)}}return{x:(d+1)*e,y:(c+1)*g}}),e.fit&&g.fit(f.padding),g.one("layoutready",e.ready),g.trigger("layoutready"),g.one("layoutstop",e.stop),g.trigger("layoutstop")},b.prototype.stop=function(){},a("layout","breadthfirst",b)}(cytoscape);