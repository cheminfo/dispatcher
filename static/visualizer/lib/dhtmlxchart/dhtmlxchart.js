window.dhtmlx||(dhtmlx={}),dhtmlx.assert=function(a,b){a||dhtmlx.error(b)},dhtmlx.assert_enabled=function(){return!1},dhtmlx.assert_event=function(a,b){a._event_check||(a._event_check={},a._event_check_size={});for(var c in b){a._event_check[c.toLowerCase()]=b[c];var d=-1;for(var e in b[c])d++;a._event_check_size[c.toLowerCase()]=d}},dhtmlx.assert_method_info=function(a,b,c,d){for(var e=[],f=0;f<d.length;f++)e.push(d[f][0]+" : "+d[f][1]+"\n   "+d[f][2].describe()+(d[f][3]?"; optional":""));return a.name+"."+b+"\n"+c+"\n Arguments:\n - "+e.join("\n - ")},dhtmlx.assert_method=function(a,b){for(var c in b)dhtmlx.assert_method_process(a,c,b[c].descr,b[c].args,b[c].min||99,b[c].skip)},dhtmlx.assert_method_process=function(a,b,c,d,e,f){var g=a[b];f||(a[b]=function(){if(arguments.length!=d.length&&arguments.length<e)dhtmlx.log("warn","Incorrect count of parameters\n"+a[b].describe()+"\n\nExpecting "+d.length+" but have only "+arguments.length);else for(var c=0;c<d.length;c++)d[c][3]||d[c][2](arguments[c])||dhtmlx.log("warn","Incorrect method call\n"+a[b].describe()+"\n\nActual value of "+(c+1)+" parameter: {"+typeof arguments[c]+"} "+arguments[c]);return g.apply(this,arguments)}),a[b].describe=function(){return dhtmlx.assert_method_info(a,b,c,d)}},dhtmlx.assert_event_call=function(a,b,c){a._event_check&&(a._event_check[b]?dhtmlx.isNotDefined(c)?dhtmlx.log("warn","Event without parameters :"+b):a._event_check_size[b]!=c.length&&dhtmlx.log("warn","Incorrect event call, expected "+a._event_check_size[b]+" parameter(s), but have "+c.length+" parameter(s), for "+b+" event"):dhtmlx.log("warn","Not expected event call :"+b))},dhtmlx.assert_event_attach=function(a,b){a._event_check&&!a._event_check[b]&&dhtmlx.log("warn","Unknown event name: "+b)},dhtmlx.assert_property=function(a,b){a._settings_check||(a._settings_check={}),dhtmlx.extend(a._settings_check,b)},dhtmlx.assert_check=function(a,b){if("object"==typeof a)for(var c in a)dhtmlx.assert_settings(c,a[c],b)},dhtmlx.assert_settings=function(a,b,c){if(c=c||this._settings_check){if(!c[a])return dhtmlx.log("warn","Unknown propery: "+a);for(var d=!1,e=0;e<c[a].length;e++){var f=c[a][e];if("string"!=typeof f&&("function"==typeof f?d=d||f(b):"object"==typeof f&&"function"==typeof f[1]&&(d=d||f[1](b),d&&f[2]&&dhtmlx.assert_check(b,f[2])),d))break}d||dhtmlx.log("warn","Invalid configuration\n"+dhtmlx.assert_info(a,c)+"\nActual value: {"+typeof b+"} "+b)}},dhtmlx.assert_info=function(a,b){for(var c=b[a],d="",e=[],f=0;f<c.length;f++)"string"==typeof rule?d=c[f]:c[f].describe?e.push(c[f].describe()):c[f][1]&&c[f][1].describe&&e.push(c[f][1].describe());return"Property: "+a+", "+d+" \nExpected value: \n - "+e.join("\n - ")},dhtmlx.assert_enabled()&&(dhtmlx.assert_rule_color=function(a){return"string"!=typeof a?!1:0!==a.indexOf("#")?!1:""!==a.substr(1).replace(/[0-9A-F]/gi,"")?!1:!0},dhtmlx.assert_rule_color.describe=function(){return"{String} Value must start from # and contain hexadecimal code of color"},dhtmlx.assert_rule_template=function(a){return"function"==typeof a?!0:"string"==typeof a?!0:!1},dhtmlx.assert_rule_template.describe=function(){return"{Function},{String} Value must be a function which accepts data object and return text string, or a sting with optional template markers"},dhtmlx.assert_rule_boolean=function(a){return"boolean"==typeof a?!0:!1},dhtmlx.assert_rule_boolean.describe=function(){return"{Boolean} true or false"},dhtmlx.assert_rule_object=function(a){return"object"==typeof a?!0:!1},dhtmlx.assert_rule_object.describe=function(){return"{Object} Configuration object"},dhtmlx.assert_rule_string=function(a){return"string"==typeof a?!0:!1},dhtmlx.assert_rule_string.describe=function(){return"{String} Plain string"},dhtmlx.assert_rule_htmlpt=function(a){return!!dhtmlx.toNode(a)},dhtmlx.assert_rule_htmlpt.describe=function(){return"{Object},{String} HTML node or ID of HTML Node"},dhtmlx.assert_rule_notdocumented=function(){return!1},dhtmlx.assert_rule_notdocumented.describe=function(){return"This options wasn't documented"},dhtmlx.assert_rule_key=function(a){var b=function(b){return a[b]};return b.describe=function(){var b=[];for(var c in a)b.push(c);return"{String} can take one of next values: "+b.join(", ")},b},dhtmlx.assert_rule_dimension=function(a){return 1*a==a&&!isNaN(a)&&a>=0?!0:!1},dhtmlx.assert_rule_dimension.describe=function(){return"{Integer} value must be a positive number"},dhtmlx.assert_rule_number=function(a){return"number"==typeof a?!0:!1},dhtmlx.assert_rule_number.describe=function(){return"{Integer} value must be a number"},dhtmlx.assert_rule_function=function(a){return"function"==typeof a?!0:!1},dhtmlx.assert_rule_function.describe=function(){return"{Function} value must be a custom function"},dhtmlx.assert_rule_any=function(){return!0},dhtmlx.assert_rule_any.describe=function(){return"Any value"},dhtmlx.assert_rule_mix=function(a,b){var c=function(c){return a(c)||b(c)?!0:!1};return c.describe=function(){return a.describe()},c}),dhtmlx.version="3.0",dhtmlx.codebase="./",dhtmlx.copy=function(a){var b=dhtmlx.copy._function;return b.prototype=a,new b},dhtmlx.copy._function=function(){},dhtmlx.extend=function(a,b){for(var c in b)a[c]=b[c];return dhtmlx.assert_enabled()&&b._assert&&(a._assert(),a._assert=null),dhtmlx.assert(a,"Invalid nesting target"),dhtmlx.assert(b,"Invalid nesting source"),b._init&&a._init(),a},dhtmlx.proto_extend=function(){for(var a=arguments,b=a[0],c=[],d=a.length-1;d>0;d--){"function"==typeof a[d]&&(a[d]=a[d].prototype);for(var e in a[d])"_init"==e?c.push(a[d][e]):b[e]||(b[e]=a[d][e])}a[0]._init&&c.push(a[0]._init),b._init=function(){for(var a=0;a<c.length;a++)c[a].apply(this,arguments)},b.base=a[1];var f=function(a){this._init(a),this._parseSettings&&this._parseSettings(a,this.defaults)};return f.prototype=b,b=a=null,f},dhtmlx.bind=function(a,b){return function(){return a.apply(b,arguments)}},dhtmlx.require=function(a){dhtmlx._modules[a]||(dhtmlx.assert(dhtmlx.ajax,"load module is required"),dhtmlx.exec(dhtmlx.ajax().sync().get(dhtmlx.codebase+a).responseText),dhtmlx._modules[a]=!0)},dhtmlx._modules={},dhtmlx.exec=function(a){window.execScript?window.execScript(a):window.eval(a)},dhtmlx.methodPush=function(a,b){return function(){var c=!1;return c=a[b].apply(a,arguments)}},dhtmlx.isNotDefined=function(a){return"undefined"==typeof a},dhtmlx.delay=function(a,b,c,d){setTimeout(function(){var d=a.apply(b,c);return a=b=c=null,d},d||1)},dhtmlx.uid=function(){return this._seed||(this._seed=(new Date).valueOf()),this._seed++,this._seed},dhtmlx.toNode=function(a){return"string"==typeof a?document.getElementById(a):a},dhtmlx.toArray=function(a){return dhtmlx.extend(a||[],dhtmlx.PowerArray)},dhtmlx.toFunctor=function(str){return"string"==typeof str?eval(str):str},dhtmlx._events={},dhtmlx.event=function(a,b,c,d){a=dhtmlx.toNode(a);var e=dhtmlx.uid();return dhtmlx._events[e]=[a,b,c],d&&(c=dhtmlx.bind(c,d)),a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent&&a.attachEvent("on"+b,c),e},dhtmlx.eventRemove=function(a){if(a){dhtmlx.assert(this._events[a],"Removing non-existing event");var b=dhtmlx._events[a];b[0].removeEventListener?b[0].removeEventListener(b[1],b[2],!1):b[0].detachEvent&&b[0].detachEvent("on"+b[1],b[2]),delete this._events[a]}},dhtmlx.log=function(a,b,c){window.console&&console.log&&(a=a.toLowerCase(),window.console[a]?window.console[a](b||"unknown error"):window.console.log(a+": "+b),c&&window.console.log(c))},dhtmlx.log_full_time=function(a){dhtmlx._start_time_log=new Date,dhtmlx.log("Info","Timing start ["+a+"]"),window.setTimeout(function(){var b=new Date;dhtmlx.log("Info","Timing end ["+a+"]:"+(b.valueOf()-dhtmlx._start_time_log.valueOf())/1e3+"s")},1)},dhtmlx.log_time=function(a){var b="_start_time_log"+a;if(dhtmlx[b]){var c=new Date;dhtmlx.log("Info","Timing end ["+a+"]:"+(c.valueOf()-dhtmlx[b].valueOf())/1e3+"s"),dhtmlx[b]=null}else dhtmlx[b]=new Date,dhtmlx.log("Info","Timing start ["+a+"]")},dhtmlx.error=function(a,b){dhtmlx.log("error",a,b)},dhtmlx.EventSystem={_init:function(){this._events={},this._handlers={},this._map={}},block:function(){this._events._block=!0},unblock:function(){this._events._block=!1},mapEvent:function(a){dhtmlx.extend(this._map,a)},callEvent:function(a,b){if(this._events._block)return!0;a=a.toLowerCase(),dhtmlx.assert_event_call(this,a,b);var c=this._events[a.toLowerCase()],d=!0;if(dhtmlx.debug&&dhtmlx.log("info","["+this.name+"] event:"+a,b),c)for(var e=0;e<c.length;e++)c[e].apply(this,b||[])===!1&&(d=!1);return this._map[a]&&!this._map[a].callEvent(a,b)&&(d=!1),d},attachEvent:function(a,b,c){a=a.toLowerCase(),dhtmlx.assert_event_attach(this,a),c=c||dhtmlx.uid(),b=dhtmlx.toFunctor(b);var d=this._events[a]||dhtmlx.toArray();return d.push(b),this._events[a]=d,this._handlers[c]={f:b,t:a},c},detachEvent:function(a){if(this._handlers[a]){var b=this._handlers[a].t,c=this._handlers[a].f,d=this._events[b];d.remove(c),delete this._handlers[a]}}},dhtmlx.PowerArray={removeAt:function(a,b){a>=0&&this.splice(a,b||1)},remove:function(a){this.removeAt(this.find(a))},insertAt:function(a,b){if(b||0===b){var c=this.splice(b,this.length-b);this[b]=a,this.push.apply(this,c)}else this.push(a)},find:function(a){for(i=0;i<this.length;i++)if(a==this[i])return i;return-1},each:function(a,b){for(var c=0;c<this.length;c++)a.call(b||this,this[c])},map:function(a,b){for(var c=0;c<this.length;c++)this[c]=a.call(b||this,this[c]);return this}},dhtmlx.env={},-1!=navigator.userAgent.indexOf("Opera")?dhtmlx._isOpera=!0:(dhtmlx._isIE=!!document.all,dhtmlx._isFF=!document.all,dhtmlx._isWebKit=-1!=navigator.userAgent.indexOf("KHTML"),-1!=navigator.appVersion.indexOf("MSIE 8.0")&&"BackCompat"!=document.compatMode&&(dhtmlx._isIE=8),-1!=navigator.appVersion.indexOf("MSIE 9.0")&&"BackCompat"!=document.compatMode&&(dhtmlx._isIE=9)),dhtmlx.env={},function(){dhtmlx.env.transform=!1,dhtmlx.env.transition=!1;var a={};a.names=["transform","transition"],a.transform=["transform","WebkitTransform","MozTransform","oTransform","msTransform"],a.transition=["transition","WebkitTransition","MozTransition","oTransition"];for(var b=document.createElement("DIV"),c=0;c<a.names.length;c++)for(;p=a[a.names[c]].pop();)"undefined"!=typeof b.style[p]&&(dhtmlx.env[a.names[c]]=!0)}(),dhtmlx.env.transform_prefix=function(){var a;return dhtmlx._isOpera?a="-o-":(a="",dhtmlx._isFF&&(a="-moz-"),dhtmlx._isWebKit&&(a="-webkit-")),a}(),dhtmlx.env.svg=function(){return document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")}(),dhtmlx.zIndex={drag:1e4},dhtmlx.html={create:function(a,b,c){b=b||{};var d=document.createElement(a);for(var e in b)d.setAttribute(e,b[e]);return b.style&&(d.style.cssText=b.style),b["class"]&&(d.className=b["class"]),c&&(d.innerHTML=c),d},getValue:function(a){return a=dhtmlx.toNode(a),a?dhtmlx.isNotDefined(a.value)?a.innerHTML:a.value:""},remove:function(a){if(a instanceof Array)for(var b=0;b<a.length;b++)this.remove(a[b]);else a&&a.parentNode&&a.parentNode.removeChild(a)},insertBefore:function(a,b,c){a&&(b?b.parentNode.insertBefore(a,b):c.appendChild(a))},locate:function(a,b){a=a||event;for(var c=a.target||a.srcElement;c;){if(c.getAttribute){var d=c.getAttribute(b);if(d)return d}c=c.parentNode}return null},offset:function(a){if(a.getBoundingClientRect){var b=a.getBoundingClientRect(),c=document.body,d=document.documentElement,e=window.pageYOffset||d.scrollTop||c.scrollTop,f=window.pageXOffset||d.scrollLeft||c.scrollLeft,g=d.clientTop||c.clientTop||0,h=d.clientLeft||c.clientLeft||0,i=b.top+e-g,j=b.left+f-h;return{y:Math.round(i),x:Math.round(j)}}for(var i=0,j=0;a;)i+=parseInt(a.offsetTop,10),j+=parseInt(a.offsetLeft,10),a=a.offsetParent;return{y:i,x:j}},pos:function(a){if(a=a||event,a.pageX||a.pageY)return{x:a.pageX,y:a.pageY};var b=dhtmlx._isIE&&"BackCompat"!=document.compatMode?document.documentElement:document.body;return{x:a.clientX+b.scrollLeft-b.clientLeft,y:a.clientY+b.scrollTop-b.clientTop}},preventEvent:function(a){a&&a.preventDefault&&a.preventDefault(),dhtmlx.html.stopEvent(a)},stopEvent:function(a){return(a||event).cancelBubble=!0,!1},addCss:function(a,b){a.className+=" "+b},removeCss:function(a,b){a.className=a.className.replace(RegExp(b,"g"),"")}},function(){var a=document.getElementsByTagName("SCRIPT");dhtmlx.assert(a.length,"Can't locate codebase"),a.length&&(a=(a[a.length-1].getAttribute("src")||"").split("/"),a.splice(a.length-1,1),dhtmlx.codebase=a.slice(0,a.length).join("/")+"/")}(),dhtmlx.ui||(dhtmlx.ui={}),dhtmlx.Date={Locale:{month_full:["January","February","March","April","May","June","July","August","September","October","November","December"],month_short:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],day_full:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],day_short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},date_part:function(a){return a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0),a},time_part:function(a){return(a.valueOf()/1e3-60*a.getTimezoneOffset())%86400},week_start:function(a){var b=a.getDay();return this.config.start_on_monday&&(0===b?b=6:b--),this.date_part(this.add(a,-1*b,"day"))},month_start:function(a){return a.setDate(1),this.date_part(a)},year_start:function(a){return a.setMonth(0),this.month_start(a)},day_start:function(a){return this.date_part(a)},add:function(a,b,c){var d=new Date(a.valueOf());switch(c){case"day":d.setDate(d.getDate()+b);break;case"week":d.setDate(d.getDate()+7*b);break;case"month":d.setMonth(d.getMonth()+b);break;case"year":d.setYear(d.getFullYear()+b);break;case"hour":d.setHours(d.getHours()+b);break;case"minute":d.setMinutes(d.getMinutes()+b);break;default:return dhtmlx.Date["add_"+c](a,b,c)}return d},to_fixed:function(a){return 10>a?"0"+a:a},copy:function(a){return new Date(a.valueOf())},date_to_str:function(a,b){return a=a.replace(/%[a-zA-Z]/g,function(a){switch(a){case"%d":return'"+dhtmlx.Date.to_fixed(date.getDate())+"';case"%m":return'"+dhtmlx.Date.to_fixed((date.getMonth()+1))+"';case"%j":return'"+date.getDate()+"';case"%n":return'"+(date.getMonth()+1)+"';case"%y":return'"+dhtmlx.Date.to_fixed(date.getFullYear()%100)+"';case"%Y":return'"+date.getFullYear()+"';case"%D":return'"+dhtmlx.Date.Locale.day_short[date.getDay()]+"';case"%l":return'"+dhtmlx.Date.Locale.day_full[date.getDay()]+"';case"%M":return'"+dhtmlx.Date.Locale.month_short[date.getMonth()]+"';case"%F":return'"+dhtmlx.Date.Locale.month_full[date.getMonth()]+"';case"%h":return'"+dhtmlx.Date.to_fixed((date.getHours()+11)%12+1)+"';case"%g":return'"+((date.getHours()+11)%12+1)+"';case"%G":return'"+date.getHours()+"';case"%H":return'"+dhtmlx.Date.to_fixed(date.getHours())+"';case"%i":return'"+dhtmlx.Date.to_fixed(date.getMinutes())+"';case"%a":return'"+(date.getHours()>11?"pm":"am")+"';case"%A":return'"+(date.getHours()>11?"PM":"AM")+"';case"%s":return'"+dhtmlx.Date.to_fixed(date.getSeconds())+"';case"%W":return'"+dhtmlx.Date.to_fixed(dhtmlx.Date.getISOWeek(date))+"';default:return a}}),b&&(a=a.replace(/date\.get/g,"date.getUTC")),new Function("date",'return "'+a+'";')},str_to_date:function(a,b){for(var c="var temp=date.split(/[^0-9a-zA-Z]+/g);",d=a.match(/%[a-zA-Z]/g),e=0;e<d.length;e++)switch(d[e]){case"%j":case"%d":c+="set[2]=temp["+e+"]||1;";break;case"%n":case"%m":c+="set[1]=(temp["+e+"]||1)-1;";break;case"%y":c+="set[0]=temp["+e+"]*1+(temp["+e+"]>50?1900:2000);";break;case"%g":case"%G":case"%h":case"%H":c+="set[3]=temp["+e+"]||0;";break;case"%i":c+="set[4]=temp["+e+"]||0;";break;case"%Y":c+="set[0]=temp["+e+"]||0;";break;case"%a":case"%A":c+="set[3]=set[3]%12+((temp["+e+"]||'').toLowerCase()=='am'?0:12);";break;case"%s":c+="set[5]=temp["+e+"]||0;"}var f="set[0],set[1],set[2],set[3],set[4],set[5]";return b&&(f=" Date.UTC("+f+")"),new Function("date","var set=[0,0,1,0,0,0]; "+c+" return new Date("+f+");")},getISOWeek:function(a){if(!a)return!1;var b=a.getDay();0===b&&(b=7);var c=new Date(a.valueOf());c.setDate(a.getDate()+(4-b));var d=c.getFullYear(),e=Math.floor((c.getTime()-new Date(d,0,1).getTime())/864e5),f=1+Math.floor(e/7);return f},getUTCISOWeek:function(a){return this.getISOWeek(a)}},dhtmlx.Destruction={_init:function(){dhtmlx.destructors.push(this)},destructor:function(){this.destructor=function(){},this._htmlmap=null,this._htmlrows=null,this._html&&document.body.appendChild(this._html),this._html=null,this._obj&&(this._obj.innerHTML="",this._obj._htmlmap=null),this._obj=this._dataobj=null,this.data=null,this._events=this._handlers={}}},dhtmlx.destructors=[],dhtmlx.event(window,"unload",function(){if(dhtmlx.destructors){for(var a=0;a<dhtmlx.destructors.length;a++)dhtmlx.destructors[a].destructor();dhtmlx.destructors=[]}for(var b in dhtmlx._events){var c=dhtmlx._events[b];c[0].removeEventListener?c[0].removeEventListener(c[1],c[2],!1):c[0].detachEvent&&c[0].detachEvent("on"+c[1],c[2]),delete dhtmlx._events[b]}}),dhtmlx.math={},dhtmlx.math._toHex=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F"],dhtmlx.math.toHex=function(a,b){for(a=parseInt(a,10),str="";a>0;)str=this._toHex[a%16]+str,a=Math.floor(a/16);for(;str.length<b;)str="0"+str;return str},dhtmlx.math.hexToDec=function(a){return parseInt(a,16)},dhtmlx.math.toRgb=function(a){var b,c,d,e;return"string"!=typeof a?(b=a[0],c=a[1],d=a[2]):-1!=a.indexOf("rgb")?(e=a.substr(a.indexOf("(")+1,a.lastIndexOf(")")-a.indexOf("(")-1).split(","),b=e[0],c=e[1],d=e[2]):("#"==a.substr(0,1)&&(a=a.substr(1)),b=this.hexToDec(a.substr(0,2)),c=this.hexToDec(a.substr(2,2)),d=this.hexToDec(a.substr(4,2))),b=parseInt(b,10)||0,c=parseInt(c,10)||0,d=parseInt(d,10)||0,(0>b||b>255)&&(b=0),(0>c||c>255)&&(c=0),(0>d||d>255)&&(d=0),[b,c,d]},dhtmlx.math.hsvToRgb=function(a,b,c){var d,e,f,g,h,i,j,k;switch(d=Math.floor(a/60)%6,e=a/60-d,f=c*(1-b),g=c*(1-e*b),h=c*(1-(1-e)*b),i=0,j=0,k=0,d){case 0:i=c,j=h,k=f;break;case 1:i=g,j=c,k=f;break;case 2:i=f,j=c,k=h;break;case 3:i=f,j=g,k=c;break;case 4:i=h,j=f,k=c;break;case 5:i=c,j=f,k=g}return i=Math.floor(255*i),j=Math.floor(255*j),k=Math.floor(255*k),[i,j,k]},dhtmlx.math.rgbToHsv=function(a,b,c){var d,e,f,g,h,i,j,k;d=a/255,e=b/255,f=c/255;var g=Math.min(d,e,f),h=Math.max(d,e,f);return j=0,i=0==h?0:1-g/h,k=h,h==g?j=0:h==d&&e>=f?j=60*(e-f)/(h-g)+0:h==d&&f>e?j=60*(e-f)/(h-g)+360:h==e?j=60*(f-d)/(h-g)+120:h==f&&(j=60*(d-e)/(h-g)+240),[j,i,k]},dhtmlx.presets||(dhtmlx.presets={}),dhtmlx.presets.chart={simple:{item:{borderColor:"#ffffff",color:"#2b7100",shadow:!1,borderWidth:2},line:{color:"#8ecf03",width:2}},plot:{color:"#1293f8",item:{borderColor:"#636363",borderWidth:1,color:"#ffffff",type:"r",shadow:!1},line:{color:"#1293f8",width:2}},diamond:{color:"#b64040",item:{borderColor:"#b64040",color:"#b64040",type:"d",radius:3,shadow:!0},line:{color:"#ff9000",width:2}},point:{color:"#fe5916",disableLines:!0,fill:!1,disableItems:!1,item:{color:"#feb916",borderColor:"#fe5916",radius:2,borderWidth:1,type:"r"},alpha:1},line:{line:{color:"#3399ff",width:2},item:{color:"#ffffff",borderColor:"#3399ff",radius:2,borderWidth:2,type:"d"},fill:!1,disableItems:!1,disableLines:!1,alpha:1},area:{fill:"#3399ff",line:{color:"#3399ff",width:1},disableItems:!0,alpha:.2,disableLines:!1},round:{item:{radius:3,borderColor:"#3f83ff",borderWidth:1,color:"#3f83ff",type:"r",shadow:!1,alpha:.6}},square:{item:{radius:3,borderColor:"#447900",borderWidth:2,color:"#69ba00",type:"s",shadow:!1,alpha:1}},column:{color:"RAINBOW",gradient:!1,width:45,radius:0,alpha:1,border:!0},stick:{width:5,gradient:!1,color:"#67b5c9",radius:2,alpha:1,border:!1},alpha:{color:"#b9a8f9",width:70,gradient:"falling",radius:0,alpha:.5,border:!0}},dhtmlx.ui.Map=function(a){this.name="Map",this._id="map_"+dhtmlx.uid(),this._key=a,this._map=[]},dhtmlx.ui.Map.prototype={addRect:function(a,b,c){this._createMapArea(a,"RECT",b,c)},addPoly:function(a,b,c){this._createMapArea(a,"POLY",b,c)},_createMapArea:function(a,b,c,d){var e="";4==arguments.length&&(e="userdata='"+d+"'"),this._map.push("<area "+this._key+"='"+a+"' shape='"+b+"' coords='"+c.join()+"' "+e+"></area>")},addSector:function(a,b,c,d,e,f,g,h){var i=[];i.push(d),i.push(Math.floor(e*g));for(var j=b;c>j;j+=Math.PI/18)i.push(Math.floor(d+f*Math.cos(j))),i.push(Math.floor((e+f*Math.sin(j))*g));return i.push(Math.floor(d+f*Math.cos(c))),i.push(Math.floor((e+f*Math.sin(c))*g)),i.push(d),i.push(Math.floor(e*g)),this.addPoly(a,i,h)},render:function(a){var b=dhtmlx.html.create("DIV");b.style.cssText="position:absolute; width:100%; height:100%; top:0px; left:0px;",a.appendChild(b);var c=dhtmlx._isIE?"":"src='data:image/gif;base64,R0lGODlhEgASAIAAAP///////yH5BAUUAAEALAAAAAASABIAAAIPjI+py+0Po5y02ouz3pwXADs='";b.innerHTML="<map id='"+this._id+"' name='"+this._id+"'>"+this._map.join("\n")+"</map><img "+c+" class='dhx_map_img' usemap='#"+this._id+"'>",a._htmlmap=b,this._map=[]}},dhtmlx.chart={},dhtmlx.chart.scatter={pvt_render_scatter:function(a,b,c,d,e,f){if(!this._settings.xValue)return dhtmlx.log("warning","Undefined propery: xValue");var g=this._getLimits(),h=this._getLimits("h","xValue");e||(this.canvases.x=new dhtmlx.ui.Canvas(this._obj,"axis_x"),this.canvases.y=new dhtmlx.ui.Canvas(this._obj,"axis_y"),this._drawYAxis(this.canvases.y.getCanvas(),b,c,d,g.min,g.max),this._drawHXAxis(this.canvases.x.getCanvas(),b,c,d,h.min,h.max)),g={min:this._settings.yAxis.start,max:this._settings.yAxis.end},h={min:this._settings.xAxis.start,max:this._settings.xAxis.end};var i=this._getScatterParams(a,b,c,d,h,g);this._mapStart=c;for(var j=0;j<b.length;j++)this._drawScatterItem(a,f,c,d,i,h,g,b[j],e)},_getScatterParams:function(a,b,c,d,e,f){var g={};return g.totalHeight=d.y-c.y,g.totalWidth=d.x-c.x,this._calcScatterUnit(g,e.min,e.max,g.totalWidth,"X"),this._calcScatterUnit(g,f.min,f.max,g.totalHeight,"Y"),g},_drawScatterItem:function(a,b,c,d,e,f,g,h,i){var j=this._calculateScatterItemPosition(e,d,c,f,h,"X"),k=this._calculateScatterItemPosition(e,c,d,g,h,"Y");this._drawItem(a,j,k,h,this._settings.label.call(this,h),i,b)},_calculateScatterItemPosition:function(a,b,c,d,e,f){var g=this._settings["X"==f?"xValue":"value"].call(this,e),h=a["valueFactor"+f],i=(parseFloat(g||0)-d.min)*h,j=a["unit"+f],k=c[f.toLowerCase()]-("X"==f?-1:1)*Math.floor(j*i);return 0>i&&(k=c[f.toLowerCase()]),g>d.max&&(k=b[f.toLowerCase()]),g<d.min&&(k=c[f.toLowerCase()]),k},_calcScatterUnit:function(a,b,c,d,e){var f=this._getRelativeValue(b,c);e=e||"",a["relValue"+e]=f[0],a["valueFactor"+e]=f[1],a["unit"+e]=a["relValue"+e]?d/a["relValue"+e]:10}},dhtmlx.chart.radar={pvt_render_radar:function(a,b,c,d,e,f){this._renderRadarChart(a,b,c,d,e,f)},_renderRadarChart:function(a,b,c,d,e,f){if(b.length){for(var g=this._getPieParameters(c,d),h=this._settings.radius?this._settings.radius:g.radius,i=this._settings.x?this._settings.x:g.x,j=this._settings.y?this._settings.y:g.y,k=[],l=0;l<b.length;l++)k.push(1);var m=this._getRatios(k,b.length);this._mapStart=c,e||this._drawRadarAxises(m,i,j,h,b),this._drawRadarData(a,m,i,j,h,b,e,f)}},_drawRadarData:function(a,b,c,d,e,f,g,h){var i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A;for(k=this._settings,m=k.yAxis.start,n=k.yAxis.end,A=this._getRelativeValue(m,n),t=A[0],z=t?e/t:e/2,y=A[1],u=-Math.PI/2,i=j=u,q=[],p=0,l=0;l<f.length;l++)x?w=x:(v=k.value(f[l]),w=(parseFloat(v||0)-m)*y),r=Math.floor(z*w),v=k.value(l!=f.length-1?f[l+1]:f[0]),x=(parseFloat(v||0)-m)*y,s=Math.floor(z*x),i=j,j=l!=f.length-1?u+b[l]-1e-4:u,o=p||this._getPositionByAngle(i,c,d,r),p=this._getPositionByAngle(j,c,d,s),q.push(o);k.fill&&this._fillRadarChart(a,q,f),k.disableLines||this._strokeRadarChart(a,q,f),k.disableItems||this._drawRadarItemMarkers(a,q,f,g,h),q=null},_drawRadarItemMarkers:function(a,b,c,d,e){for(var f=0;f<b.length;f++)this._drawItem(a,b[f].x,b[f].y,c[f],this._settings.label.call(this,c),d,e)},_fillRadarChart:function(a,b,c){var d,e;a.globalAlpha=this._settings.alpha.call(this,{}),a.beginPath();for(var f=0;f<b.length;f++)a.fillStyle=this._settings.fill.call(this,c[f]),d=b[f],e=b[f+1]||b[0],f||a.moveTo(d.x,d.y),a.lineTo(e.x,e.y);a.fill(),a.globalAlpha=1},_strokeRadarChart:function(a,b,c){for(var d,e,f=0;f<b.length;f++)d=b[f],e=b[f+1]||b[0],this._drawLine(a,d.x,d.y,e.x,e.y,this._settings.line.color.call(this,c[f]),this._settings.line.width)},_drawRadarAxises:function(a,b,c,d,e){var f=this._settings.yAxis,g=this._settings.xAxis,h=f.start,i=f.end,j=f.step,k={},l=this._configYAxis;if("undefined"==typeof l.step||"undefined"==typeof l.start||"undefined"==typeof l.end){var m=this._getLimits();k=this._calculateScale(m.min,m.max),h=k.start,i=k.end,j=k.step,f.end=i,f.start=h}var n,o,p,q,r,s=[],t=0,u=d*j/(i-h);1>j&&(q=Math.min(this._log10(j),0>=h?0:this._log10(h)),r=Math.pow(10,-q));var v=[];this.canvases.scale=new dhtmlx.ui.Canvas(this._obj,"radar_scale");var w=this.canvases.scale.getCanvas();for(n=i;n>=h;n-=j){k.fixNum&&(n=parseFloat(new Number(n).toFixed(k.fixNum))),s.push(Math.floor(t*u)+.5),r&&(n=Math.round(n*r)/r);var x=c-d+s[s.length-1];if(this.canvases.scale.renderTextAt("middle","left",b,x,f.template(n.toString()),"dhx_axis_item_y dhx_radar"),a.length<2)return void this._drawScaleSector(w,"arc",b,c,d-s[s.length-1],-Math.PI/2,3*Math.PI/2,n);var y,z=-Math.PI/2,A=z;for(o=0;o<a.length;o++)n==i&&v.push(A),y=z+a[o]-1e-4,this._drawScaleSector(w,l.lineShape||"line",b,c,d-s[s.length-1],A,y,n,o,e[n]),A=y;t++}for(n=0;n<v.length;n++)p=this._getPositionByAngle(v[n],b,c,d),g.lines.call(this,e[n],n)&&this._drawLine(w,b,c,p.x,p.y,g?g.lineColor.call(this,e[n]):"#cfcfcf",1),this._drawRadarScaleLabel(w,b,c,d,v[n],g?g.template.call(this,e[n]):"&nbsp;")},_drawScaleSector:function(a,b,c,d,e,f,g,h,i){var j,k;if(0>e)return!1;j=this._getPositionByAngle(f,c,d,e),k=this._getPositionByAngle(g,c,d,e);var l=this._settings.yAxis;l.bg&&(a.beginPath(),a.moveTo(c,d),"arc"==b?a.arc(c,d,e,f,g,!1):(a.lineTo(j.x,j.y),a.lineTo(k.x,k.y)),a.fillStyle=l.bg(h,i),a.moveTo(c,d),a.fill(),a.closePath()),l.lines.call(this,h)&&(a.lineWidth=1,a.beginPath(),"arc"==b?a.arc(c,d,e,f,g,!1):(a.moveTo(j.x,j.y),a.lineTo(k.x,k.y)),a.strokeStyle=l.lineColor.call(this,h),a.stroke())},_drawRadarScaleLabel:function(a,b,c,d,e,f){var g=this.canvases.scale.renderText(0,0,f,"dhx_axis_radar_title",1),h=g.scrollWidth,i=g.offsetHeight,j=.001,k=this._getPositionByAngle(e,b,c,d+5),l=0,m=0;(0>e||e>Math.PI)&&(m=-i),e>Math.PI/2&&(l=-h),Math.abs(e+Math.PI/2)<j||Math.abs(e-Math.PI/2)<j?l=-h/2:(Math.abs(e)<j||Math.abs(e-Math.PI)<j)&&(m=-i/2),g.style.top=k.y+m+"px",g.style.left=k.x+l+"px",g.style.width=h+"px",g.style.whiteSpace="nowrap"}},dhtmlx.chart.area={pvt_render_area:function(a,b,c,d,e,f){var g,h,i,j,k,l,m,n,o;if(l=this._calculateLineParams(a,b,c,d,e),h=this._settings,j=h.eventRadius||Math.floor(l.cellWidth/2),b.length){for(m=[],n=h.offset?c.x+.5*l.cellWidth:c.x,i=0;i<b.length;i++)k=b[i],i?n+=l.cellWidth:m.push([n,d.y]),o=this._getPointY(k,c,d,l),o?(m.push([n,o]),f.addRect(k.id,[n-j-c.x,o-j-c.y,n+j-c.x,o+j-c.y],e),h.yAxis||(g=h.offset||i!=b.length-1?"center":"left",this.canvases[e].renderTextAt(!1,g,n,o-h.labelOffset,h.label(k)))):i||m.push([n,d.y]);m.push([n,d.y]),m.push([m[0][0],d.y]),a.globalAlpha=this._settings.alpha.call(this,b[0]),a.fillStyle=this._settings.color.call(this,b[0]),a.beginPath(),this._path(a,m),a.fill(),h.border&&(a.lineWidth=h.borderWidth||1,h.borderColor?a.strokeStyle=h.borderColor.call(this,b[0]):this._setBorderStyles(a,a.fillStyle),a.beginPath(),this._path(a,m),a.stroke()),a.lineWidth=1,a.globalAlpha=1}}},dhtmlx.chart.stackedArea={pvt_render_stackedArea:function(a,b,c,d,e,f){var g,h,i,j,k,l,m,n,o,p,q,r,s,t;if(p=this._calculateLineParams(a,b,c,d,e),j=this._settings,n=j.eventRadius||Math.floor(p.cellWidth/2),b.length){q=[],t=[],r=j.offset?c.x+.5*p.cellWidth:c.x;var u=function(a,c){return e?b[a].$startY?c-d.y+b[a].$startY:0:c},v=function(a,b,c){var d=(c.y-b.y)/(c.x-b.x);return d*a+b.y-d*b.x};for(k=0;k<b.length;k++)o=b[k],k?r+=p.cellWidth:(s=u(k,d.y),q.push([r,s])),s=u(k,this._getPointY(o,c,d,p)),t.push(isNaN(s)&&!k?b[k].$startY||d.y:s),s&&(q.push([r,s]),f.addRect(o.id,[r-n-c.x,s-n-c.y,r+n-c.x,s+n-c.y],e),j.yAxis||(i=!j.offset&&m?"left":"center",this.canvases[e].renderTextAt(!1,i,r,s-j.labelOffset,j.label(o))));if(q.push([r,u(k-1,d.y)]),e)for(k=b.length-2;k>0;k--)r-=p.cellWidth,s=b[k].$startY,s&&q.push([r,s]);for(q.push([q[0][0],q[0][1]]),a.globalAlpha=this._settings.alpha.call(this,b[0]),a.fillStyle=this._settings.color.call(this,b[0]),a.beginPath(),this._path(a,q),a.fill(),k=0;k<b.length;k++){if(s=t[k],!s)for(k==b.length-1&&(s=b[k].$startY),l=k+1;l<b.length;l++)if(t[l]){g={x:c.x,y:t[0]},h={x:c.x+p.cellWidth*l,y:t[l]},s=v(c.x+p.cellWidth*k,g,h);break}b[k].$startY=s}}}},dhtmlx.chart.spline={pvt_render_spline:function(a,b,c,d,e,f){var g,h,i,j,k,l,m,n,o,p,q,r,s;if(k=this._calculateLineParams(a,b,c,d,e),g=this._settings,this._mapStart=c,i=[],b.length){for(n=g.offset?c.x+.5*k.cellWidth:c.x,h=0;h<b.length;h++)q=this._getPointY(b[h],c,d,k),q&&(m=h?k.cellWidth*h-.5+n:n,i.push({x:m,y:q,index:h}));for(l=this._getSplineParameters(i),h=0;h<i.length;h++){if(o=i[h].x,r=i[h].y,h<i.length-1){for(p=i[h+1].x,s=i[h+1].y,j=o;p>j;j++){var t=this._getSplineYPoint(j,o,h,l.a,l.b,l.c,l.d);t<c.y&&(t=c.y),t>d.y&&(t=d.y);var u=this._getSplineYPoint(j+1,o,h,l.a,l.b,l.c,l.d);u<c.y&&(u=c.y),u>d.y&&(u=d.y),this._drawLine(a,j,t,j+1,u,g.line.color(b[h]),g.line.width)}this._drawLine(a,p-1,this._getSplineYPoint(j,o,h,l.a,l.b,l.c,l.d),p,s,g.line.color(b[h]),g.line.width)}this._drawItem(a,o,r,b[i[h].index],g.label(b[i[h].index]),e,f)}}},_getSplineParameters:function(a){var b,c,d,e,f,g,h,i,j=[],k=[],l=a.length;for(b=0;l-1>b;b++)j[b]=a[b+1].x-a[b].x,k[b]=(a[b+1].y-a[b].y)/j[b];for(c=[],d=[],c[0]=0,c[1]=2*(j[0]+j[1]),d[0]=0,d[1]=6*(k[1]-k[0]),b=2;l-1>b;b++)c[b]=2*(j[b-1]+j[b])-j[b-1]*j[b-1]/c[b-1],d[b]=6*(k[b]-k[b-1])-j[b-1]*d[b-1]/c[b-1];for(e=[],e[l-1]=e[0]=0,b=l-2;b>=1;b--)e[b]=(d[b]-j[b]*e[b+1])/c[b];for(f=[],g=[],h=[],i=[],b=0;l-1>b;b++)f[b]=a[b].y,g[b]=-j[b]*e[b+1]/6-j[b]*e[b]/3+(a[b+1].y-a[b].y)/j[b],h[b]=e[b]/2,i[b]=(e[b+1]-e[b])/(6*j[b]);return{a:f,b:g,c:h,d:i}},_getSplineYPoint:function(a,b,c,d,e,f,g){return d[c]+(a-b)*(e[c]+(a-b)*(f[c]+(a-b)*g[c]))}},dhtmlx.chart.barH={pvt_render_barH:function(a,b,c,d,e,f){var g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A;for(i=(d.y-c.y)/b.length,m=this._getLimits("h"),n=m.max,o=m.min,v=d.x-c.x,A=!!this._settings.yAxis,e||this._drawHScales(a,b,c,d,o,n,i),A&&(n=parseFloat(this._settings.xAxis.end),o=parseFloat(this._settings.xAxis.start)),t=this._getRelativeValue(o,n),r=t[0],q=t[1],x=r?v/r:10,A||(u=10,x=r?(v-u)/r:10),h=parseInt(this._settings.width,10),h*this._series.length+4>i&&(h=i/this._series.length-4),g=Math.floor((i-h*this._series.length)/2),s="undefined"!=typeof this._settings.radius?parseInt(this._settings.radius,10):Math.round(h/5),p=!1,k=this._settings.gradient,k&&"function"!=typeof k?(p=k,k=!1):k&&(k=a.createLinearGradient(c.x,c.y,d.x,c.y),this._settings.gradient(k)),A||this._drawLine(a,c.x-.5,c.y,c.x-.5,d.y,"#000000",1),l=0;l<b.length;l++)if(w=parseFloat(this._settings.value(b[l]||0)),w>n&&(w=n),w-=o,w*=q,y=c.x,z=c.y+g+l*i+(h+1)*e,0>w&&"auto"==this._settings.origin||this._settings.xAxis&&0===w&&!("auto"!=this._settings.origin&&this._settings.origin>o))this.canvases[e].renderTextAt("middle","right",y+10,z+h/2+g,this._settings.label(b[l]));else{0>w&&"auto"!=this._settings.origin&&this._settings.origin>o&&(w=0),A||(w+=u/x),j=k||this._settings.color.call(this,b[l]),this._settings.border&&this._drawBarHBorder(a,y,z,h,o,s,x,w,j),a.globalAlpha=this._settings.alpha.call(this,b[l]);var B=this._drawBarH(a,d,y,z,h,o,s,x,w,j,k,p);0!=p&&this._drawBarHGradient(a,y,z,h,o,s,x,w,j,p),a.globalAlpha=1,B[3]==z?(this.canvases[e].renderTextAt("middle","left",B[0]-5,B[3]+Math.floor(h/2),this._settings.label(b[l])),f.addRect(b[l].id,[B[0]-c.x,B[3]-c.y,B[2]-c.x,B[3]+h-c.y],e)):(this.canvases[e].renderTextAt("middle",!1,B[2]+5,B[1]+Math.floor(h/2),this._settings.label(b[l])),f.addRect(b[l].id,[B[0]-c.x,z-c.y,B[2]-c.x,B[3]-c.y],e))}},_setBarHPoints:function(a,b,c,d,e,f,g,h,i){var j=0;if(e>f*g){var k=(e-f*g)/e;j=-Math.asin(k)+Math.PI/2}a.moveTo(b,c+h);var l=b+f*g-e-(e?0:h);f*g>e&&a.lineTo(l,c+h);var m=c+e;e&&e>0&&a.arc(l,m,e-h,-Math.PI/2+j,0,!1);
var n=c+d-e-(e?0:h),o=l+e-(e?h:0);a.lineTo(o,n),e&&e>0&&a.arc(l,n,e-h,0,Math.PI/2-j,!1);var p=c+d-h;return a.lineTo(b,p),i||a.lineTo(b,c+h),[o,p]},_drawHScales:function(a,b,c,d,e,f,g){var h=0;this._settings.xAxis&&(this.canvases.x=new dhtmlx.ui.Canvas(this._obj),h=this._drawHXAxis(this.canvases.x.getCanvas(),b,c,d,e,f)),this._settings.yAxis&&(this.canvases.y=new dhtmlx.ui.Canvas(this._obj),this._drawHYAxis(this.canvases.y.getCanvas(),b,c,d,g,h))},_drawHYAxis:function(a,b,c,d,e,f){if(this._settings.yAxis){var g,h=parseInt(f?f:c.x,10)-.5,i=d.y+.5,j=c.y;this._drawLine(a,h,i,h,j,this._settings.yAxis.color,1);for(var k=0;k<b.length;k++){var l="auto"!=this._settings.origin&&"barH"==this._settings.view&&parseFloat(this._settings.value(b[k]))<this._settings.origin;g=j+e/2+k*e,this.canvases.y.renderTextAt("middle",l?!1:"left",l?h+5:h-5,g,this._settings.yAxis.template(b[k]),"dhx_axis_item_y",l?0:h-10),this._settings.yAxis.lines.call(this,b[k])&&this._drawLine(a,c.x,g,d.x,g,this._settings.yAxis.lineColor.call(this,b[k]),1)}this._drawLine(a,c.x+.5,j+.5,d.x,j+.5,this._settings.yAxis.lineColor.call(this,{}),1),this._setYAxisTitle(c,d)}},_drawHXAxis:function(a,b,c,d,e,f){var g,h={},i=this._settings.xAxis;if(i){var j=d.y+.5,k=c.x-.5,l=d.x-.5,m=c.x;if(this._drawLine(a,k,j,l,j,i.color,1),i.step&&(g=parseFloat(i.step)),("undefined"==typeof this._configXAxis.step||"undefined"==typeof this._configXAxis.start||"undefined"==typeof this._configXAxis.end)&&(h=this._calculateScale(e,f),e=h.start,f=h.end,g=h.step,this._settings.xAxis.end=f,this._settings.xAxis.start=e,this._settings.xAxis.step=g),0!==g){for(var n=(l-k)*g/(f-e),o=0,p=e;f>=p;p+=g){h.fixNum&&(p=parseFloat(new Number(p).toFixed(h.fixNum)));var q=Math.floor(k+o*n)+.5;p==e&&"auto"==this._settings.origin||!i.lines.call(this,p)||this._drawLine(a,q,j,q,c.y,this._settings.xAxis.lineColor.call(this,p),1),p==this._settings.origin&&(m=q+1),this.canvases.x.renderTextAt(!1,!0,q,j+2,i.template(p.toString()),"dhx_axis_item_x"),o++}return this.canvases.x.renderTextAt(!0,!1,k,d.y+this._settings.padding.bottom-3,this._settings.xAxis.title,"dhx_axis_title_x",d.x-c.x),i.lines.call(this,{})||this._drawLine(a,k,c.y-.5,l,c.y-.5,this._settings.xAxis.color,.2),m}}},_correctBarHParams:function(a,b,c,d,e,f,g){var h=this._settings.yAxis,i=b;return h&&"auto"!=this._settings.origin&&this._settings.origin>g&&(b+=(this._settings.origin-g)*e,i=b,d-=this._settings.origin-g,0>d&&(d*=-1,a.translate(b,c+f),a.rotate(Math.PI),b=.5,c=0),b+=.5),{value:d,x0:b,y0:c,start:i}},_drawBarH:function(a,b,c,d,e,f,g,h,i,j,k,l){a.save();var m=this._correctBarHParams(a,c,d,i,h,e,f);a.fillStyle=j,a.beginPath();var n=this._setBarHPoints(a,m.x0,m.y0,e,g,h,m.value,this._settings.border?1:0);k&&!l&&a.lineTo(b.x,m.y0+(this._settings.border?1:0)),a.fill(),a.restore();var o=m.y0,p=m.y0!=d?d:n[1],q=m.y0!=d?m.start-n[0]:m.start,r=m.y0!=d?m.start:n[0];return[q,o,r,p]},_drawBarHBorder:function(a,b,c,d,e,f,g,h,i){a.save();var j=this._correctBarHParams(a,b,c,h,g,d,e);a.beginPath(),this._setBorderStyles(a,i),a.globalAlpha=.9,this._setBarHPoints(a,j.x0,j.y0,d,f,g,j.value,a.lineWidth/2,1),a.stroke(),a.restore()},_drawBarHGradient:function(a,b,c,d,e,f,g,h,i,j){a.save();var k=this._correctBarHParams(a,b,c,h,g,d,e),l=this._setBarGradient(a,k.x0,k.y0+d,k.x0+g*k.value,k.y0,j,i,"x");a.fillStyle=l.gradient,a.beginPath(),this._setBarHPoints(a,k.x0,k.y0+l.offset,d-2*l.offset,f,g,k.value,l.offset),a.fill(),a.globalAlpha=1,a.restore()}},dhtmlx.assert(dhtmlx.chart.barH),dhtmlx.chart.stackedBarH={pvt_render_stackedBarH:function(a,b,c,d,e,f){var g,h,i,j,k=d.x-c.x,l=!!this._settings.yAxis,m=this._getStackedLimits(b);g=m.max,h=m.min;var n=Math.floor((d.y-c.y)/b.length);e||this._drawHScales(a,b,c,d,h,g,n),l&&(g=parseFloat(this._settings.xAxis.end),h=parseFloat(this._settings.xAxis.start));var o=this._getRelativeValue(h,g);j=o[0],i=o[1];var p=j?k/j:10;if(!l){var q=10;p=j?(k-q)/j:10}var r=parseInt(this._settings.width,10);r+4>n&&(r=n-4);var s=(n-r)/2,t=0,u=!1,v=this._settings.gradient;v&&(u=!0),l||this._drawLine(a,c.x-.5,c.y,c.x-.5,d.y,"#000000",1);var w=0,x=0;for(y=0;y<this._series.length;y++)y==e&&(x=w),"stackedBarH"==this._series[y].view&&w++;for(var y=0;y<b.length;y++){x||(b[y].$startX=c.x);var z=parseFloat(this._settings.value(b[y]||0));z>g&&(z=g),z-=h,z*=i;var A=c.x,B=c.y+s+y*n;if(x?A=b[y].$startX:b[y].$startX=A,0>z||this._settings.yAxis&&0===z)this.canvases.y.renderTextAt("middle",!0,A+10,B+r/2,this._settings.label(b[y]));else{l||(z+=q/p);var C=this._settings.color.call(this,b[y]);a.globalAlpha=this._settings.alpha.call(this,b[y]),a.fillStyle=this._settings.color.call(this,b[y]),a.beginPath();var D=this._setBarHPoints(a,A,B,r,t,p,z,this._settings.border?1:0);if(v&&!u&&a.lineTo(c.x+k,B+(this._settings.border?1:0)),a.fill(),0!=u){var E=this._setBarGradient(a,A,B+r,A,B,u,C,"x");a.fillStyle=E.gradient,a.beginPath(),D=this._setBarHPoints(a,A,B,r,t,p,z,0),a.fill()}this._settings.border&&this._drawBarHBorder(a,A,B,r,h,t,p,z,C),a.globalAlpha=1,this.canvases[e].renderTextAt("middle",!0,b[y].$startX+(D[0]-b[y].$startX)/2-1,B+(D[1]-B)/2,this._settings.label(b[y])),f.addRect(b[y].id,[b[y].$startX-c.x,B-c.y,D[0]-c.x,D[1]-c.y],e),b[y].$startX=D[0]}}}},dhtmlx.chart.stackedBar={pvt_render_stackedBar:function(a,b,c,d,e,f){var g,h,i,j,k=d.y-c.y,l=!!this._settings.yAxis,m=!!this._settings.xAxis,n=this._getStackedLimits(b);g=n.max,h=n.min;var o=Math.floor((d.x-c.x)/b.length);e||this._drawScales(b,c,d,h,g,o),l&&(g=parseFloat(this._settings.yAxis.end),h=parseFloat(this._settings.yAxis.start));var p=this._getRelativeValue(h,g);j=p[0],i=p[1];var q=j?k/j:10,r=parseInt(this._settings.width,10);r+4>o&&(r=o-4);var s=Math.floor((o-r)/2),t=this._settings.gradient?this._settings.gradient:!1;m||this._drawLine(a,c.x,d.y+.5,d.x,d.y+.5,"#000000",1);for(var u=0;u<b.length;u++){var v=parseFloat(this._settings.value(b[u]||0));if(v){e||(v-=h),v*=i;var w=c.x+s+u*o,x=d.y;if(e?x=b[u].$startY:b[u].$startY=x,!(x<c.y+1))if(0>v||this._settings.yAxis&&0===v)this.canvases.y.renderTextAt(!0,!0,w+Math.floor(r/2),x,this._settings.label(b[u]));else{var y=this._settings.color.call(this,b[u]);a.globalAlpha=this._settings.alpha.call(this,b[u]),a.fillStyle=this._settings.color.call(this,b[u]),a.beginPath();var z=this._setStakedBarPoints(a,w-(this._settings.border?.5:0),x,r+(this._settings.border?.5:0),q,v,0,c.y);if(a.fill(),t){a.save();var A=this._setBarGradient(a,w,x,w+r,z[1],t,y,"y");a.fillStyle=A.gradient,a.beginPath(),z=this._setStakedBarPoints(a,w+A.offset,x,r-2*A.offset,q,v,this._settings.border?1:0,c.y),a.fill(),a.restore()}this._settings.border&&(a.save(),this._setBorderStyles(a,y),a.beginPath(),this._setStakedBarPoints(a,w-.5,x,r+1,q,v,0,c.y,1),a.stroke(),a.restore()),a.globalAlpha=1,this.canvases[e].renderTextAt(!1,!0,w+Math.floor(r/2),z[1]+(x-z[1])/2-7,this._settings.label(b[u])),f.addRect(b[u].id,[w-c.x,z[1]-c.y,z[0]-c.x,(b[u].$startY||x)-c.y],e),b[u].$startY=this._settings.border?z[1]+1:z[1]}}else e&&b[u].$startY||(b[u].$startY=d.y)}},_setStakedBarPoints:function(a,b,c,d,e,f,g,h,i){a.moveTo(b,c);var j=c-e*f+g;h>j&&(j=h),a.lineTo(b,j);var k=b+d,l=j;a.lineTo(k,l);var m=b+d;return a.lineTo(m,c),i||a.lineTo(b,c),[m,l-2*g]}},dhtmlx.chart.line={pvt_render_line:function(a,b,c,d,e,f){var g,h,i,j,k,l,m,n,o;if(j=this._calculateLineParams(a,b,c,d,e),g=this._settings,b.length){for(k=g.offset?c.x+.5*j.cellWidth:c.x,i=[],h=0;h<b.length;h++)n=this._getPointY(b[h],c,d,j),n&&(l=h?j.cellWidth*h-.5+k:k,i.push({x:l,y:n,index:h}));{(new Date).valueOf()}for(this._mapStart=c,h=1;h<=i.length;h++)l=i[h-1].x,n=i[h-1].y,h<i.length&&(m=i[h].x,o=i[h].y,this._drawLine(a,l,n,m,o,g.line.color.call(this,b[h-1]),g.line.width),g.line&&g.line.shadow&&(a.globalAlpha=.3,this._drawLine(a,l+2,n+g.line.width+8,m+2,o+g.line.width+8,"#eeeeee",g.line.width+3),a.globalAlpha=1)),this._drawItem(a,l,n,b[i[h-1].index],g.label(b[i[h-1].index]),e,f,c)}},_drawItem:function(a,b,c,d,e,f,g){var h=this._settings.item,i=parseInt(h.radius.call(this,d),10)||0,j=this._mapStart;if(i){if(a.save(),h.shadow){a.lineWidth=1,a.strokeStyle="#bdbdbd",a.fillStyle="#bdbdbd";for(var k=[.1,.2,.3],l=k.length-1;l>=0;l--)a.globalAlpha=k[l],a.strokeStyle="#d0d0d0",a.beginPath(),this._strokeChartItem(a,b,c+2*i/3,i+l+1,h.type),a.stroke();a.beginPath(),a.globalAlpha=.3,a.fillStyle="#bdbdbd",this._strokeChartItem(a,b,c+2*i/3,i+1,h.type),a.fill()}a.restore(),a.lineWidth=h.borderWidth,a.fillStyle=h.color.call(this,d),a.strokeStyle=h.borderColor.call(this,d),a.globalAlpha=h.alpha.call(this,d),a.beginPath(),this._strokeChartItem(a,b,c,i+1,h.type),a.fill(),a.stroke(),a.globalAlpha=1}e&&this.canvases[f].renderTextAt(!1,!0,b,c-i-this._settings.labelOffset,this._settings.label.call(this,d));var m=this._settings.eventRadius||i+1;g.addRect(d.id,[b-m-j.x,c-m-j.y,b+m-j.x,c+m-j.y],f)},_strokeChartItem:function(a,b,c,d,e){var f=[];if(!e||"square"!=e&&"s"!=e)if(!e||"diamond"!=e&&"d"!=e)f=!e||"triangle"!=e&&"t"!=e?[[b,c,d,0,2*Math.PI,!0]]:[[b,c-d],[b+Math.sqrt(3)*d/2,c+d/2],[b-Math.sqrt(3)*d/2,c+d/2],[b,c-d]];else{var g=a.lineWidth>1?a.lineWidth*Math.sqrt(2)/4:0;f=[[b,c-d],[b+d,c],[b,c+d],[b-d,c],[b+g,c-d-g]]}else d*=Math.sqrt(2)/2,f=[[b-d-a.lineWidth/2,c-d],[b+d,c-d],[b+d,c+d],[b-d,c+d],[b-d,c-d]];this._path(a,f)},_getPointY:function(a,b,c,d){var e=d.minValue,f=d.maxValue,g=d.unit,h=d.valueFactor,i=this._settings.value(a),j=(parseFloat(i||0)-e)*h;this._settings.yAxis||(j+=d.startValue/g);var k=c.y-g*j;return 0>j&&(k=c.y),i>f&&(k=b.y),e>i&&(k=c.y),k},_calculateLineParams:function(a,b,c,d,e){var f,g={};g.totalHeight=d.y-c.y,g.cellWidth=(d.x-c.x)/(this._settings.offset?b.length:b.length-1);var h=!!this._settings.yAxis,i=-1!=this._settings.view.indexOf("stacked")?this._getStackedLimits(b):this._getLimits();g.maxValue=i.max,g.minValue=i.min,e||this._drawScales(b,c,d,g.minValue,g.maxValue,g.cellWidth),h&&(g.maxValue=parseFloat(this._settings.yAxis.end),g.minValue=parseFloat(this._settings.yAxis.start));var j=this._getRelativeValue(g.minValue,g.maxValue);return f=j[0],g.valueFactor=j[1],g.unit=f?g.totalHeight/f:10,g.startValue=0,h||(g.startValue=10,g.unit!=g.totalHeight&&(g.unit=f?(g.totalHeight-g.startValue)/f:10)),g}},dhtmlx.chart.bar={pvt_render_bar:function(a,b,c,d,e,f){var g,h,i,j,k,l,m,n,o,p,q,r,s,t=d.y-c.y;s=!!this._settings.yAxis,r=!!this._settings.xAxis,j=this._getLimits(),k=j.max,l=j.min,h=(d.x-c.x)/b.length,e||"auto"!=this._settings.origin&&!s||this._drawScales(b,c,d,l,k,h),s&&(k=parseFloat(this._settings.yAxis.end),l=parseFloat(this._settings.yAxis.start)),o=this._getRelativeValue(l,k),m=o[0],n=o[1],q=m?t/m:m,s||"auto"!=this._settings.origin&&r||(p=10,q=m?(t-p)/m:p),!e&&"auto"!=this._settings.origin&&!s&&this._settings.origin>l&&this._drawXAxis(a,b,c,d,h,d.y-q*(this._settings.origin-l)),g=parseInt(this._settings.width,10);var u=0,v=0;for(i=0;i<this._series.length;i++)i==e&&(v=u),"bar"==this._series[i].view&&u++;this._series&&g*u+4>h&&(g=parseInt(h/u-4,10));var w=(h-g*u)/2,x="undefined"!=typeof this._settings.radius?parseInt(this._settings.radius,10):Math.round(g/5),y=!1,z=this._settings.gradient;for(z&&"function"!=typeof z?(y=z,z=!1):z&&(z=a.createLinearGradient(0,d.y,0,c.y),this._settings.gradient(z)),r||this._drawLine(a,c.x,d.y+.5,d.x,d.y+.5,"#000000",1),i=0;i<b.length;i++){var A=parseFloat(this._settings.value(b[i])||0);if(!isNaN(A)){A>k&&(A=k),A-=l,A*=n;var B=c.x+w+i*h+(g+1)*v,C=d.y;if(0>A||this._settings.yAxis&&0===A&&!("auto"!=this._settings.origin&&this._settings.origin>l))this.canvases[e].renderTextAt(!0,!0,B+Math.floor(g/2),C,this._settings.label(b[i]));else{s||"auto"!=this._settings.origin&&r||(A+=p/q);var D=z||this._settings.color.call(this,b[i]);a.globalAlpha=this._settings.alpha.call(this,b[i]);var E=this._drawBar(a,c,B,C,g,l,x,q,A,D,z,y);y&&this._drawBarGradient(a,B,C,g,l,x,q,A,D,y),this._settings.border&&this._drawBarBorder(a,B,C,g,l,x,q,A,D),a.globalAlpha=1,E[0]!=B?this.canvases[e].renderTextAt(!1,!0,B+Math.floor(g/2),E[1],this._settings.label(b[i])):this.canvases[e].renderTextAt(!0,!0,B+Math.floor(g/2),E[3],this._settings.label(b[i])),f.addRect(b[i].id,[B-c.x,E[3]-c.y,E[2]-c.x,E[1]-c.y],e)}}}},_correctBarParams:function(a,b,c,d,e,f,g){var h=this._settings.xAxis,i=c;return h&&"auto"!=this._settings.origin&&this._settings.origin>g&&(c-=(this._settings.origin-g)*e,i=c,d-=this._settings.origin-g,0>d&&(d*=-1,a.translate(b+f,c),a.rotate(Math.PI),b=0,c=0),c-=.5),{value:d,x0:b,y0:c,start:i}},_drawBar:function(a,b,c,d,e,f,g,h,i,j,k,l){a.save(),a.fillStyle=j;var m=this._correctBarParams(a,c,d,i,h,e,f),n=this._setBarPoints(a,m.x0,m.y0,e,g,h,m.value,this._settings.border?1:0);k&&!l&&a.lineTo(m.x0+(this._settings.border?1:0),b.y),a.fill(),a.restore();var o=m.x0,p=m.x0!=c?c+n[0]:n[0],q=m.x0!=c?m.start-n[1]-m.y0:m.y0,r=m.x0!=c?m.start-m.y0:n[1];return[o,q,p,r]},_setBorderStyles:function(a,b){var c,d;d=dhtmlx.math.toRgb(b),c=dhtmlx.math.rgbToHsv(d[0],d[1],d[2]),c[2]/=2,b="rgb("+dhtmlx.math.hsvToRgb(c[0],c[1],c[2])+")",a.strokeStyle=b,1==a.globalAlpha&&(a.globalAlpha=.9)},_drawBarBorder:function(a,b,c,d,e,f,g,h,i){var j;a.save(),j=this._correctBarParams(a,b,c,h,g,d,e),this._setBorderStyles(a,i),this._setBarPoints(a,j.x0,j.y0,d,f,g,j.value,a.lineWidth/2,1),a.stroke(),a.restore()},_drawBarGradient:function(a,b,c,d,e,f,g,h,i,j){a.save();var k=this._correctBarParams(a,b,c,h,g,d,e),l=this._setBarGradient(a,k.x0,k.y0,k.x0+d,k.y0-g*k.value+2,j,i,"y"),m=this._settings.border?1:0;a.fillStyle=l.gradient,this._setBarPoints(a,k.x0+l.offset,k.y0,d-2*l.offset,f,g,k.value,l.offset+m),a.fill(),a.restore()},_setBarPoints:function(a,b,c,d,e,f,g,h,i){a.beginPath();var j=0;if(e>f*g){var k=(e-f*g)/e;1>=k&&k>=-1&&(j=-Math.acos(k)+Math.PI/2)}a.moveTo(b+h,c);var l=c-Math.floor(f*g)+e+(e?0:h);f*g>e&&a.lineTo(b+h,l);var m=b+e;e&&e>0&&a.arc(m,l,e-h,-Math.PI+j,-Math.PI/2,!1);var n=b+d-e-h,o=l-e+(e?h:0);a.lineTo(n,o),e&&e>0&&a.arc(n,l,e-h,-Math.PI/2,0-j,!1);var p=b+d-h;return a.lineTo(p,c),i||a.lineTo(b+h,c),[p,o]}},dhtmlx.chart.pie={pvt_render_pie:function(a,b,c,d,e,f){this._renderPie(a,b,c,d,1,f,e)},_renderPie:function(a,b,c,d,e,f,g){if(b.length){var h=this._getPieParameters(c,d),i=this._settings.radius?this._settings.radius:h.radius;if(!(0>i)){var j=this._getValues(b),k=this._getTotalValue(j),l=this._getRatios(j,k),m=this._settings.x?this._settings.x:h.x,n=this._settings.y?this._settings.y:h.y;1==e&&this._settings.shadow&&this._addShadow(a,m,n,i),n/=e;var o=-Math.PI/2,p=[];if(a.scale(1,e),this._settings.gradient){var q=1!=e?m+i/3:m,r=1!=e?n+i/3:n;this._showRadialGradient(a,m,n,i,q,r)}for(var s=0;s<b.length;s++)if(j[s]){a.strokeStyle=this._settings.lineColor.call(this,b[s]),a.beginPath(),a.moveTo(m,n),p.push(o),alpha1=-Math.PI/2+l[s]-1e-4,a.arc(m,n,i,o,alpha1,!1),a.lineTo(m,n);var t=this._settings.color.call(this,b[s]);a.fillStyle=t,a.fill(),this._settings.pieInnerText&&this._drawSectorLabel(m,n,5*i/6,o,alpha1,e,this._settings.pieInnerText(b[s],k),!0),this._settings.label&&this._drawSectorLabel(m,n,i+this._settings.labelOffset,o,alpha1,e,this._settings.label(b[s])),1!=e&&(this._createLowerSector(a,m,n,o,alpha1,i,!0),a.fillStyle="#000000",a.globalAlpha=.2,this._createLowerSector(a,m,n,o,alpha1,i,!1),a.globalAlpha=1,a.fillStyle=t),f.addSector(b[s].id,o,alpha1,m-c.x,n-c.y/e,i,e,g),o=alpha1}a.globalAlpha=.8;var u;for(s=0;s<p.length;s++)u=this._getPositionByAngle(p[s],m,n,i),this._drawLine(a,m,n,u.x,u.y,this._settings.lineColor.call(this,b[s]),2);1==e&&(a.lineWidth=2,a.strokeStyle="#ffffff",a.beginPath(),a.arc(m,n,i+1,0,2*Math.PI,!1),a.stroke()),a.globalAlpha=1,a.scale(1,1/e)}}},_getValues:function(a){for(var b=[],c=0;c<a.length;c++)b.push(parseFloat(this._settings.value(a[c])||0));return b},_getTotalValue:function(a){for(var b=0,c=0;c<a.length;c++)b+=a[c];return b},_getRatios:function(a,b){var c,d=[],e=0;b=b||this._getTotalValue(a);for(var f=0;f<a.length;f++)c=a[f],d[f]=2*Math.PI*(b?(c+e)/b:1/a.length),e+=c;return d},_getPieParameters:function(a,b){var c=b.x-a.x,d=b.y-a.y,e=a.x+c/2,f=a.y+d/2,g=Math.min(c/2,d/2);return{x:e,y:f,radius:g}},_createLowerSector:function(a,b,c,d,e,f,g){if(a.lineWidth=1,0>=d&&e>=0||d>=0&&e<=Math.PI||Math.abs(d-Math.PI)>.003&&d<=Math.PI&&e>=Math.PI){0>=d&&e>=0&&(d=0,g=!1,this._drawSectorLine(a,b,c,f,d,e)),d<=Math.PI&&e>=Math.PI&&(e=Math.PI,g=!1,this._drawSectorLine(a,b,c,f,d,e));var h=(this._settings.height||Math.floor(f/4))/this._settings.cant;a.beginPath(),a.arc(b,c,f,d,e,!1),a.lineTo(b+f*Math.cos(e),c+f*Math.sin(e)+h),a.arc(b,c+h,f,e,d,!0),a.lineTo(b+f*Math.cos(d),c+f*Math.sin(d)),a.fill(),g&&a.stroke()}},_drawSectorLine:function(a,b,c,d,e,f){a.beginPath(),a.arc(b,c,d,e,f,!1),a.stroke()},_addShadow:function(a,b,c,d){a.globalAlpha=.5;for(var e=["#c4c4c4","#c6c6c6","#cacaca","#dcdcdc","#dddddd","#e0e0e0","#eeeeee","#f5f5f5","#f8f8f8"],f=e.length-1;f>-1;f--)a.beginPath(),a.fillStyle=e[f],a.arc(b+1,c+1,d+f,0,2*Math.PI,!0),a.fill();a.globalAlpha=1},_getGrayGradient:function(a){return a.addColorStop(0,"#ffffff"),a.addColorStop(.7,"#7a7a7a"),a.addColorStop(1,"#000000"),a},_showRadialGradient:function(a,b,c,d,e,f){a.beginPath();var g;"function"!=typeof this._settings.gradient?(g=a.createRadialGradient(e,f,d/4,b,c,d),g=this._getGrayGradient(g)):g=this._settings.gradient(g),a.fillStyle=g,a.arc(b,c,d,0,2*Math.PI,!0),a.fill(),a.globalAlpha=.7},_drawSectorLabel:function(a,b,c,d,e,f,g,h){var i=this.canvases[0].renderText(0,0,g,0,1);if(i){var j=i.scrollWidth;i.style.width=j+"px",j>a&&(j=a);var k=.2>e-d?4:8;h&&(k=j/1.8);var l=d+(e-d)/2;c-=(k-8)/2;var m=-k,n=-8,o="right";(l>=Math.PI/2&&l<Math.PI||l<=3*Math.PI/2&&l>=Math.PI)&&(m=-j-m+1,o="left");var p=0;!h&&1>f&&l>0&&l<Math.PI&&(p=(this._settings.height||Math.floor(c/4))/f);var q=(b+Math.floor((c+p)*Math.sin(l)))*f+n,r=a+Math.floor((c+k/2)*Math.cos(l))+m,s=e<Math.PI/2+.01,t=d<Math.PI/2;t&&s?r=Math.max(r,a+3):t||s?!h&&(l>=Math.PI/2&&l<Math.PI||l<=3*Math.PI/2&&l>=Math.PI)&&(r+=j/3):r=Math.min(r,a-j),i.style.top=q+"px",i.style.left=r+"px",i.style.width=j+"px",i.style.textAlign=o,i.style.whiteSpace="nowrap"}}},dhtmlx.chart.pie3D={pvt_render_pie3D:function(a,b,c,d,e,f){this._renderPie(a,b,c,d,this._settings.cant,f)}},dhtmlx.chart.donut={pvt_render_donut:function(a,b,c,d,e,f){if(b.length){this._renderPie(a,b,c,d,1,f);var g=this._settings,h=this._getPieParameters(c,d),i=g.radius?g.radius:h.radius,j=g.innerRadius&&g.innerRadius<i?g.innerRadius:i/3,k=g.x?g.x:h.x,l=g.y?g.y:h.y;a.fillStyle="#ffffff",a.beginPath(),a.arc(k,l,j,0,2*Math.PI,!0),a.fill()}}},dhtmlx.Template={_cache:{},empty:function(){return""},setter:function(a){return dhtmlx.Template.fromHTML(a)},obj_setter:function(a){var b=dhtmlx.Template.setter(a),c=this;return function(){return b.apply(c,arguments)}},fromHTML:function(a){return"function"==typeof a?a:this._cache[a]?this._cache[a]:(a=(a||"").toString(),a=a.replace(/[\r\n]+/g,"\\n"),a=a.replace(/\{obj\.([^}?]+)\?([^:]*):([^}]*)\}/g,'"+(obj.$1?"$2":"$3")+"'),a=a.replace(/\{common\.([^}\(]*)\}/g,'"+common.$1+"'),a=a.replace(/\{common\.([^\}\(]*)\(\)\}/g,'"+(common.$1?common.$1(obj):"")+"'),a=a.replace(/\{obj\.([^}]*)\}/g,'"+obj.$1+"'),a=a.replace(/#([a-z0-9_]+)#/gi,'"+obj.$1+"'),a=a.replace(/\{obj\}/g,'"+obj+"'),a=a.replace(/\{-obj/g,"{obj"),a=a.replace(/\{-common/g,"{common"),a='return "'+a+'";',this._cache[a]=Function("obj","common",a))}},dhtmlx.Type={add:function(a,b){!a.types&&a.prototype.types&&(a=a.prototype),dhtmlx.assert_enabled()&&this.assert_event(b);var c=b.name||"default";return this._template(b),this._template(b,"edit"),this._template(b,"loading"),a.types[c]=dhtmlx.extend(dhtmlx.extend({},a.types[c]||this._default),b),c},_default:{css:"default",template:function(){return""},template_edit:function(){return""},template_loading:function(){return"..."},width:150,height:80,margin:5,padding:0},_template:function(a,b){b="template"+(b?"_"+b:"");var c=a[b];if(c&&"string"==typeof c){if(-1!=c.indexOf("->"))switch(c=c.split("->"),c[0]){case"html":c=dhtmlx.html.getValue(c[1]).replace(/\"/g,'\\"');break;case"http":c=(new dhtmlx.ajax).sync().get(c[1],{uid:(new Date).valueOf()}).responseText}a[b]=dhtmlx.Template.fromHTML(c)}}},dhtmlx.SingleRender={_init:function(){},_toHTML:function(a){return this.type._item_start(a,this.type)+this.type.template(a,this.type)+this.type._item_end},render:function(){(!this.callEvent||this.callEvent("onBeforeRender",[this.data]))&&(this.data&&(this._dataobj.innerHTML=this._toHTML(this.data)),this.callEvent&&this.callEvent("onAfterRender",[]))}},dhtmlx.ui.Tooltip=function(a){this.name="Tooltip",this.version="3.0",dhtmlx.assert_enabled()&&this._assert(),"string"==typeof a&&(a={template:a}),dhtmlx.extend(this,dhtmlx.Settings),dhtmlx.extend(this,dhtmlx.SingleRender),this._parseSettings(a,{type:"default",dy:0,dx:20}),this._dataobj=this._obj=document.createElement("DIV"),this._obj.className="dhx_tooltip",dhtmlx.html.insertBefore(this._obj,document.body.firstChild)},dhtmlx.ui.Tooltip.prototype={show:function(a,b){this._disabled||(this.data!=a&&(this.data=a,this.render(a)),this._obj.style.top=b.y+this._settings.dy+"px",this._obj.style.left=b.x+this._settings.dx+"px",this._obj.style.display="block")},hide:function(){this.data=null,this._obj.style.display="none"},disable:function(){this._disabled=!0},enable:function(){this._disabled=!1},types:{"default":dhtmlx.Template.fromHTML("{obj.id}")},template_item_start:dhtmlx.Template.empty,template_item_end:dhtmlx.Template.empty},dhtmlx.AutoTooltip={tooltip_setter:function(a){var b=new dhtmlx.ui.Tooltip(a);return this.attachEvent("onMouseMove",function(a,c){b.show(this.get(a),dhtmlx.html.pos(c))}),this.attachEvent("onMouseOut",function(){b.hide()}),this.attachEvent("onMouseMoving",function(){b.hide()}),b}},dhtmlx.ajax=function(a,b,c){if(0!==arguments.length){var d=new dhtmlx.ajax;c&&(d.master=c),d.get(a,null,b)}return this.getXHR?this:new dhtmlx.ajax},dhtmlx.ajax.prototype={getXHR:function(){return dhtmlx._isIE?new ActiveXObject("Microsoft.xmlHTTP"):new XMLHttpRequest},send:function(a,b,c){var d=this.getXHR();if("function"==typeof c&&(c=[c]),"object"==typeof b){var e=[];for(var f in b){var g=b[f];(null===g||g===dhtmlx.undefined)&&(g=""),e.push(f+"="+encodeURIComponent(g))}b=e.join("&")}b&&!this.post&&(a=a+(-1!=a.indexOf("?")?"&":"?")+b,b=null),d.open(this.post?"POST":"GET",a,!this._sync),this.post&&d.setRequestHeader("Content-type","application/x-www-form-urlencoded");var h=this;return d.onreadystatechange=function(){if(!d.readyState||4==d.readyState){if(c&&h)for(var a=0;a<c.length;a++)c[a]&&c[a].call(h.master||h,d.responseText,d.responseXML,d);h.master=null,c=h=null}},d.send(b||null),d},get:function(a,b,c){return this.post=!1,this.send(a,b,c)},post:function(a,b,c){return this.post=!0,this.send(a,b,c)},sync:function(){return this._sync=!0,this}},dhtmlx.AtomDataLoader={_init:function(a){this.data={},a&&(this._settings.datatype=a.datatype||"json",this._after_init.push(this._load_when_ready))},_load_when_ready:function(){this._ready_for_data=!0,this._settings.url&&this.url_setter(this._settings.url),this._settings.data&&this.data_setter(this._settings.data)},url_setter:function(a){return this._ready_for_data?(this.load(a,this._settings.datatype),a):a},data_setter:function(a){return this._ready_for_data?(this.parse(a,this._settings.datatype),!0):a},load:function(a,b){this.callEvent("onXLS",[]),"string"==typeof b?(this.data.driver=dhtmlx.DataDriver[b],b=arguments[2]):this.data.driver=dhtmlx.DataDriver.xml,dhtmlx.ajax(a,[this._onLoad,b],this)},parse:function(a,b){this.callEvent("onXLS",[]),this.data.driver=dhtmlx.DataDriver[b||"xml"],this._onLoad(a,null)},_onLoad:function(a,b){var c=this.data.driver,d=c.getRecords(c.toObject(a,b))[0];this.data=c?c.getDetails(d):a,this.callEvent("onXLE",[])},_check_data_feed:function(a){if(!this._settings.dataFeed||this._ignore_feed||!a)return!0;var b=this._settings.dataFeed;return"function"==typeof b?b.call(this,a.id||a,a):(b=b+(-1==b.indexOf("?")?"?":"&")+"action=get&id="+encodeURIComponent(a.id||a),this.callEvent("onXLS",[]),dhtmlx.ajax(b,function(a){this._ignore_feed=!0,this.setValues(dhtmlx.DataDriver.json.toObject(a)[0]),this._ignore_feed=!1,this.callEvent("onXLE",[])},this),!1)}},dhtmlx.DataDriver={},dhtmlx.DataDriver.json={toObject:function(data){return data||(data="[]"),"string"==typeof data?(eval("dhtmlx.temp="+data),dhtmlx.temp):data},getRecords:function(a){return!a||a instanceof Array?a:[a]},getDetails:function(a){return a},getInfo:function(a){return{_size:a.total_count||0,_from:a.pos||0,_key:a.dhx_security}}},dhtmlx.DataDriver.json_ext={toObject:function(data){if(data||(data="[]"),"string"==typeof data){var temp;eval("temp="+data),dhtmlx.temp=[];for(var header=temp.header,i=0;i<temp.data.length;i++){for(var item={},j=0;j<header.length;j++)"undefined"!=typeof temp.data[i][j]&&(item[header[j]]=temp.data[i][j]);dhtmlx.temp.push(item)}return dhtmlx.temp}return data},getRecords:function(a){return!a||a instanceof Array?a:[a]},getDetails:function(a){return a},getInfo:function(a){return{_size:a.total_count||0,_from:a.pos||0}}},dhtmlx.DataDriver.html={toObject:function(a){if("string"==typeof a){var b=null;return-1==a.indexOf("<")&&(b=dhtmlx.toNode(a)),b||(b=document.createElement("DIV"),b.innerHTML=a),b.getElementsByTagName(this.tag)}return a},getRecords:function(a){return a.tagName?a.childNodes:a},getDetails:function(a){return dhtmlx.DataDriver.xml.tagToObject(a)},getInfo:function(){return{_size:0,_from:0}},tag:"LI"},dhtmlx.DataDriver.jsarray={toObject:function(data){return"string"==typeof data?(eval("dhtmlx.temp="+data),dhtmlx.temp):data},getRecords:function(a){return a},getDetails:function(a){for(var b={},c=0;c<a.length;c++)b["data"+c]=a[c];return b},getInfo:function(){return{_size:0,_from:0}}},dhtmlx.DataDriver.csv={toObject:function(a){return a},getRecords:function(a){return a.split(this.row)},getDetails:function(a){a=this.stringToArray(a);for(var b={},c=0;c<a.length;c++)b["data"+c]=a[c];return b},getInfo:function(){return{_size:0,_from:0}},stringToArray:function(a){a=a.split(this.cell);for(var b=0;b<a.length;b++)a[b]=a[b].replace(/^[ \t\n\r]*(\"|)/g,"").replace(/(\"|)[ \t\n\r]*$/g,"");return a},row:"\n",cell:","},dhtmlx.DataDriver.xml={toObject:function(a,b){return b&&(b=this.checkResponse(a,b))?b:"string"==typeof a?this.fromString(a):a},getRecords:function(a){return this.xpath(a,this.records)},records:"/*/item",getDetails:function(a){return this.tagToObject(a,{})},getInfo:function(a){return{_size:a.documentElement.getAttribute("total_count")||0,_from:a.documentElement.getAttribute("pos")||0,_key:a.documentElement.getAttribute("dhx_security")}},xpath:function(a,b){if(window.XPathResult){var c=a;-1==a.nodeName.indexOf("document")&&(a=a.ownerDocument);for(var d=[],e=a.evaluate(b,c,null,XPathResult.ANY_TYPE,null),f=e.iterateNext();f;)d.push(f),f=e.iterateNext();return d}var g=!0;try{"undefined"==typeof a.selectNodes&&(g=!1)}catch(h){}if(g)return a.selectNodes(b);var i=b.split("/").pop();return a.getElementsByTagName(i)},tagToObject:function(a,b){b=b||{};var c=!1,d=a.attributes;if(d&&d.length){for(var e=0;e<d.length;e++)b[d[e].name]=d[e].value;c=!0}for(var f=a.childNodes,e=0;e<f.length;e++)if(1==f[e].nodeType){var g=f[e].tagName;"undefined"!=typeof b[g]?(b[g]instanceof Array||(b[g]=[b[g]]),b[g].push(this.tagToObject(f[e],{}))):b[f[e].tagName]=this.tagToObject(f[e],{}),c=!0}return c?(b.value=this.nodeValue(a),b):this.nodeValue(a)},nodeValue:function(a){return a.firstChild?a.firstChild.data:""},fromString:function(a){if(window.DOMParser&&!dhtmlx._isIE)return(new DOMParser).parseFromString(a,"text/xml");if(window.ActiveXObject){var b=new ActiveXObject("Microsoft.xmlDOM");return b.loadXML(a),b}dhtmlx.error("Load from xml string is not supported")},checkResponse:function(a,b){if(b&&b.firstChild&&"parsererror"!=b.firstChild.tagName)return b;var c=this.fromString(a.replace(/^[\s]+/,""));return c?c:void dhtmlx.error("xml can't be parsed",a)}},dhtmlx.DataLoader={_init:function(a){a=a||"",this.name="DataStore",this.data=a.datastore||new dhtmlx.DataStore,this._readyHandler=this.data.attachEvent("onStoreLoad",dhtmlx.bind(this._call_onready,this))},load:function(a){dhtmlx.AtomDataLoader.load.apply(this,arguments),this.data.feed||(this.data.feed=function(b,c){return this._load_count?this._load_count=[b,c]:(this._load_count=!0,void this.load(a+(-1==a.indexOf("?")?"?":"&")+"posStart="+b+"&count="+c,function(){var a=this._load_count;this._load_count=!1,"object"==typeof a&&this.data.feed.apply(this,a)}))})},_onLoad:function(a,b){this.data._parse(this.data.driver.toObject(a,b)),this.callEvent("onXLE",[]),this._readyHandler&&(this.data.detachEvent(this._readyHandler),this._readyHandler=null)},dataFeed_setter:function(a){return this.data.attachEvent("onBeforeFilter",dhtmlx.bind(function(a,b){if(this._settings.dataFeed){var c={};if(!a&&!c)return;if("function"==typeof a){if(!b)return;a(b,c)}else c={text:b};this.clearAll();var d=this._settings.dataFeed;if("function"==typeof d)return d.call(this,b,c);var e=[];for(var f in c)e.push("dhx_filter["+f+"]="+encodeURIComponent(c[f]));return this.load(d+(d.indexOf("?")<0?"?":"&")+e.join("&"),this._settings.datatype),!1}},this)),a},_call_onready:function(){if(this._settings.ready){var a=dhtmlx.toFunctor(this._settings.ready);a&&a.call&&a.apply(this,arguments)}}},dhtmlx.DataStore=function(){this.name="DataStore",dhtmlx.extend(this,dhtmlx.EventSystem),this.setDriver("xml"),this.pull={},this.order=dhtmlx.toArray()},dhtmlx.DataStore.prototype={setDriver:function(a){dhtmlx.assert(dhtmlx.DataDriver[a],"incorrect DataDriver"),this.driver=dhtmlx.DataDriver[a]},_parse:function(a){this.callEvent("onParse",[this.driver,a]),this._filter_order&&this.filter();var b=this.driver.getInfo(a);b._key&&(dhtmlx.security_key=b._key);var c=this.driver.getRecords(a),d=1*(b._from||0);0===d&&this.order[0]&&(d=this.order.length);for(var e=0,f=0;f<c.length;f++){var g=this.driver.getDetails(c[f]),h=this.id(g);this.pull[h]||(this.order[e+d]=h,e++),this.pull[h]=g,this.extraParser&&this.extraParser(g),this._scheme&&(this._scheme.$init?this._scheme.$update(g):this._scheme.$update&&this._scheme.$update(g))}for(var f=0;f<b._size;f++)if(!this.order[f]){var h=dhtmlx.uid(),g={id:h,$template:"loading"};this.pull[h]=g,this.order[f]=h}this.callEvent("onStoreLoad",[this.driver,a]),this.refresh()},id:function(a){return a.id||(a.id=dhtmlx.uid())},changeId:function(a,b){dhtmlx.assert(this.pull[a],"Can't change id, for non existing item: "+a),this.pull[b]=this.pull[a],this.pull[b].id=b,this.order[this.order.find(a)]=b,this._filter_order&&(this._filter_order[this._filter_order.find(a)]=b),this.callEvent("onIdChange",[a,b]),this._render_change_id&&this._render_change_id(a,b)},get:function(a){return this.item(a)},set:function(a,b){return this.update(a,b)},item:function(a){return this.pull[a]},update:function(a,b){return this._scheme&&this._scheme.$update&&this._scheme.$update(b),this.callEvent("onBeforeUpdate",[a,b])===!1?!1:(this.pull[a]=b,void this.refresh(a))},refresh:function(a){this._skip_refresh||(a?this.callEvent("onStoreUpdated",[a,this.pull[a],"update"]):this.callEvent("onStoreUpdated",[null,null,null]))},silent:function(a){this._skip_refresh=!0,a.call(this),this._skip_refresh=!1},getRange:function(a,b){if(a=a?this.indexById(a):this.startOffset||0,b?b=this.indexById(b):(b=Math.min(this.endOffset||1/0,this.dataCount()-1),0>b&&(b=0)),a>b){var c=b;b=a,a=c}return this.getIndexRange(a,b)},getIndexRange:function(a,b){b=Math.min(b||1/0,this.dataCount()-1);for(var c=dhtmlx.toArray(),d=a||0;b>=d;d++)c.push(this.item(this.order[d]));return c},dataCount:function(){return this.order.length},exists:function(a){return!!this.pull[a]},move:function(a,b){if(0>a||0>b)return void dhtmlx.error("DataStore::move","Incorrect indexes");var c=this.idByIndex(a),d=this.item(c);this.order.removeAt(a),this.order.insertAt(c,Math.min(this.order.length,b)),this.callEvent("onStoreUpdated",[c,d,"move"])},scheme:function(a){this._scheme=a},sync:function(a,b,c){"function"!=typeof b&&(c=b,b=null),dhtmlx.debug_bind&&(this.debug_sync_master=a,dhtmlx.log("[sync] "+this.debug_bind_master.name+"@"+this.debug_bind_master._settings.id+" <= "+this.debug_sync_master.name+"@"+this.debug_sync_master._settings.id));
var d=a;"DataStore"!=a.name&&(a=a.data);var e=dhtmlx.bind(function(d,e,f){("update"!=f||b)&&(d=null),d||(this.order=dhtmlx.toArray([].concat(a.order)),this._filter_order=null,this.pull=a.pull,b&&this.silent(b),this._on_sync&&this._on_sync()),dhtmlx.debug_bind&&dhtmlx.log("[sync:request] "+this.debug_sync_master.name+"@"+this.debug_sync_master._settings.id+" <= "+this.debug_bind_master.name+"@"+this.debug_bind_master._settings.id),c?c=!1:this.refresh(d)},this);a.attachEvent("onStoreUpdated",e),this.feed=function(a,b){d.loadNext(b,a)},e()},add:function(a,b){if(this._scheme){a=a||{};for(var c in this._scheme)a[c]=a[c]||this._scheme[c];this._scheme&&(this._scheme.$init?this._scheme.$update(a):this._scheme.$update&&this._scheme.$update(a))}var d=this.id(a),e=this.dataCount();if((dhtmlx.isNotDefined(b)||0>b)&&(b=e),b>e&&(dhtmlx.log("Warning","DataStore:add","Index of out of bounds"),b=Math.min(this.order.length,b)),this.callEvent("onBeforeAdd",[d,a,b])===!1)return!1;if(this.exists(d))return dhtmlx.error("Not unique ID");if(this.pull[d]=a,this.order.insertAt(d,b),this._filter_order){var f=this._filter_order.length;!b&&this.order.length&&(f=0),this._filter_order.insertAt(d,f)}return this.callEvent("onafterAdd",[d,b]),this.callEvent("onStoreUpdated",[d,a,"add"]),d},remove:function(a){if(a instanceof Array)for(var b=0;b<a.length;b++)this.remove(a[b]);else{if(this.callEvent("onBeforeDelete",[a])===!1)return!1;if(!this.exists(a))return dhtmlx.error("Not existing ID",a);var c=this.item(a);this.order.remove(a),this._filter_order&&this._filter_order.remove(a),delete this.pull[a],this.callEvent("onafterdelete",[a]),this.callEvent("onStoreUpdated",[a,c,"delete"])}},clearAll:function(){this.pull={},this.order=dhtmlx.toArray(),this.feed=null,this._filter_order=null,this.callEvent("onClearAll",[]),this.refresh()},idByIndex:function(a){return(a>=this.order.length||0>a)&&dhtmlx.log("Warning","DataStore::idByIndex Incorrect index"),this.order[a]},indexById:function(a){var b=this.order.find(a);return b},next:function(a,b){return this.order[this.indexById(a)+(b||1)]},first:function(){return this.order[0]},last:function(){return this.order[this.order.length-1]},previous:function(a,b){return this.order[this.indexById(a)-(b||1)]},sort:function(a,b,c){var d=a;"function"==typeof a?d={as:a,dir:b}:"string"==typeof a&&(d={by:a,dir:b,as:c});var e=[d.by,d.dir,d.as];if(this.callEvent("onbeforesort",e)){if(this.order.length){var f=dhtmlx.sort.create(d),g=this.getRange(this.first(),this.last());g.sort(f),this.order=g.map(function(a){return this.id(a)},this)}this.refresh(),this.callEvent("onaftersort",e)}},filter:function(a,b){if(this.callEvent("onBeforeFilter",[a,b])&&(this._filter_order&&(this.order=this._filter_order,delete this._filter_order),this.order.length)){if(a){var c=a;b=b||"","string"==typeof a&&(a=dhtmlx.Template.fromHTML(a),b=b.toString().toLowerCase(),c=function(b,c){return-1!=a(b).toLowerCase().indexOf(c)});for(var d=dhtmlx.toArray(),e=0;e<this.order.length;e++){var f=this.order[e];c(this.item(f),b)&&d.push(f)}this._filter_order=this.order,this.order=d}this.refresh(),this.callEvent("onAfterFilter",[])}},each:function(a,b){for(var c=0;c<this.order.length;c++)a.call(b||this,this.item(this.order[c]))},provideApi:function(a,b){this.debug_bind_master=a,b&&this.mapEvent({onbeforesort:a,onaftersort:a,onbeforeadd:a,onafteradd:a,onbeforedelete:a,onafterdelete:a,onbeforeupdate:a});for(var c=["get","set","sort","add","remove","exists","idByIndex","indexById","item","update","refresh","dataCount","filter","next","previous","clearAll","first","last","serialize"],d=0;d<c.length;d++)a[c[d]]=dhtmlx.methodPush(this,c[d]);dhtmlx.assert_enabled()&&this.assert_event(a)},serialize:function(){for(var a=this.order,b=[],c=0;c<a.length;c++)b.push(this.pull[a[c]]);return b}},dhtmlx.sort={create:function(a){return dhtmlx.sort.dir(a.dir,dhtmlx.sort.by(a.by,a.as))},as:{"int":function(a,b){return a=1*a,b=1*b,a>b?1:b>a?-1:0},string_strict:function(a,b){return a=a.toString(),b=b.toString(),a>b?1:b>a?-1:0},string:function(a,b){return a=a.toString().toLowerCase(),b=b.toString().toLowerCase(),a>b?1:b>a?-1:0}},by:function(a,b){return a?("function"!=typeof b&&(b=dhtmlx.sort.as[b||"string"]),a=dhtmlx.Template.fromHTML(a),function(c,d){return b(a(c),a(d))}):b},dir:function(a,b){return"asc"==a?b:function(a,c){return-1*b(a,c)}}},dhtmlx.Group={_init:function(){dhtmlx.assert(this.data,"DataStore required for grouping"),this.data.attachEvent("onStoreLoad",dhtmlx.bind(function(){this._settings.group&&this.group(this._settings.group,!1)},this)),this.attachEvent("onBeforeRender",dhtmlx.bind(function(a){this._settings.sort&&(a.block(),a.sort(this._settings.sort),a.unblock())},this)),this.attachEvent("onBeforeSort",dhtmlx.bind(function(){this._settings.sort=null},this))},_init_group_data_event:function(a,b){a.attachEvent("onClearAll",dhtmlx.bind(function(){this.ungroup(!1),this.block(),this.clearAll(),this.unblock()},b))},sum:function(a,b){a=dhtmlx.Template.setter(a),b=b||this.data;var c=0;return b.each(function(b){c+=1*a(b)}),c},min:function(a,b){a=dhtmlx.Template.setter(a),b=b||this.data;var c=1/0;return b.each(function(b){1*a(b)<c&&(c=1*a(b))}),1*c},max:function(a,b){a=dhtmlx.Template.setter(a),b=b||this.data;var c=-1/0;return b.each(function(b){1*a(b)>c&&(c=1*a(b))}),c},_split_data_by:function(a){var b=function(a,b){return(a=dhtmlx.Template.setter(a))(b[0])},c=dhtmlx.Template.setter(a.by);a.map[c]||(a.map[c]=[c,b]);var d={},e=[];this.data.each(function(a){var b=c(a);d[b]||(e.push({id:b}),d[b]=dhtmlx.toArray()),d[b].push(a)});for(var f in a.map){var g=a.map[f][1]||b;"function"!=typeof g&&(g=this[g]);for(var h=0;h<e.length;h++)e[h][f]=g.call(this,a.map[f][0],d[e[h].id])}this._not_grouped_data=this.data,this.data=new dhtmlx.DataStore,this.data.provideApi(this,!0),this._init_group_data_event(this.data,this),this.parse(e,"json")},group:function(a,b){this.ungroup(!1),this._split_data_by(a),b!==!1&&this.render()},ungroup:function(a){this._not_grouped_data&&(this.data=this._not_grouped_data,this.data.provideApi(this,!0)),a!==!1&&this.render()},group_setter:function(a){return dhtmlx.assert("object"==typeof a,"Incorrect group value"),dhtmlx.assert(a.by,"group.by is mandatory"),dhtmlx.assert(a.map,"group.map is mandatory"),a},sort_setter:function(a){return"object"!=typeof a&&(a={by:a}),this._mergeSettings(a,{as:"string",dir:"asc"}),a}},dhtmlx.KeyEvents={_init:function(){dhtmlx.event(this._obj,"keypress",this._onKeyPress,this)},_onKeyPress:function(a){a=a||event;var b=a.which||a.keyCode;this.callEvent(this._edit_id?"onEditKeyPress":"onKeyPress",[b,a.ctrlKey,a.shiftKey,a])}},dhtmlx.MouseEvents={_init:function(){this.on_click&&(dhtmlx.event(this._obj,"click",this._onClick,this),dhtmlx.event(this._obj,"contextmenu",this._onContext,this)),this.on_dblclick&&dhtmlx.event(this._obj,"dblclick",this._onDblClick,this),this.on_mouse_move&&(dhtmlx.event(this._obj,"mousemove",this._onMouse,this),dhtmlx.event(this._obj,dhtmlx._isIE?"mouseleave":"mouseout",this._onMouse,this))},_onClick:function(a){return this._mouseEvent(a,this.on_click,"ItemClick")},_onDblClick:function(a){return this._mouseEvent(a,this.on_dblclick,"ItemDblClick")},_onContext:function(a){var b=dhtmlx.html.locate(a,this._id);return b&&!this.callEvent("onBeforeContextMenu",[b,a])?dhtmlx.html.preventEvent(a):void 0},_onMouse:function(a){dhtmlx._isIE&&(a=document.createEventObject(event)),this._mouse_move_timer&&window.clearTimeout(this._mouse_move_timer),this.callEvent("onMouseMoving",[a]),this._mouse_move_timer=window.setTimeout(dhtmlx.bind(function(){"mousemove"==a.type?this._onMouseMove(a):this._onMouseOut(a)},this),500)},_onMouseMove:function(a){this._mouseEvent(a,this.on_mouse_move,"MouseMove")||this.callEvent("onMouseOut",[a||event])},_onMouseOut:function(a){this.callEvent("onMouseOut",[a||event])},_mouseEvent:function(a,b,c){a=a||event;for(var d=a.target||a.srcElement,e="",f=null,g=!1;d&&d.parentNode;){if(!g&&d.getAttribute&&(f=d.getAttribute(this._id))){if(d.getAttribute("userdata")&&this.callEvent("onLocateData",[f,d]),!this.callEvent("on"+c,[f,a,d]))return;g=!0}if(e=d.className,e&&(e=e.split(" "),e=e[0]||e[1],b[e]))return b[e].call(this,a,f||dhtmlx.html.locate(a,this._id),d);d=d.parentNode}return g}},dhtmlx.Settings={_init:function(){this._settings=this.config={}},define:function(a,b){return"object"==typeof a?this._parseSeetingColl(a):this._define(a,b)},_define:function(a,b){dhtmlx.assert_settings.call(this,a,b);var c=this[a+"_setter"];return this._settings[a]=c?c.call(this,b):b},_parseSeetingColl:function(a){if(a)for(var b in a)this._define(b,a[b])},_parseSettings:function(a,b){var c=dhtmlx.extend({},b);"object"!=typeof a||a.tagName||dhtmlx.extend(c,a),this._parseSeetingColl(c)},_mergeSettings:function(a,b){for(var c in b)switch(typeof a[c]){case"object":a[c]=this._mergeSettings(a[c]||{},b[c]);break;case"undefined":a[c]=b[c]}return a},_parseContainer:function(a,b,c){"object"!=typeof a||a.tagName||(a=a.container),this._obj=this.$view=dhtmlx.toNode(a),!this._obj&&c&&(this._obj=c(a)),dhtmlx.assert(this._obj,"Incorrect html container"),this._obj.className+=" "+b,this._obj.onselectstart=function(){return!1},this._dataobj=this._obj},_set_type:function(a){return"object"==typeof a?this.type_setter(a):(dhtmlx.assert(this.types,"RenderStack :: Types are not defined"),dhtmlx.assert(this.types[a],"RenderStack :: Inccorect type name",a),this.type=dhtmlx.extend({},this.types[a]),void this.customize())},customize:function(a){a&&dhtmlx.extend(this.type,a),this.type._item_start=dhtmlx.Template.fromHTML(this.template_item_start(this.type)),this.type._item_end=this.template_item_end(this.type),this.render()},type_setter:function(a){return this._set_type("object"==typeof a?dhtmlx.Type.add(this,a):a),a},template_setter:function(a){return this.type_setter({template:a})},css_setter:function(a){return this._obj.className+=" "+a,a}},dhtmlx.compat=function(a,b){dhtmlx.compat[a]&&dhtmlx.compat[a](b)},function(){if(!window.dhtmlxError){var a=function(){};window.dhtmlxError={catchError:a,throwError:a},window.convertStringToBoolean=function(a){return!!a},window.dhtmlxEventable=function(a){dhtmlx.extend(a,dhtmlx.EventSystem)};var b={getXMLTopNode:function(){},doXPath:function(a){return dhtmlx.DataDriver.xml.xpath(this.xml,a)},xmlDoc:{responseXML:!0}};dhtmlx.compat.dataProcessor=function(a){var c="_sendData",d="_in_progress",e="_tMode",f="_waitMode";a[c]=function(a,c){if(a){if(c&&(this[d][c]=(new Date).valueOf()),!this.callEvent("onBeforeDataSending",c?[c,this.getState(c)]:[]))return!1;var g=this,h=this.serverProcessor;"POST"!=this[e]?dhtmlx.ajax().get(h+(-1!=h.indexOf("?")?"&":"?")+this.serialize(a,c),"",function(a,c){b.xml=dhtmlx.DataDriver.xml.checkResponse(a,c),g.afterUpdate(g,null,null,null,b)}):dhtmlx.ajax().post(h,this.serialize(a,c),function(a,c){b.xml=dhtmlx.DataDriver.xml.checkResponse(a,c),g.afterUpdate(g,null,null,null,b)}),this[f]++}}}}}(),dhtmlx.attaches||(dhtmlx.attaches={}),dhtmlx.attaches.attachAbstract=function(a,b){var c=document.createElement("DIV");c.id="CustomObject_"+dhtmlx.uid(),c.style.width="100%",c.style.height="100%",c.cmp="grid",document.body.appendChild(c),this.attachObject(c.id),b.container=c.id;var d=this.vs[this.av];d.grid=new window[a](b),d.gridId=c.id,d.gridObj=c,d.grid.setSizes=function(){this.resize?this.resize():this.render()};var e="_viewRestore";return this.vs[this[e]()].grid},dhtmlx.attaches.attachDataView=function(a){return this.attachAbstract("dhtmlXDataView",a)},dhtmlx.attaches.attachChart=function(a){return this.attachAbstract("dhtmlXChart",a)},dhtmlx.compat.layout=function(){},dhtmlx.DataDriver.dhtmlxgrid={_grid_getter:"_get_cell_value",toObject:function(a){return this._grid=a,a},getRecords:function(a){return a.rowsBuffer},getDetails:function(a){for(var b={},c=0;c<this._grid.getColumnsNum();c++)b["data"+c]=this._grid[this._grid_getter](a,c);return b},getInfo:function(){return{_size:0,_from:0}}},dhtmlx.ui.Canvas=function(a,b,c){this._canvas_labels=[],this._canvas_name=b,this._obj=a,this._prepareCanvas(a,b,c)},dhtmlx.ui.Canvas.prototype={_prepareCanvas:function(a,b,c){return this._canvas=dhtmlx.html.create("canvas",{width:a.offsetWidth,height:a.offsetHeight,canvas_id:b,style:c||""}),a.appendChild(this._canvas),this._canvas.getContext||(dhtmlx._isIE?(dhtmlx.require("thirdparty/excanvas/excanvas.js"),G_vmlCanvasManager.init_(document),G_vmlCanvasManager.initElement(this._canvas)):dhtmlx.error("Canvas is not supported in the current browser")),this._canvas},getCanvas:function(a){return(this._canvas||this._prepareCanvas()).getContext(a||"2d")},_resizeCanvas:function(){this._canvas&&(this._canvas.setAttribute("width",this._canvas.parentNode.offsetWidth),this._canvas.setAttribute("height",this._canvas.parentNode.offsetHeight))},renderText:function(a,b,c,d,e){if(c){var f=dhtmlx.html.create("DIV",{"class":"dhx_canvas_text"+(d?" "+d:""),style:"left:"+a+"px; top:"+b+"px;"},c);return this._obj.appendChild(f),this._canvas_labels.push(f),e&&(f.style.width=e+"px"),f}},renderTextAt:function(a,b,c,d,e,f,g){var h=this.renderText.call(this,c,d,e,f,g);return h&&(a&&(h.style.top="middle"==a?parseInt(d-h.offsetHeight/2,10)+"px":d-h.offsetHeight+"px"),b&&(h.style.left="left"==b?c-h.offsetWidth+"px":parseInt(c-h.offsetWidth/2,10)+"px")),h},clearCanvas:function(a){var b,c=[];for(b=0;b<this._canvas_labels.length;b++)this._obj.removeChild(this._canvas_labels[b]);if(this._canvas_labels=[],!a&&this._obj._htmlmap){for(c=this._getMapAreas();c.length;)c[0].parentNode.removeChild(c[0]),c.splice(0,1);c=null,this._obj._htmlmap.getElementsByTagName("AREA").length||(this._obj._htmlmap.parentNode.removeChild(this._obj._htmlmap),this._obj._htmlmap=null)}this.getCanvas().clearRect(0,0,this._canvas.offsetWidth,this._canvas.offsetHeight)},toggleCanvas:function(){this._toggleCanvas("none"==this._canvas.style.display)},showCanvas:function(){this._toggleCanvas(!0)},hideCanvas:function(){this._toggleCanvas(!1)},_toggleCanvas:function(a){var b,c;for(c=0;c<this._canvas_labels.length;c++)this._canvas_labels[c].style.display=a?"":"none";if(this._obj._htmlmap)for(b=this._getMapAreas(),c=0;c<b.length;c++)a?b[c].removeAttribute("disabled"):b[c].setAttribute("disabled","true");this._canvas.style.display=a?"":"none"},_getMapAreas:function(){var a,b,c=[];for(a=this._obj._htmlmap.getElementsByTagName("AREA"),b=0;b<a.length;b++)a[b].getAttribute("userdata")==this._canvas_name&&c.push(a[b]);return c}},dhtmlXChart=function(a){this.name="Chart",this.version="3.0",dhtmlx.assert_enabled()&&this._assert(),dhtmlx.extend(this,dhtmlx.Settings),this._parseContainer(a,"dhx_chart"),dhtmlx.extend(this,dhtmlx.AtomDataLoader),dhtmlx.extend(this,dhtmlx.DataLoader),this.data.provideApi(this,!0),dhtmlx.extend(this,dhtmlx.EventSystem),dhtmlx.extend(this,dhtmlx.MouseEvents),dhtmlx.extend(this,dhtmlx.Destruction),dhtmlx.extend(this,dhtmlx.Group),dhtmlx.extend(this,dhtmlx.AutoTooltip);for(var b in dhtmlx.chart)dhtmlx.extend(this,dhtmlx.chart[b]);a.preset&&this.definePreset(a),this._parseSettings(a,this.defaults),this._series=[this._settings],this.data.attachEvent("onStoreUpdated",dhtmlx.bind(function(){this.render()},this)),this.attachEvent("onLocateData",this._switchSerie)},dhtmlXChart.prototype={_id:"dhx_area_id",on_click:{dhx_chart_legend_item:function(a,b,c){var d=c.getAttribute("series_id");if(this.callEvent("onLegendClick",[a,d,c])){var e=this._settings,f=e.legend.values,g=f&&"undefined"!=typeof f[d].toggle?f[d].toggle:e.legend.toggle;"undefined"!=typeof d&&this._series.length>1&&g&&(-1!=c.className.indexOf("hidden")?this.showSeries(d):this.hideSeries(d))}}},on_dblclick:{},on_mouse_move:{},bind:function(){dhx.BaseBind.legacyBind.apply(this,arguments)},sync:function(){dhx.BaseBind.legacySync.apply(this,arguments)},resize:function(){for(var a in this.canvases)this.canvases[a]._resizeCanvas();this.render()},view_setter:function(a){return dhtmlx.chart[a]||dhtmlx.error("Chart type extension is not loaded: "+a),"undefined"==typeof this._settings.offset&&(this._settings.offset=!("area"==a||"stackedArea"==a)),"radar"!=a||this._settings.yAxis||this.define("yAxis",{}),"scatter"==a&&(this._settings.yAxis||this.define("yAxis",{}),this._settings.xAxis||this.define("xAxis",{})),a},clearCanvas:function(){if(this.canvases&&"object"==typeof this.canvases)for(var a in this.canvases)this.canvases[a].clearCanvas()},render:function(){var a,b,c,d,e;if(this.callEvent("onBeforeRender",[this.data])){if(this.canvases&&"object"==typeof this.canvases)for(b in this.canvases)this.canvases[b].clearCanvas();else this.canvases={};for(this._settings.legend&&(this.canvases.legend||(this.canvases.legend=new dhtmlx.ui.Canvas(this._obj,"legend")),this._drawLegend(this.data.getRange(),this._obj.offsetWidth)),a=this._getChartBounds(this._obj.offsetWidth,this._obj.offsetHeight),d=new dhtmlx.ui.Map(this._id),e=this._settings,c=this._getChartData(),b=0;b<this._series.length;b++)this._settings=this._series[b],this.canvases[b]||(this.canvases[b]=new dhtmlx.ui.Canvas(this._obj,b,"z-index:"+(2+b))),this["pvt_render_"+this._settings.view](this.canvases[b].getCanvas(),c,a.start,a.end,b,d);d.render(this._obj),this._obj.lastChild.style.zIndex=1e3,this._applyBounds(this._obj.lastChild,a),this.callEvent("onAfterRender",[]),this._settings=e}},_applyBounds:function(a,b){var c={};c.left=b.start.x,c.top=b.start.y,c.width=b.end.x-b.start.x,c.height=b.end.y-b.start.y;for(var d in c)a.style[d]=c[d]+"px"},_getChartData:function(){var a,b,c,d,e,f,g,h,i,j;if(d=this.data.getRange(),a=-1!=this._settings.view.toLowerCase().indexOf("barh")?"yAxis":"xAxis",b=this._settings[a],b&&b.units&&"object"==typeof b.units){if(c=b.units,h=[],"undefined"!=typeof c.start&&"undefined"!=typeof c.end&&"undefined"!=typeof c.next)for(g=c.start;g<=c.end;)h.push(g),g=c.next.call(this,g);else"[object Array]"===Object.prototype.toString.call(c)&&(h=c);if(f=[],h.length){for(i=b.value,j={},e=0;e<d.length;e++)j[i(d[e])]=e;for(e=0;e<h.length;e++)"undefined"!=typeof j[h[e]]?(d[j[h[e]]].$unit=h[e],f.push(d[j[h[e]]])):f.push({$unit:h[e]})}return f}return d},value_setter:dhtmlx.Template.obj_setter,xValue_setter:dhtmlx.Template.obj_setter,yValue_setter:function(a){this.define("value",a)},alpha_setter:dhtmlx.Template.obj_setter,label_setter:dhtmlx.Template.obj_setter,lineColor_setter:dhtmlx.Template.obj_setter,borderColor_setter:dhtmlx.Template.obj_setter,pieInnerText_setter:dhtmlx.Template.obj_setter,gradient_setter:function(a){return"function"!=typeof a&&a&&a===!0&&(a="light"),a},colormap:{RAINBOW:function(a){var b=Math.floor(this.indexById(a.id)/this.dataCount()*1536);return 1536==b&&(b-=1),this._rainbow[Math.floor(b/256)](b%256)}},color_setter:function(a){return this.colormap[a]||dhtmlx.Template.obj_setter(a)},fill_setter:function(a){return a&&0!=a?dhtmlx.Template.obj_setter(a):!1},definePreset:function(a){this.define("preset",a.preset),delete a.preset},preset_setter:function(a){var b,c,d;if(this.defaults=dhtmlx.extend({},this.defaults),"object"==typeof dhtmlx.presets.chart[a]){d=dhtmlx.presets.chart[a];for(b in d)if("object"==typeof d[b])if(this.defaults[b]&&"object"==typeof this.defaults[b]){this.defaults[b]=dhtmlx.extend({},this.defaults[b]);for(c in d[b])this.defaults[b][c]=d[b][c]}else this.defaults[b]=dhtmlx.extend({},d[b]);else this.defaults[b]=d[b];return a}return!1},legend_setter:function(a){return a?("object"!=typeof a&&(a={template:a}),this._mergeSettings(a,{width:150,height:18,layout:"y",align:"left",valign:"bottom",template:"",toggle:-1!=this._settings.view.toLowerCase().indexOf("stacked")?"":"hide",marker:{type:"square",width:15,height:15,radius:3},margin:4,padding:3}),a.template=dhtmlx.Template.setter(a.template),a):(this.legendObj&&(this.legendObj.innerHTML="",this.legendObj=null),!1)},defaults:{color:"RAINBOW",alpha:"1",label:!1,value:"{obj.value}",padding:{},view:"pie",lineColor:"#ffffff",cant:.5,width:30,labelWidth:100,line:{width:2,color:"#1293f8"},item:{radius:3,borderColor:"#636363",borderWidth:1,color:"#ffffff",alpha:1,type:"r",shadow:!1},shadow:!0,gradient:!1,border:!0,labelOffset:20,origin:"auto"},item_setter:function(a){"object"!=typeof a&&(a={color:a,borderColor:a}),this._mergeSettings(a,dhtmlx.extend({},this.defaults.item));for(var b=["alpha","borderColor","color","radius"],c=0;c<b.length;c++)a[b[c]]=dhtmlx.Template.setter(a[b[c]]);return a},line_setter:function(a){return"object"!=typeof a&&(a={color:a}),dhtmlx.extend(this.defaults.line,a),a=dhtmlx.extend({},this.defaults.line),a.color=dhtmlx.Template.setter(a.color),a},padding_setter:function(a){return"object"!=typeof a&&(a={left:a,right:a,top:a,bottom:a}),this._mergeSettings(a,{left:50,right:20,top:35,bottom:40}),a},xAxis_setter:function(a){if(!a)return!1;"object"!=typeof a&&(a={template:a}),a.value||(a.value=a.template),this._mergeSettings(a,{title:"",color:"#000000",lineColor:"#cfcfcf",template:"{obj}",value:"{obj}",lines:!0});var b=["lineColor","template","lines","value"];return this._converToTemplate(b,a),this._configXAxis=dhtmlx.extend({},a),a},yAxis_setter:function(a){this._mergeSettings(a,{title:"",color:"#000000",lineColor:"#cfcfcf",template:"{obj}",lines:!0,bg:"#ffffff"});var b=["lineColor","template","lines","bg"];return this._converToTemplate(b,a),this._configYAxis=dhtmlx.extend({},a),a},_converToTemplate:function(a,b){for(var c=0;c<a.length;c++)b[a[c]]=dhtmlx.Template.setter(b[a[c]])},_drawScales:function(a,b,c,d,e,f){var g=0;return this._settings.yAxis&&(this.canvases.y=new dhtmlx.ui.Canvas(this._obj,"axis_y"),g=this._drawYAxis(this.canvases.y.getCanvas(),a,b,c,d,e)),this._settings.xAxis&&(this.canvases.x=new dhtmlx.ui.Canvas(this._obj,"axis_x"),this._drawXAxis(this.canvases.x.getCanvas(),a,b,c,f,g)),g},_drawXAxis:function(a,b,c,d,e,f){for(var g,h=c.x-.5,i=parseInt(f?f:d.y,10)+.5,j=d.x,k=!0,l=0;l<b.length;l++){this._settings.offset===!0?g=h+e/2+l*e:(g=l==b.length-1?d.x:h+l*e,k=!!l),g=Math.ceil(g)-.5;var m="auto"!=this._settings.origin&&"bar"==this._settings.view&&parseFloat(this._settings.value(b[l]))<this._settings.origin;this._drawXAxisLabel(g,i,b[l],k,m),(this._settings.offset||l)&&this._settings.xAxis.lines.call(this,b[l])&&this._drawXAxisLine(a,g,d.y,c.y,b[l])}this.canvases.x.renderTextAt(!0,!1,h,d.y+this._settings.padding.bottom-3,this._settings.xAxis.title,"dhx_axis_title_x",d.x-c.x),this._drawLine(a,h,i,j,i,this._settings.xAxis.color,1),this._settings.xAxis.lines.call(this,{})&&this._settings.offset&&this._drawLine(a,j+.5,d.y,j+.5,c.y+.5,this._settings.xAxis.color,.2)},_drawYAxis:function(a,b,c,d,e,f){var g,h={};if(this._settings.yAxis){var i=c.x-.5,j=d.y,k=c.y,l=d.y;if(this._settings.yAxis.step&&(g=parseFloat(this._settings.yAxis.step)),("undefined"==typeof this._configYAxis.step||"undefined"==typeof this._configYAxis.start||"undefined"==typeof this._configYAxis.end)&&(h=this._calculateScale(e,f),e=h.start,f=h.end,g=h.step,this._settings.yAxis.end=f,this._settings.yAxis.start=e),this._setYAxisTitle(c,d),0!==g){if(f==e)return j;for(var m=(j-k)*g/(f-e),n=0,o=e;f>=o;o+=g){h.fixNum&&(o=parseFloat(new Number(o).toFixed(h.fixNum)));var p=Math.floor(j-n*m)+.5;o==e&&"auto"==this._settings.origin||!this._settings.yAxis.lines.call(this,o)||this._drawLine(a,i,p,d.x,p,this._settings.yAxis.lineColor.call(this,o),1),o==this._settings.origin&&(l=p);var q=o;if(1>g){var r=Math.min(this._log10(g),0>=e?0:this._log10(e)),s=Math.pow(10,-r);q=Math.round(o*s)/s,o=q}this.canvases.y.renderText(0,p-5,this._settings.yAxis.template(q.toString()),"dhx_axis_item_y",c.x-5),n++}return this._drawLine(a,i,j+1,i,k,this._settings.yAxis.color,1),l}}},_setYAxisTitle:function(a,b){var c="dhx_axis_title_y"+(dhtmlx._isIE&&9!=dhtmlx._isIE?" dhx_ie_filter":""),d=this.canvases.y.renderTextAt("middle",!1,0,parseInt((b.y-a.y)/2+a.y,10),this._settings.yAxis.title,c);d&&(d.style.left=(dhtmlx.env.transform?(d.offsetHeight-d.offsetWidth)/2:0)+"px")},_calculateScale:function(a,b){"auto"!=this._settings.origin&&this._settings.origin<a&&(a=this._settings.origin);var c,d,e;c=(b-a)/8||1;var f=Math.floor(this._log10(c)),g=Math.pow(10,f),h=c/g;if(h=h>5?10:5,c=parseInt(h,10)*g,c>Math.abs(a))d=0>a?-c:0;else{var i=Math.abs(a),j=Math.floor(this._log10(i)),k=i/Math.pow(10,j);for(d=Math.ceil(10*k)/10*Math.pow(10,j)-c,i>1&&c>.1&&(d=Math.ceil(d));0>a?a>=d:d>=a;)d-=c;0>a&&(d=-d-2*c)}for(e=d;b>e;)e+=c,e=parseFloat(new Number(e).toFixed(Math.abs(f)));return{start:d,end:e,step:c,fixNum:Math.abs(f)}},_getLimits:function(a,b){var c,d,e=arguments.length&&"h"==a?this._configXAxis:this._configYAxis;if(b=b||"value",e&&"undefined"!=typeof e.end&&"undefined"!=typeof e.start&&e.step)c=parseFloat(e.end),d=parseFloat(e.start);else if(c=this.max(this._series[0][b]),d=e&&"undefined"!=typeof e.start?parseFloat(e.start):this.min(this._series[0][b]),this._series.length>1)for(var f=1;f<this._series.length;f++){var g=this.max(this._series[f][b]),h=this.min(this._series[f][b]);g>c&&(c=g),d>h&&(d=h)}return{max:c,min:d}},_log10:function(a){var b="log";return Math.floor(Math[b](a)/Math.LN10)},_drawXAxisLabel:function(a,b,c,d,e){if(this._settings.xAxis){var f=this.canvases.x.renderTextAt(e,d,a,b-(e?2:0),this._settings.xAxis.template(c));f&&(f.className+=" dhx_axis_item_x")}},_drawXAxisLine:function(a,b,c,d,e){this._settings.xAxis&&this._settings.xAxis.lines&&this._drawLine(a,b,c,b,d,this._settings.xAxis.lineColor.call(this,e),1)},_drawLine:function(a,b,c,d,e,f,g){a.strokeStyle=f,a.lineWidth=g,a.beginPath(),a.moveTo(b,c),a.lineTo(d,e),a.stroke(),a.lineWidth=1},_getRelativeValue:function(a,b){var c,d=1;return c=b!=a?b-a:a,[c,d]},_rainbow:[function(a){return"#FF"+dhtmlx.math.toHex(a/2,2)+"00"},function(a){return"#FF"+dhtmlx.math.toHex(a/2+128,2)+"00"},function(a){return"#"+dhtmlx.math.toHex(255-a,2)+"FF00"},function(a){return"#00FF"+dhtmlx.math.toHex(a,2)},function(a){return"#00"+dhtmlx.math.toHex(255-a,2)+"FF"},function(a){return"#"+dhtmlx.math.toHex(a,2)+"00FF"}],addSeries:function(a){var b=this._settings;this._settings=dhtmlx.extend({},b),this._parseSettings(a,{}),this._series.push(this._settings),this._settings=b},_switchSerie:function(a,b){var c;if(this._active_serie=b.getAttribute("userdata"),this._series[this._active_serie]){for(var d=0;d<this._series.length;d++)c=this._series[d].tooltip,c&&c.disable();b.getAttribute("disabled")||(c=this._series[this._active_serie].tooltip,c&&c.enable())}},hideSeries:function(a){this.canvases[a].hideCanvas(),this._settings.legend.values&&this._settings.legend.values[a]&&(this._settings.legend.values[a].$hidden=!0),this._drawLegend()},showSeries:function(a){this.canvases[a].showCanvas(),this._settings.legend.values&&this._settings.legend.values[a]&&delete this._settings.legend.values[a].$hidden,this._drawLegend()},_drawLegend:function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n=0,o=0;if(a=a||[],b=b||this._obj.offsetWidth,j=this.canvases.legend.getCanvas(),d=this._settings.legend,i="x"!=this._settings.legend.layout?"width:"+d.width+"px":"",this.legendObj&&(this.legendObj.innerHTML=""),this.canvases.legend.clearCanvas(!0),e=dhtmlx.html.create("DIV",{"class":"dhx_chart_legend",style:"left:"+n+"px; top:"+o+"px;"+i},""),d.padding&&(e.style.padding=d.padding+"px"),this.legendObj=e,this._obj.appendChild(e),g=[],d.values)for(c=0;c<d.values.length;c++)g.push(this._drawLegendText(e,d.values[c].text,"undefined"!=typeof d.values[c].id?typeof d.values[c].id:c,d.values[c].$hidden));else for(c=0;c<a.length;c++)g.push(this._drawLegendText(e,d.template(a[c])));for(h=e.offsetWidth,f=e.offsetHeight,h<this._obj.offsetWidth&&("x"==d.layout&&"center"==d.align&&(n=(this._obj.offsetWidth-h)/2),"right"==d.align&&(n=this._obj.offsetWidth-h),d.margin&&"center"!=d.align&&(n+=("left"==d.align?1:-1)*d.margin)),f<this._obj.offsetHeight&&("middle"==d.valign&&"center"!=d.align&&"x"!=d.layout?o=(this._obj.offsetHeight-f)/2:"bottom"==d.valign&&(o=this._obj.offsetHeight-f),d.margin&&"middle"!=d.valign&&(o+=("top"==d.valign?1:-1)*d.margin)),e.style.left=n+"px",e.style.top=o+"px",j.save(),c=0;c<g.length;c++)m=g[c],d.values&&d.values[c].$hidden?(l=!0,k=d.values[c].disableColor?d.values[c].disableColor:"#d9d9d9"):(l=!1,k=d.values?d.values[c].color:this._settings.color.call(this,a[c])),this._drawLegendMarker(j,m.offsetLeft+n,m.offsetTop+o,k,m.offsetHeight,l,c);j.restore(),g=null},_drawLegendText:function(a,b,c,d){var e="";"x"==this._settings.legend.layout&&(e="float:left;");var f=dhtmlx.html.create("DIV",{style:e+"padding-left:"+(10+this._settings.legend.marker.width)+"px","class":"dhx_chart_legend_item"+(d?" hidden":"")},b);return arguments.length>2&&f.setAttribute("series_id",c),a.appendChild(f),f},_drawLegendMarker:function(a,b,c,d,e,f,g){var h=[],i=this._settings.legend.marker,j=this._settings.legend.values,k=j&&j[g].markerType?j[g].markerType:i.type;if(d&&(a.strokeStyle=a.fillStyle=d),a.beginPath(),"round"!=k&&i.radius)if("item"==k){if(this._settings.line&&"scatter"!=this._settings.view&&!this._settings.disableLines){a.beginPath(),a.lineWidth=this._series[g].line.width,a.strokeStyle=f?d:this._series[g].line.color.call(this,{});var l=b+5,m=c+e/2;a.moveTo(l,m);var n=l+i.width;a.lineTo(n,m),a.stroke()}var o=this._series[g].item,p=parseInt(o.radius.call(this,{}),10)||0;p&&(a.beginPath(),f?(a.lineWidth=o.borderWidth,a.strokeStyle=d,a.fillStyle=d):(a.lineWidth=o.borderWidth,a.fillStyle=o.color.call(this,{}),a.strokeStyle=o.borderColor.call(this,{}),a.globalAlpha=o.alpha.call(this,{})),a.beginPath(),b+=i.width/2+5,c+=e/2,this._strokeChartItem(a,b,c,p+1,o.type),a.fill(),a.stroke()),a.globalAlpha=1}else a.lineWidth=1,b+=5,c+=e/2-i.height/2,h=[[b+i.radius,c+i.radius,i.radius,Math.PI,3*Math.PI/2,!1],[b+i.width-i.radius,c],[b+i.width-i.radius,c+i.radius,i.radius,-Math.PI/2,0,!1],[b+i.width,c+i.height-i.radius],[b+i.width-i.radius,c+i.height-i.radius,i.radius,0,Math.PI/2,!1],[b+i.radius,c+i.height],[b+i.radius,c+i.height-i.radius,i.radius,Math.PI/2,Math.PI,!1],[b,c+i.radius]],this._path(a,h);else{a.lineWidth=i.height,a.lineCap=k,b+=a.lineWidth/2+5,c+=e/2,a.moveTo(b,c);var n=b+i.width-i.height+1;a.lineTo(n,c)}a.stroke(),a.fill()},_getChartBounds:function(a,b){var c,d,e,f;if(c=this._settings.padding.left,d=this._settings.padding.top,e=a-this._settings.padding.right,f=b-this._settings.padding.bottom,this._settings.legend){var g=this._settings.legend,h=this._settings.legend.width,i=this._settings.legend.height;"x"==g.layout?"center"==g.valign?"right"==g.align?e-=h:"left"==g.align&&(c+=h):"bottom"==g.valign?f-=i:d+=i:"right"==g.align?e-=h:"left"==g.align&&(c+=h)}return{start:{x:c,y:d},end:{x:e,y:f}}},_getStackedLimits:function(a){var b,c,d,e,f;if(this._settings.yAxis&&"undefined"!=typeof this._settings.yAxis.end&&"undefined"!=typeof this._settings.yAxis.start&&this._settings.yAxis.step)d=parseFloat(this._settings.yAxis.end),e=parseFloat(this._settings.yAxis.start);else{for(b=0;b<a.length;b++)for(a[b].$sum=0,a[b].$min=1/0,c=0;c<this._series.length;c++)f=parseFloat(this._series[c].value(a[b])||0),isNaN(f)||(-1!=this._series[c].view.toLowerCase().indexOf("stacked")&&(a[b].$sum+=f),f<a[b].$min&&(a[b].$min=f));for(d=-1/0,e=1/0,b=0;b<a.length;b++)a[b].$sum>d&&(d=a[b].$sum),a[b].$min<e&&(e=a[b].$min);e>0&&(e=0)}return{max:d,min:e}},_setBarGradient:function(a,b,c,d,e,f,g,h){var i,j,k,l,m,n;return"light"==f?(i="x"==h?a.createLinearGradient(b,c,d,c):a.createLinearGradient(b,c,b,e),n=[[0,"#FFFFFF"],[.9,g],[1,g]],j=2):"falling"==f||"rising"==f?(i="x"==h?a.createLinearGradient(b,c,d,c):a.createLinearGradient(b,c,b,e),k=dhtmlx.math.toRgb(g),l=dhtmlx.math.rgbToHsv(k[0],k[1],k[2]),l[1]*=.5,m="rgb("+dhtmlx.math.hsvToRgb(l[0],l[1],l[2])+")","falling"==f?n=[[0,m],[.7,g],[1,g]]:"rising"==f&&(n=[[0,g],[.3,g],[1,m]]),j=0):(a.globalAlpha=.37,j=0,i="x"==h?a.createLinearGradient(b,e,b,c):a.createLinearGradient(b,c,d,c),n=[[0,"#9d9d9d"],[.3,"#e8e8e8"],[.45,"#ffffff"],[.55,"#ffffff"],[.7,"#e8e8e8"],[1,"#9d9d9d"]]),this._gradient(i,n),{gradient:i,offset:j}},_getPositionByAngle:function(a,b,c,d){return a*=-1,b+=Math.cos(a)*d,c-=Math.sin(a)*d,{x:b,y:c}},_gradient:function(a,b){for(var c=0;c<b.length;c++)a.addColorStop(b[c][0],b[c][1])},_path:function(a,b){var c,d;for(c=0;c<b.length;c++)d=c?"lineTo":"moveTo",b[c].length>2&&(d="arc"),a[d].apply(a,b[c])
},_circle:function(a,b,c,d){a.arc(b,c,d,2*Math.PI,!0)},_addMapRect:function(a,b,c,d,e){a.addRect(b,[c[0].x-d.x,c[0].y-d.y,c[1].x-d.x,c[1].y-d.y],e)}},dhtmlx.compat("layout");