define(["jquery"],function(a){var b=function(){};return b.defaultOptions={},a.extend(b.prototype,{init:function(c){this.options=a.extend({},b.defaultOptions,c),this.splice=Array.prototype.splice,this.readyDef=a.Deferred(),this.fieldElements={}},set section(a){this._section=a},get section(){return this._section},set sectionElement(a){this._sectionElement=a},get sectionElement(){return this._sectionElement},set group(a){this._group=a},get group(){return this._group},_fill:function(a,b){var c,d,e,f=this,g=0;a._title&&this.setTitle(a._title),this.group.eachFields(function(b){f.getFieldElement(b.getName(),0),a[b.getName()]||(a[b.getName()]=[])});for(c in a)for(a[c]instanceof Array||(a[c]=[a[c]]),d=0,e=a[c].length,0==e&&(a[c][0]=null,e=1);e>d;d++)g++,this.fillElement(c,d,a[c][d],b).then(function(){g--,0==g&&f.readyDef.resolve()});return f.readyDef},fill:function(a,b){return this._fill(a,b)},fillElement:function(b,c,d){return a.when(this.getFieldElement(b,c)).then(function(a){a&&a.setDefaultOr(d)})},inDom:function(){var a=this;this.group.eachFields(function(b){a.eachFieldElements(b.getName(),function(a){a._inDom=!0,a.inDom(),a._validate(a._value)})})},visible:function(){},show:function(){this.dom.show()},hide:function(){this.dom.hide()},getFieldElement:function(a,b){var c,d=this;if(this.group.getField(a))return this.fieldElements[a]=this.fieldElements[a]||[],this.fieldElements[a][b]?this.fieldElements[a][b]:c=this.group.getField(a).makeElement().done(function(c){c.group=d.group,c.groupElement=d,d.sectionElement.addFieldElement(c),d.fieldElements[a][b]=c})},_getElement:function(a,b,c,d){return a[c]=a[c]||[],a[c][d]},getFieldElements:function(){return this.fieldElements},eachFieldElements:function(a,b){var c,d,e=this.getFieldElements()[a];if(!e)return this.form.throwError("Cannot iterate over field. Field "+a+" does not exist");for(c=0,d=e.length;d>c;c++)b.call(this,e[c])},makeDomTpl:function(){return this._makeDomTpl()},getTitle:function(){return this._title||this.group.getTitle()},setTitle:function(a){this._title=a}}),b});