define(["require","jquery","./field","./grouplistelement","./grouptableelement","./grouptextelement"],function(a,b,c,d,e,f){var g=function(a){this.name=a};return g.defaultOptions={},b.extend(g.prototype,{init:function(a){this.options=b.extend({},g.defaultOptions,a),this.fields={},this.deferreds={},this.elements=[],this.nbFields=0},getName:function(){return this.name},getTitle:function(){return this.options.title},setStructure:function(a){var b;a=a.fields;for(b in a)this.addField(a[b],b)},addField:function(d,e){var f=e||d.name,g=this;if(this.fields[f])return this.form.throwError('Field "'+sectionobj.getName()+'" already exists');if(this.nbFields++,d instanceof c)return this.sections[d.getName()]=d,d;var h=d.type,i=b.Deferred();return a(["./types/"+h+"/field"],function(a){field=new a(f),field.init(d),field.group=g,g.fields[f]=field,(field.options.displaySource||field.options.displayTarget)&&g.form.conditionalDisplayer.init(field,field.options.displaySource,field.options.displayTarget),i.resolve(field)}),this.form.addField(i),this.deferreds[f]=i,this.fields[f]=!1,i},_setTpl:function(a){this.tpl=a,this._tplClean=a},fieldExists:function(a){return!!this.fields[a]},getField:function(a,b){return void 0!==b?this.getFieldElement(a,b):this.fields[a]||"_title"==a?this.fields[a]:this.form.throwError('Cannot return field "'+a+'". Field does not exist')},eachFields:function(a){var b;for(b in this.fields)a.call(this,this.fields[b])},makeElement:function(){var a;switch(this.options.type){case"table":a=new e;break;case"text":a=new f;break;case"list":default:a=new d}return a.init(this.options),a.group=this,this.elements.push(a),a},ready:function(){return b.when(this.deferreds)}}),Object.defineProperty(g.prototype,"section",{enumerable:!1,configurable:!1,get:function(){return this._section},set:function(a){this._section=a}}),Object.defineProperty(g.prototype,"form",{enumerable:!0,configurable:!1,get:function(){return this._form||this.section.form},set:function(a){this._form=a}}),Object.defineProperty(g.prototype,"name",{enumerable:!0,configurable:!1,get:function(){return this._name},set:function(a){this._name=a}}),g});