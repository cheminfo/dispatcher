svgEditor.addExtension("server_opensave",{callback:function(){{var a="/+modify";$('<iframe name="output_frame" src="#"/>').hide().appendTo("body")}svgEditor.setCustomHandlers({save:function(b,c){var d='<?xml version="1.0"?>\n'+c,e=$.param.querystring(),f=e.substr(9).split("/+get/")[1],g=svgedit.utilities.encode64(d);$("#export_canvas").length||$("<canvas>",{id:"export_canvas"}).hide().appendTo("body");var h=$("#export_canvas")[0];h.width=svgCanvas.contentW,h.height=svgCanvas.contentH,$.getScript("canvg/canvg.js",function(){canvg(h,d,{renderCallback:function(){{var b=h.toDataURL("image/png"),c=svgedit.utilities.encode64(b);$("<form>").attr({method:"post",action:a+"/"+f,target:"output_frame"}).append('<input type="hidden" name="png_data" value="'+c+'">').append('<input type="hidden" name="filepath" value="'+g+'">').append('<input type="hidden" name="filename" value="drawing.svg">').append('<input type="hidden" name="contenttype" value="application/x-svgdraw">').appendTo("body").submit().remove()}}})}),alert("Saved! Return to Item View!"),top.window.location="/"+f}})}});