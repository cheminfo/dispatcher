svgEditor.addExtension("eyedropper",function(){function a(a){var c=b.getMode();if("eyedropper"!=c){var d=null,f=$("#tool_eyedropper");!a.multiselected&&a.elems[0]&&-1===$.inArray(a.elems[0].nodeName,["svg","g","use"])?(d=a.elems[0],f.removeClass("disabled"),e.fillPaint=d.getAttribute("fill")||"black",e.fillOpacity=d.getAttribute("fill-opacity")||1,e.strokePaint=d.getAttribute("stroke"),e.strokeOpacity=d.getAttribute("stroke-opacity")||1,e.strokeWidth=d.getAttribute("stroke-width"),e.strokeDashArray=d.getAttribute("stroke-dasharray"),e.strokeLinecap=d.getAttribute("stroke-linecap"),e.strokeLinejoin=d.getAttribute("stroke-linejoin"),e.opacity=d.getAttribute("opacity")||1):f.addClass("disabled")}}var b=svgEditor.canvas,c=svgedit.history.ChangeElementCommand,d=function(a){b.undoMgr.addCommandToHistory(a)},e={fillPaint:"red",fillOpacity:1,strokePaint:"black",strokeOpacity:1,strokeWidth:5,strokeDashArray:null,opacity:1,strokeLinecap:"butt",strokeLinejoin:"miter"};return{name:"eyedropper",svgicons:svgEditor.curConfig.extPath+"eyedropper-icon.xml",buttons:[{id:"tool_eyedropper",type:"mode",title:"Eye Dropper Tool",key:"I",events:{click:function(){b.setMode("eyedropper")}}}],selectedChanged:a,elementChanged:a,mouseDown:function(a){var f=b.getMode();if("eyedropper"==f){var g=a.event,h=g.target;if(-1===$.inArray(h.nodeName,["svg","g","use"])){var i={},j=function(a,b,c){i[b]=a.getAttribute(b),a.setAttribute(b,c)};e.fillPaint&&j(h,"fill",e.fillPaint),e.fillOpacity&&j(h,"fill-opacity",e.fillOpacity),e.strokePaint&&j(h,"stroke",e.strokePaint),e.strokeOpacity&&j(h,"stroke-opacity",e.strokeOpacity),e.strokeWidth&&j(h,"stroke-width",e.strokeWidth),e.strokeDashArray&&j(h,"stroke-dasharray",e.strokeDashArray),e.opacity&&j(h,"opacity",e.opacity),e.strokeLinecap&&j(h,"stroke-linecap",e.strokeLinecap),e.strokeLinejoin&&j(h,"stroke-linejoin",e.strokeLinejoin),d(new c(h,i))}}}}});