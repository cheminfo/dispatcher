var overviewWindowGlobals={};svgEditor.addExtension("overview_window",function(){var a='		<div id="overview_window_content_pane" style=" width:100%; word-wrap:break-word;  display:inline-block; margin-top:20px;">			<div id="overview_window_content" style="position:relative; left:12px; top:0px;">				<div style="background-color:#A0A0A0; display:inline-block; overflow:visible;">					<svg id="overviewMiniView" width="150" height="100" x="0" y="0" viewBox="0 0 4800 3600" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">						<use x="0" y="0" xlink:href="#svgroot"> </use>					 </svg>					 <div id="overview_window_view_box" style="min-width:50px; min-height:50px; position:absolute; top:30px; left:30px; z-index:5; background-color:rgba(255,0,102,0.3);">					 </div>				 </div>			</div>		</div>';$("#sidepanels").append(a);var b=function(){var a=parseFloat($("#workarea").css("height")),b=parseFloat($("#workarea").css("width")),c=$("#workarea").scrollLeft(),d=$("#workarea").scrollTop(),e=parseFloat($("#svgcanvas").css("width")),f=parseFloat($("#svgcanvas").css("height")),g=$("#overviewMiniView").attr("width"),h=$("#overviewMiniView").attr("height"),i=c/e*g,j=d/f*h,k=b/e*g,l=a/f*h;$("#overview_window_view_box").css("min-width",k+"px"),$("#overview_window_view_box").css("min-height",l+"px"),$("#overview_window_view_box").css("top",j+"px"),$("#overview_window_view_box").css("left",i+"px")};$("#workarea").scroll(function(){overviewWindowGlobals.viewBoxDragging||b()}),$("#workarea").resize(b),b();var c=function(){var a=$("#svgroot").attr("width"),c=$("#svgroot").attr("height"),d=640,e=480;svgedit.browser.isIE()&&(d=0,e=0);var f=$("#overviewMiniView").attr("width"),g=c/a*f;$("#overviewMiniView").attr("viewBox",d+" "+e+" "+a+" "+c),$("#overviewMiniView").attr("height",g),b()};c(),overviewWindowGlobals.viewBoxDragging=!1;var d=function(){var a=parseFloat($("#svgcanvas").css("width")),b=parseFloat($("#svgcanvas").css("height")),c=$("#overviewMiniView").attr("width"),d=$("#overviewMiniView").attr("height"),e=parseFloat($("#overview_window_view_box").css("left")),f=parseFloat($("#overview_window_view_box").css("top")),g=e/c*a,h=f/d*b;$("#workarea").scrollLeft(g),$("#workarea").scrollTop(h)};return $("#overview_window_view_box").draggable({containment:"parent",drag:d,start:function(){overviewWindowGlobals.viewBoxDragging=!0},stop:function(){overviewWindowGlobals.viewBoxDragging=!1}}),$("#overviewMiniView").click(function(a){var b=a.offsetX||a.originalEvent.layerX,c=a.offsetY||a.originalEvent.layerY,e=$("#overviewMiniView").attr("width"),f=$("#overviewMiniView").attr("height"),g=parseFloat($("#overview_window_view_box").css("min-width")),h=parseFloat($("#overview_window_view_box").css("min-height")),i=b-.5*g,j=c-.5*h;0>i&&(i=0),0>j&&(j=0),i+g>e&&(i=e-g),j+h>f&&(j=f-h),$("#overview_window_view_box").css("top",j+"px"),$("#overview_window_view_box").css("left",i+"px"),d()}),{name:"overview window",canvasUpdated:c,workareaResized:b}});