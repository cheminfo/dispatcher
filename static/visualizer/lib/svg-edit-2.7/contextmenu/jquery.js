jQuery&&function(){var a=$(window),b=$(document);$.extend($.fn,{contextMenu:function(c,d){return void 0==c.menu?!1:(void 0==c.inSpeed&&(c.inSpeed=150),void 0==c.outSpeed&&(c.outSpeed=75),0==c.inSpeed&&(c.inSpeed=-1),0==c.outSpeed&&(c.outSpeed=-1),$(this).each(function(){var e=$(this),f=$(e).offset(),g=$("#"+c.menu);g.addClass("contextMenu"),$(this).bind("mousedown",function(h){var i=h;$(this).mouseup(function(h){var j=$(this);if(j.unbind("mouseup"),2===i.button||c.allowLeft||i.ctrlKey&&svgedit.browser.isMac()){if(h.stopPropagation(),$(".contextMenu").hide(),e.hasClass("disabled"))return!1;var k=h.pageX,l=h.pageY,m=a.width()-g.width(),n=a.height()-g.height();k>m-15&&(k=m-15),l>n-30&&(l=n-30),b.unbind("click"),g.css({top:l,left:k}).fadeIn(c.inSpeed),g.find("A").mouseover(function(){g.find("LI.hover").removeClass("hover"),$(this).parent().addClass("hover")}).mouseout(function(){g.find("LI.hover").removeClass("hover")}),b.keypress(function(a){switch(a.keyCode){case 38:g.find("LI.hover").length?(g.find("LI.hover").removeClass("hover").prevAll("LI:not(.disabled)").eq(0).addClass("hover"),g.find("LI.hover").length||g.find("LI:last").addClass("hover")):g.find("LI:last").addClass("hover");break;case 40:0==g.find("LI.hover").length?g.find("LI:first").addClass("hover"):(g.find("LI.hover").removeClass("hover").nextAll("LI:not(.disabled)").eq(0).addClass("hover"),g.find("LI.hover").length||g.find("LI:first").addClass("hover"));break;case 13:g.find("LI.hover A").trigger("click");break;case 27:b.trigger("click")}}),g.find("A").unbind("mouseup"),g.find("LI:not(.disabled) A").mouseup(function(){return b.unbind("click").unbind("keypress"),$(".contextMenu").hide(),d&&d($(this).attr("href").substr(1),$(j),{x:k-f.left,y:l-f.top,docX:k,docY:l}),!1}),setTimeout(function(){b.click(function(){return b.unbind("click").unbind("keypress"),g.fadeOut(c.outSpeed),!1})},0)}})}),$("#"+c.menu).each($.browser.mozilla?function(){$(this).css({MozUserSelect:"none"})}:$.browser.msie?function(){$(this).bind("selectstart.disableTextSelect",function(){return!1})}:function(){$(this).bind("mousedown.disableTextSelect",function(){return!1})}),$(e).add($("UL.contextMenu")).bind("contextmenu",function(){return!1})}),$(this))},disableContextMenuItems:function(a){return void 0==a?($(this).find("LI").addClass("disabled"),$(this)):($(this).each(function(){if(void 0!=a)for(var b=a.split(","),c=0;c<b.length;c++)$(this).find('A[href="'+b[c]+'"]').parent().addClass("disabled")}),$(this))},enableContextMenuItems:function(a){return void 0==a?($(this).find("LI.disabled").removeClass("disabled"),$(this)):($(this).each(function(){if(void 0!=a)for(var b=a.split(","),c=0;c<b.length;c++)$(this).find('A[href="'+b[c]+'"]').parent().removeClass("disabled")}),$(this))},disableContextMenu:function(){return $(this).each(function(){$(this).addClass("disabled")}),$(this)},enableContextMenu:function(){return $(this).each(function(){$(this).removeClass("disabled")}),$(this)},destroyContextMenu:function(){return $(this).each(function(){$(this).unbind("mousedown").unbind("mouseup")}),$(this)}})}(jQuery);