!function(){svgedit.math||(svgedit.math={});var a=1e-14,b=document.createElementNS(svgedit.NS.SVG,"svg");svgedit.math.transformPoint=function(a,b,c){return{x:c.a*a+c.c*b+c.e,y:c.b*a+c.d*b+c.f}},svgedit.math.isIdentity=function(a){return 1===a.a&&0===a.b&&0===a.c&&1===a.d&&0===a.e&&0===a.f},svgedit.math.matrixMultiply=function(){for(var b=arguments,c=b.length,d=b[c-1];c-->1;){var e=b[c-1];d=e.multiply(d)}return Math.abs(d.a)<a&&(d.a=0),Math.abs(d.b)<a&&(d.b=0),Math.abs(d.c)<a&&(d.c=0),Math.abs(d.d)<a&&(d.d=0),Math.abs(d.e)<a&&(d.e=0),Math.abs(d.f)<a&&(d.f=0),d},svgedit.math.hasMatrixTransform=function(a){if(!a)return!1;for(var b=a.numberOfItems;b--;){var c=a.getItem(b);if(1==c.type&&!svgedit.math.isIdentity(c.matrix))return!0}return!1},svgedit.math.transformBox=function(a,b,c,d,e){var f=svgedit.math.transformPoint,g=f(a,b,e),h=f(a+c,b,e),i=f(a,b+d,e),j=f(a+c,b+d,e),k=Math.min(g.x,h.x,i.x,j.x),l=Math.max(g.x,h.x,i.x,j.x),m=Math.min(g.y,h.y,i.y,j.y),n=Math.max(g.y,h.y,i.y,j.y);return{tl:g,tr:h,bl:i,br:j,aabox:{x:k,y:m,width:l-k,height:n-m}}},svgedit.math.transformListToTransform=function(a,c,d){if(null==a)return b.createSVGTransformFromMatrix(b.createSVGMatrix());if(c=c||0,d=d||a.numberOfItems-1,c=parseInt(c,10),d=parseInt(d,10),c>d){var e=d;d=c,c=e}var f,g=b.createSVGMatrix();for(f=c;d>=f;++f){var h=f>=0&&f<a.numberOfItems?a.getItem(f).matrix:b.createSVGMatrix();g=svgedit.math.matrixMultiply(g,h)}return b.createSVGTransformFromMatrix(g)},svgedit.math.getMatrix=function(a){var b=svgedit.transformlist.getTransformList(a);return svgedit.math.transformListToTransform(b).matrix},svgedit.math.snapToAngle=function(a,b,c,d){var e=Math.PI/4,f=c-a,g=d-b,h=Math.atan2(g,f),i=Math.sqrt(f*f+g*g),j=Math.round(h/e)*e;return{x:a+i*Math.cos(j),y:b+i*Math.sin(j),a:j}},svgedit.math.rectsIntersect=function(a,b){return b.x<a.x+a.width&&b.x+b.width>a.x&&b.y<a.y+a.height&&b.y+b.height>a.y}}();