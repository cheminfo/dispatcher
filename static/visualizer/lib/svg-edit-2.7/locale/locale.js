var svgEditor=function(a,b){function c(b,c,d){var e,f,g,h,i,j,k=a("#svg_editor").parent();for(f in c)if(g=c[f],g||console.log(f),d&&(f="#"+f),h=k.find(f),h.length)switch(i=k.find(f)[0],b){case"content":for(e=0;e<i.childNodes.length;e++)if(j=i.childNodes[e],3===j.nodeType&&j.textContent.replace(/\s/g,"")){j.textContent=g;break}break;case"title":i.title=g}else console.log("Missing: "+f)}var d;return b.readLang=function(e){var f=b.canvas.runExtensions("addlangData",d,!0);if(a.each(f,function(b,c){c.data&&(e=a.merge(e,c.data))}),e.tools){var g=e.tools,h=(e.misc,e.properties),i=e.config,j=e.layers,k=e.common,l=e.ui;c("content",{curve_segments:h.curve_segments,fitToContent:g.fitToContent,fit_to_all:g.fit_to_all,fit_to_canvas:g.fit_to_canvas,fit_to_layer_content:g.fit_to_layer_content,fit_to_sel:g.fit_to_sel,icon_large:i.icon_large,icon_medium:i.icon_medium,icon_small:i.icon_small,icon_xlarge:i.icon_xlarge,image_opt_embed:i.image_opt_embed,image_opt_ref:i.image_opt_ref,includedImages:i.included_images,largest_object:g.largest_object,layersLabel:j.layers,page:g.page,relativeToLabel:g.relativeTo,selLayerLabel:j.move_elems_to,selectedPredefined:i.select_predefined,selected_objects:g.selected_objects,smallest_object:g.smallest_object,straight_segments:h.straight_segments,svginfo_bg_url:i.editor_img_url+":",svginfo_bg_note:i.editor_bg_note,svginfo_change_background:i.background,svginfo_dim:i.doc_dims,svginfo_editor_prefs:i.editor_prefs,svginfo_height:k.height,svginfo_icons:i.icon_size,svginfo_image_props:i.image_props,svginfo_lang:i.language,svginfo_title:i.doc_title,svginfo_width:k.width,tool_docprops_cancel:k.cancel,tool_docprops_save:k.ok,tool_source_cancel:k.cancel,tool_source_save:k.ok,tool_prefs_cancel:k.cancel,tool_prefs_save:k.ok,sidepanel_handle:j.layers.split("").join(" "),tool_clear:g.new_doc,tool_docprops:g.docprops,tool_export:g.export_img,tool_import:g.import_doc,tool_imagelib:g.imagelib,tool_open:g.open_doc,tool_save:g.save_doc,svginfo_units_rulers:i.units_and_rulers,svginfo_rulers_onoff:i.show_rulers,svginfo_unit:i.base_unit,svginfo_grid_settings:i.grid,svginfo_snap_onoff:i.snapping_onoff,svginfo_snap_step:i.snapping_stepsize,svginfo_grid_color:i.grid_color},!0);var m,n={};for(m in e.shape_cats)n['#shape_cats [data-cat="'+m+'"]']=e.shape_cats[m];setTimeout(function(){c("content",n)},2e3);var o={};a.each(["cut","copy","paste","paste_in_place","delete","group","ungroup","move_front","move_up","move_down","move_back"],function(){o['#cmenu_canvas a[href="#'+this+'"]']=g[this]}),a.each(["dupe","merge_down","merge_all"],function(){o['#cmenu_layers a[href="#'+this+'"]']=j[this]}),o['#cmenu_layers a[href="#delete"]']=j.del,c("content",o),c("title",{align_relative_to:g.align_relative_to,circle_cx:h.circle_cx,circle_cy:h.circle_cy,circle_r:h.circle_r,cornerRadiusLabel:h.corner_radius,ellipse_cx:h.ellipse_cx,ellipse_cy:h.ellipse_cy,ellipse_rx:h.ellipse_rx,ellipse_ry:h.ellipse_ry,fill_color:h.fill_color,font_family:h.font_family,idLabel:h.id,image_height:h.image_height,image_url:h.image_url,image_width:h.image_width,layer_delete:j.del,layer_down:j.move_down,layer_new:j["new"],layer_rename:j.rename,layer_moreopts:k.more_opts,layer_up:j.move_up,line_x1:h.line_x1,line_x2:h.line_x2,line_y1:h.line_y1,line_y2:h.line_y2,linecap_butt:h.linecap_butt,linecap_round:h.linecap_round,linecap_square:h.linecap_square,linejoin_bevel:h.linejoin_bevel,linejoin_miter:h.linejoin_miter,linejoin_round:h.linejoin_round,main_icon:g.main_menu,mode_connect:g.mode_connect,tools_shapelib_show:g.mode_shapelib,palette:l.palette_info,zoom_panel:l.zoom_level,path_node_x:h.node_x,path_node_y:h.node_y,rect_height_tool:h.rect_height,rect_width_tool:h.rect_width,seg_type:h.seg_type,selLayerNames:j.move_selected,selected_x:h.pos_x,selected_y:h.pos_y,stroke_color:h.stroke_color,stroke_style:h.stroke_style,stroke_width:h.stroke_width,svginfo_title:i.doc_title,text:h.text_contents,toggle_stroke_tools:l.toggle_stroke_tools,tool_add_subpath:g.add_subpath,tool_alignbottom:g.align_bottom,tool_aligncenter:g.align_center,tool_alignleft:g.align_left,tool_alignmiddle:g.align_middle,tool_alignright:g.align_right,tool_aligntop:g.align_top,tool_angle:h.angle,tool_blur:h.blur,tool_bold:h.bold,tool_circle:g.mode_circle,tool_clone:g.clone,tool_clone_multi:g.clone,tool_delete:g.del,tool_delete_multi:g.del,tool_ellipse:g.mode_ellipse,tool_eyedropper:g.mode_eyedropper,tool_fhellipse:g.mode_fhellipse,tool_fhpath:g.mode_fhpath,tool_fhrect:g.mode_fhrect,tool_font_size:h.font_size,tool_group_elements:g.group_elements,tool_make_link:g.make_link,tool_link_url:g.set_link_url,tool_image:g.mode_image,tool_italic:h.italic,tool_line:g.mode_line,tool_move_bottom:g.move_bottom,tool_move_top:g.move_top,tool_node_clone:g.node_clone,tool_node_delete:g.node_delete,tool_node_link:g.node_link,tool_opacity:h.opacity,tool_openclose_path:g.openclose_path,tool_path:g.mode_path,tool_position:g.align_to_page,tool_rect:g.mode_rect,tool_redo:g.redo,tool_reorient:g.reorient_path,tool_select:g.mode_select,tool_source:g.source_save,tool_square:g.mode_square,tool_text:g.mode_text,tool_topath:g.to_path,tool_undo:g.undo,tool_ungroup:g.ungroup,tool_wireframe:g.wireframe_mode,view_grid:g.toggle_grid,tool_zoom:g.mode_zoom,url_notice:g.no_embed},!0),b.setLang(d,e)}},b.putLocale=function(c,e){if(c)d=c;else{if(d=a.pref("lang"),!d&&(navigator.userLanguage?d=navigator.userLanguage:navigator.language&&(d=navigator.language),null==d))return;console.log("Lang: "+d),-1===a.inArray(d,e)&&"test"!==d&&(d="en")}var f=b.curConfig,g=f.langPath+"lang."+d+".js";a.getScript(g,function(a){if(!a){var b=document.createElement("script");b.src=g,document.querySelector("head").appendChild(b)}})},b}(jQuery,svgEditor);